(()=>{"use strict";var e,n,t,i,o,r,a,c,u,s,l,p,E,d=function(){function e(){this.events=[],this.events=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.on=function(e,n){this.events.push({action:e,callback:n})},e.prototype.handleInput=function(e,n){var t=this.events.find((function(n){return n.action===e}));t?t.callback(n):console.error("Unknown event: ",e)},e.prototype.output=function(e,n){postMessage({type:e,payload:n})},e}().getInstance(),g=function(){function e(){this.workDispatcher=d}return e.prototype.importData=function(e){},e.prototype.exportData=function(){return{}},e.prototype.dataToUI=function(){return{}},e.prototype.process=function(e){},e}();!function(e){e[e.POLYNOMIAL=0]="POLYNOMIAL",e[e.EXPONENTIAL=1]="EXPONENTIAL",e[e.LINEAR=2]="LINEAR"}(e||(e={})),function(e){e.CHARGE="charge",e.DRILL_ROCK="drillRock",e.DRILL_ORE="drillOre",e.COLLECT_BIOMASS="collectBiomass"}(n||(n={})),function(e){e.REPAIR_DRILL="repair-drill",e.REPAIR_CABLE="repair-cable",e.REPAIR_MANIPULATORS="repair-manipulators",e.REPAIR_MACHINERY="repair-machinery",e.AUTO_QUARRYING="autoquarrying",e.AUTO_MINERS="autominers",e.COMBUSTION="combustion",e.REPAIR_STORAGE_MODULE="storage-module",e.REPAIR_BATTERY="repair-battery",e.COMBUSTION_CAMERA="combuscion-camera",e.THERMAL_TECH="thermal-tech",e.MINE_TECH="mine-tech",e.QUARRY_TECH="quarry-tech",e.BIO_TECH="bio-tech",e.STORAGE_TECH="storage-tech",e.BACTERIA_SELECTION="bacteria-selection",e.THERMAL_TECH2="thermal-tech2",e.OXYGEN_CAMERAS="oxygen-cameras",e.RESERVE_BATTERIES="reserve-batteries",e.OXYGEN_COMPRESSORS="oxygen-compressors",e.WATER_PUMPING="water-pumping",e.ELECTROLITES="electrolites",e.SUPPLY_MODULE="supply-module",e.DOCKING_MODULE="docking-module",e.RESEARCH_MODULE="research-module",e.CARGO_SORTING="cargo-sorting",e.FARMING_TOOLS="farming-tools",e.DEEP_MINING="deep-mining",e.UNDERGROUND_VAULTS="underground-vaults",e.WATER_DRILLING="water-drill",e.FERTILIZING="fertilizing",e.FLORA="flora",e.FLAMMABILITY="flammability",e.CRANES="cranes",e.CARGO_CRANES="cargo-cranes",e.FORESTER_TOOLS="forester-tools",e.BROADLEAVED="broad-leaved",e.WOODEN_FURNITURE="furniture",e.IRON_TOOLS="iron-tools",e.IRON_PARTS="iron-parts",e.IRON_CONTAINERS="iron-containers",e.IMPROVED_WIRES="improved wires",e.REFRACTORY_MATERIALS="refractory-materials",e.METAL_WORKING="metal-working",e.CEMENT="cement",e.TREE_CARE="tree-care",e.NATURAL_ENVIRONMENT="natural-environment",e.FRUIT_TREES="fruit-trees",e.WATER_FILTERING="water-filtering",e.CHEMICAL_ANALYSIS="chemical-analysis",e.BETTER_ELECTROLITES="better-electrolites",e.HIGH_TEMPERATURE_ENGINE="high-temperature-engine",e.PLATINUM_MINING="platinum-mining",e.PLATINUM_DRILLS="platinum-drills",e.PLATINUM_TOOLS="platinum-tools",e.SOCIAL_RESEARCH_CENTER="social-research-center",e.COTTAGES="cottages",e.ENTERTAINMENT="entertainment",e.ADVANCED_METALLURGY="advanced_metallurgy",e.COMPOSITE_METALS="composite_metals",e.HEAT_INSULATING_CAMERAS="heat_insulating_cameras",e.GERMETISATION="germetisation",e.RUBBER_DETAILS="rubber_details",e.IMPROVED_WIRING="improved_wiring",e.ENERGY_SAVING="energy_saving",e.SURVEILLANCE_CAMERAS="surveillance_cameras",e.COMPUTERS="computers",e.INDUSTRY_AUTOMATION="idustrial_automation",e.BUILDING_PRINTING="building_printer",e.ORGANISM_PRINTING="organs_printing",e.MULTISTORE_WAREHOUSES="multistore_warehouses"}(t||(t={})),function(e){e.QUARRY="quarry",e.MINE="mine",e.BACTERIA_INCUBATOR="bacteria-incubator",e.THERMOELECTRIC_STATION="thermo-electric-station",e.STORAGE="storage-section",e.STORAGE_HUB="storage-hub",e.OXYGEN_COLLECTOR="oxygen-collector",e.WATER_PUMP="water-pump",e.WATER_STORAGE="water-storage",e.BATTERY="battery",e.LIVING_CABIN="living-cabin",e.METEO_STATION="meteo-station",e.MONUMENT="monument",e.CLINIC="clinic",e.PARK="park",e.BIO_LAB="bio-lab",e.FOREST_PLANT="forest-plant",e.SMELTER="smelter",e.WAREHOUSE="warehouse",e.TANK="tank",e.COTTAGE="cottage",e.CINEMA="cinema",e.SOCIAL_RESEARCH_CENTER="social_research_center",e.METALLURGY_COMPLEX="metallurgy_complex",e.BUILDING_FACTORY="building_factory",e.STORAGE_CONTAINER="storage_container",e.SOLAR_PANEL="solar-panel",e.SHRINE="shrine",e.DATA_CENTER="data-center",e.APARTMENT="apartment"}(i||(i={})),function(e){e.POWER="Power",e.INDUSTRIAL="Industrial",e.STORAGE="Storage",e.SCIENCE="Science",e.MILITARY="Military",e.PUBLIC="Public",e.RESIDENTAL="Residental"}(o||(o={})),function(e){e.STONE="stone",e.POWER="power",e.ORE="ore",e.BIOMASS="biomass",e.OXYGEN="oxygen",e.NUTRITION="nutrition",e.WATER="water",e.RESEARCH="research",e.WOOD="wood",e.IRON="iron",e.PLATINUM="platinum",e.BEAM="beam",e.BRICK="brick",e.PLATE="plate",e.WIRE="wire",e.FUEL="fuel",e.RUBBER="rubber",e.PLASTICS="plastics",e.SEMICONDUCTOR="semiconductor",e.COMPUTER="computer"}(r||(r={}));var f,A=[{id:n.CHARGE,name:"Charge",description:"Recover your energy power",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:{},getGain:(a={},a[r.POWER]=function(n){return{A:1+.6*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_CABLE),B:1,type:e.EXPONENTIAL}},a)},{id:n.DRILL_ROCK,name:"Drill rock",description:"Drill rock at cost of some energy",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:(c={},c[r.POWER]=function(n){return{A:1,B:1,type:e.EXPONENTIAL}},c),getGain:(u={},u[r.STONE]=function(n){return{A:.25+.125*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_DRILL),B:1,type:e.EXPONENTIAL}},u)},{id:n.DRILL_ORE,name:"Drill ore",description:"Drill ore at cost of some energy",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_DRILL)>3},availableCondition:function(e){return!0},getCost:(s={},s[r.POWER]=function(n){return{A:2,B:1,type:e.EXPONENTIAL}},s),getGain:(l={},l[r.ORE]=function(n){return{A:.2+.1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_DRILL),B:1,type:e.EXPONENTIAL}},l)},{id:n.COLLECT_BIOMASS,name:"Collect Biomass",description:"Dig and get some organics",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MANIPULATORS)>0},availableCondition:function(e){return!0},getCost:(p={},p[r.POWER]=function(n){return{A:4,B:1,type:e.EXPONENTIAL}},p),getGain:(E={},E[r.BIOMASS]=function(n){return{A:.2+.1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MANIPULATORS),B:1,type:e.EXPONENTIAL}},E)}];!function(e){e.EXOFARMING="exofarming",e.METEOROLOGY="meteorology",e.MINERALOGY="mineralogy",e.CIVIL_SERVICE="civilservice",e.ENGINEERING="engineering",e.EXOBIOLOGY="exobiology",e.METALLURGY="metallurgy",e.EXOFORESTRY="exo-forestry",e.FLORA_RESEARCH="flora-research",e.CHEMISTRY="chemistry",e.SOCIOLOGY="sociology",e.GEOLOGY="geology",e.MATERIAL_KNOWLEDGE="material_knowledge",e.ORGANIC_CHEMISTRY="organic_chemistry",e.CODEX_OF_LAW="codex_of_law",e.ELECTRICITY_STUDY="electricity_study",e.ELECTRONICS="electronics",e.PUBLIC_SERVICE="public_service",e.PRINTING_3D="printing_3d",e.GENETICS="genetics",e.HIGH_GRAVITY_PHYSICS="high_gravity_physics"}(f||(f={}));var R,I,m=[{id:r.POWER,name:"Power",unlockCondition:function(e){return!0},hasCapacityLimit:!0},{id:r.WATER,name:"Water",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.WATER_PUMPING)>0},hasCapacityLimit:!0},{id:r.NUTRITION,name:"Nutrition",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.SUPPLY_MODULE)>0},hasCapacityLimit:!0},{id:r.OXYGEN,name:"Oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BACTERIA_SELECTION)>0},hasCapacityLimit:!0},{id:r.WOOD,name:"Wood",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},hasCapacityLimit:!0},{id:r.STONE,name:"Stone",unlockCondition:function(e){return!0},hasCapacityLimit:!0},{id:r.ORE,name:"Ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_DRILL)>3},hasCapacityLimit:!0},{id:r.IRON,name:"Metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},hasCapacityLimit:!0},{id:r.PLATINUM,name:"Platinum",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.GEOLOGY)>0},hasCapacityLimit:!0},{id:r.BIOMASS,name:"Biomass",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MANIPULATORS)>0},hasCapacityLimit:!0},{id:r.RESEARCH,name:"Research",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.RESEARCH_MODULE)>0},hasCapacityLimit:!0},{id:r.BEAM,name:"Beam",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.BRICK,name:"Brick",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.PLATE,name:"Plate",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.FUEL,name:"Fuel",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.RUBBER,name:"Rubber",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.PLASTICS,name:"Plastics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.WIRE,name:"Wire",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MATERIAL_KNOWLEDGE)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.SEMICONDUCTOR,name:"Semiconduct.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ELECTRICITY_STUDY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:r.COMPUTER,name:"Computer.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.COMPUTERS)>0},hasCapacityLimit:!1,isCraftable:!0}];!function(e){e.QUARRYMAN="quarryman",e.MINER="miner",e.SCIENTIST="scientist",e.FARMER="farmer",e.FORESTER="forester",e.ARTISAN="artisan",e.POLICEMAN="policeman"}(R||(R={})),function(e){e.AESTHETICS="AESTHETICS",e.ENTERTAINMENT="ENTERTAINMENT",e.SECURITY="SECURITY",e.HEALTHCARE="HEALTHCARE",e.RELIGION="RELIGION",e.WORK_CONDITIONS="WORK_CONDITIONS"}(I||(I={}));var O=[{id:I.ENTERTAINMENT,name:"Entertainment",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max(2*(e.colony.colonists-10),0)}},{id:I.HEALTHCARE,name:"Healthcare",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max(2*(e.colony.colonists-10),0)}},{id:I.AESTHETICS,name:"Aesthetics",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>0},getConsumption:function(e){return Math.max(2*e.colony.colonists,0)}},{id:I.SECURITY,name:"Security",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40),0)}},{id:I.RELIGION,name:"Religion",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40),0)}}],N=function(e){var n,t;return(null===(n=m.find((function(n){return n.id===e})))||void 0===n?void 0:n.name)||(null===(t=O.find((function(n){return n.id===e})))||void 0===t?void 0:t.name)||e},y=function(){function n(){}return n.calculate=function(e,t,i,o){void 0===o&&(o=1);var r=t(e);return n.calculateFormulaBatch(r,i,o)},n.calculateFormula=function(t,i){switch(t.type){case e.EXPONENTIAL:return n.calculateExponential(t,i);case e.POLYNOMIAL:return n.calculatePolynomial(t,i);case e.LINEAR:return n.calculateLinear(t,i);default:return 0}},n.calculateExponential=function(e,n){return e.A*Math.pow(e.B,n)},n.calculatePolynomial=function(e,n){return e.A*Math.pow(n,e.B)},n.calculateLinear=function(e,n){return e.A*n},n.calculateFormulaBatch=function(t,i,o){switch(t.type){case e.EXPONENTIAL:return n.calculateExponentialBatch(t,i,o);case e.POLYNOMIAL:return n.calculatePolynomialBatch(t,i,o);case e.LINEAR:return n.calculateLinearBatch(t,i,o);default:return 0}},n.calculateExponentialBatch=function(e,n,t){return 1===e.B?e.A*t:e.A*Math.pow(e.B,n)*(Math.pow(e.B,t)-1)/(e.B-1)},n.calculatePolynomialBatch=function(e,n,t){return console.error("Polynomial batch is not implemented"),0},n.calculateLinearBatch=function(e,n,t){return e.A*t},n.calculateDX=function(e,t,i,o){var r=t(e);return n.calculateDXByFormula(r,i,o)},n.calculateDXByFormula=function(t,i,o){switch(t.type){case e.EXPONENTIAL:return n.calculateDXExponential(t,i,o);case e.POLYNOMIAL:return n.calculateDXPolynomial(t,i,o);case e.LINEAR:return n.calculateDXLinear(t,i,o);default:return 0}},n.calculateDXExponential=function(e,n,t){return 0===e.A?1e300:1===e.B?t/e.A:t?Math.log(t*(e.B-1)/(e.A*Math.pow(e.B,n))+1)/Math.log(e.B):0},n.calculateDXPolynomial=function(e,n,t){return console.error("Polynomial dX is not implemented"),0},n.calculateDXLinear=function(e,n,t){return t/e.A},n.calcBatch=function(e,t,i,o){void 0===o&&(o=1);var r=[];return Object.entries(e).forEach((function(e){var a=e[0],c=e[1];r.push({id:a,name:N(a),amount:n.calculate(t,c,i,o)})})),r},n.calcDXBatch=function(e,t,i,o){var r={};return Object.entries(e).forEach((function(e){var a=e[0],c=e[1];r[a]=n.calculateDX(t,c,i,o[a])})),r},n.calcBatchAll=function(e,t,i,o,r){void 0===r&&(r=1);var a=[];return Object.entries(e).forEach((function(e){var c=e[0],u=e[1],s=n.calculateDX(t,u,i,o[c]),l=n.calculate(t,u,i,r),p=0;if(s<1){var E=t.resources.getResourceCap(c);p=E&&E<l||t.resources.getResourceBalance(c)<0&&l-(o[c]||0)>0?1e300:(l-(o[c]||0))/(t.resources.getResourceBalance(c)||1e-300)}a.push({id:c,name:N(c),amount:l,max:s,eta:p})})),a},n.getValue=function(e,n){var t=[];return Object.entries(e).forEach((function(e){var i=e[0],o=e[1];t.push({id:i,name:N(i),amount:o(n)})})),t},n}();function L(e){if(e>1e12)return"Never";if(!e||e<0)return"00:00:00";e=Number(e);var n=Math.floor(e/3600),t=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(n>9?"".concat(n,":"):"0".concat(n,":"))+(t>9?"".concat(t,":"):"0".concat(t,":"))+(i>9?"".concat(i):"0".concat(i))}function h(e,n,t){if(void 0===n&&(n=3),void 0===t&&(t=12),Math.abs(e)>Math.pow(10,t))return e.toExponential(n);if(Math.abs(e)<1e-4)return"0.00";if(Math.abs(e)<1)return e.toFixed(n);var i=Math.abs(e),o=Math.log10(i),r=Math.floor(o/3),a=i/Math.pow(10,3*r),c="";switch(r){case 1:c="K";break;case 1:c="M";break;case 1:c="B";break;case 1:c="T";break;default:c=""}return"".concat((Math.sign(e)*a).toPrecision(n)).concat(c)}var T,C,v,B,S,P,U,M,G,_,b,X,w,D,x,k,Z,W,H,Y,j,F,V,K,q,J,Q,z,$,ee,ne,te,ie,oe,re,ae,ce,ue,se,le,pe,Ee,de,ge,fe,Ae,Re,Ie,me,Oe,Ne,ye,Le,he,Te,Ce,ve,Be,Se,Pe,Ue,Me,Ge,_e,be,Xe,we,De,xe,ke,Ze,We,He,Ye,je,Fe,Ve,Ke,qe,Je,Qe,ze,$e,en,nn,tn,on,rn,an,cn,un,sn,ln,pn,En,dn,gn,fn,An,Rn,In,mn,On,Nn,yn,Ln,hn,Tn,Cn,vn,Bn,Sn,Pn,Un,Mn,Gn,_n,bn,Xn,wn,Dn,xn,kn,Zn,Wn,Hn,Yn,jn,Fn,Vn,Kn,qn,Jn,Qn,zn,$n,et,nt,tt,it,ot,rt,at,ct,ut,st,lt,pt,Et,dt,gt,ft,At,Rt,It,mt,Ot,Nt,yt,Lt,ht,Tt,Ct,vt,Bt,St,Pt,Ut,Mt,Gt,_t,bt,Xt,wt,Dt,xt,kt,Zt,Wt,Ht,Yt,jt,Ft,Vt=(T=function(e,n){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},T(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}T(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),Kt=function(){return Kt=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Kt.apply(this,arguments)},qt=function(e){function n(){var n=e.call(this)||this;return n.actions=[],n.workDispatcher.on("[landing-zone] do action",(function(e){console.log("do action",e),n.doAction(e.id)})),n}return Vt(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.actions=e},n.prototype.exportData=function(){return this.actions},n.prototype.dataToUI=function(){var e=this;return{list:A.map((function(n){return e.processToUI(n)}))}},n.prototype.processToUI=function(e){var n=this.actions.find((function(n){return n.id===e.id}));n||(n={id:e.id,cooldown:0,progress:0,performed:0},this.actions.push(n));var t=y.calcBatchAll(e.getCost,er.getInstance(),0,er.getInstance().resources.getBatchObject()),i=y.calcBatch(e.getGain,er.getInstance(),0),o=t.reduce((function(e,n){return Math.min(e,Math.floor(n.max))}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(nr),isAvailable:e.availableCondition(nr)&&o>=1,cost:er.getInstance().resources.assertEnought(t,er.getInstance().resources.getBatchObject(),er.getInstance().resources.getBatchBalanceObject()),gain:i.map((function(e){return Kt(Kt({},e),{amount:h(e.amount)})})),progress:(n.cooldown?100*n.progress/n.cooldown:0).toPrecision(3)}},n.prototype.doAction=function(e){var n=A.find((function(n){return n.id===e}));if(n){var t=this.actions.findIndex((function(n){return n.id===e}));if(t<0)t=this.actions.length,this.actions.push({id:e,cooldown:0,progress:0,performed:0});else if(this.actions[t].cooldown>0)return;var i=y.calcBatchAll(n.getCost,er.getInstance(),0,er.getInstance().resources.getBatchObject());i.reduce((function(e,n){return Math.min(e,Math.floor(n.max))}),1e300)<1||(this.actions[t].cooldown=1.5,this.actions[t].performed++,console.log("costs: ",i),er.getInstance().resources.subtractResourceBatch(i),nr.resources.reassertBalances())}},n.prototype.getActionPerformed=function(e){var n;return(null===(n=this.actions.find((function(n){return n.id===e})))||void 0===n?void 0:n.performed)||0},n.prototype.process=function(e){this.actions.forEach((function(n,t){if(n.cooldown&&(n.progress+=e,n.progress>=n.cooldown)){n.cooldown=0,n.progress=0;var i=A.find((function(e){return n.id===e.id}));if(!i)return;var o=y.calcBatch(i.getGain,er.getInstance(),0);console.log("gain: ",o,nr.resources.resourcesStatus),o.forEach((function(e){nr.resources.addResource(e.id,e.amount)})),nr.resources.reassertBalances()}}))},n}(g),Jt=qt.getInstance(),Qt=[{id:t.REPAIR_DRILL,name:"Repair Drill",description:"Allows drilling harder materials. Also improve stone output by 0.05",unlockCondition:function(e){return!0},getCost:(C={},C[r.POWER]=function(n){return{A:2,B:1.3,type:e.EXPONENTIAL}},C[r.STONE]=function(n){return{A:.5,B:1.3,type:e.EXPONENTIAL}},C),maxLevel:8},{id:t.REPAIR_CABLE,name:"Repair Charging Cable",description:"Improves Charge Output by 0.4",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(n.DRILL_ORE)>0},getCost:(v={},v[r.POWER]=function(n){return{A:3,B:1.3,type:e.EXPONENTIAL}},v[r.ORE]=function(n){return{A:1,B:1.3,type:e.EXPONENTIAL}},v),maxLevel:5},{id:t.REPAIR_MANIPULATORS,name:"Repair Manipulators",description:"Allows digging and picking more materials",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(n.DRILL_ORE)>0},getCost:(B={},B[r.POWER]=function(n){return{A:5,B:1.3,type:e.EXPONENTIAL}},B[r.ORE]=function(n){return{A:2,B:1.3,type:e.EXPONENTIAL}},B),maxLevel:5},{id:t.AUTO_QUARRYING,name:"Auto-quarrying",description:"Allows building quarry",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(n.DRILL_ORE)>0},getCost:(S={},S[r.POWER]=function(n){return{A:8,B:1.3,type:e.EXPONENTIAL}},S[r.ORE]=function(n){return{A:4,B:1.3,type:e.EXPONENTIAL}},S),maxLevel:1},{id:t.REPAIR_MACHINERY,name:"Repair machinery",description:"Repair machinery. Improves your automatic quarries and mines by 50%",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.AUTO_QUARRYING)>0},getCost:(P={},P[r.POWER]=function(n){return{A:8,B:1.5,type:e.EXPONENTIAL}},P[r.ORE]=function(n){return{A:5,B:1.5,type:e.EXPONENTIAL}},P),maxLevel:4},{id:t.AUTO_MINERS,name:"Auto-miners",description:"Allows building mine",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MACHINERY)>0},getCost:(U={},U[r.POWER]=function(n){return{A:8,B:1.3,type:e.EXPONENTIAL}},U[r.ORE]=function(n){return{A:4,B:1.3,type:e.EXPONENTIAL}},U),maxLevel:1},{id:t.COMBUSTION,name:"Combustion",description:"Allows creating electricity power by burning biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(n.COLLECT_BIOMASS)>0},getCost:(M={},M[r.POWER]=function(n){return{A:12,B:1.3,type:e.EXPONENTIAL}},M[r.BIOMASS]=function(n){return{A:6,B:1.3,type:e.EXPONENTIAL}},M),maxLevel:1},{id:t.REPAIR_STORAGE_MODULE,name:"Repair storage module",description:"Repair storage module. Allows building storage sections",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MANIPULATORS)>2},getCost:(G={},G[r.POWER]=function(n){return{A:8,B:1.5,type:e.EXPONENTIAL}},G[r.ORE]=function(n){return{A:5,B:1.5,type:e.EXPONENTIAL}},G),maxLevel:1},{id:t.REPAIR_BATTERY,name:"Repair battery",description:"Improves energy storage by 20",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MANIPULATORS)>4&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_STORAGE_MODULE)>0},getCost:(_={},_[r.POWER]=function(n){return{A:15,B:1.5,type:e.EXPONENTIAL}},_[r.ORE]=function(n){return{A:15,B:1.5,type:e.EXPONENTIAL}},_),getCapacityEffect:(b={},b[r.POWER]=function(n){return{A:20,B:1,type:e.LINEAR}},b),maxLevel:3},{id:t.COMBUSTION_CAMERA,name:"Combustion cameras",description:"Decrease biomass consumption by thermoelectric power plants by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_STORAGE_MODULE)>0},getCost:(X={},X[r.POWER]=function(n){return{A:12,B:1.5,type:e.EXPONENTIAL}},X[r.STONE]=function(n){return{A:18,B:1.5,type:e.EXPONENTIAL}},X),maxLevel:1},{id:t.QUARRY_TECH,name:"Quarry technology",description:"Increase quarries output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.QUARRY)>4},getCost:(w={},w[r.STONE]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},w[r.ORE]=function(n){return{A:12,B:1.5,type:e.EXPONENTIAL}},w),maxLevel:1},{id:t.MINE_TECH,name:"Mine technology",description:"Increase mine output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.MINE)>4},getCost:(D={},D[r.ORE]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},D[r.POWER]=function(n){return{A:12,B:1.5,type:e.EXPONENTIAL}},D),maxLevel:1},{id:t.THERMAL_TECH,name:"Combustion technology",description:"Increase thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>4},getCost:(x={},x[r.POWER]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},x[r.BIOMASS]=function(n){return{A:12,B:1.5,type:e.EXPONENTIAL}},x),maxLevel:1},{id:t.BIO_TECH,name:"Bio technology",description:"Increase incubators output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.BACTERIA_INCUBATOR)>4},getCost:(k={},k[r.BIOMASS]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},k[r.STONE]=function(n){return{A:12,B:1.5,type:e.EXPONENTIAL}},k),maxLevel:1},{id:t.STORAGE_TECH,name:"Storage technology",description:"Increase stone, ore and biomass storage from storage section and hub by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>4},getCost:(Z={},Z[r.STONE]=function(n){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z[r.ORE]=function(n){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z),getCapacityMultiplier:(W={},W[r.STONE]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},W[r.ORE]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},W[r.BIOMASS]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},W),maxLevel:1},{id:t.BACTERIA_SELECTION,name:"Bacteria selection",description:"Increase electricity consumption by incubators, but incubators start producing oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BIO_TECH)>0},getCost:(H={},H[r.POWER]=function(n){return{A:80,B:1.5,type:e.EXPONENTIAL}},H[r.BIOMASS]=function(n){return{A:90,B:1.5,type:e.EXPONENTIAL}},H),maxLevel:1},{id:t.THERMAL_TECH2,name:"Improved thermal plants",description:"Increase thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>9},getCost:(Y={},Y[r.POWER]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},Y[r.BIOMASS]=function(n){return{A:12,B:1.5,type:e.EXPONENTIAL}},Y),maxLevel:1},{id:t.OXYGEN_CAMERAS,name:"Oxidase burning cameras",description:"Thermal plants are 50% more efficient, but now consume oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BACTERIA_SELECTION)>0},getCost:(j={},j[r.POWER]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},j[r.OXYGEN]=function(n){return{A:8,B:1.5,type:e.EXPONENTIAL}},j),maxLevel:1},{id:t.OXYGEN_COMPRESSORS,name:"Oxygen compressors",description:"Allow building oxygen compressors to store more oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BACTERIA_SELECTION)>0},getCost:(F={},F[r.POWER]=function(n){return{A:65,B:1.5,type:e.EXPONENTIAL}},F[r.ORE]=function(n){return{A:165,B:1.5,type:e.EXPONENTIAL}},F[r.OXYGEN]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},F),maxLevel:1},{id:t.RESERVE_BATTERIES,name:"Reserve batteries",description:"Thermoelectric plants now also provide small power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.OXYGEN_CAMERAS)>0},getCost:(V={},V[r.POWER]=function(n){return{A:75,B:1.5,type:e.EXPONENTIAL}},V[r.OXYGEN]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},V[r.ORE]=function(n){return{A:125,B:1.5,type:e.EXPONENTIAL}},V),maxLevel:1},{id:t.WATER_PUMPING,name:"Water pumping",description:"Allow building water pumping stations",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.OXYGEN_CAMERAS)>0},getCost:(K={},K[r.POWER]=function(n){return{A:75,B:1.5,type:e.EXPONENTIAL}},K[r.STONE]=function(n){return{A:165,B:1.5,type:e.EXPONENTIAL}},K[r.ORE]=function(n){return{A:175,B:1.5,type:e.EXPONENTIAL}},K),maxLevel:1},{id:t.ELECTROLITES,name:"Electrolytes",description:"Allows building battery. Also, improves power output by 20%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0},getCost:(q={},q[r.POWER]=function(n){return{A:125,B:1.5,type:e.EXPONENTIAL}},q[r.WATER]=function(n){return{A:25,B:1.5,type:e.EXPONENTIAL}},q[r.ORE]=function(n){return{A:225,B:1.5,type:e.EXPONENTIAL}},q),getGain:{},getGainMultiplier:(J={},J[r.POWER]=function(n){return{A:1,B:1.2,type:e.EXPONENTIAL}},J),getCapacityEffect:(Q={},Q[r.NUTRITION]=function(n){return{A:40,B:1.5,type:e.LINEAR}},Q),maxLevel:1},{id:t.SUPPLY_MODULE,name:"Repair supply module",description:"Start generating trace amount of nutrition",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ELECTROLITES)>0},getCost:(z={},z[r.POWER]=function(n){return{A:275,B:1.5,type:e.EXPONENTIAL}},z[r.WATER]=function(n){return{A:40,B:1.5,type:e.EXPONENTIAL}},z[r.ORE]=function(n){return{A:275,B:1.5,type:e.EXPONENTIAL}},z),getGain:($={},$[r.NUTRITION]=function(n){return{A:.2,B:1.5,type:e.LINEAR}},$),getCapacityEffect:(ee={},ee[r.NUTRITION]=function(n){return{A:40,B:1.5,type:e.LINEAR}},ee),maxLevel:1},{id:t.DOCKING_MODULE,name:"Repair docking module",description:"Enables colonists arrival",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.SUPPLY_MODULE)>0},getCost:(ne={},ne[r.POWER]=function(n){return{A:275,B:1.5,type:e.EXPONENTIAL}},ne[r.WATER]=function(n){return{A:40,B:1.5,type:e.EXPONENTIAL}},ne[r.ORE]=function(n){return{A:360,B:1.5,type:e.EXPONENTIAL}},ne),getGain:{},getCapacityEffect:{},maxLevel:1},{id:t.RESEARCH_MODULE,name:"Repair research module",description:"Repair research module to enable researchers working at it and produce some science.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.DOCKING_MODULE)>0},getCost:(te={},te[r.POWER]=function(n){return{A:275,B:1.5,type:e.EXPONENTIAL}},te[r.WATER]=function(n){return{A:40,B:1.5,type:e.EXPONENTIAL}},te[r.OXYGEN]=function(n){return{A:40,B:1.5,type:e.EXPONENTIAL}},te),getGain:{},getCapacityEffect:(ie={},ie[r.RESEARCH]=function(n){return{A:100,B:1,type:e.LINEAR}},ie),maxLevel:1},{id:t.CARGO_SORTING,name:"Cargo Sorting",description:"Repair sorting machinery. Gives 75% bonus to stone, ore and biomass storage.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.DOCKING_MODULE)>0},getCost:(oe={},oe[r.POWER]=function(n){return{A:275,B:1.5,type:e.EXPONENTIAL}},oe[r.STONE]=function(n){return{A:340,B:1.5,type:e.EXPONENTIAL}},oe[r.ORE]=function(n){return{A:340,B:1.5,type:e.EXPONENTIAL}},oe),getGain:{},getCapacityMultiplier:(re={},re[r.STONE]=function(n){return{A:1,B:1.75,type:e.EXPONENTIAL}},re[r.ORE]=function(n){return{A:1,B:1.75,type:e.EXPONENTIAL}},re[r.BIOMASS]=function(n){return{A:1,B:1.75,type:e.LINEAR}},re),maxLevel:1},{id:t.FARMING_TOOLS,name:"Farming tools",description:"Improves farming output by 10%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFARMING)>0},getCost:(ae={},ae[r.POWER]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},ae[r.RESEARCH]=function(n){return{A:35,B:1.5,type:e.EXPONENTIAL}},ae[r.ORE]=function(n){return{A:400,B:1.5,type:e.EXPONENTIAL}},ae),getGain:{},getGainMultiplier:(ce={},ce[r.NUTRITION]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},ce),maxLevel:3},{id:t.DEEP_MINING,name:"Deep mining",description:"Improves stone and ore output by 20%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MINERALOGY)>0},getCost:(ue={},ue[r.POWER]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},ue[r.RESEARCH]=function(n){return{A:45,B:1.5,type:e.EXPONENTIAL}},ue[r.ORE]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},ue),getGain:{},getGainMultiplier:(se={},se[r.ORE]=function(n){return{A:1,B:1.2,type:e.EXPONENTIAL}},se[r.STONE]=function(n){return{A:1,B:1.2,type:e.EXPONENTIAL}},se),maxLevel:3},{id:t.UNDERGROUND_VAULTS,name:"Underground vaults",description:"Improves your stone, ore and biomass storage facilities by 50%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MINERALOGY)>0},getCost:(le={},le[r.POWER]=function(n){return{A:250,B:1.75,type:e.EXPONENTIAL}},le[r.RESEARCH]=function(n){return{A:25,B:1.75,type:e.EXPONENTIAL}},le[r.ORE]=function(n){return{A:550,B:1.75,type:e.EXPONENTIAL}},le),getGain:{},getCapacityMultiplier:(pe={},pe[r.STONE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},pe[r.ORE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},pe[r.BIOMASS]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},pe[r.WOOD]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},pe[r.IRON]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},pe[r.PLATINUM]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},pe),maxLevel:3},{id:t.CARGO_CRANES,name:"Cargo cranes",description:"Improves your storage facilities by 25%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ENGINEERING)>0},getCost:(Ee={},Ee[r.POWER]=function(n){return{A:250,B:1.75,type:e.EXPONENTIAL}},Ee[r.RESEARCH]=function(n){return{A:35,B:1.75,type:e.EXPONENTIAL}},Ee[r.ORE]=function(n){return{A:550,B:1.75,type:e.EXPONENTIAL}},Ee),getGain:{},getCapacityMultiplier:(de={},de[r.STONE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},de[r.ORE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},de),maxLevel:1},{id:t.CRANES,name:"Building cranes",description:"Decrease building level prices scaling by 10%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ENGINEERING)>0},getCost:(ge={},ge[r.POWER]=function(n){return{A:350,B:1.75,type:e.EXPONENTIAL}},ge[r.RESEARCH]=function(n){return{A:35,B:1.75,type:e.EXPONENTIAL}},ge[r.ORE]=function(n){return{A:550,B:1.75,type:e.EXPONENTIAL}},ge),getGain:{},getCapacityMultiplier:{},maxLevel:1},{id:t.WATER_DRILLING,name:"Water deposits",description:"Improves water output by 20%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MINERALOGY)>0},getCost:(fe={},fe[r.POWER]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},fe[r.RESEARCH]=function(n){return{A:45,B:1.5,type:e.EXPONENTIAL}},fe[r.ORE]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},fe),getGain:{},getGainMultiplier:(Ae={},Ae[r.WATER]=function(n){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ae),maxLevel:3},{id:t.FLAMMABILITY,name:"Flammable Biomass",description:"Special flammable biomass produces more heat, increasing power generation.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOBIOLOGY)>0},getCost:(Re={},Re[r.POWER]=function(n){return{A:370,B:1.5,type:e.EXPONENTIAL}},Re[r.RESEARCH]=function(n){return{A:95,B:1.5,type:e.EXPONENTIAL}},Re[r.BIOMASS]=function(n){return{A:325,B:1.5,type:e.EXPONENTIAL}},Re),getGain:{},getGainMultiplier:{},maxLevel:1},{id:t.FLORA,name:"Nutritious Flora",description:"Place some special flora to your incubators to make them 50% more productive.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOBIOLOGY)>0},getCost:(Ie={},Ie[r.POWER]=function(n){return{A:600,B:1.5,type:e.EXPONENTIAL}},Ie[r.RESEARCH]=function(n){return{A:195,B:1.5,type:e.EXPONENTIAL}},Ie[r.BIOMASS]=function(n){return{A:525,B:1.5,type:e.EXPONENTIAL}},Ie),getGain:{},getGainMultiplier:{},maxLevel:1},{id:t.FERTILIZING,name:"Fertilizing",description:"Your farmers start consume biomass, but increase nutrition output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOBIOLOGY)>0},getCost:(me={},me[r.POWER]=function(n){return{A:800,B:1.5,type:e.EXPONENTIAL}},me[r.RESEARCH]=function(n){return{A:245,B:1.5,type:e.EXPONENTIAL}},me[r.BIOMASS]=function(n){return{A:1225,B:1.5,type:e.EXPONENTIAL}},me),getGain:{},getGainMultiplier:{},maxLevel:1},{id:t.FORESTER_TOOLS,name:"Forester tools",description:"Increases wood output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},getCost:(Oe={},Oe[r.POWER]=function(n){return{A:800,B:1.5,type:e.EXPONENTIAL}},Oe[r.RESEARCH]=function(n){return{A:200,B:1.5,type:e.EXPONENTIAL}},Oe[r.WOOD]=function(n){return{A:30,B:1.5,type:e.EXPONENTIAL}},Oe),getGain:{},getGainMultiplier:(Ne={},Ne[r.WOOD]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},Ne),maxLevel:1},{id:t.BROADLEAVED,name:"Broadleaved forests",description:"Allows planting forests generating oxygen.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},getCost:(ye={},ye[r.POWER]=function(n){return{A:880,B:1.5,type:e.EXPONENTIAL}},ye[r.RESEARCH]=function(n){return{A:250,B:1.5,type:e.EXPONENTIAL}},ye[r.WOOD]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},ye),getGain:{},getGainMultiplier:{},maxLevel:1},{id:t.WOODEN_FURNITURE,name:"Wooden furniture",description:"Using wood in your living cabins allows them now contain one more colonist.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},getCost:(Le={},Le[r.POWER]=function(n){return{A:500,B:1.5,type:e.EXPONENTIAL}},Le[r.RESEARCH]=function(n){return{A:250,B:1.5,type:e.EXPONENTIAL}},Le[r.WOOD]=function(n){return{A:250,B:1.5,type:e.EXPONENTIAL}},Le),getGain:{},getGainMultiplier:{},maxLevel:1},{id:t.IRON_TOOLS,name:"Metal tools",description:"Improves wood output by foresters.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0&&e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(he={},he[r.IRON]=function(n){return{A:25,B:1.5,type:e.EXPONENTIAL}},he[r.RESEARCH]=function(n){return{A:250,B:1.5,type:e.EXPONENTIAL}},he[r.WOOD]=function(n){return{A:250,B:1.5,type:e.EXPONENTIAL}},he),getGain:{},getGainMultiplier:(Te={},Te[r.WOOD]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Te),maxLevel:1},{id:t.IRON_PARTS,name:"Metal machine parts",description:"Improves stone and ore output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(Ce={},Ce[r.IRON]=function(n){return{A:75,B:1.5,type:e.EXPONENTIAL}},Ce[r.RESEARCH]=function(n){return{A:275,B:1.5,type:e.EXPONENTIAL}},Ce[r.WOOD]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ce),getGain:{},getGainMultiplier:(ve={},ve[r.STONE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},ve[r.ORE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},ve),maxLevel:1},{id:t.IRON_CONTAINERS,name:"Metal containers",description:"Improves all resources storages.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(Be={},Be[r.IRON]=function(n){return{A:75,B:1.5,type:e.EXPONENTIAL}},Be[r.RESEARCH]=function(n){return{A:175,B:1.5,type:e.EXPONENTIAL}},Be[r.WOOD]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},Be),getGain:{},getCapacityMultiplier:(Se={},Se[r.STONE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.ORE]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.BIOMASS]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.WOOD]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.IRON]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.WATER]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.OXYGEN]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se[r.PLATINUM]=function(n){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se),maxLevel:1},{id:t.IMPROVED_WIRES,name:"Better cables",description:"Improves your power capacity and output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(Pe={},Pe[r.IRON]=function(n){return{A:50,B:1.5,type:e.EXPONENTIAL}},Pe[r.RESEARCH]=function(n){return{A:375,B:1.5,type:e.EXPONENTIAL}},Pe[r.POWER]=function(n){return{A:500,B:1.5,type:e.EXPONENTIAL}},Pe),getGain:{},getGainMultiplier:(Ue={},Ue[r.POWER]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},Ue),getCapacityMultiplier:(Me={},Me[r.POWER]=function(n){return{A:1,B:1.75,type:e.EXPONENTIAL}},Me),maxLevel:1},{id:t.TREE_CARE,name:"Tree care",description:"Improves foresters output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.FLORA_RESEARCH)>0},getCost:(Ge={},Ge[r.WATER]=function(n){return{A:150,B:1.5,type:e.EXPONENTIAL}},Ge[r.RESEARCH]=function(n){return{A:375,B:1.5,type:e.EXPONENTIAL}},Ge[r.POWER]=function(n){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ge),getGain:{},getGainMultiplier:(_e={},_e[r.WOOD]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},_e),getCapacityMultiplier:{},maxLevel:3},{id:t.FRUIT_TREES,name:"Fruit trees",description:"Tree plants also provide nutrition.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.FLORA_RESEARCH)>0},getCost:(be={},be[r.WATER]=function(n){return{A:150,B:1.5,type:e.EXPONENTIAL}},be[r.RESEARCH]=function(n){return{A:325,B:1.5,type:e.EXPONENTIAL}},be[r.POWER]=function(n){return{A:600,B:1.5,type:e.EXPONENTIAL}},be),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.NATURAL_ENVIRONMENT,name:"Natural Environment",description:"Forest plants now boost biomass production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.FLORA_RESEARCH)>0},getCost:(Xe={},Xe[r.WATER]=function(n){return{A:250,B:1.5,type:e.EXPONENTIAL}},Xe[r.RESEARCH]=function(n){return{A:475,B:1.5,type:e.EXPONENTIAL}},Xe[r.BIOMASS]=function(n){return{A:2500,B:1.5,type:e.EXPONENTIAL}},Xe),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.WATER_FILTERING,name:"Advanced water filtering",description:"Improves water output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CHEMISTRY)>0},getCost:(we={},we[r.OXYGEN]=function(n){return{A:125,B:1.5,type:e.EXPONENTIAL}},we[r.RESEARCH]=function(n){return{A:225,B:1.5,type:e.EXPONENTIAL}},we[r.POWER]=function(n){return{A:900,B:1.5,type:e.EXPONENTIAL}},we),getGain:{},getGainMultiplier:(De={},De[r.WATER]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},De),getCapacityMultiplier:{},maxLevel:3},{id:t.CHEMICAL_ANALYSIS,name:"Chemical analysis",description:"Improves science output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CHEMISTRY)>0},getCost:(xe={},xe[r.WATER]=function(n){return{A:125,B:1.5,type:e.EXPONENTIAL}},xe[r.RESEARCH]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},xe[r.POWER]=function(n){return{A:600,B:1.5,type:e.EXPONENTIAL}},xe),getGain:{},getGainMultiplier:(ke={},ke[r.RESEARCH]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},ke),getCapacityMultiplier:{},maxLevel:3},{id:t.BETTER_ELECTROLITES,name:"Improved electrolytes",description:"Improves power capacity.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CHEMISTRY)>0},getCost:(Ze={},Ze[r.WATER]=function(n){return{A:125,B:1.5,type:e.EXPONENTIAL}},Ze[r.RESEARCH]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ze[r.OXYGEN]=function(n){return{A:100,B:1.5,type:e.EXPONENTIAL}},Ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:(We={},We[r.POWER]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},We),maxLevel:5},{id:t.PLATINUM_MINING,name:"Platinum mining",description:"Miners can now mine platinum.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.GEOLOGY)>0},getCost:(He={},He[r.IRON]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},He[r.RESEARCH]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},He[r.POWER]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},He),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.PLATINUM_DRILLS,name:"Platinum drills",description:"Improves stone and ore output.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.PLATINUM_MINING)>0},getCost:(Ye={},Ye[r.PLATINUM]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},Ye[r.RESEARCH]=function(n){return{A:420,B:1.5,type:e.EXPONENTIAL}},Ye[r.POWER]=function(n){return{A:775,B:1.5,type:e.EXPONENTIAL}},Ye),getGain:{},getGainMultiplier:(je={},je[r.STONE]=function(n){return{A:1,B:1.4,type:e.EXPONENTIAL}},je[r.ORE]=function(n){return{A:1,B:1.4,type:e.EXPONENTIAL}},je),getCapacityMultiplier:{},maxLevel:1},{id:t.PLATINUM_TOOLS,name:"Platinum tools",description:"Platinum tools provides additional production boost to your wood and crafting beams, plates and bricks",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.PLATINUM_MINING)>0},getCost:(Fe={},Fe[r.PLATINUM]=function(n){return{A:15,B:1.5,type:e.EXPONENTIAL}},Fe[r.RESEARCH]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},Fe[r.POWER]=function(n){return{A:845,B:1.5,type:e.EXPONENTIAL}},Fe),getGain:{},getGainMultiplier:(Ve={},Ve[r.WOOD]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ve[r.BEAM]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ve[r.BRICK]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ve[r.PLATE]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ve),getCapacityMultiplier:{},maxLevel:5},{id:t.COTTAGES,name:"Cottages",description:"Allow building cottages.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.SOCIOLOGY)>0},getCost:(Ke={},Ke[r.BRICK]=function(n){return{A:45,B:1.5,type:e.EXPONENTIAL}},Ke[r.RESEARCH]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},Ke[r.POWER]=function(n){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ke),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.ENTERTAINMENT,name:"Entertainment",description:"Mood of society research allowed better understanding of human needs, unlocking new ways to boost their happiness.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.SOCIOLOGY)>0},getCost:(qe={},qe[r.RESEARCH]=function(n){return{A:420,B:1.5,type:e.EXPONENTIAL}},qe[r.POWER]=function(n){return{A:775,B:1.5,type:e.EXPONENTIAL}},qe),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.SOCIAL_RESEARCH_CENTER,name:"Social research center",description:"Unlocks new scientific building",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.SOCIOLOGY)>0},getCost:(Je={},Je[r.PLATE]=function(n){return{A:5,B:1.5,type:e.EXPONENTIAL}},Je[r.RESEARCH]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},Je[r.POWER]=function(n){return{A:845,B:1.5,type:e.EXPONENTIAL}},Je),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.ADVANCED_METALLURGY,name:"Advanced metallurgy",description:"Increase smelter output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MATERIAL_KNOWLEDGE)>0},getCost:(Qe={},Qe[r.IRON]=function(n){return{A:500,B:1.5,type:e.EXPONENTIAL}},Qe[r.RESEARCH]=function(n){return{A:500,B:1.5,type:e.EXPONENTIAL}},Qe[r.POWER]=function(n){return{A:845,B:1.5,type:e.EXPONENTIAL}},Qe),getGain:{},getGainMultiplier:(ze={},ze[r.IRON]=function(n){return{A:1,B:1.2,type:e.EXPONENTIAL}},ze),getCapacityMultiplier:{},maxLevel:10},{id:t.HEAT_INSULATING_CAMERAS,name:"Heat Insulating Cameras",description:"Improves thermal plant efficiency by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MATERIAL_KNOWLEDGE)>0},getCost:($e={},$e[r.ORE]=function(n){return{A:7500,B:1.5,type:e.EXPONENTIAL}},$e[r.STONE]=function(n){return{A:7500,B:1.5,type:e.EXPONENTIAL}},$e[r.RESEARCH]=function(n){return{A:750,B:1.5,type:e.EXPONENTIAL}},$e),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:t.COMPOSITE_METALS,name:"Composite metals",description:"Using composite metals allows to increase metal crafting output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.MATERIAL_KNOWLEDGE)>0},getCost:(en={},en[r.IRON]=function(n){return{A:600,B:1.5,type:e.EXPONENTIAL}},en[r.RESEARCH]=function(n){return{A:750,B:1.5,type:e.EXPONENTIAL}},en[r.POWER]=function(n){return{A:845,B:1.5,type:e.EXPONENTIAL}},en),getGain:{},getGainMultiplier:(nn={},nn[r.PLATE]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},nn[r.WIRE]=function(n){return{A:1,B:1.25,type:e.EXPONENTIAL}},nn),getCapacityMultiplier:{},maxLevel:3},{id:t.IMPROVED_WIRING,name:"Upgrade wiring",description:"Further increase power supply",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ELECTRICITY_STUDY)>0},getCost:(tn={},tn[r.PLATINUM]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},tn[r.RESEARCH]=function(n){return{A:750,B:1.5,type:e.EXPONENTIAL}},tn[r.WIRE]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},tn),getGain:{},getGainMultiplier:(on={},on[r.POWER]=function(n){return{A:1,B:1.05,type:e.EXPONENTIAL}},on),getCapacityMultiplier:{},maxLevel:10},{id:t.ENERGY_SAVING,name:"Energy Saving",description:"Significantly reduces building power cost",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ELECTRICITY_STUDY)>0},getCost:(rn={},rn[r.PLATINUM]=function(n){return{A:100,B:1.5,type:e.EXPONENTIAL}},rn[r.RESEARCH]=function(n){return{A:1250,B:1.5,type:e.EXPONENTIAL}},rn[r.WIRE]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},rn),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.GERMETISATION,name:"Sealing",description:"Allows you building containers that providing boost to your storage capacity",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ORGANIC_CHEMISTRY)>0},getCost:(an={},an[r.RUBBER]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},an[r.RESEARCH]=function(n){return{A:800,B:1.5,type:e.EXPONENTIAL}},an[r.POWER]=function(n){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},an),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.RUBBER_DETAILS,name:"Rubber Details",description:"Using new materials further decreasing building costs scale",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ORGANIC_CHEMISTRY)>0},getCost:(cn={},cn[r.RUBBER]=function(n){return{A:10,B:1.5,type:e.EXPONENTIAL}},cn[r.RESEARCH]=function(n){return{A:800,B:1.5,type:e.EXPONENTIAL}},cn[r.POWER]=function(n){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},cn),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.SURVEILLANCE_CAMERAS,name:"Surveillance Cameras",description:"Increase policemen efficiency by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ORGANIC_CHEMISTRY)>0},getCost:(un={},un[r.PLASTICS]=function(n){return{A:15,B:1.5,type:e.EXPONENTIAL}},un[r.RESEARCH]=function(n){return{A:800,B:1.5,type:e.EXPONENTIAL}},un[r.SEMICONDUCTOR]=function(n){return{A:20,B:1.5,type:e.EXPONENTIAL}},un),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:t.COMPUTERS,name:"Computers",description:"Unlocks computers crafting and building data-centers",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ELECTRONICS)>0},getCost:(sn={},sn[r.PLASTICS]=function(n){return{A:45,B:1.5,type:e.EXPONENTIAL}},sn[r.RESEARCH]=function(n){return{A:1500,B:1.5,type:e.EXPONENTIAL}},sn[r.SEMICONDUCTOR]=function(n){return{A:80,B:1.5,type:e.EXPONENTIAL}},sn),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.INDUSTRY_AUTOMATION,name:"Industry Automation",description:"Gain 5% bonus to all crafting activities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ELECTRONICS)>0},getCost:(ln={},ln[r.WIRE]=function(n){return{A:145,B:1.5,type:e.EXPONENTIAL}},ln[r.RESEARCH]=function(n){return{A:1600,B:1.5,type:e.EXPONENTIAL}},ln[r.SEMICONDUCTOR]=function(n){return{A:80,B:1.5,type:e.EXPONENTIAL}},ln),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:5},{id:t.BUILDING_PRINTING,name:"3D Printers construction",description:"Further decrease building cost",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.PRINTING_3D)>0},getCost:(pn={},pn[r.COMPUTER]=function(n){return{A:145,B:1.5,type:e.EXPONENTIAL}},pn[r.RESEARCH]=function(n){return{A:4600,B:1.5,type:e.EXPONENTIAL}},pn[r.RUBBER]=function(n){return{A:280,B:1.5,type:e.EXPONENTIAL}},pn),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.ORGANISM_PRINTING,name:"Organs printing",description:"Unlocks new medicine mode order",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.PRINTING_3D)>0},getCost:(En={},En[r.COMPUTER]=function(n){return{A:145,B:1.5,type:e.EXPONENTIAL}},En[r.RESEARCH]=function(n){return{A:4600,B:1.5,type:e.EXPONENTIAL}},En[r.WIRE]=function(n){return{A:280,B:1.5,type:e.EXPONENTIAL}},En),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:t.MULTISTORE_WAREHOUSES,name:"Multistore Warehouses",description:"Your warehouses can now store twice as much goods",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.HIGH_GRAVITY_PHYSICS)>0},getCost:(dn={},dn[r.PLATE]=function(n){return{A:400,B:1.5,type:e.EXPONENTIAL}},dn[r.RESEARCH]=function(n){return{A:7025,B:1.5,type:e.EXPONENTIAL}},dn[r.WIRE]=function(n){return{A:450,B:1.5,type:e.EXPONENTIAL}},dn),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1}],zt=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),$t=function(){return $t=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},$t.apply(this,arguments)},ei=function(e){function n(){var n=e.call(this)||this;return n.upgrades=[],n.workDispatcher.on("[landing-zone] do upgrade",(function(e){console.log("do upgrade",e),n.doUpgrade(e.id)})),n}return zt(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.upgrades=e},n.prototype.exportData=function(){return this.upgrades},n.prototype.dataToUI=function(){var e=this;return{list:Qt.map((function(n){return e.processToUI(n)}))}},n.prototype.getUpgradeLevel=function(e){var n;return(null===(n=this.upgrades.find((function(n){return n.id===e})))||void 0===n?void 0:n.level)||0},n.prototype.processToUI=function(e){var n=this.upgrades.find((function(n){return n.id===e.id}));n||(n={id:e.id,level:0},this.upgrades.push(n));var t=y.calcBatchAll(e.getCost,er.getInstance(),n.level,er.getInstance().resources.getBatchObject()),i=e.getCapacityEffect?y.calcBatch(e.getCapacityEffect,er.getInstance(),0):[],o=e.getCapacityMultiplier?y.calcBatch(e.getCapacityMultiplier,er.getInstance(),n.level+1):[],r=e.getGain?y.calcBatch(e.getGain,er.getInstance(),0):[],a=e.getGainMultiplier?y.calcBatch(e.getGainMultiplier,er.getInstance(),n.level+1):[],c=t.reduce((function(e,n){return Math.min(e,n.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(nr),isAvailable:c>=1,cost:er.getInstance().resources.assertEnought(t,er.getInstance().resources.getBatchObject(),er.getInstance().resources.getBatchBalanceObject()),max:i.map((function(e){return $t($t({},e),{amount:h(e.amount)})})),maxMult:o.map((function(e){return $t($t({},e),{amount:"x".concat(h(e.amount))})})),consume:[],gain:r.map((function(e){return $t($t({},e),{amount:h(e.amount)})})),gainMult:a.map((function(e){return $t($t({},e),{amount:"x".concat(h(e.amount))})})),progress:c<1?(100*c).toPrecision(3):"0",isMaxedOut:!!e.maxLevel&&e.maxLevel<=n.level,maxLevel:e.maxLevel,level:n.level}},n.prototype.doUpgrade=function(e){var n=Qt.find((function(n){return n.id===e}));if(n){var t=this.upgrades.findIndex((function(n){return n.id===e}));if(t<0)t=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(n.maxLevel&&this.upgrades[t].level>=n.maxLevel)return;var i=y.calcBatchAll(n.getCost,er.getInstance(),this.upgrades[t].level,er.getInstance().resources.getBatchObject());i.reduce((function(e,n){return Math.min(e,Math.floor(n.max))}),1e300)<1||(this.upgrades[t].level++,console.log("costs: ",i),er.getInstance().resources.subtractResourceBatch(i),nr.resources.reassertBalances())}},n.prototype.getGain=function(e){var n=Qt.filter((function(n){var t;return!!(null===(t=n.getGain)||void 0===t?void 0:t[e])})),t=[];return this.upgrades.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o&&o.getGain){var r=y.calculate(nr,o.getGain[e],0,i.level);t.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),t},n.prototype.getGainMultiplier=function(e){var n=Qt.filter((function(n){var t;return!!(null===(t=n.getGainMultiplier)||void 0===t?void 0:t[e])})),t=[];return this.upgrades.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o&&o.getGainMultiplier){var r=y.calculate(nr,o.getGainMultiplier[e],i.level,1);r&&t.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),t},n.prototype.getCapacity=function(e){var n=Qt.filter((function(n){var t;return!!(null===(t=n.getCapacityEffect)||void 0===t?void 0:t[e])})),t=[];return this.upgrades.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o&&o.getCapacityEffect){var r=y.calculate(nr,o.getCapacityEffect[e],0,i.level);t.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),t},n.prototype.getCapacityMult=function(e){var n=Qt.filter((function(n){var t;return!!(null===(t=n.getCapacityMultiplier)||void 0===t?void 0:t[e])})),t=[];return this.upgrades.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var a=y.calculate(nr,o.getCapacityMultiplier[e],i.level,1);e===r.ORE&&console.log("NAIOB: ",a,i),a&&t.push({label:"Upgrade: ".concat(o.name),value:a,id:"upgrade-".concat(o.id)})}}),0),t},n.prototype.process=function(e){},n}(g),ni=ei.getInstance();!function(e){e.SCIENCE="Science",e.ECONOMY="Economy",e.SOCIAL="Social"}(gn||(gn={})),function(e){e.EXPERIMENTAL_MEDICINE="experimental_medicine",e.WATER_FILTERING="water_filtering",e.RESEARCH_GRANTS="research_grants",e.INDUSTRIALIZATION="industrialization",e.FOREST_BEHAVOUR="forest_behavour",e.SECURITY_DOTATIONS="security_dotations",e.ARTIFICIAL_ORGANS="artificial_organs"}(fn||(fn={}));var ti,ii,oi,ri,ai,ci,ui,si,li,pi,Ei,di,gi,fi,Ai,Ri,Ii,mi,Oi,Ni,yi,Li,hi,Ti,Ci,vi,Bi,Si,Pi,Ui,Mi,Gi,_i,bi,Xi,wi,Di,xi,ki,Zi,Wi,Hi,Yi,ji,Fi,Vi,Ki,qi,Ji=function(e){return Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.CRANES))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.RUBBER_DETAILS))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BUILDING_PRINTING))},Qi=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ENERGY_SAVING))},zi=function(e){switch(e.laws.getLawSelected(fn.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.05;case 2:return 1.1}return 1},$i=function(e){switch(e.laws.getLawSelected(fn.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.5;case 2:return 2.5}return 1},eo=[{id:i.QUARRY,name:"Quarry",category:o.INDUSTRIAL,description:"Automatically collect some stone",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.AUTO_QUARRYING)>0},getCost:(An={},An[r.ORE]=function(n){return{A:1,B:1+.3*Ji(n),type:e.EXPONENTIAL}},An[r.STONE]=function(n){return{A:2.5,B:1+.3*Ji(n),type:e.EXPONENTIAL}},An),getConsumption:(Rn={},Rn[r.POWER]=function(n){return{A:.06,B:1,type:e.LINEAR}},Rn),getGain:(In={},In[r.STONE]=function(n){return{A:(.06+.03*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MACHINERY))*(1+.25*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.QUARRY_TECH)),B:1,type:e.LINEAR}},In),getStorage:{}},{id:i.MINE,name:"Mine",category:o.INDUSTRIAL,description:"Automatically collect some ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.AUTO_MINERS)>0},getCost:(mn={},mn[r.ORE]=function(n){return{A:5,B:1+.3*Ji(n),type:e.EXPONENTIAL}},mn[r.STONE]=function(n){return{A:4.5,B:1+.3*Ji(n),type:e.EXPONENTIAL}},mn),getConsumption:(On={},On[r.POWER]=function(n){return{A:.06,B:1,type:e.LINEAR}},On),getGain:(Nn={},Nn[r.ORE]=function(n){return{A:(.06+.03*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MACHINERY))*(1+.25*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MINE_TECH)),B:1,type:e.LINEAR}},Nn),getStorage:{}},{id:i.BACTERIA_INCUBATOR,category:o.INDUSTRIAL,name:"Bacteria Incubator",description:"Automatically collect some biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(n.COLLECT_BIOMASS)>0},getCost:(yn={},yn[r.BIOMASS]=function(n){return{A:3,B:1+.3*Ji(n),type:e.EXPONENTIAL}},yn[r.STONE]=function(n){return{A:4.5,B:1+.3*Ji(n),type:e.EXPONENTIAL}},yn),getConsumption:(Ln={},Ln[r.POWER]=function(n){return{A:.06*(1+.25*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BACTERIA_SELECTION)),B:1,type:e.LINEAR}},Ln),getGain:(hn={},hn[r.BIOMASS]=function(n){return{A:(.04+.02*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_MACHINERY))*(1+.25*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BIO_TECH))*(1+.5*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FLORA)),B:1,type:e.LINEAR}},hn[r.OXYGEN]=function(n){return{A:.01*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BACTERIA_SELECTION)*(1+.5*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FLORA)),B:1,type:e.LINEAR}},hn),getStorage:{}},{id:i.THERMOELECTRIC_STATION,category:o.POWER,name:"Thermoelectric Power plant",description:"Burns biomass to obtain electricity",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.COMBUSTION)>0},getCost:(Tn={},Tn[r.ORE]=function(n){return{A:6,B:1+.3*Ji(n),type:e.EXPONENTIAL}},Tn[r.STONE]=function(n){return{A:7,B:1+.3*Ji(n),type:e.EXPONENTIAL}},Tn),getConsumption:(Cn={},Cn[r.BIOMASS]=function(n){return{A:.03*Math.pow(.75,n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.COMBUSTION_CAMERA)),B:1,type:e.LINEAR}},Cn[r.OXYGEN]=function(n){return{A:.006*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.OXYGEN_CAMERAS),B:1,type:e.LINEAR}},Cn),getGain:(vn={},vn[r.POWER]=function(n){return{A:.09*(1+.25*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.THERMAL_TECH))*(1+.25*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.THERMAL_TECH2))*(1+.75*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.OXYGEN_CAMERAS))*(1+.5*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FLAMMABILITY))*(1+.2*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.HEAT_INSULATING_CAMERAS)),B:1,type:e.LINEAR}},vn),getStorage:(Bn={},Bn[r.POWER]=function(n){return{A:4*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.RESERVE_BATTERIES),B:1,type:e.LINEAR}},Bn)},{id:i.STORAGE,name:"Storage section",category:o.STORAGE,description:"Provides additional storage space",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.REPAIR_STORAGE_MODULE)>0},getCost:(Sn={},Sn[r.ORE]=function(n){return{A:10,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Sn[r.STONE]=function(n){return{A:10,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Sn),getConsumption:{},getGain:{},getStorage:(Pn={},Pn[r.STONE]=function(n){return{A:10,B:1,type:e.LINEAR}},Pn[r.ORE]=function(n){return{A:10,B:1,type:e.LINEAR}},Pn[r.BIOMASS]=function(n){return{A:10,B:1,type:e.LINEAR}},Pn[r.IRON]=function(n){return{A:3,B:1,type:e.LINEAR}},Pn[r.WOOD]=function(n){return{A:10,B:1,type:e.LINEAR}},Pn)},{id:i.STORAGE_HUB,name:"Storage hub",category:o.STORAGE,description:"Provides more storage space, but consumes power",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>3},getCost:(Un={},Un[r.POWER]=function(n){return{A:30,B:1+.75*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Un[r.ORE]=function(n){return{A:50,B:1+.75*Ji(n),type:e.EXPONENTIAL}},Un[r.STONE]=function(n){return{A:50,B:1+.75*Ji(n),type:e.EXPONENTIAL}},Un),getConsumption:(Mn={},Mn[r.POWER]=function(n){return{A:.15,B:1,type:e.LINEAR}},Mn),getGain:{},getStorage:(Gn={},Gn[r.STONE]=function(n){return{A:50,B:1,type:e.LINEAR}},Gn[r.ORE]=function(n){return{A:50,B:1,type:e.LINEAR}},Gn[r.BIOMASS]=function(n){return{A:50,B:1,type:e.LINEAR}},Gn[r.IRON]=function(n){return{A:15,B:1,type:e.LINEAR}},Gn[r.WOOD]=function(n){return{A:50,B:1,type:e.LINEAR}},Gn)},{id:i.OXYGEN_COLLECTOR,name:"Oxygen compressor",category:o.STORAGE,description:"Provides more storage for oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.OXYGEN_COMPRESSORS)>0},getCost:(_n={},_n[r.POWER]=function(n){return{A:50,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},_n[r.ORE]=function(n){return{A:150,B:1+.5*Ji(n),type:e.EXPONENTIAL}},_n[r.STONE]=function(n){return{A:150,B:1+.5*Ji(n),type:e.EXPONENTIAL}},_n),getConsumption:(bn={},bn[r.POWER]=function(n){return{A:.4,B:1,type:e.LINEAR}},bn),getGain:{},getStorage:(Xn={},Xn[r.OXYGEN]=function(n){return{A:20,B:1,type:e.LINEAR}},Xn)},{id:i.WATER_PUMP,name:"Water pump",category:o.INDUSTRIAL,description:"Provides water supply",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.WATER_PUMPING)>0},getCost:(wn={},wn[r.POWER]=function(n){return{A:75,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},wn[r.OXYGEN]=function(n){return{A:12,B:1+.5*Ji(n),type:e.EXPONENTIAL}},wn[r.STONE]=function(n){return{A:120,B:1+.5*Ji(n),type:e.EXPONENTIAL}},wn[r.ORE]=function(n){return{A:85,B:1+.5*Ji(n),type:e.EXPONENTIAL}},wn),getConsumption:(Dn={},Dn[r.POWER]=function(n){return{A:.3+(1===n.laws.getLawSelected(fn.WATER_FILTERING)?.9:0),B:1,type:e.LINEAR}},Dn),getGain:(xn={},xn[r.WATER]=function(n){return{A:.03,B:1,type:e.LINEAR}},xn),getStorage:(kn={},kn[r.WATER]=function(n){return{A:1,B:1,type:e.LINEAR}},kn)},{id:i.WATER_STORAGE,name:"Water storage",category:o.STORAGE,description:"Provides water storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.WATER_PUMPING)>0},getCost:(Zn={},Zn[r.POWER]=function(n){return{A:70,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Zn[r.ORE]=function(n){return{A:180,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Zn[r.STONE]=function(n){return{A:180,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Zn),getConsumption:(Wn={},Wn[r.POWER]=function(n){return{A:.1,B:1,type:e.LINEAR}},Wn),getGain:{},getStorage:(Hn={},Hn[r.WATER]=function(n){return{A:15,B:1,type:e.LINEAR}},Hn)},{id:i.BATTERY,name:"Battery",category:o.POWER,description:"Provides power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ELECTROLITES)>0},getCost:(Yn={},Yn[r.POWER]=function(n){return{A:20,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Yn[r.ORE]=function(n){return{A:180,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Yn[r.WATER]=function(n){return{A:5,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Yn),getConsumption:{},getGain:{},getStorage:(jn={},jn[r.POWER]=function(n){return{A:80,B:1,type:e.LINEAR}},jn)},{id:i.LIVING_CABIN,name:"Living Cabin",category:o.RESIDENTAL,description:"Provides living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.DOCKING_MODULE)>0},getCost:(Fn={},Fn[r.POWER]=function(n){return{A:120,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Fn[r.STONE]=function(n){return{A:180,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Fn[r.ORE]=function(n){return{A:80,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Fn),getConsumption:{},getGain:{},getStorage:{},getMaxColonists:function(n){return{A:2+n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.WOODEN_FURNITURE),B:1,type:e.LINEAR}}},{id:i.METEO_STATION,name:"Meteorology Station",category:o.SCIENCE,description:"Provides 25 science storage and boost science output by 2% multiplicative",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METEOROLOGY)>0},getCost:(Vn={},Vn[r.POWER]=function(n){return{A:80,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Vn[r.STONE]=function(n){return{A:180,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Vn[r.ORE]=function(n){return{A:125,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Vn),getConsumption:{},getGain:{},getStorage:(Kn={},Kn[r.RESEARCH]=function(n){return{A:25,B:1,type:e.LINEAR}},Kn),getGainMultiplier:(qn={},qn[r.RESEARCH]=function(n){return{A:1,B:1.02,type:e.EXPONENTIAL}},qn)},{id:i.MONUMENT,name:"Monument",category:o.PUBLIC,description:"Provides some aesthetics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CIVIL_SERVICE)>0},getCost:(Jn={},Jn[r.POWER]=function(n){return{A:50,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Jn[r.STONE]=function(n){return{A:820,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Jn[r.ORE]=function(n){return{A:480,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Jn),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(Qn={},Qn[I.AESTHETICS]=function(n){return{A:2,B:1,type:e.LINEAR}},Qn)},{id:i.CLINIC,name:"Clinic",category:o.PUBLIC,description:"Provides basic healthcare service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(f.EXOBIOLOGY)>0},getCost:(zn={},zn[r.POWER]=function(n){return{A:250,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},zn[r.STONE]=function(n){return{A:820,B:1+.5*Ji(n),type:e.EXPONENTIAL}},zn[r.ORE]=function(n){return{A:680,B:1+.5*Ji(n),type:e.EXPONENTIAL}},zn),getConsumption:($n={},$n[r.POWER]=function(n){return{A:.3,B:1,type:e.LINEAR}},$n),getGain:{},getStorage:(et={},et[r.RESEARCH]=function(n){return{A:1===n.laws.getLawSelected(fn.EXPERIMENTAL_MEDICINE)?50:0,B:1,type:e.LINEAR}},et),getEffectGain:(nt={},nt[I.HEALTHCARE]=function(n){return{A:10*(1===n.laws.getLawSelected(fn.EXPERIMENTAL_MEDICINE)?.5:1),B:1,type:e.LINEAR}},nt)},{id:i.PARK,name:"Park zone",category:o.PUBLIC,description:"Parking zone provides basic possibility to relax for your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},getCost:(tt={},tt[r.POWER]=function(n){return{A:150,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},tt[r.STONE]=function(n){return{A:120,B:1+.5*Ji(n),type:e.EXPONENTIAL}},tt[r.WOOD]=function(n){return{A:80,B:1+.5*Ji(n),type:e.EXPONENTIAL}},tt),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(it={},it[I.AESTHETICS]=function(n){return{A:5,B:1,type:e.LINEAR}},it[I.ENTERTAINMENT]=function(n){return{A:2,B:1,type:e.LINEAR}},it)},{id:i.BIO_LAB,category:o.SCIENCE,name:"Bio laboratory",description:"Provides even more science storage and boost science output by 5% multiplicative",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOBIOLOGY)>0},getCost:(ot={},ot[r.POWER]=function(n){return{A:120,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},ot[r.STONE]=function(n){return{A:1275,B:1+.5*Ji(n),type:e.EXPONENTIAL}},ot[r.ORE]=function(n){return{A:725,B:1+.5*Ji(n),type:e.EXPONENTIAL}},ot),getConsumption:(rt={},rt[r.POWER]=function(n){return{A:.75*$i(n),B:1.5,type:e.LINEAR}},rt[r.BIOMASS]=function(n){return{A:.4,B:1.5,type:e.LINEAR}},rt),getGain:{},getStorage:(at={},at[r.RESEARCH]=function(n){return{A:50*zi(n),B:1,type:e.LINEAR}},at),getGainMultiplier:(ct={},ct[r.RESEARCH]=function(n){return{A:1,B:1.05,type:e.EXPONENTIAL}},ct)},{id:i.FOREST_PLANT,name:"Forest Plant",category:o.INDUSTRIAL,description:"Generates oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.BROADLEAVED)>0},getCost:(ut={},ut[r.WOOD]=function(n){return{A:20,B:1+.5*Ji(n),type:e.EXPONENTIAL}},ut[r.STONE]=function(n){return{A:2.5,B:1+.5*Ji(n),type:e.EXPONENTIAL}},ut),getConsumption:(st={},st[r.WATER]=function(n){return{A:.01,B:1,type:e.LINEAR}},st),getGain:(lt={},lt[r.OXYGEN]=function(n){return{A:.06*(0===n.laws.getLawSelected(fn.FOREST_BEHAVOUR)?1:.5),B:1,type:e.LINEAR}},lt[r.NUTRITION]=function(n){return{A:.1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FRUIT_TREES),B:1,type:e.LINEAR}},lt),getGainMultiplier:(pt={},pt[r.BIOMASS]=function(n){return{A:n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.NATURAL_ENVIRONMENT),B:1.02,type:e.EXPONENTIAL}},pt),getStorage:{},getEffectGain:(Et={},Et[I.AESTHETICS]=function(n){return{A:1===n.laws.getLawSelected(fn.FOREST_BEHAVOUR)?2:0,B:1,type:e.LINEAR}},Et[I.ENTERTAINMENT]=function(n){return{A:2===n.laws.getLawSelected(fn.FOREST_BEHAVOUR)?2:0,B:1,type:e.LINEAR}},Et)},{id:i.SMELTER,name:"Smelter",category:o.INDUSTRIAL,description:"Converts ore and wood into rolled metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(dt={},dt[r.ORE]=function(n){return{A:600,B:1+.5*Ji(n),type:e.EXPONENTIAL}},dt[r.STONE]=function(n){return{A:1250,B:1+.5*Ji(n),type:e.EXPONENTIAL}},dt),getConsumption:(gt={},gt[r.WOOD]=function(n){return{A:.3,B:1,type:e.LINEAR}},gt[r.ORE]=function(n){return{A:.5,B:1,type:e.LINEAR}},gt),getGain:(ft={},ft[r.IRON]=function(n){return{A:.02,B:1,type:e.LINEAR}},ft),getStorage:{}},{id:i.WAREHOUSE,name:"Warehouse",category:o.STORAGE,description:"Provides more raw materials storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(At={},At[r.POWER]=function(n){return{A:30,B:1+.25*Ji(n)*Qi(n),type:e.EXPONENTIAL}},At[r.BEAM]=function(n){return{A:2,B:1+.25*Ji(n),type:e.EXPONENTIAL}},At[r.BRICK]=function(n){return{A:4,B:1+.25*Ji(n),type:e.EXPONENTIAL}},At),getConsumption:(Rt={},Rt[r.POWER]=function(n){return{A:.1,B:1,type:e.LINEAR}},Rt),getGain:{},getStorage:(It={},It[r.STONE]=function(n){return{A:25*(1+.05*n.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MULTISTORE_WAREHOUSES)),B:1,type:e.LINEAR}},It[r.ORE]=function(n){return{A:25*(1+.05*n.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MULTISTORE_WAREHOUSES)),B:1,type:e.LINEAR}},It[r.BIOMASS]=function(n){return{A:25*(1+.05*n.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MULTISTORE_WAREHOUSES)),B:1,type:e.LINEAR}},It[r.IRON]=function(n){return{A:10*(1+.05*n.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MULTISTORE_WAREHOUSES)),B:1,type:e.LINEAR}},It[r.WOOD]=function(n){return{A:25*(1+.05*n.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MULTISTORE_WAREHOUSES)),B:1,type:e.LINEAR}},It[r.PLATINUM]=function(n){return{A:5*(1+.05*n.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.MULTISTORE_WAREHOUSES)),B:1,type:e.LINEAR}},It)},{id:i.TANK,name:"Tank",category:o.STORAGE,description:"Provides oxygen and water storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},getCost:(mt={},mt[r.POWER]=function(n){return{A:30,B:1+.25*Ji(n)*Qi(n),type:e.EXPONENTIAL}},mt[r.PLATE]=function(n){return{A:2,B:1+.25*Ji(n),type:e.EXPONENTIAL}},mt[r.BRICK]=function(n){return{A:5,B:1+.25*Ji(n),type:e.EXPONENTIAL}},mt),getConsumption:{},getGain:{},getStorage:(Ot={},Ot[r.OXYGEN]=function(n){return{A:25,B:1,type:e.LINEAR}},Ot[r.WATER]=function(n){return{A:25,B:1,type:e.LINEAR}},Ot)},{id:i.COTTAGE,name:"Cottage",category:o.RESIDENTAL,description:"Provides additional living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.COTTAGES)>0},getCost:(Nt={},Nt[r.POWER]=function(n){return{A:80,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Nt[r.BRICK]=function(n){return{A:10,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Nt[r.BEAM]=function(n){return{A:8,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Nt),getConsumption:(yt={},yt[r.POWER]=function(n){return{A:.05,B:1,type:e.LINEAR}},yt),getGain:{},getStorage:{},getMaxColonists:function(n){return{A:2,B:1,type:e.LINEAR}}},{id:i.CINEMA,name:"Cinema",category:o.PUBLIC,description:"Provides additional 2% boost to your colonists production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ENTERTAINMENT)>0},getCost:(Lt={},Lt[r.POWER]=function(n){return{A:380,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Lt[r.BRICK]=function(n){return{A:10,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Lt[r.BEAM]=function(n){return{A:8,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Lt[r.PLATE]=function(n){return{A:5,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Lt),getConsumption:(ht={},ht[r.POWER]=function(n){return{A:.5,B:1,type:e.LINEAR}},ht),getGain:{},getStorage:{},getEffectGain:(Tt={},Tt[I.ENTERTAINMENT]=function(n){return{A:10,B:1,type:e.LINEAR}},Tt)},{id:i.SOCIAL_RESEARCH_CENTER,name:"Social research center",category:o.SCIENCE,description:"Provides additional science capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.SOCIAL_RESEARCH_CENTER)>0},getCost:(Ct={},Ct[r.POWER]=function(n){return{A:1200,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Ct[r.BRICK]=function(n){return{A:125,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Ct[r.BEAM]=function(n){return{A:100,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Ct[r.PLATE]=function(n){return{A:25,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Ct),getConsumption:(vt={},vt[r.POWER]=function(n){return{A:1*$i(n),B:1,type:e.LINEAR}},vt),getGain:{},getStorage:(Bt={},Bt[r.RESEARCH]=function(n){return{A:225*zi(n),B:1,type:e.LINEAR}},Bt),getGainMultiplier:(St={},St[r.RESEARCH]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},St)},{id:i.METALLURGY_COMPLEX,name:"Metallurgy Complex",category:o.INDUSTRIAL,description:"Provides bonus to metal output",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ADVANCED_METALLURGY)>0},getCost:(Pt={},Pt[r.PLATINUM]=function(n){return{A:20,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Pt[r.BRICK]=function(n){return{A:100,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Pt[r.BEAM]=function(n){return{A:25,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Pt[r.PLATE]=function(n){return{A:25,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Pt),getConsumption:(Ut={},Ut[r.POWER]=function(n){return{A:1,B:1,type:e.LINEAR}},Ut),getGain:{},getStorage:{},getGainMultiplier:(Mt={},Mt[r.IRON]=function(n){return{A:1,B:1.03,type:e.EXPONENTIAL}},Mt)},{id:i.BUILDING_FACTORY,name:"Building materials factory",category:o.INDUSTRIAL,description:"Provides bonus to bricks, beams and plates production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ADVANCED_METALLURGY)>0},getCost:(Gt={},Gt[r.BRICK]=function(n){return{A:30,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Gt[r.BEAM]=function(n){return{A:75,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Gt[r.PLATE]=function(n){return{A:5,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Gt),getConsumption:(_t={},_t[r.POWER]=function(n){return{A:1,B:1,type:e.LINEAR}},_t),getGain:{},getStorage:{},getGainMultiplier:(bt={},bt[r.BEAM]=function(n){return{A:1,B:1.03,type:e.EXPONENTIAL}},bt[r.BRICK]=function(n){return{A:1,B:1.03,type:e.EXPONENTIAL}},bt[r.PLATE]=function(n){return{A:1,B:1.03,type:e.EXPONENTIAL}},bt)},{id:i.STORAGE_CONTAINER,name:"Storage container",category:o.STORAGE,description:"Provides 5% bonus to your materials storage in warehouses",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.GERMETISATION)>0},getCost:(Xt={},Xt[r.POWER]=function(n){return{A:5,B:1+.1*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Xt[r.PLATE]=function(n){return{A:5,B:1+.1*Ji(n),type:e.EXPONENTIAL}},Xt[r.RUBBER]=function(n){return{A:5,B:1+.1*Ji(n),type:e.EXPONENTIAL}},Xt),getConsumption:{},getGain:{},getStorage:{}},{id:i.SOLAR_PANEL,category:o.POWER,name:"Solar Panel",description:"Provides power from solar radiation",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.ELECTRICITY_STUDY)>0},getCost:(wt={},wt[r.PLATE]=function(n){return{A:6,B:1+.3*Ji(n),type:e.EXPONENTIAL}},wt[r.WIRE]=function(n){return{A:10,B:1+.3*Ji(n),type:e.EXPONENTIAL}},wt[r.SEMICONDUCTOR]=function(n){return{A:10,B:1+.3*Ji(n),type:e.EXPONENTIAL}},wt),getConsumption:{},getGain:(Dt={},Dt[r.POWER]=function(n){return{A:.4,B:1,type:e.LINEAR}},Dt),getStorage:{}},{id:i.SHRINE,category:o.PUBLIC,name:"Shrine",description:"Provides some religious service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.PUBLIC_SERVICE)>0},getCost:(xt={},xt[r.BEAM]=function(n){return{A:50,B:1+.3*Ji(n),type:e.EXPONENTIAL}},xt[r.STONE]=function(n){return{A:1e3,B:1+.3*Ji(n),type:e.EXPONENTIAL}},xt),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(kt={},kt[I.RELIGION]=function(n){return{A:3,B:1,type:e.LINEAR}},kt)},{id:i.DATA_CENTER,name:"Data Center",category:o.SCIENCE,description:"Provides additional science capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.COMPUTERS)>0},getCost:(Zt={},Zt[r.POWER]=function(n){return{A:2500,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},Zt[r.BRICK]=function(n){return{A:125,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Zt[r.COMPUTER]=function(n){return{A:25,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Zt[r.WIRE]=function(n){return{A:125,B:1+.5*Ji(n),type:e.EXPONENTIAL}},Zt),getConsumption:(Wt={},Wt[r.POWER]=function(n){return{A:2*$i(n),B:1,type:e.LINEAR}},Wt),getGain:{},getStorage:(Ht={},Ht[r.RESEARCH]=function(n){return{A:675*zi(n),B:1,type:e.LINEAR}},Ht),getGainMultiplier:(Yt={},Yt[r.RESEARCH]=function(n){return{A:1,B:1.1,type:e.EXPONENTIAL}},Yt)},{id:i.APARTMENT,name:"Apartment",category:o.RESIDENTAL,description:"Provides additional living space for 5 colonists",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.HIGH_GRAVITY_PHYSICS)>0},getCost:(jt={},jt[r.POWER]=function(n){return{A:1280,B:1+.5*Ji(n)*Qi(n),type:e.EXPONENTIAL}},jt[r.BRICK]=function(n){return{A:180,B:1+.5*Ji(n),type:e.EXPONENTIAL}},jt[r.WIRE]=function(n){return{A:50,B:1+.5*Ji(n),type:e.EXPONENTIAL}},jt),getConsumption:(Ft={},Ft[r.POWER]=function(n){return{A:.05,B:1,type:e.LINEAR}},Ft),getGain:{},getStorage:{},getMaxColonists:function(n){return{A:5,B:1,type:e.LINEAR}}}],no=function(e){var n,t,i,o,a,c,u,s,l,p,E,d,g,f,A,R,I,m,O=((n={})[r.POWER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base battery",value:20}],multiplier:[]}},n[r.STONE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},n[r.ORE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},n[r.BIOMASS]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},n[r.OXYGEN]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},n[r.WATER]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.005*nr.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},n[r.NUTRITION]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.1*nr.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},n[r.RESEARCH]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.IRON]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.PLATINUM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.WOOD]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},n[r.BEAM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.BRICK]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.PLATE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.WIRE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.RUBBER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.PLASTICS]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.FUEL]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.SEMICONDUCTOR]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n[r.COMPUTER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},n);for(var N in O)(t=O[N].income.linear).push.apply(t,nr.landingZone.landingZoneBuildings.getResourceBeingProduced(N)),(i=O[N].income.multiplier).push.apply(i,nr.landingZone.landingZoneBuildings.getResourceMultiplier(N)),null===(p=O[N].income.consumption)||void 0===p||p.push.apply(p,nr.landingZone.landingZoneBuildings.getResourceBeingConsumed(N)),null===(E=O[N].max.linear)||void 0===E||E.push.apply(E,nr.landingZone.landingZoneBuildings.getResourceBeingStored(N)),(o=O[N].income.linear).push.apply(o,nr.landingZone.landingZoneUpgrades.getGain(N)),(a=O[N].income.multiplier).push.apply(a,nr.landingZone.landingZoneUpgrades.getGainMultiplier(N)),null===(d=O[N].max.linear)||void 0===d||d.push.apply(d,nr.landingZone.landingZoneUpgrades.getCapacity(N)),null===(g=O[N].max.multiplier)||void 0===g||g.push.apply(g,nr.landingZone.landingZoneUpgrades.getCapacityMult(N)),(c=O[N].income.linear).push.apply(c,nr.colony.colonyJobs.getResourceBeingProduced(N)),null===(f=O[N].income.consumption)||void 0===f||f.push.apply(f,nr.colony.colonyJobs.getResourceBeingConsumed(N)),null===(A=O[N].income.multiplier)||void 0===A||A.push.apply(A,nr.colony.colonyJobs.getResourceBeingMultiplied(N)),(u=O[N].income.linear).push.apply(u,nr.crafting.craftingJobs.getResourceBeingProduced(N)),null===(R=O[N].income.consumption)||void 0===R||R.push.apply(R,nr.crafting.craftingJobs.getResourceBeingConsumed(N)),(s=O[N].income.linear).push.apply(s,nr.laws.getResourceBeingProduced(N)),(l=O[N].income.multiplier).push.apply(l,nr.laws.getResourceMultiplier(N)),null===(I=O[N].income.consumption)||void 0===I||I.push.apply(I,nr.laws.getResourceBeingConsumed(N)),null===(m=O[N].max.linear)||void 0===m||m.push.apply(m,nr.laws.getResourceBeingStored(N));return O},to=function(){return to=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},to.apply(this,arguments)},io=function(){function e(){this.cachedBreakdown={},this.resourcesStatus=m.map((function(e){return{id:e.id,amount:0,balance:0,max:1,hasCapacityLimit:!0,potentialEfficiency:1}}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getResourceEfficiency=function(n){return n in e.lackEfficiencyResources?null==e.lackEfficiencyResources[n]?1:e.lackEfficiencyResources[n]:1},e.prototype.addResource=function(e,n){var t=this.resourcesStatus.findIndex((function(n){return n.id===e}));if(t<0){t=this.resourcesStatus.length;var i=m.find((function(n){return n.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[t].amount=this.resourcesStatus[t].amount+n,this.resourcesStatus[t].max>0&&(this.resourcesStatus[t].amount=Math.min(this.resourcesStatus[t].amount,this.resourcesStatus[t].max)),this.resourcesStatus[t].amount<0&&(this.resourcesStatus[t].amount=0)},e.prototype.setResource=function(e,n){var t=this.resourcesStatus.findIndex((function(n){return n.id===e}));if(t<0){t=this.resourcesStatus.length;var i=m.find((function(n){return n.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[t].amount=n},e.prototype.subtractResource=function(e,n){var t=this.resourcesStatus.findIndex((function(n){return n.id===e}));t<0||(this.resourcesStatus[t].amount=this.resourcesStatus[t].amount-n)},e.prototype.subtractResourceBatch=function(e){var n=this;e.forEach((function(e){n.subtractResource(e.id,e.amount)}))},e.prototype.setBalance=function(e,n){var t=this.resourcesStatus.findIndex((function(n){return n.id===e}));if(t<0){t=this.resourcesStatus.length;var i=m.find((function(n){return n.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[t].balance=n},e.prototype.setCapacity=function(e,n){var t=this.resourcesStatus.findIndex((function(n){return n.id===e}));if(t<0){t=this.resourcesStatus.length;var i=m.find((function(n){return n.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[t].max=n},e.prototype.saveBalances=function(){var e=this;nr.colony.colonyEffects.getBreakdowns();var n=no(),t={};m.forEach((function(i){var o,r,a,c;if(i.unlockCondition(nr)){t[i.id]={max:{income:[],multiplier:[],consumption:[]},income:{income:[],multiplier:[],consumption:[]}};var u=n[i.id].max.linear.reduce((function(e,n){return e+n.value}),0),s=n[i.id].max.multiplier.reduce((function(e,n){return e*n.value}),1);e.setCapacity(i.id,u*s),t[i.id].max.income=n[i.id].max.linear.filter((function(e){return e.value})).map((function(e){return to(to({},e),{value:"+".concat(e.value.toPrecision(4))})})),t[i.id].max.multiplier=n[i.id].max.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return to(to({},e),{value:"x".concat(e.value.toPrecision(4))})}));var l=n[i.id].income.linear.reduce((function(e,n){return e+n.value}),0),p=n[i.id].income.multiplier.reduce((function(e,n){return e*n.value}),1),E=(null===(o=n[i.id].income.consumption)||void 0===o?void 0:o.reduce((function(e,n){return e+n.value}),0))||0;if(e.setBalance(i.id,l*p-E),null===(r=t[i.id])||void 0===r||(r.income.income=n[i.id].income.linear.filter((function(e){return e.value})).map((function(e){return to(to({},e),{value:"+".concat(e.value.toPrecision(4))})}))),null===(a=t[i.id])||void 0===a||(a.income.multiplier=n[i.id].income.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return to(to({},e),{value:"x".concat(e.value.toPrecision(4))})}))),null===(c=t[i.id])||void 0===c||(c.income.consumption=n[i.id].income.consumption.filter((function(e){return e.value})).map((function(e){return to(to({},e),{value:"-".concat(e.value.toPrecision(4))})}))),i.hasCapacityLimit){var d=n[i.id].max.linear.reduce((function(e,n){return e+n.value}),0),g=n[i.id].max.multiplier.reduce((function(e,n){return e*n.value}),1);e.setCapacity(i.id,d*g)}}})),this.cachedBreakdown=t},e.prototype.resetEfficiency=function(){e.lackEfficiencyResources={},nr.landingZone.landingZoneBuildings.resetEfficiency(),nr.crafting.craftingJobs.resetEfficiency()},e.prototype.assertBalances=function(n){var t;void 0===n&&(n=!1),nr.colony.colonyEffects.getBreakdowns();var i=no(),o={};for(var a in i){var c=i[a].income.linear.reduce((function(e,n){return e+n.value}),0),u=i[a].income.multiplier.reduce((function(e,n){return e*n.value}),1),s=(null===(t=i[a].income.consumption)||void 0===t?void 0:t.reduce((function(e,n){return e+n.value}),0))||0,l=this.getPotentialEfficiency(Math.max(0,this.getResource(a))+c*u,-s);a===r.POWER&&console.log("power: ",c*u,s,l,e.lackEfficiencyResources[a]),o[a]=l<1&&n?0:l}return o},e.prototype.shouldChangeBalances=function(e){return Object.values(e).findIndex((function(e){return e<1}))>-1},e.prototype.applyBalances=function(n){for(var t in n){var i=t;i in e.lackEfficiencyResources&&null!=e.lackEfficiencyResources[i]?e.lackEfficiencyResources[i]*=n[i]:e.lackEfficiencyResources[i]=n[i]}},e.prototype.applyEfficiencies=function(){nr.landingZone.landingZoneBuildings.adaptEfficiency(),nr.crafting.craftingJobs.adaptEfficiency()},e.prototype.assertAndApplyBalances=function(){var n=this.assertBalances(),t=0;for(console.log("balancesCalculated: ",n);this.shouldChangeBalances(n)&&t<15;)this.applyBalances(n),this.applyEfficiencies(),n=this.assertBalances(t>10),console.log("iter: ",t,n,e.lackEfficiencyResources[r.POWER]),t++},e.prototype.reassertBalances=function(){this.resetEfficiency(),this.assertAndApplyBalances(),this.saveBalances()},e.prototype.process=function(n){var t=this,i=!1,o="";this.resourcesStatus.forEach((function(e){e.balance<0&&e.balance<-e.amount&&(i=!0,o=e.id)})),i&&(console.log("should re-assert: ",i,o,e.lackEfficiencyResources),this.reassertBalances()),this.resourcesStatus.forEach((function(e){t.addResource(e.id,e.balance*n)}))},e.prototype.getResource=function(e){var n=this.resourcesStatus.findIndex((function(n){return n.id===e}));return n<0?0:this.resourcesStatus[n].amount},e.prototype.getBalance=function(e){var n=this.resourcesStatus.findIndex((function(n){return n.id===e}));return n<0?0:this.resourcesStatus[n].balance},e.prototype.getPotentialEfficiency=function(e,n){return n>=0?1:Math.min(1,-Math.max(0,e)/n)},e.prototype.getBatchObject=function(){return this.resourcesStatus.reduce((function(e,n){return e[n.id]=n.amount,e}),{})},e.prototype.getBatchBalanceObject=function(){return this.resourcesStatus.reduce((function(e,n){return e[n.id]=n.balance,e}),{})},e.prototype.getResourceBalance=function(e){var n=this.resourcesStatus.findIndex((function(n){return n.id===e}));return n<0?0:this.resourcesStatus[n].balance},e.prototype.getResourceCap=function(e){var n=this.resourcesStatus.findIndex((function(n){return n.id===e}));return n<0?0:this.resourcesStatus[n].max},e.prototype.assertEnought=function(e,n,t){var i=[];return e.forEach((function(e){var t="0";if(n[e.id]||(n[e.id]=0),e.amount&&e.amount>0&&n[e.id]>0){var o=100*n[e.id]/e.amount;o>100&&(o=100),t=o.toPrecision(3)}e.amount>0&&i.push({id:e.id,name:e.name,amount:h(e.amount),percentage:t,maxAmount:h(e.max),isAvailable:e.max>=1,eta:L(e.eta)})})),i},e.prototype.exportData=function(){return this.resourcesStatus.map((function(e){return{id:e.id,amount:e.amount}}))},e.prototype.importData=function(e){this.resourcesStatus=e.map((function(e){var n=m.find((function(n){return n.id===e.id}));if(!n)throw new Error("Invalid resource");return{id:e.id,amount:e.amount,balance:0,hasCapacityLimit:n.hasCapacityLimit,max:0,potentialEfficiency:1}}))},e.prototype.dataToUI=function(){var e=this;return{resources:m.map((function(n){var t,i=e.resourcesStatus.find((function(e){return e.id===n.id}));return{id:n.id,name:n.name,amount:h((null==i?void 0:i.amount)||0),balance:h((null==i?void 0:i.balance)||0),isUnlocked:n.unlockCondition(nr),max:h((null==i?void 0:i.max)||0),toFullPercentage:(i&&i.max>0?i.amount/i.max:0).toPrecision(3),hasMaxLimit:n.hasCapacityLimit,breakdown:e.cachedBreakdown[n.id],toFullTime:(null==i?void 0:i.max)&&(null==i?void 0:i.balance)>0?L((i.max-i.amount)/i.balance):"",toEmptyTime:i&&(null==i?void 0:i.balance)<0?L(-(null==i?void 0:i.amount)/(null==i?void 0:i.balance)):"",isSecondary:null!==(t=n.isCraftable)&&void 0!==t&&t}}))}},e.lackEfficiencyResources={},e}(),oo=io.getInstance(),ro=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ao=function(){return ao=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ao.apply(this,arguments)},co=function(e){function n(){var n=e.call(this)||this;return n.buildings=[],n.workDispatcher.on("[landing-zone] do build",(function(e){console.log("do upgrade",e),n.doBuild(e.id)})),n.workDispatcher.on("[landing-zone] set building amount",(function(e){console.log("set amount",e),n.setActiveAmount(e.id,e.amount)})),n}return ro(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.buildings=e},n.prototype.exportData=function(){return this.buildings},n.prototype.dataToUI=function(){var e=this;return{list:eo.map((function(n){return e.processToUI(n)}))}},n.prototype.getBuildingLevel=function(e){var n;return(null===(n=this.buildings.find((function(n){return n.id===e})))||void 0===n?void 0:n.level)||0},n.prototype.processToUI=function(e){var n=this.buildings.find((function(n){return n.id===e.id}));n||(n={id:e.id,level:0,efficiency:1,activeAmount:0},this.buildings.push(n));var t=y.calcBatchAll(e.getCost,er.getInstance(),n.level,er.getInstance().resources.getBatchObject()),i=t.reduce((function(e,n){return Math.min(e,n.max)}),1e300),o=y.calcBatchAll(e.getConsumption,er.getInstance(),0,er.getInstance().resources.getBatchObject()),r=y.calcBatch(e.getGain,er.getInstance(),0),a=e.getStorage?y.calcBatch(e.getStorage,er.getInstance(),0):[],c=e.getGainMultiplier?y.calcBatch(e.getGainMultiplier,er.getInstance(),1):[],u=e.getEffectConsumption?y.calcBatchAll(e.getEffectConsumption,er.getInstance(),0,er.getInstance().resources.getBatchObject()):[],s=e.getEffectGain?y.calcBatch(e.getEffectGain,er.getInstance(),0):[];return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(nr),isAvailable:i>=1,cost:er.getInstance().resources.assertEnought(t,er.getInstance().resources.getBatchObject(),er.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"0",consume:o.filter((function(e){return e.amount})).map((function(e){return ao(ao({},e),{amount:h(e.amount)})})),gain:r.filter((function(e){return e.amount})).map((function(e){return ao(ao({},e),{amount:h(e.amount)})})),gainMult:c.filter((function(e){return e.amount})).map((function(e){return ao(ao({},e),{amount:"x".concat(h(e.amount))})})),consumeEffect:u.filter((function(e){return e.amount})).map((function(e){return ao(ao({},e),{amount:h(e.amount)})})),gainEffect:s.filter((function(e){return e.amount})).map((function(e){return ao(ao({},e),{amount:h(e.amount)})})),max:a.filter((function(e){return e.amount})).map((function(e){return ao(ao({},e),{amount:h(e.amount)})})),level:n.level,activeAmount:n.activeAmount,category:e.category}},n.prototype.setActiveAmount=function(e,n){var t=this.buildings.findIndex((function(n){return n.id===e}));t<0||(this.buildings[t].activeAmount=Math.min(n,this.buildings[t].level),nr.resources.reassertBalances())},n.prototype.doBuild=function(e){var n=eo.find((function(n){return n.id===e}));if(n){var t=this.buildings.findIndex((function(n){return n.id===e}));t<0&&(t=this.buildings.length,this.buildings.push({id:e,level:0,efficiency:1,activeAmount:0}));var i=y.calcBatchAll(n.getCost,er.getInstance(),this.buildings[t].level,er.getInstance().resources.getBatchObject());i.reduce((function(e,n){return Math.min(e,Math.floor(n.max))}),1e300)<1||(this.buildings[t].level++,this.buildings[t].activeAmount++,console.log("costs: ",i),er.getInstance().resources.subtractResourceBatch(i),nr.resources.reassertBalances())}},n.prototype.getEffectGain=function(e){var n=eo.filter((function(n){var t;return!!(null===(t=n.getEffectGain)||void 0===t?void 0:t[e])})),t=[];return this.buildings.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getEffectGain[e],0,i.activeAmount)*i.efficiency;t.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),t},n.prototype.getEffectMultiplier=function(e){var n=eo.filter((function(n){var t;return!!(null===(t=n.getEffectMultiplier)||void 0===t?void 0:t[e])})),t=[];return this.buildings.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getEffectMultiplier[e],i.activeAmount,1)*i.efficiency;a&&t.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),t},n.prototype.getEffectBeingConsumed=function(e){var n=eo.filter((function(n){var t;return!!(null===(t=n.getEffectConsumption)||void 0===t?void 0:t[e])})),t=[];return this.buildings.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getEffectConsumption[e],0,i.activeAmount)*i.efficiency;t.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),t},n.prototype.getResourceBeingProduced=function(e){var n=eo.filter((function(n){return!!n.getGain[e]})),t=[];return this.buildings.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o){var r=y.calculate(nr,o.getGain[e],0,i.activeAmount)*i.efficiency;t.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),t},n.prototype.getResourceMultiplier=function(e){var n=eo.filter((function(n){var t;return!!(null===(t=n.getGainMultiplier)||void 0===t?void 0:t[e])})),t=[];return this.buildings.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getGainMultiplier[e],i.activeAmount,1)*i.efficiency;console.log("0--0",e,r.id,a),a&&t.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),t},n.prototype.getResourceBeingConsumed=function(e){var n=eo.filter((function(n){return!!n.getConsumption[e]})),t=[];return this.buildings.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o){var r=y.calculate(nr,o.getConsumption[e],0,i.activeAmount)*i.efficiency;t.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),t},n.prototype.getResourceBeingStored=function(e){var n=eo.filter((function(n){return!!n.getStorage[e]})),t=[];return this.buildings.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o){var r=y.calculate(nr,o.getStorage[e],0,i.activeAmount)*i.efficiency;t.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),t},n.prototype.getColonistsCap=function(){var e=eo.filter((function(e){return!!e.getMaxColonists})),n=[];return this.buildings.forEach((function(t){var i=e.find((function(e){return e.id===t.id}));if(i&&i.getMaxColonists){var o=y.calculate(nr,i.getMaxColonists,0,t.activeAmount)*t.efficiency;n.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),n},n.prototype.getHappinessBonus=function(){var e=eo.filter((function(e){return!!e.getHappinessBonus})),n=[];return this.buildings.forEach((function(t){var i=e.find((function(e){return e.id===t.id}));if(i&&i.getHappinessBonus){var o=y.calculate(nr,i.getHappinessBonus,0,t.activeAmount)*t.efficiency;n.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),n},n.prototype.preProcess=function(e){var n=this;this.buildings.forEach((function(e,t){n.buildings[t].efficiency=1}))},n.prototype.resetEfficiency=function(){var e=this;this.buildings.forEach((function(n,t){e.buildings[t].efficiency=1}))},n.prototype.adaptEfficiency=function(){var e=this,n=io.lackEfficiencyResources,t=Object.keys(n);this.buildings.forEach((function(i,o){var r=eo.find((function(e){return e.id===i.id}));if(r){var a=Object.keys(r.getConsumption);t.filter((function(e){return a.includes(e)})).forEach((function(t){e.buildings[o].efficiency=Math.min(e.buildings[o].efficiency,n[t]||0)}))}}))},n.prototype.process=function(e){},n}(g),uo=co.getInstance(),so=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),lo=function(e){function n(){var n=e.call(this)||this;return n.landingZoneActions=Jt,n.landingZoneUpgrades=ni,n.landingZoneBuildings=uo,n}return so(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.landingZoneActions.importData(e.actions),this.landingZoneUpgrades.importData(e.upgrades),this.landingZoneBuildings.importData(e.buildings)},n.prototype.exportData=function(){return{actions:this.landingZoneActions.exportData(),upgrades:this.landingZoneUpgrades.exportData(),buildings:this.landingZoneBuildings.exportData()}},n.prototype.dataToUI=function(){return{actions:this.landingZoneActions.dataToUI(),upgrades:this.landingZoneUpgrades.dataToUI(),buildings:this.landingZoneBuildings.dataToUI()}},n.prototype.preProcess=function(e){this.landingZoneBuildings.preProcess(e)},n.prototype.process=function(e){this.landingZoneActions.process(e),this.landingZoneBuildings.process(e)},n}(g).getInstance(),po=[],Eo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),go=function(e){function n(){var n=e.call(this)||this;return n.milestonesState=[],n}return Eo(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.milestonesState=e},n.prototype.exportData=function(){return this.milestonesState},n.prototype.dataToUI=function(){return this.milestonesState},n.prototype.milestoneUnlocked=function(e){return!!this.milestonesState.find((function(n){return n.id===e&&n.isReached}))},n.prototype.process=function(e){var n=this;po.filter((function(e){return!n.milestonesState.find((function(n){return n.id===e.id&&n.isReached}))})).forEach((function(e){e.unlockCondition(nr)&&n.milestonesState.push({id:e.id,isReached:!0})}))},n}(g).getInstance(),fo=function(e){return e.colony.getColonistsHappiness()},Ao=[{id:R.MINER,unlockCondition:function(e){return!0},name:"Miner",description:"Mines ore",getGain:(ti={},ti[r.ORE]=function(n){return{A:.5*fo(n),B:1,type:e.LINEAR}},ti[r.PLATINUM]=function(n){return{A:(n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.PLATINUM_MINING)?.01:0)*fo(n),B:1,type:e.LINEAR}},ti)},{id:R.QUARRYMAN,unlockCondition:function(e){return!0},name:"Quarrymen",description:"Mines stone",getGain:(ii={},ii[r.STONE]=function(n){return{A:.5*fo(n),B:1,type:e.LINEAR}},ii)},{id:R.SCIENTIST,unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.RESEARCH_MODULE)>0},name:"Researcher",description:"Generates research",getGain:(oi={},oi[r.RESEARCH]=function(n){return{A:.04*fo(n),B:1,type:e.LINEAR}},oi)},{id:R.FARMER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFARMING)>0},name:"Farmer",description:"Generates nutrition",getGain:(ri={},ri[r.NUTRITION]=function(n){return{A:(.15+.05*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FERTILIZING))*fo(n),B:1,type:e.LINEAR}},ri),getConsumption:(ai={},ai[r.BIOMASS]=function(n){return{A:.1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FERTILIZING),B:1,type:e.LINEAR}},ai)},{id:R.FORESTER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},name:"Forester",description:"Plants and cuts wood",getGain:(ci={},ci[r.WOOD]=function(n){return{A:.05*fo(n),B:1,type:e.LINEAR}},ci),getConsumption:(ui={},ui[r.BIOMASS]=function(n){return{A:.1*n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.FERTILIZING),B:1,type:e.LINEAR}},ui)},{id:R.ARTISAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.METALLURGY)>0},name:"Artisan",description:"Crafts various goods",getGain:{},getConsumption:{}},{id:R.POLICEMAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.PUBLIC_SERVICE)>0},name:"Policeman",description:"Provides some security",getGain:{},getConsumption:(si={},si[r.NUTRITION]=function(n){return{A:1===n.laws.getLawSelected(fn.SECURITY_DOTATIONS)?1:0,B:1,type:e.LINEAR}},si[r.WATER]=function(n){return{A:1===n.laws.getLawSelected(fn.SECURITY_DOTATIONS)?.1:0,B:1,type:e.LINEAR}},si),getEffectGain:(li={},li[I.SECURITY]=function(n){return{A:4*Math.pow(1.25,n.landingZone.landingZoneUpgrades.getUpgradeLevel(t.SURVEILLANCE_CAMERAS))*(1+.5*(1===n.laws.getLawSelected(fn.SECURITY_DOTATIONS)?1:0)),B:1,type:e.LINEAR}},li)}],Ro=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Io=function(){return Io=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Io.apply(this,arguments)},mo=function(e){function n(){var n=e.call(this)||this;return n.jobs=[],n.freeWorkers=0,n.workDispatcher.on("[colony] assign colonists",(function(e){console.log("set amount",e),n.setAmount(e.id,e.amount)})),n}return Ro(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.jobs=e},n.prototype.exportData=function(){return this.jobs},n.prototype.dataToUI=function(){var e=this;return{list:Ao.map((function(n){return e.processToUI(n)})),freeWorkers:this.freeWorkers}},n.prototype.getBusyWorkers=function(){return this.jobs.reduce((function(e,n){return e+n.amount}),0)},n.prototype.getWorkersAmount=function(e){var n;return(null===(n=this.jobs.find((function(n){return n.id===e})))||void 0===n?void 0:n.amount)||0},n.prototype.processToUI=function(e){var n=this.jobs.find((function(n){return n.id===e.id}));n||(n={id:e.id,amount:0,efficiency:1},this.jobs.push(n));var t=e.getConsumption?y.calcBatchAll(e.getConsumption,er.getInstance(),0,er.getInstance().resources.getBatchObject()):[],i=e.getGain?y.calcBatch(e.getGain,er.getInstance(),0):[],o=e.getMultiplier?y.calcBatch(e.getMultiplier,er.getInstance(),0):[];return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(nr),consume:t.filter((function(e){return e.amount})).map((function(e){return Io(Io({},e),{amount:h(e.amount)})})),gain:i.filter((function(e){return e.amount})).map((function(e){return Io(Io({},e),{amount:h(e.amount)})})),multiplier:o.filter((function(e){return e.amount})).map((function(e){return Io(Io({},e),{amount:"x".concat(h(e.amount))})})),amount:n.amount,isAvailable:this.freeWorkers>0,max:this.freeWorkers+n.amount}},n.prototype.setAmount=function(e,n){var t=this.jobs.findIndex((function(n){return n.id===e}));t<0&&(t=this.jobs.length,this.jobs.push({id:e,amount:0,efficiency:1})),this.jobs[t].amount=Math.min(Math.max(n,0),this.jobs[t].amount+this.freeWorkers),nr.resources.reassertBalances()},n.prototype.getEffectGain=function(e){var n=Ao.filter((function(n){var t;return!!(null===(t=n.getEffectGain)||void 0===t?void 0:t[e])})),t=[];return this.jobs.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getEffectGain[e],0,i.amount)*i.efficiency;t.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),t},n.prototype.getEffectMultiplier=function(e){var n=Ao.filter((function(n){var t;return!!(null===(t=n.getEffectMultiplier)||void 0===t?void 0:t[e])})),t=[];return this.jobs.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getEffectMultiplier[e],i.amount,1)*i.efficiency;a&&t.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),t},n.prototype.getEffectBeingConsumed=function(e){var n=Ao.filter((function(n){var t;return!!(null===(t=n.getEffectConsumption)||void 0===t?void 0:t[e])})),t=[];return this.jobs.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getEffectConsumption[e],0,i.amount)*i.efficiency;t.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),t},n.prototype.getResourceBeingProduced=function(e){var n=Ao.filter((function(n){return n.getGain&&!!n.getGain[e]})),t=[],i=nr.colony.getColonistsHappiness();return console.log("happ: ",i),this.jobs.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var c=y.calculate(nr,a.getGain[e],0,o.amount)*o.efficiency*i;t.push({label:"Job: ".concat(a.name),value:c,id:"job-".concat(a.id)})}}),0),t},n.prototype.getResourceBeingConsumed=function(e){var n=Ao.filter((function(n){return n.getConsumption&&!!n.getConsumption[e]})),t=[];return this.jobs.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getConsumption[e],0,i.amount)*i.efficiency;t.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),t},n.prototype.getResourceBeingMultiplied=function(e){var n=Ao.filter((function(n){return n.getMultiplier&&!!n.getMultiplier[e]})),t=[];return this.jobs.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getMultiplier)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getMultiplier[e],0,i.amount)*i.efficiency;t.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),t},n.prototype.resetEfficiency=function(){var e=this;this.jobs.forEach((function(n,t){e.jobs[t].efficiency=1}))},n.prototype.adaptEfficiency=function(){var e=this,n=io.lackEfficiencyResources,t=Object.keys(n);this.jobs.forEach((function(i,o){var r=Ao.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var a=Object.keys(r.getConsumption);t.filter((function(e){return a.includes(e)})).forEach((function(t){e.jobs[o].efficiency=Math.min(e.jobs[o].efficiency,n[t]||0)}))}}))},n.prototype.process=function(e){var n=nr.colony.colonists-this.getBusyWorkers();if(n<0){for(var t=this.jobs.length-1;t>=0;t--){var i=Math.min(this.jobs[t].amount,-n);if(this.jobs[t].amount-=i,(n+=i)>=0)break}nr.resources.reassertBalances()}this.freeWorkers=n},n}(g),Oo=mo.getInstance(),No=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),yo=function(){return yo=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},yo.apply(this,arguments)},Lo=function(e){function n(){var n=e.call(this)||this;return n.happinessEffects={},n.happinessBreakdowns={},n}return No(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){},n.prototype.exportData=function(){return[]},n.prototype.dataToUI=function(){var e=this;return{effects:O.map((function(n){return e.processToUI(n)})),happiness:this.assertHappiness()}},n.prototype.assertHappiness=function(){return Math.sqrt(Object.values(this.happinessEffects).reduce((function(e,n){return e*(n/100)}),1))},n.prototype.getEffectBeingConsumed=function(e){var n=[],t=O.find((function(n){return n.id===e}));if(null==t?void 0:t.getConsumption){var i=t.getConsumption(nr);n.push({label:"Population",value:i,id:"population"})}return n},n.prototype.getBreakdowns=function(){var e=this,n=function(e){var n,t,i,o,r,a,c,u,s,l,p,E=((n={})[I.SECURITY]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},n[I.AESTHETICS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},n[I.ENTERTAINMENT]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},n[I.HEALTHCARE]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},n[I.RELIGION]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},n[I.WORK_CONDITIONS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},n);for(var d in E)(t=E[d].linear).push.apply(t,nr.landingZone.landingZoneBuildings.getEffectGain(d)),(i=E[d].multiplier).push.apply(i,nr.landingZone.landingZoneBuildings.getEffectMultiplier(d)),null===(u=E[d].consumption)||void 0===u||u.push.apply(u,nr.landingZone.landingZoneBuildings.getEffectBeingConsumed(d)),(o=E[d].linear).push.apply(o,nr.colony.colonyJobs.getEffectGain(d)),(r=E[d].multiplier).push.apply(r,nr.colony.colonyJobs.getEffectMultiplier(d)),null===(s=E[d].consumption)||void 0===s||s.push.apply(s,nr.colony.colonyJobs.getEffectBeingConsumed(d)),null===(l=E[d].consumption)||void 0===l||l.push.apply(l,nr.colony.colonyEffects.getEffectBeingConsumed(d)),(a=E[d].linear).push.apply(a,nr.laws.getEffectGain(d)),(c=E[d].multiplier).push.apply(c,nr.laws.getEffectMultiplier(d)),null===(p=E[d].consumption)||void 0===p||p.push.apply(p,nr.laws.getEffectBeingConsumed(d));return E}(),t={};O.forEach((function(i){var o,r,a;if(i.unlockCondition(nr)){t[i.id]={income:[],multiplier:[],consumption:[]};var c=null===(o=n[i.id].linear)||void 0===o?void 0:o.reduce((function(e,n){return e+n.value}),0),u=null===(r=n[i.id].multiplier)||void 0===r?void 0:r.reduce((function(e,n){return e*n.value}),1),s=(null===(a=n[i.id].consumption)||void 0===a?void 0:a.reduce((function(e,n){return e+n.value}),0))||0;e.happinessEffects[i.id]=Math.min(i.maximum,Math.max(i.minimum,c*u-s)),t[i.id].income=n[i.id].linear.filter((function(e){return e.value})).map((function(e){return yo(yo({},e),{value:"+".concat(e.value.toPrecision(4))})})),t[i.id].multiplier=n[i.id].multiplier.filter((function(e){return 1!==e.value})).map((function(e){return yo(yo({},e),{value:"x".concat(e.value.toPrecision(4))})})),t[i.id].consumption=n[i.id].consumption.filter((function(e){return e.value})).map((function(e){return yo(yo({},e),{value:"-".concat(e.value.toPrecision(4))})}))}})),this.happinessBreakdowns=t},n.prototype.processToUI=function(e){var n,t;return e.getConsumption&&e.getConsumption(nr),{id:e.id,name:e.name,isUnlocked:e.unlockCondition(nr),amount:h(null!==(n=this.happinessEffects[e.id])&&void 0!==n?n:0),breakdown:null!==(t=this.happinessBreakdowns[e.id])&&void 0!==t?t:{income:[],multiplier:[],consumption:[]}}},n.prototype.process=function(e){this.getBreakdowns()},n}(g),ho=Lo.getInstance(),To=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Co=function(e){function n(){var n=e.call(this)||this;return n.colonists=0,n.maxColonists=0,n.colonyJobs=Oo,n.colonyEffects=ho,n}return To(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.colonists=e.colonists||0,this.colonyJobs.importData(e.jobs)},n.prototype.exportData=function(){return{jobs:this.colonyJobs.exportData(),colonists:this.colonists}},n.prototype.dataToUI=function(){return{colonists:this.colonists||0,maxColonists:this.maxColonists,isUnlocked:nr.landingZone.landingZoneUpgrades.getUpgradeLevel(t.DOCKING_MODULE)>0,jobs:this.colonyJobs.dataToUI(),effects:this.colonyEffects.dataToUI()}},n.prototype.getMaxColonists=function(){return nr.landingZone.landingZoneBuildings.getColonistsCap().reduce((function(e,n){return e+n.value}),0)},n.prototype.getColonistsHappiness=function(){return this.colonyEffects.assertHappiness()},n.prototype.missingSupply=function(){return!!this.colonists&&(null!=io.lackEfficiencyResources[r.NUTRITION]&&(io.lackEfficiencyResources[r.NUTRITION]||0)<1||null!=io.lackEfficiencyResources[r.WATER]&&(io.lackEfficiencyResources[r.WATER]||0)<1)},n.prototype.process=function(e){this.maxColonists=this.getMaxColonists(),(this.missingSupply()||this.colonists>this.maxColonists)&&(console.log("missing supply. Colonist is leaving"),this.colonists--,nr.resources.reassertBalances()),this.colonists<this.maxColonists&&Math.random()<.02&&(this.colonists++,nr.resources.reassertBalances()),this.colonyEffects.process(e),this.colonyJobs.process(e)},n}(g).getInstance(),vo=[{id:f.EXOFARMING,name:"Exo farming",description:"Learn how to work with soil on a foreign planet. Allows you hiring farmers",getCost:(pi={},pi[r.RESEARCH]=function(n){return{A:25,B:1,type:e.LINEAR}},pi),unlockCondition:function(e){return!0}},{id:f.METEOROLOGY,name:"Meteorology",description:"Learn your atmosphere closer. Unlocks new upgrades and buildings",getCost:(Ei={},Ei[r.RESEARCH]=function(n){return{A:75,B:1,type:e.LINEAR}},Ei),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.EXOFARMING)>0}},{id:f.MINERALOGY,name:"Mineralogy",description:"Learn more about minerals available at your new home",getCost:(di={},di[r.RESEARCH]=function(n){return{A:125,B:1,type:e.LINEAR}},di),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.EXOFARMING)>0}},{id:f.CIVIL_SERVICE,name:"Service Industry",description:"Unlock providing some services to your groving colony",getCost:(gi={},gi[r.RESEARCH]=function(n){return{A:225,B:1,type:e.LINEAR}},gi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.EXOFARMING)>0}},{id:f.ENGINEERING,name:"Engineering",description:"Learn engineering specific in high gravity conditions",getCost:(fi={},fi[r.RESEARCH]=function(n){return{A:200,B:1,type:e.LINEAR}},fi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.MINERALOGY)>0}},{id:f.EXOBIOLOGY,name:"Exo biology",description:"Learn more about local organisms",getCost:(Ai={},Ai[r.RESEARCH]=function(n){return{A:225,B:1,type:e.LINEAR}},Ai),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.METEOROLOGY)>0}},{id:f.METALLURGY,name:"Metallurgy",description:"Learn how to work with exotic ores. Unlocks crafting ",getCost:(Ri={},Ri[r.RESEARCH]=function(n){return{A:420,B:1,type:e.LINEAR}},Ri),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.MINERALOGY)>0}},{id:f.EXOFORESTRY,name:"Exo-forestry",description:"Lets learn how to plant something bigger in this empty grounds",getCost:(Ii={},Ii[r.RESEARCH]=function(n){return{A:375,B:1,type:e.LINEAR}},Ii),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.EXOBIOLOGY)>0}},{id:f.FLORA_RESEARCH,name:"Exo-flora",description:"Advanced flora researches unlocks new tools for you to boost agriculture",getCost:(mi={},mi[r.RESEARCH]=function(n){return{A:425,B:1,type:e.LINEAR}},mi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0}},{id:f.CHEMISTRY,name:"Chemistry",description:"Unlocks new materials and upgrades",getCost:(Oi={},Oi[r.RESEARCH]=function(n){return{A:575,B:1,type:e.LINEAR}},Oi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.FLORA_RESEARCH)>0}},{id:f.GEOLOGY,name:"Geology",description:"Further research precious minerals at your new habitat",getCost:(Ni={},Ni[r.RESEARCH]=function(n){return{A:550,B:1,type:e.LINEAR}},Ni),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.METALLURGY)>0}},{id:f.SOCIOLOGY,name:"Sociology",description:"Unlocks new ways to make your little society happier and more efficient",getCost:(yi={},yi[r.RESEARCH]=function(n){return{A:550,B:1,type:e.LINEAR}},yi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.CIVIL_SERVICE)>0}},{id:f.MATERIAL_KNOWLEDGE,name:"Material Knowledge",description:"Further advances crafting and metal processing",getCost:(Li={},Li[r.RESEARCH]=function(n){return{A:825,B:1,type:e.LINEAR}},Li),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.CHEMISTRY)>0}},{id:f.CODEX_OF_LAW,name:"Law",description:"Unlocks new aspects of your civilization development",getCost:(hi={},hi[r.RESEARCH]=function(n){return{A:1050,B:1,type:e.LINEAR}},hi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.SOCIOLOGY)>0}},{id:f.ELECTRICITY_STUDY,name:"Electricity Study",description:"Improves knowledge about conductivity of various materials",getCost:(Ti={},Ti[r.RESEARCH]=function(n){return{A:1375,B:1,type:e.LINEAR}},Ti),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.MATERIAL_KNOWLEDGE)>0}},{id:f.ORGANIC_CHEMISTRY,name:"Organic Chemistry",description:"Learn about new use of your biomass",getCost:(Ci={},Ci[r.RESEARCH]=function(n){return{A:1025,B:1,type:e.LINEAR}},Ci),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.MATERIAL_KNOWLEDGE)>0}},{id:f.ELECTRONICS,name:"Electronics",description:"Unlock electronics production",getCost:(vi={},vi[r.RESEARCH]=function(n){return{A:2e3,B:1,type:e.LINEAR}},vi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.ELECTRICITY_STUDY)>0}},{id:f.PUBLIC_SERVICE,name:"Civil Service",description:"Unlock new civil service jobs",getCost:(Bi={},Bi[r.RESEARCH]=function(n){return{A:2e3,B:1,type:e.LINEAR}},Bi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0}},{id:f.PRINTING_3D,name:"3D Printing",description:"Unlock new powerful tools to boost your civilization development",getCost:(Si={},Si[r.RESEARCH]=function(n){return{A:4e3,B:1,type:e.LINEAR}},Si),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.ELECTRONICS)>0}},{id:f.HIGH_GRAVITY_PHYSICS,name:"Advanced High Gravity Physics",description:"Learn more about surviving and creating in high gravity conditions",getCost:(Pi={},Pi[r.RESEARCH]=function(n){return{A:4e3,B:1,type:e.LINEAR}},Pi),unlockCondition:function(e){return nr.science.scienceResearches.getResearchLevel(f.ELECTRICITY_STUDY)>0}}],Bo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),So=function(e){function n(){var n=e.call(this)||this;return n.researches=[],n.freeWorkers=0,n.workDispatcher.on("[science] do research",(function(e){console.log("research",e),n.doResearch(e.id)})),n}return Bo(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.researches=e},n.prototype.exportData=function(){return this.researches},n.prototype.dataToUI=function(){var e=this;return{list:vo.map((function(n){return e.processToUI(n)}))}},n.prototype.getResearchLevel=function(e){var n;return(null===(n=this.researches.find((function(n){return n.id===e})))||void 0===n?void 0:n.amount)||0},n.prototype.processToUI=function(e){var n=this.researches.find((function(n){return n.id===e.id}));n||(n={id:e.id,amount:0},this.researches.push(n));var t=y.calcBatchAll(e.getCost,er.getInstance(),n.amount,er.getInstance().resources.getBatchObject()),i=t.reduce((function(e,n){return Math.min(e,n.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(nr),isAvailable:i>=1,cost:er.getInstance().resources.assertEnought(t,er.getInstance().resources.getBatchObject(),er.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"0",isResearched:n.amount>0}},n.prototype.doResearch=function(e){var n=this.researches.findIndex((function(n){return n.id===e}));n<0&&(n=this.researches.length,this.researches.push({id:e,amount:0}));var t=vo.find((function(n){return n.id===e}));if(t){var i=y.calcBatchAll(t.getCost,er.getInstance(),this.researches[n].amount,er.getInstance().resources.getBatchObject());i.reduce((function(e,n){return Math.min(e,Math.floor(n.max))}),1e300)<1||(er.getInstance().resources.subtractResourceBatch(i),this.researches[n].amount++,nr.resources.reassertBalances())}},n.prototype.process=function(e){},n}(g),Po=So.getInstance(),Uo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mo=function(e){function n(){var n=e.call(this)||this;return n.scienceResearches=Po,n}return Uo(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.scienceResearches.importData(e.research)},n.prototype.exportData=function(){return{research:this.scienceResearches.exportData()}},n.prototype.dataToUI=function(){return{research:this.scienceResearches.dataToUI(),isUnlocked:nr.landingZone.landingZoneUpgrades.getUpgradeLevel(t.RESEARCH_MODULE)>0}},n.prototype.process=function(e){this.scienceResearches.process(e)},n}(g).getInstance(),Go=[{id:r.BEAM,complexity:100,getConsumption:(Ui={},Ui[r.WOOD]=function(n){return{A:.25,B:1,type:e.LINEAR}},Ui),getGain:(Mi={},Mi[r.BEAM]=function(n){return{A:.01,B:1,type:e.LINEAR}},Mi)},{id:r.BRICK,complexity:100,getConsumption:(Gi={},Gi[r.STONE]=function(n){return{A:.75,B:1,type:e.LINEAR}},Gi),getGain:(_i={},_i[r.BRICK]=function(n){return{A:.01,B:1,type:e.LINEAR}},_i)},{id:r.PLATE,complexity:100,getConsumption:(bi={},bi[r.IRON]=function(n){return{A:.1,B:1,type:e.LINEAR}},bi),getGain:(Xi={},Xi[r.PLATE]=function(n){return{A:.002,B:1,type:e.LINEAR}},Xi)},{id:r.WIRE,complexity:100,getConsumption:(wi={},wi[r.IRON]=function(n){return{A:.1,B:1,type:e.LINEAR}},wi),getGain:(Di={},Di[r.WIRE]=function(n){return{A:.002,B:1,type:e.LINEAR}},Di)},{id:r.FUEL,complexity:250,getConsumption:(xi={},xi[r.BIOMASS]=function(n){return{A:.2,B:1,type:e.LINEAR}},xi[r.WATER]=function(n){return{A:.1,B:1,type:e.LINEAR}},xi),getGain:(ki={},ki[r.FUEL]=function(n){return{A:.002,B:1,type:e.LINEAR}},ki)},{id:r.RUBBER,complexity:100,getConsumption:(Zi={},Zi[r.BIOMASS]=function(n){return{A:1,B:1,type:e.LINEAR}},Zi[r.POWER]=function(n){return{A:.1,B:1,type:e.LINEAR}},Zi),getGain:(Wi={},Wi[r.RUBBER]=function(n){return{A:.008,B:1,type:e.LINEAR}},Wi)},{id:r.PLASTICS,complexity:100,getConsumption:(Hi={},Hi[r.BIOMASS]=function(n){return{A:1,B:1,type:e.LINEAR}},Hi[r.POWER]=function(n){return{A:.1,B:1,type:e.LINEAR}},Hi),getGain:(Yi={},Yi[r.PLASTICS]=function(n){return{A:.008,B:1,type:e.LINEAR}},Yi)},{id:r.SEMICONDUCTOR,complexity:100,getConsumption:(ji={},ji[r.IRON]=function(n){return{A:.02,B:1,type:e.LINEAR}},ji[r.STONE]=function(n){return{A:1,B:1,type:e.LINEAR}},ji),getGain:(Fi={},Fi[r.SEMICONDUCTOR]=function(n){return{A:.004,B:1,type:e.LINEAR}},Fi)},{id:r.COMPUTER,complexity:250,getConsumption:(Vi={},Vi[r.SEMICONDUCTOR]=function(n){return{A:.1,B:1,type:e.LINEAR}},Vi[r.PLASTICS]=function(n){return{A:.1,B:1,type:e.LINEAR}},Vi),getGain:(Ki={},Ki[r.COMPUTER]=function(n){return{A:.004,B:1,type:e.LINEAR}},Ki)}],_o=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),bo=function(){return bo=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},bo.apply(this,arguments)},Xo=function(e){function n(){var n=e.call(this)||this;return n.crafters=[],n.craftingSlots=0,n.workDispatcher.on("[crafting] assign crafter",(function(e){console.log("set amount",e),n.setAmount(e.id,e.amount)})),n}return _o(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.crafters=e},n.prototype.exportData=function(){return this.crafters},n.prototype.dataToUI=function(){var e=this;return{list:Go.map((function(n){return e.processToUI(n)})),craftingSlots:this.craftingSlots}},n.prototype.getTotalCraftingBonus=function(){return Math.pow(1.05,nr.landingZone.landingZoneUpgrades.getUpgradeLevel(t.INDUSTRY_AUTOMATION))},n.prototype.getBusyWorkers=function(){return this.crafters.reduce((function(e,n){return e+n.amount}),0)},n.prototype.getWorkersAmount=function(e){var n;return(null===(n=this.crafters.find((function(n){return n.id===e})))||void 0===n?void 0:n.amount)||0},n.prototype.processToUI=function(e){var n=this.crafters.find((function(n){return n.id===e.id}));n||(n={id:e.id,amount:0,efficiency:1},this.crafters.push(n));var t=m.find((function(n){return n.id===e.id}));if(!t)throw new Error("Invalid recipe: ".concat(e.id));var i=e.getConsumption?y.calcBatchAll(e.getConsumption,er.getInstance(),0,er.getInstance().resources.getBatchObject()):[],o=e.getGain?y.calcBatch(e.getGain,er.getInstance(),0):[];return{id:e.id,name:t.name,isUnlocked:t.unlockCondition(nr),consume:i.filter((function(e){return e.amount})).map((function(e){return bo(bo({},e),{amount:h(e.amount)})})),gain:o.filter((function(e){return e.amount})).map((function(e){return bo(bo({},e),{amount:h(e.amount)})})),amount:n.amount,isAvailable:this.craftingSlots>0,max:this.craftingSlots+n.amount}},n.prototype.setAmount=function(e,n){var t=this.crafters.findIndex((function(n){return n.id===e}));t<0&&(t=this.crafters.length,this.crafters.push({id:e,amount:0,efficiency:1})),this.crafters[t].amount=Math.min(Math.max(n,0),this.crafters[t].amount+this.craftingSlots),nr.resources.reassertBalances()},n.prototype.getResourceBeingProduced=function(e){var n=this,t=Go.filter((function(n){return n.getGain&&!!n.getGain[e]})),i=[];return this.crafters.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var c=y.calculate(nr,a.getGain[e],0,o.amount)*o.efficiency*n.getTotalCraftingBonus();i.push({label:"Crafting",value:c,id:"job-".concat(a.id)})}}),0),i},n.prototype.getResourceBeingConsumed=function(e){if(!m.find((function(n){return n.id===e})))throw new Error("Invalid resource");var n=Go.filter((function(n){return n.getConsumption&&!!n.getConsumption[e]})),t=[];return this.crafters.forEach((function(i){var o,r=n.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var a=y.calculate(nr,r.getConsumption[e],0,i.amount)*i.efficiency;t.push({label:"Crafting: ".concat(N(r.id)),value:a,id:"job-".concat(r.id)})}}),0),t},n.prototype.resetEfficiency=function(){var e=this;this.crafters.forEach((function(n,t){e.crafters[t].efficiency=1}))},n.prototype.adaptEfficiency=function(){var e=this,n=io.lackEfficiencyResources,t=Object.keys(n);this.crafters.forEach((function(i,o){var r=Go.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var a=Object.keys(r.getConsumption);t.filter((function(e){return a.includes(e)})).forEach((function(t){e.crafters[o].efficiency=Math.min(e.crafters[o].efficiency,n[t]||0)}))}}))},n.prototype.process=function(e){var n=nr.crafting.slots-this.getBusyWorkers();if(n<0){for(var t=this.crafters.length-1;t>=0;t--){var i=Math.min(this.crafters[t].amount,-n);if(this.crafters[t].amount-=i,(n+=i)>=0)break}nr.resources.reassertBalances()}this.craftingSlots=n},n}(g),wo=Xo.getInstance(),Do=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),xo=function(e){function n(){var n=e.call(this)||this;return n.slots=-1,n.craftingJobs=wo,n}return Do(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.craftingJobs.importData(e.craftmen)},n.prototype.exportData=function(){return{craftmen:this.craftingJobs.exportData()}},n.prototype.dataToUI=function(){return{maxSlots:this.slots||0,isUnlocked:nr.science.scienceResearches.getResearchLevel(f.METALLURGY)>0,jobs:this.craftingJobs.dataToUI()}},n.prototype.getCraftingSlots=function(){var e;return 0+((null===(e=nr.colony.colonyJobs.jobs.find((function(e){return e.id===R.ARTISAN})))||void 0===e?void 0:e.amount)||0)},n.prototype.process=function(e){this.slots=this.getCraftingSlots(),this.craftingJobs.process(e)},n}(g),ko=xo.getInstance();!function(e){e.RESOURCE="resource",e.UPGRADE="upgrade",e.BUILDING="building",e.RESEARCH="research",e.POPULATION="population"}(qi||(qi={}));var Zo,Wo,Ho,Yo=[{id:"start",description:"Power up",requirements:[{type:qi.RESOURCE,target:r.POWER,amount:10}]},{id:"start2",description:"Drill some stone",requirements:[{type:qi.RESOURCE,target:r.STONE,amount:1}]},{id:"repairFacilities",description:"Repair facilities",requirements:[{type:qi.UPGRADE,target:t.REPAIR_DRILL,amount:4}]},{id:"drillOre",description:"Drill ore",requirements:[{type:qi.RESOURCE,target:r.ORE,amount:1}]},{id:"furtherRepair",description:"Further facilities repair",requirements:[{type:qi.UPGRADE,target:t.REPAIR_DRILL,amount:5},{type:qi.UPGRADE,target:t.REPAIR_CABLE,amount:5}]},{id:"biomass",description:"Collect some organics",requirements:[{type:qi.UPGRADE,target:t.REPAIR_MANIPULATORS,amount:3},{type:qi.RESOURCE,target:r.BIOMASS,amount:6}]},{id:"autonomousPowerSupply",description:"Autonomous power supply",requirements:[{type:qi.UPGRADE,target:t.COMBUSTION,amount:1},{type:qi.BUILDING,target:i.THERMOELECTRIC_STATION,amount:1},{type:qi.BUILDING,target:i.BACTERIA_INCUBATOR,amount:1}]},{id:"storage",description:"Storage facilities",requirements:[{type:qi.UPGRADE,target:t.REPAIR_STORAGE_MODULE,amount:1},{type:qi.BUILDING,target:i.STORAGE,amount:1}]},{id:"powerUp2",description:"Boost power supply",requirements:[{type:qi.BUILDING,target:i.THERMOELECTRIC_STATION,amount:3},{type:qi.BUILDING,target:i.BACTERIA_INCUBATOR,amount:2}]},{id:"stoneProduction",description:"Stone production",requirements:[{type:qi.UPGRADE,target:t.AUTO_QUARRYING,amount:1},{type:qi.BUILDING,target:i.QUARRY,amount:1}]},{id:"oreProduction",description:"Ore production",requirements:[{type:qi.UPGRADE,target:t.REPAIR_MACHINERY,amount:1},{type:qi.UPGRADE,target:t.AUTO_MINERS,amount:1},{type:qi.BUILDING,target:i.MINE,amount:1}]},{id:"powerCaps",description:"Power capacity",requirements:[{type:qi.UPGRADE,target:t.REPAIR_MANIPULATORS,amount:5},{type:qi.UPGRADE,target:t.REPAIR_BATTERY,amount:2}]},{id:"organicsUtilization",description:"Organics utilization",requirements:[{type:qi.BUILDING,target:i.THERMOELECTRIC_STATION,amount:5},{type:qi.BUILDING,target:i.BACTERIA_INCUBATOR,amount:5}]},{id:"economyBoost",description:"Economy Boost",requirements:[{type:qi.BUILDING,target:i.QUARRY,amount:5},{type:qi.BUILDING,target:i.MINE,amount:5}]},{id:"moreStorage",description:"More Storage",requirements:[{type:qi.BUILDING,target:i.STORAGE,amount:4}]},{id:"breath-in",description:"Breath In",requirements:[{type:qi.BUILDING,target:i.THERMOELECTRIC_STATION,amount:10},{type:qi.UPGRADE,target:t.BIO_TECH,amount:1},{type:qi.UPGRADE,target:t.BACTERIA_SELECTION,amount:1}]},{id:"basicNeeds",description:"Basic habitability requirements",requirements:[{type:qi.BUILDING,target:i.OXYGEN_COLLECTOR,amount:1},{type:qi.BUILDING,target:i.WATER_PUMP,amount:1},{type:qi.BUILDING,target:i.WATER_STORAGE,amount:1}]},{id:"finalPreparation",description:"Final preparation",requirements:[{type:qi.UPGRADE,target:t.ELECTROLITES,amount:1},{type:qi.UPGRADE,target:t.SUPPLY_MODULE,amount:1}]},{id:"firstColonists",description:"First colonists",requirements:[{type:qi.UPGRADE,target:t.DOCKING_MODULE,amount:1},{type:qi.BUILDING,target:i.LIVING_CABIN,amount:1}]},{id:"research",description:"Scientific basics",requirements:[{type:qi.UPGRADE,target:t.RESEARCH_MODULE,amount:1},{type:qi.RESEARCH,target:f.EXOFARMING,amount:1}]},{id:"population",description:"Population",requirements:[{type:qi.POPULATION,target:f.METEOROLOGY,amount:10}]},{id:"healthcare",description:"Healthcare",requirements:[{type:qi.RESEARCH,target:f.CIVIL_SERVICE,amount:1},{type:qi.RESEARCH,target:f.EXOBIOLOGY,amount:1},{type:qi.BUILDING,target:i.CLINIC,amount:1}]},{id:"crafting",description:"Crafting",requirements:[{type:qi.RESEARCH,target:f.METALLURGY,amount:1},{type:qi.RESOURCE,target:r.BEAM,amount:20},{type:qi.RESOURCE,target:r.BRICK,amount:20}]}],jo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fo=function(e){function n(){var n=e.call(this)||this;return n.currentGoalIdx=0,n.goalsState=[],n}return jo(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.currentGoalIdx=e.currentGoalIdx||0},n.prototype.exportData=function(){return{currentGoalIdx:this.currentGoalIdx}},n.prototype.dataToUI=function(){return{index:this.currentGoalIdx,current:this.currentGoalToUI()}},n.prototype.getCurrentGoalDB=function(){var e;return null!==(e=Yo[this.currentGoalIdx])&&void 0!==e?e:{id:"complete",description:"Complete",requirements:[]}},n.prototype.getRequirementText=function(e){var n,t,i,o,r="";switch(e.type){case qi.RESOURCE:r="Resource: "+(null===(n=m.find((function(n){return n.id===e.target})))||void 0===n?void 0:n.name);break;case qi.UPGRADE:r="Upgrade: "+(null===(t=Qt.find((function(n){return n.id===e.target})))||void 0===t?void 0:t.name);break;case qi.RESEARCH:r="Research: "+(null===(i=vo.find((function(n){return n.id===e.target})))||void 0===i?void 0:i.name);break;case qi.BUILDING:r="Building: "+(null===(o=eo.find((function(n){return n.id===e.target})))||void 0===o?void 0:o.name);break;case qi.POPULATION:r="Population"}return r},n.prototype.getRequirementAmount=function(e){var n=0;switch(e.type){case qi.RESOURCE:n=nr.resources.getResource(e.target);break;case qi.UPGRADE:n=nr.landingZone.landingZoneUpgrades.getUpgradeLevel(e.target);break;case qi.RESEARCH:n=nr.science.scienceResearches.getResearchLevel(e.target);break;case qi.BUILDING:n=nr.landingZone.landingZoneBuildings.getBuildingLevel(e.target);break;case qi.POPULATION:n=nr.colony.colonists}return n},n.prototype.checkGoalStatus=function(){var e=this,n=this.getCurrentGoalDB(),t=!0;n.requirements.forEach((function(n){e.getRequirementAmount(n)<n.amount&&(t=!1)})),t&&this.currentGoalIdx<Yo.length&&this.currentGoalIdx++},n.prototype.currentGoalToUI=function(){var e=this,n=this.getCurrentGoalDB();return{id:n.id,name:n.description,requirements:n.requirements.map((function(n){var t=e.getRequirementAmount(n),i=t>=n.amount;return{actual:t,target:n.amount,isComplete:i,text:e.getRequirementText(n)}}))}},n.prototype.process=function(e){this.checkGoalStatus()},n}(g),Vo=Fo.getInstance(),Ko=[{id:fn.EXPERIMENTAL_MEDICINE,name:"Experimental medicine",description:"",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0},category:gn.SOCIAL,options:[{name:"Forbid",description:"Clinics are working in regular way, providing service using only reliable traditional medicine methods"},{name:"Allow",description:"Using experimental medicine reduces healthcare efficiency of clinics, but they now provide some max research boost"}]},{id:fn.WATER_FILTERING,name:"Water Filtering Control",description:"",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0},category:gn.SOCIAL,options:[{name:"Off",description:"Waterpumps working in regular way"},{name:"On",description:"Waterpumps consume 4 times more power. Increase healthcare by 10.",getEffectGain:(Zo={},Zo[I.HEALTHCARE]=function(e){return 10},Zo)}]},{id:fn.RESEARCH_GRANTS,name:"Research grants",description:"Setting research as priority of your civilization can boost your development, but it won't be free.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0},category:gn.SCIENCE,options:[{name:"No grants",description:"Science buildings operate as normally"},{name:"Small grants",description:"Science buildings consume 50% more electricity but provide 5% more science capacity"},{name:"Bigger grants",description:"Science buildings consume 150% more electricity but provide 10% more science capacity"}]},{id:fn.FOREST_BEHAVOUR,name:"Rules of behavior in the forest",description:"Your forest plants can be used in different modes, providing various advantages to you.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(f.EXOFORESTRY)>0},category:gn.SOCIAL,options:[{name:"Normal",description:"Forest plants operating as normal"},{name:"Nature Reserve",description:'Forest plants produce 50% of oxygen only, but provide small bonus to "Aesthetics"'},{name:"Picnic zones",description:'Forest plants produce 50% of oxygen only, but provide small bonus to "Entertainment"'}]},{id:fn.SECURITY_DOTATIONS,name:"Security dotations",description:"Your police starts consuming more resources but provide better service.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(f.PUBLIC_SERVICE)>0},category:gn.SOCIAL,options:[{name:"Off",description:"Policemen does not consume additional resources"},{name:"On",description:"Policemen consume 1 Nutrition and 0.2 water each but provides better service"}]},{id:fn.ARTIFICIAL_ORGANS,name:"Artificial organs",description:"Using 3D printers in creating or healing organs can significantly boost healthcare but religious people can suffer",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(t.ORGANISM_PRINTING)>0},category:gn.SOCIAL,options:[{name:"Forbid",description:"No effect"},{name:"Allow",description:"Increase healthcare service but decrease religious",getEffectGain:(Wo={},Wo[I.HEALTHCARE]=function(e){return 20},Wo),getEffectConsumption:(Ho={},Ho[I.RELIGION]=function(e){return 20},Ho)}]}],qo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jo=function(){return Jo=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Jo.apply(this,arguments)},Qo=function(e){function n(){var n=e.call(this)||this;return n.lawsStatuses=[],n.workDispatcher.on("[laws] set option",(function(e){console.log("change law",e),n.selectLawOption(e.id,e.optionId)})),n}return qo(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.importData=function(e){this.lawsStatuses=(null==e?void 0:e.laws)||[]},n.prototype.exportData=function(){return{laws:this.lawsStatuses}},n.prototype.dataToUI=function(){var e=this;return{laws:Ko.map((function(n){return e.processToUI(n)})),isUnlocked:nr.science.scienceResearches.getResearchLevel(f.CODEX_OF_LAW)>0}},n.prototype.getLawSelected=function(e){var n;return(null===(n=this.lawsStatuses.find((function(n){return n.id===e})))||void 0===n?void 0:n.selectedOptionId)||0},n.prototype.processToUI=function(e){var n=this.lawsStatuses.find((function(n){return n.id===e.id}));n||(n={id:e.id,selectedOptionId:0},this.lawsStatuses.push(n));var t=[];return e.options.forEach((function(e,i){var o={name:e.name,description:e.description,gain:e.getGain?y.getValue(e.getGain,er.getInstance()).filter((function(e){return e.amount})).map((function(e){return Jo(Jo({},e),{amount:h(e.amount)})})):[],max:e.getStorage?y.getValue(e.getStorage,er.getInstance()).filter((function(e){return e.amount})).map((function(e){return Jo(Jo({},e),{amount:h(e.amount)})})):[],consume:e.getConsumption?y.getValue(e.getConsumption,er.getInstance()).filter((function(e){return e.amount})).map((function(e){return Jo(Jo({},e),{amount:h(e.amount)})})):[],consumeEffect:e.getEffectConsumption?y.getValue(e.getEffectConsumption,er.getInstance()).filter((function(e){return e.amount})).map((function(e){return Jo(Jo({},e),{amount:h(e.amount)})})):[],gainEffect:e.getEffectGain?y.getValue(e.getEffectGain,er.getInstance()).filter((function(e){return e.amount})).map((function(e){return Jo(Jo({},e),{amount:h(e.amount)})})):[],gainMult:e.getGainMultiplier?y.getValue(e.getGainMultiplier,er.getInstance()).filter((function(e){return e.amount})).map((function(e){return Jo(Jo({},e),{amount:h(e.amount)})})):[],isSelected:(null==n?void 0:n.selectedOptionId)===i};t.push(o)})),{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(nr),isAvailable:!0,options:t,category:e.category}},n.prototype.getEffectGain=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getEffectGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectGain)||void 0===r?void 0:r[e])){var u=c.getEffectGain[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getEffectMultiplier=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getEffectMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectMultiplier)||void 0===r?void 0:r[e])){var u=c.getEffectMultiplier[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getEffectBeingConsumed=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getEffectConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectConsumption)||void 0===r?void 0:r[e])){var u=c.getEffectConsumption[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getResourceBeingProduced=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getGain)||void 0===r?void 0:r[e])){var u=c.getGain[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getResourceMultiplier=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getGainMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getGainMultiplier)||void 0===r?void 0:r[e])){var u=c.getGainMultiplier[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getResourceBeingConsumed=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getConsumption)||void 0===r?void 0:r[e])){var u=c.getConsumption[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getResourceBeingStored=function(e){var n=this,t=Ko.filter((function(t){var i;return!!(null===(i=t.options[n.getLawSelected(t.id)].getStorage)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a){var c=a.options[n.getLawSelected(a.id)];if(a&&(null===(r=c.getStorage)||void 0===r?void 0:r[e])){var u=c.getStorage[e](er.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},n.prototype.getColonistsCap=function(){var e=this,n=Ko.filter((function(n){return!!n.options[e.getLawSelected(n.id)].getMaxColonists})),t=[];return this.lawsStatuses.forEach((function(i){var o=n.find((function(e){return e.id===i.id}));if(o){var r=o.options[e.getLawSelected(o.id)];if(o&&r.getMaxColonists){var a=r.getMaxColonists(er.getInstance());t.push({label:"Law ".concat(o.name,": ").concat(r.name),value:a,id:"law-".concat(o.id)})}}}),0),t},n.prototype.selectLawOption=function(e,n){var t=this.lawsStatuses.findIndex((function(n){return n.id===e}));t<0?this.lawsStatuses.push({id:e,selectedOptionId:n}):this.lawsStatuses[t].selectedOptionId=n,er.getInstance().resources.reassertBalances()},n.prototype.process=function(e){},n}(g),zo=Qo.getInstance(),$o=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),er=function(e){function n(){var n=e.call(this)||this;return n.timeInGame=0,n.timeInPrestige=0,n.isFirstIter=!1,n.workDispatcher.on("initialize",(function(e){console.log("Received payload",e)})),n.workDispatcher.on("[game] load",(function(e){console.log("Received load",e),n.importData(e)})),n.workDispatcher.on("[game] export text",(function(e){console.log("Received export text",e),n.workDispatcher.output("[game] export to string",n.exportData())})),n.workDispatcher.on("[game] export file",(function(e){console.log("Received export to file",e),n.workDispatcher.output("[game] export to file",n.exportData())})),n.workDispatcher.on("[game] purchase max",(function(e){console.log("Received purchase max",e),n.purchaseMax()})),n.workDispatcher.on("[game] trigger save",(function(e){n.workDispatcher.output("[game] save",n.exportData())})),n.resources=oo,n.milestones=go,n.landingZone=lo,n.colony=Co,n.science=Mo,n.crafting=ko,n.goals=Vo,n.laws=zo,setInterval((function(){n.process(.1)}),100),setInterval((function(){n.workDispatcher.output("[game] update ui",n.dataToUI())}),200),setInterval((function(){n.workDispatcher.output("[game] save",n.exportData())}),1e4),n}return $o(n,e),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.process=function(e){this.landingZone.preProcess(1*e),this.milestones.process(1*e),this.landingZone.process(1*e),this.colony.process(1*e),this.resources.process(1*e),this.colony.process(1*e),this.science.process(1*e),this.crafting.process(1*e),this.goals.process(1*e),this.timeInPrestige+=1*e,this.timeInGame+=1*e,this.isFirstIter&&(this.isFirstIter=!1,this.resources.reassertBalances())},n.prototype.importData=function(e){this.resources.importData(e.resources),this.milestones.importData(e.milestones||[]),this.landingZone.importData(e.landingZone),this.colony.importData(e.colony),this.science.importData(e.science),this.crafting.importData(e.crafting),this.goals.importData(e.goals),this.laws.importData(e.laws),this.resources.reassertBalances(),this.timeInGame=e.timeInGame,this.timeInPrestige=e.timeInPrestige,this.isFirstIter=!0},n.prototype.exportData=function(){return{landingZone:this.landingZone.exportData(),colony:this.colony.exportData(),resources:this.resources.exportData(),milestones:this.milestones.exportData(),science:this.science.exportData(),crafting:this.crafting.exportData(),goals:this.goals.exportData(),laws:this.laws.exportData(),timeInPrestige:this.timeInPrestige,timeInGame:this.timeInGame}},n.prototype.dataToUI=function(){return{landingZone:this.landingZone.dataToUI(),colony:this.colony.dataToUI(),science:this.science.dataToUI(),crafting:this.crafting.dataToUI(),resources:this.resources.dataToUI(),laws:this.laws.dataToUI(),goals:this.goals.dataToUI(),timeInPrestige:L(this.timeInPrestige),timeInGame:L(this.timeInGame)}},n.prototype.purchaseMax=function(){},n}(g),nr=er.getInstance();self.addEventListener("message",(function(e){var n=e.data;console.log("send to worker: ",n),nr.workDispatcher.handleInput(n.type,n.payload)}))})();