(()=>{"use strict";var e,t,n,i,o,r,c,a,u,s,l,p,E,d,g,f,A=function(){function e(){this.events=[],this.events=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.on=function(e,t){this.events.push({action:e,callback:t})},e.prototype.handleInput=function(e,t){var n=this.events.find((function(t){return t.action===e}));n?n.callback(t):console.error("Unknown event: ",e)},e.prototype.output=function(e,t){postMessage({type:e,payload:t})},e}().getInstance(),R=function(){function e(){this.workDispatcher=A}return e.prototype.importData=function(e){},e.prototype.exportData=function(){return{}},e.prototype.dataToUI=function(){return{}},e.prototype.process=function(e){},e}();!function(e){e[e.POLYNOMIAL=0]="POLYNOMIAL",e[e.EXPONENTIAL=1]="EXPONENTIAL",e[e.LINEAR=2]="LINEAR"}(e||(e={})),function(e){e.CHARGE="charge",e.DRILL_ROCK="drillRock",e.DRILL_ORE="drillOre",e.COLLECT_BIOMASS="collectBiomass"}(t||(t={})),function(e){e.REPAIR_DRILL="repair-drill",e.REPAIR_CABLE="repair-cable",e.REPAIR_MANIPULATORS="repair-manipulators",e.REPAIR_MACHINERY="repair-machinery",e.AUTO_QUARRYING="autoquarrying",e.AUTO_MINERS="autominers",e.COMBUSTION="combustion",e.REPAIR_STORAGE_MODULE="storage-module",e.REPAIR_BATTERY="repair-battery",e.COMBUSTION_CAMERA="combuscion-camera",e.THERMAL_TECH="thermal-tech",e.MINE_TECH="mine-tech",e.QUARRY_TECH="quarry-tech",e.BIO_TECH="bio-tech",e.STORAGE_TECH="storage-tech",e.BACTERIA_SELECTION="bacteria-selection",e.THERMAL_TECH2="thermal-tech2",e.OXYGEN_CAMERAS="oxygen-cameras",e.RESERVE_BATTERIES="reserve-batteries",e.OXYGEN_COMPRESSORS="oxygen-compressors",e.WATER_PUMPING="water-pumping",e.ELECTROLITES="electrolites",e.SUPPLY_MODULE="supply-module",e.DOCKING_MODULE="docking-module",e.RESEARCH_MODULE="research-module",e.CARGO_SORTING="cargo-sorting",e.FARMING_TOOLS="farming-tools",e.DEEP_MINING="deep-mining",e.UNDERGROUND_VAULTS="underground-vaults",e.WATER_DRILLING="water-drill",e.FERTILIZING="fertilizing",e.FLORA="flora",e.FLAMMABILITY="flammability",e.CRANES="cranes",e.CARGO_CRANES="cargo-cranes",e.FORESTER_TOOLS="forester-tools",e.BROADLEAVED="broad-leaved",e.WOODEN_FURNITURE="furniture",e.IRON_TOOLS="iron-tools",e.IRON_PARTS="iron-parts",e.IRON_CONTAINERS="iron-containers",e.IMPROVED_WIRES="improved wires",e.REFRACTORY_MATERIALS="refractory-materials",e.METAL_WORKING="metal-working",e.CEMENT="cement",e.TREE_CARE="tree-care",e.NATURAL_ENVIRONMENT="natural-environment",e.FRUIT_TREES="fruit-trees",e.WATER_FILTERING="water-filtering",e.CHEMICAL_ANALYSIS="chemical-analysis",e.BETTER_ELECTROLITES="better-electrolites",e.HIGH_TEMPERATURE_ENGINE="high-temperature-engine",e.PLATINUM_MINING="platinum-mining",e.PLATINUM_DRILLS="platinum-drills",e.PLATINUM_TOOLS="platinum-tools",e.SOCIAL_RESEARCH_CENTER="social-research-center",e.COTTAGES="cottages",e.ENTERTAINMENT="entertainment",e.ADVANCED_METALLURGY="advanced_metallurgy",e.COMPOSITE_METALS="composite_metals",e.HEAT_INSULATING_CAMERAS="heat_insulating_cameras",e.GERMETISATION="germetisation",e.RUBBER_DETAILS="rubber_details",e.IMPROVED_WIRING="improved_wiring",e.ENERGY_SAVING="energy_saving",e.SURVEILLANCE_CAMERAS="surveillance_cameras",e.COMPUTERS="computers",e.INDUSTRY_AUTOMATION="idustrial_automation",e.BUILDING_PRINTING="building_printer",e.ORGANISM_PRINTING="organs_printing",e.BETTER_DIAGNOSTICS="better-diagnostics",e.MULTISTORE_WAREHOUSES="multistore_warehouses",e.GMO="GMO",e.LASER_CUTTING="laser-cutting",e.IMPROVED_LITHOGRAPHY="improved-lithography",e.BETTER_PHOTOELEMENTS="better-photo-elements",e.GREAT_RADIO_TRANSMITTER="great_radio_transmitter",e.FLIGHT_TECHNOLOGY="flight-technology",e.FASTER_ROCKETS="faster-rockets",e.CONDUCTIVE_NANOPARTICLES="conductive-nanoparticles",e.NANO_BOTS="nano_bots",e.TELESCOPE="telescope"}(n||(n={})),function(e){e.QUARRY="quarry",e.MINE="mine",e.BACTERIA_INCUBATOR="bacteria-incubator",e.THERMOELECTRIC_STATION="thermo-electric-station",e.STORAGE="storage-section",e.STORAGE_HUB="storage-hub",e.OXYGEN_COLLECTOR="oxygen-collector",e.WATER_PUMP="water-pump",e.WATER_STORAGE="water-storage",e.BATTERY="battery",e.LIVING_CABIN="living-cabin",e.METEO_STATION="meteo-station",e.MONUMENT="monument",e.CLINIC="clinic",e.PARK="park",e.BIO_LAB="bio-lab",e.FOREST_PLANT="forest-plant",e.SMELTER="smelter",e.WAREHOUSE="warehouse",e.TANK="tank",e.COTTAGE="cottage",e.CINEMA="cinema",e.SOCIAL_RESEARCH_CENTER="social_research_center",e.METALLURGY_COMPLEX="metallurgy_complex",e.BUILDING_FACTORY="building_factory",e.STORAGE_CONTAINER="storage_container",e.SOLAR_PANEL="solar-panel",e.SHRINE="shrine",e.DATA_CENTER="data-center",e.APARTMENT="apartment",e.PANDEMIC_RESEARCH_CENTER="pandemic-research-center",e.ELECTRONICS_FACTORY="electronics-factory",e.TEMPLE="temple",e.ADMINISTRATIVE_CENTER="administrative_center",e.SOLAR_SATELLITE="solar-satellite",e.ORBITAL_TOURISM_CENTER="orbital-tourism-center",e.ICE_MELTING_STATION="ice-melting-station",e.FUEL_FACTORY="fuel-factory",e.NANOBOTS_FACTORY="nanobots-factory"}(i||(i={})),function(e){e.POWER="Power",e.INDUSTRIAL="Industrial",e.STORAGE="Storage",e.SCIENCE="Science",e.MILITARY="Military",e.PUBLIC="Public",e.RESIDENTAL="Residental"}(o||(o={})),function(e){e.ORBIT="Orbit",e.MOON="Moon"}(r||(r={})),function(e){e.STONE="stone",e.POWER="power",e.ORE="ore",e.BIOMASS="biomass",e.OXYGEN="oxygen",e.NUTRITION="nutrition",e.WATER="water",e.RESEARCH="research",e.WOOD="wood",e.IRON="iron",e.PLATINUM="platinum",e.BEAM="beam",e.BRICK="brick",e.PLATE="plate",e.WIRE="wire",e.FUEL="fuel",e.RUBBER="rubber",e.PLASTICS="plastics",e.SEMICONDUCTOR="semiconductor",e.COMPUTER="computer",e.ROCKET_ENGINE="rocket-engine",e.KNOWLEDGE_POINT="knowledge-point"}(c||(c={})),function(e){e.DRONE_MASTERITY="Drone Masterity",e.REPAIRED_SOLAR_PANEL="Drone Solar Panel",e.POWER_MASTERITY="Power Masterity",e.MINING_MASTERITY="Mining Masterity",e.NATURE_MASTERITY="Nature Masterity",e.GAS_MASTERITY="Gas And Liquids",e.BUILDING_MASTERITY="Building Masterity",e.ELECTRONICS_MASTERITY="Electronics Masterity",e.ROCKET_MASTERITY="Rocket Masterity",e.SCIENCE_MASTERITY="Science Masterity",e.MATERIALS_CAPACITY="Materials Capacity",e.LIQUIDS_CAPACITY="Liquids Capacity",e.RESEARCH_CAPACITY="Research Capacity",e.AESTHETICS_CONSUMPTION="Aesthetics Consumption",e.HEALTH_CONSUMPTION="Health Consumption",e.ENTERTAINMENT_CONSUMPTION="Entertainment Consumption",e.RELIGION_CONSUMPTION="Religion Consumption",e.SECURITY_CONSUMPTION="Security Consumption"}(a||(a={})),function(e){e.START="Start",e.MASTERITIES="Production",e.CAPACITY="Capacity",e.COLONY="Colony"}(u||(u={}));var I,N=[{id:t.CHARGE,name:"Charge",description:"Recover your energy power",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:{},getGain:(s={},s[c.POWER]=function(t){return{A:(1+.6*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_CABLE))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(a.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},s)},{id:t.DRILL_ROCK,name:"Drill rock",description:"Drill rock at cost of some energy",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:(l={},l[c.POWER]=function(t){return{A:1,B:1,type:e.EXPONENTIAL}},l),getGain:(p={},p[c.STONE]=function(t){return{A:(.25+.125*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(a.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},p)},{id:t.DRILL_ORE,name:"Drill ore",description:"Drill ore at cost of some energy",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL)>3},availableCondition:function(e){return!0},getCost:(E={},E[c.POWER]=function(t){return{A:2,B:1,type:e.EXPONENTIAL}},E),getGain:(d={},d[c.ORE]=function(t){return{A:(.2+.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(a.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},d)},{id:t.COLLECT_BIOMASS,name:"Collect Biomass",description:"Dig and get some organics",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>0},availableCondition:function(e){return!0},getCost:(g={},g[c.POWER]=function(t){return{A:4,B:1,type:e.EXPONENTIAL}},g),getGain:(f={},f[c.BIOMASS]=function(t){return{A:(.2+.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(a.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},f)}];!function(e){e.EXOFARMING="exofarming",e.METEOROLOGY="meteorology",e.MINERALOGY="mineralogy",e.CIVIL_SERVICE="civilservice",e.ENGINEERING="engineering",e.EXOBIOLOGY="exobiology",e.METALLURGY="metallurgy",e.EXOFORESTRY="exo-forestry",e.FLORA_RESEARCH="flora-research",e.CHEMISTRY="chemistry",e.SOCIOLOGY="sociology",e.GEOLOGY="geology",e.MATERIAL_KNOWLEDGE="material_knowledge",e.ORGANIC_CHEMISTRY="organic_chemistry",e.CODEX_OF_LAW="codex_of_law",e.ELECTRICITY_STUDY="electricity_study",e.ELECTRONICS="electronics",e.PUBLIC_SERVICE="public_service",e.PRINTING_3D="printing_3d",e.GENETICS="genetics",e.HIGH_GRAVITY_PHYSICS="high_gravity_physics",e.ADVANCED_ANATOMY="advanced_anatomy",e.ROCKET_SCIENCE="rocket-science",e.GRAVITY_THEORY="gravity-theory",e.ADVANCED_BIOLOGY="advanced-biology",e.RADIATION_STUDY="radiation-study",e.QUANTUM_PHYSICS="quantum-physics",e.NANO_PHYSICS="nano-physics",e.ASTROPHYSICS="astrophysics"}(I||(I={}));var O,m,y=[{id:c.POWER,name:"Power",unlockCondition:function(e){return!0},hasCapacityLimit:!0},{id:c.WATER,name:"Water",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},hasCapacityLimit:!0},{id:c.NUTRITION,name:"Nutrition",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SUPPLY_MODULE)>0},hasCapacityLimit:!0},{id:c.OXYGEN,name:"Oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},hasCapacityLimit:!0},{id:c.WOOD,name:"Wood",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},hasCapacityLimit:!0},{id:c.STONE,name:"Stone",unlockCondition:function(e){return!0},hasCapacityLimit:!0},{id:c.ORE,name:"Ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL)>3},hasCapacityLimit:!0},{id:c.IRON,name:"Metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!0},{id:c.PLATINUM,name:"Platinum",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GEOLOGY)>0},hasCapacityLimit:!0},{id:c.BIOMASS,name:"Biomass",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>0},hasCapacityLimit:!0},{id:c.RESEARCH,name:"Research",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0},hasCapacityLimit:!0},{id:c.BEAM,name:"Beam",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.BRICK,name:"Brick",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.PLATE,name:"Plate",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.FUEL,name:"Fuel",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.RUBBER,name:"Rubber",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.PLASTICS,name:"Plastics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.WIRE,name:"Wire",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.SEMICONDUCTOR,name:"Semiconduct.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.COMPUTER,name:"Computer.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMPUTERS)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.ROCKET_ENGINE,name:"Rocket",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},hasCapacityLimit:!1,isCraftable:!0},{id:c.KNOWLEDGE_POINT,name:"Knowledge Point",unlockCondition:function(e){return!0},hasCapacityLimit:!1,isHidden:!0}];!function(e){e.QUARRYMAN="quarryman",e.MINER="miner",e.SCIENTIST="scientist",e.FARMER="farmer",e.FORESTER="forester",e.ARTISAN="artisan",e.POLICEMAN="policeman"}(O||(O={})),function(e){e.AESTHETICS="AESTHETICS",e.ENTERTAINMENT="ENTERTAINMENT",e.SECURITY="SECURITY",e.HEALTHCARE="HEALTHCARE",e.RELIGION="RELIGION",e.WORK_CONDITIONS="WORK_CONDITIONS"}(m||(m={}));var L=[{id:m.ENTERTAINMENT,name:"Entertainment",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max(2*(e.colony.colonists-10)-4*e.prestige.transmitKnowledge.getUpgradeLevel(a.ENTERTAINMENT_CONSUMPTION),0)}},{id:m.HEALTHCARE,name:"Healthcare",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max((2*(e.colony.colonists-10)-4*e.prestige.transmitKnowledge.getUpgradeLevel(a.HEALTH_CONSUMPTION))*Math.pow(.95,e.landingZone.landingZoneBuildings.getBuildingLevel(i.PANDEMIC_RESEARCH_CENTER)),0)}},{id:m.AESTHETICS,name:"Aesthetics",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>0},getConsumption:function(e){return Math.max(2*e.colony.colonists-4*e.prestige.transmitKnowledge.getUpgradeLevel(a.AESTHETICS_CONSUMPTION),0)}},{id:m.SECURITY,name:"Security",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40)-4*e.prestige.transmitKnowledge.getUpgradeLevel(a.SECURITY_CONSUMPTION),0)}},{id:m.RELIGION,name:"Religion",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40)-4*e.prestige.transmitKnowledge.getUpgradeLevel(a.RELIGION_CONSUMPTION),0)}}],T=function(e){var t,n;return(null===(t=y.find((function(t){return t.id===e})))||void 0===t?void 0:t.name)||(null===(n=L.find((function(t){return t.id===e})))||void 0===n?void 0:n.name)||e},C=function(){function t(){}return t.calculate=function(e,n,i,o){void 0===o&&(o=1);var r=n(e);return t.calculateFormulaBatch(r,i,o)},t.calculateFormula=function(n,i){switch(n.type){case e.EXPONENTIAL:return t.calculateExponential(n,i);case e.POLYNOMIAL:return t.calculatePolynomial(n,i);case e.LINEAR:return t.calculateLinear(n,i);default:return 0}},t.calculateExponential=function(e,t){return e.A*Math.pow(e.B,t)},t.calculatePolynomial=function(e,t){return e.A*Math.pow(t,e.B)},t.calculateLinear=function(e,t){return e.A*t+e.B},t.calculateFormulaBatch=function(n,i,o){switch(n.type){case e.EXPONENTIAL:return t.calculateExponentialBatch(n,i,o);case e.POLYNOMIAL:return t.calculatePolynomialBatch(n,i,o);case e.LINEAR:return t.calculateLinearBatch(n,i,o);default:return 0}},t.calculateExponentialBatch=function(e,t,n){return 1===e.B?e.A*n:e.A*Math.pow(e.B,t)*(Math.pow(e.B,n)-1)/(e.B-1)},t.calculatePolynomialBatch=function(e,t,n){return console.error("Polynomial batch is not implemented"),0},t.calculateLinearBatch=function(e,t,n){return e.A*n+e.B},t.calculateDX=function(e,n,i,o){var r=n(e);return t.calculateDXByFormula(r,i,o)},t.calculateDXByFormula=function(n,i,o){switch(n.type){case e.EXPONENTIAL:return t.calculateDXExponential(n,i,o);case e.POLYNOMIAL:return t.calculateDXPolynomial(n,i,o);case e.LINEAR:return t.calculateDXLinear(n,i,o);default:return 0}},t.calculateDXExponential=function(e,t,n){return 0===e.A?1e300:1===e.B?n/e.A:n?Math.log(n*(e.B-1)/(e.A*Math.pow(e.B,t))+1)/Math.log(e.B):0},t.calculateDXPolynomial=function(e,t,n){return console.error("Polynomial dX is not implemented"),0},t.calculateDXLinear=function(e,t,n){return(n-e.B)/e.A},t.calcBatch=function(e,n,i,o){void 0===o&&(o=1);var r=[];return Object.entries(e).forEach((function(e){var c=e[0],a=e[1];r.push({id:c,name:T(c),amount:t.calculate(n,a,i,o)})})),r},t.calcDXBatch=function(e,n,i,o){var r={};return Object.entries(e).forEach((function(e){var c=e[0],a=e[1];r[c]=t.calculateDX(n,a,i,o[c])})),r},t.calcBatchAll=function(e,n,i,o,r){void 0===r&&(r=1);var c=[];return Object.entries(e).forEach((function(e){var a=e[0],u=e[1],s=t.calculateDX(n,u,i,o[a]),l=t.calculate(n,u,i,r),p=0;if(s<1){var E=n.resources.getResourceCap(a);p=E&&E<l||n.resources.getResourceBalance(a)<0&&l-(o[a]||0)>0?1e300:(l-(o[a]||0))/(n.resources.getResourceBalance(a)||1e-300)}c.push({id:a,name:T(a),amount:l,max:s,eta:p})})),c},t.getValue=function(e,t){var n=[];return Object.entries(e).forEach((function(e){var i=e[0],o=e[1];n.push({id:i,name:T(i),amount:o(t)})})),n},t}();function h(e){if(e>1e12)return"Never";if(!e||e<0)return"00:00:00";e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(t>9?"".concat(t,":"):"0".concat(t,":"))+(n>9?"".concat(n,":"):"0".concat(n,":"))+(i>9?"".concat(i):"0".concat(i))}function v(e,t,n){if(void 0===t&&(t=3),void 0===n&&(n=12),Math.abs(e)>Math.pow(10,n))return e.toExponential(t);if(Math.abs(e)<1e-4)return"0.00";if(Math.abs(e)<1)return e.toFixed(t);var i=Math.abs(e),o=Math.log10(i),r=Math.floor(o/3),c=i/Math.pow(10,3*r),a="";switch(r){case 1:a="K";break;case 1:a="M";break;case 1:a="B";break;case 1:a="T";break;default:a=""}return"".concat((Math.sign(e)*c).toPrecision(t)).concat(a)}var B,S,P,M,U,_,G,b,X,w,D,k,x,H,W,Y,Z,j,F,K,V,q,Q,J,z,$,ee,te,ne,ie,oe,re,ce,ae,ue,se,le,pe,Ee,de,ge,fe,Ae,Re,Ie,Ne,Oe,me,ye,Le,Te,Ce,he,ve,Be,Se,Pe,Me,Ue,_e,Ge,be,Xe,we,De,ke,xe,He,We,Ye,Ze,je,Fe,Ke,Ve,qe,Qe,Je,ze,$e,et,tt,nt,it,ot,rt,ct,at,ut,st,lt,pt,Et,dt,gt,ft,At,Rt,It,Nt,Ot,mt,yt,Lt,Tt,Ct,ht,vt,Bt,St,Pt,Mt,Ut,_t,Gt,bt,Xt,wt,Dt,kt,xt,Ht,Wt,Yt,Zt,jt,Ft,Kt,Vt,qt,Qt,Jt,zt,$t,en,tn,nn,on,rn,cn,an,un,sn,ln,pn,En,dn,gn,fn,An,Rn,In,Nn,On,mn,yn,Ln,Tn,Cn,hn,vn,Bn,Sn,Pn,Mn,Un,_n,Gn,bn,Xn,wn,Dn,kn,xn,Hn,Wn,Yn,Zn,jn,Fn,Kn,Vn,qn,Qn,Jn,zn,$n,ei,ti,ni,ii,oi,ri,ci,ai,ui,si,li,pi,Ei,di,gi,fi,Ai,Ri,Ii,Ni,Oi,mi,yi,Li,Ti,Ci,hi,vi,Bi,Si,Pi,Mi,Ui,_i=(B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},B(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Gi=function(){return Gi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gi.apply(this,arguments)},bi=function(e){function t(){var t=e.call(this)||this;return t.actions=[],t.workDispatcher.on("[landing-zone] do action",(function(e){console.log("do action",e),t.doAction(e.id)})),t}return _i(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.actions=e},t.prototype.exportData=function(){return this.actions},t.prototype.dataToUI=function(){var e=this;return{list:N.map((function(t){return e.processToUI(t)}))}},t.prototype.processToUI=function(e){var t=this.actions.find((function(t){return t.id===e.id}));t||(t={id:e.id,cooldown:0,progress:0,performed:0},this.actions.push(t));var n=C.calcBatchAll(e.getCost,_c.getInstance(),0,_c.getInstance().resources.getBatchObject()),i=C.calcBatch(e.getGain,_c.getInstance(),0),o=n.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:e.availableCondition(Gc)&&o>=1,cost:_c.getInstance().resources.assertEnought(n,_c.getInstance().resources.getBatchObject(),_c.getInstance().resources.getBatchBalanceObject()),gain:i.map((function(e){return Gi(Gi({},e),{amount:v(e.amount)})})),progress:(t.cooldown?100*t.progress/t.cooldown:0).toPrecision(3)}},t.prototype.doAction=function(e){var t=N.find((function(t){return t.id===e}));if(t){var n=this.actions.findIndex((function(t){return t.id===e}));if(n<0)n=this.actions.length,this.actions.push({id:e,cooldown:0,progress:0,performed:0});else if(this.actions[n].cooldown>0)return;var i=C.calcBatchAll(t.getCost,_c.getInstance(),0,_c.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.actions[n].cooldown=1.5,this.actions[n].performed++,console.log("costs: ",i),_c.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.getActionPerformed=function(e){var t;return(null===(t=this.actions.find((function(t){return t.id===e})))||void 0===t?void 0:t.performed)||0},t.prototype.process=function(e){this.actions.forEach((function(t,n){if(t.cooldown&&(t.progress+=e,t.progress>=t.cooldown)){t.cooldown=0,t.progress=0;var i=N.find((function(e){return t.id===e.id}));if(!i)return;var o=C.calcBatch(i.getGain,_c.getInstance(),0);console.log("gain: ",o,Gc.resources.resourcesStatus),o.forEach((function(e){Gc.resources.addResource(e.id,e.amount)})),Gc.resources.reassertBalances()}}))},t.prototype.reset=function(){this.actions=[]},t}(R),Xi=bi.getInstance(),wi=[{id:n.REPAIR_DRILL,name:"Repair Drill",description:"Allows drilling harder materials. Also improve stone output",unlockCondition:function(e){return!0},getCost:(S={},S[c.POWER]=function(t){return{A:2,B:1.3,type:e.EXPONENTIAL}},S[c.STONE]=function(t){return{A:.5,B:1.3,type:e.EXPONENTIAL}},S),maxLevel:8},{id:n.REPAIR_CABLE,name:"Repair Charging Cable",description:"Improves Charge Output",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(P={},P[c.POWER]=function(t){return{A:3,B:1.3,type:e.EXPONENTIAL}},P[c.ORE]=function(t){return{A:1,B:1.3,type:e.EXPONENTIAL}},P),maxLevel:5},{id:n.REPAIR_MANIPULATORS,name:"Repair Manipulators",description:"Allows digging and picking more materials",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(M={},M[c.POWER]=function(t){return{A:5,B:1.3,type:e.EXPONENTIAL}},M[c.ORE]=function(t){return{A:2,B:1.3,type:e.EXPONENTIAL}},M),maxLevel:5},{id:n.AUTO_QUARRYING,name:"Auto-quarrying",description:"Allows building quarry",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(U={},U[c.POWER]=function(t){return{A:8,B:1.3,type:e.EXPONENTIAL}},U[c.ORE]=function(t){return{A:4,B:1.3,type:e.EXPONENTIAL}},U),maxLevel:1},{id:n.REPAIR_MACHINERY,name:"Repair machinery",description:"Repair machinery. Improves your automatic quarries and mines by 50%",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_QUARRYING)>0},getCost:(_={},_[c.POWER]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},_[c.ORE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},_),maxLevel:4},{id:n.AUTO_MINERS,name:"Auto-miners",description:"Allows building mine",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY)>0},getCost:(G={},G[c.POWER]=function(t){return{A:8,B:1.3,type:e.EXPONENTIAL}},G[c.ORE]=function(t){return{A:4,B:1.3,type:e.EXPONENTIAL}},G),maxLevel:1},{id:n.COMBUSTION,name:"Combustion",description:"Allows creating electricity power by burning biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.COLLECT_BIOMASS)>0},getCost:(b={},b[c.POWER]=function(t){return{A:12,B:1.3,type:e.EXPONENTIAL}},b[c.BIOMASS]=function(t){return{A:6,B:1.3,type:e.EXPONENTIAL}},b),maxLevel:1},{id:n.REPAIR_STORAGE_MODULE,name:"Repair storage module",description:"Repair storage module. Allows building storage sections",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>2},getCost:(X={},X[c.POWER]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},X[c.ORE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},X),maxLevel:1},{id:n.REPAIR_BATTERY,name:"Repair battery",description:"Improves energy storage by 20",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>4&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(w={},w[c.POWER]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},w[c.ORE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},w),getCapacityEffect:(D={},D[c.POWER]=function(t){return{A:20,B:0,type:e.LINEAR}},D),maxLevel:3},{id:n.COMBUSTION_CAMERA,name:"Combustion cameras",description:"Decrease biomass consumption by thermoelectric power plants by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(k={},k[c.POWER]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},k[c.STONE]=function(t){return{A:18,B:1.5,type:e.EXPONENTIAL}},k),maxLevel:1},{id:n.QUARRY_TECH,name:"Quarry technology",description:"Increase quarries output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.QUARRY)>4},getCost:(x={},x[c.STONE]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},x[c.ORE]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},x),maxLevel:1},{id:n.MINE_TECH,name:"Mine technology",description:"Increase mine output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.MINE)>4},getCost:(H={},H[c.ORE]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},H[c.POWER]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},H),maxLevel:1},{id:n.THERMAL_TECH,name:"Combustion technology",description:"Increase thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>4},getCost:(W={},W[c.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},W[c.BIOMASS]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},W),maxLevel:1},{id:n.BIO_TECH,name:"Bio technology",description:"Increase incubators output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.BACTERIA_INCUBATOR)>4},getCost:(Y={},Y[c.BIOMASS]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Y[c.STONE]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},Y),maxLevel:1},{id:n.STORAGE_TECH,name:"Storage technology",description:"Increase stone, ore and biomass storage from storage section and hub by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>4},getCost:(Z={},Z[c.STONE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z[c.ORE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z),getCapacityMultiplier:(j={},j[c.STONE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},j[c.ORE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},j[c.BIOMASS]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},j),maxLevel:1},{id:n.BACTERIA_SELECTION,name:"Bacteria selection",description:"Increase electricity consumption by incubators, but incubators start producing oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BIO_TECH)>0},getCost:(F={},F[c.POWER]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},F[c.BIOMASS]=function(t){return{A:90,B:1.5,type:e.EXPONENTIAL}},F),maxLevel:1},{id:n.THERMAL_TECH2,name:"Improved thermal plants",description:"Increase thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>9},getCost:(K={},K[c.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},K[c.BIOMASS]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},K),maxLevel:1},{id:n.OXYGEN_CAMERAS,name:"Oxidase burning cameras",description:"Thermal plants are 50% more efficient, but now consume oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},getCost:(V={},V[c.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},V[c.OXYGEN]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},V),maxLevel:1},{id:n.OXYGEN_COMPRESSORS,name:"Oxygen compressors",description:"Allow building oxygen compressors to store more oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},getCost:(q={},q[c.POWER]=function(t){return{A:65,B:1.5,type:e.EXPONENTIAL}},q[c.ORE]=function(t){return{A:165,B:1.5,type:e.EXPONENTIAL}},q[c.OXYGEN]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},q),maxLevel:1},{id:n.RESERVE_BATTERIES,name:"Reserve batteries",description:"Thermoelectric plants now also provide small power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS)>0},getCost:(Q={},Q[c.POWER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Q[c.OXYGEN]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},Q[c.ORE]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Q),maxLevel:1},{id:n.WATER_PUMPING,name:"Water pumping",description:"Allow building water pumping stations",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS)>0},getCost:(J={},J[c.POWER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},J[c.STONE]=function(t){return{A:165,B:1.5,type:e.EXPONENTIAL}},J[c.ORE]=function(t){return{A:175,B:1.5,type:e.EXPONENTIAL}},J),maxLevel:1},{id:n.ELECTROLITES,name:"Electrolytes",description:"Allows building battery. Also, improves power output by 20%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0},getCost:(z={},z[c.POWER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},z[c.WATER]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},z[c.ORE]=function(t){return{A:225,B:1.5,type:e.EXPONENTIAL}},z),getGain:{},getGainMultiplier:($={},$[c.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},$),getCapacityEffect:(ee={},ee[c.NUTRITION]=function(t){return{A:40,B:0,type:e.LINEAR}},ee),maxLevel:1},{id:n.SUPPLY_MODULE,name:"Repair supply module",description:"Start generating trace amount of nutrition",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ELECTROLITES)>0},getCost:(te={},te[c.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},te[c.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},te[c.ORE]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},te),getGain:(ne={},ne[c.NUTRITION]=function(t){return{A:.2,B:0,type:e.LINEAR}},ne),getCapacityEffect:(ie={},ie[c.NUTRITION]=function(t){return{A:40,B:0,type:e.LINEAR}},ie),maxLevel:1},{id:n.DOCKING_MODULE,name:"Repair docking module",description:"Enables colonists arrival",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SUPPLY_MODULE)>0},getCost:(oe={},oe[c.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},oe[c.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},oe[c.ORE]=function(t){return{A:360,B:1.5,type:e.EXPONENTIAL}},oe),getGain:{},getCapacityEffect:{},maxLevel:1},{id:n.RESEARCH_MODULE,name:"Repair research module",description:"Repair research module to enable researchers working at it and produce some science.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(re={},re[c.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},re[c.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},re[c.OXYGEN]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},re),getGain:{},getCapacityEffect:(ce={},ce[c.RESEARCH]=function(t){return{A:100,B:0,type:e.LINEAR}},ce),maxLevel:1},{id:n.CARGO_SORTING,name:"Cargo Sorting",description:"Repair sorting machinery. Gives 75% bonus to stone, ore and biomass storage.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(ae={},ae[c.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},ae[c.STONE]=function(t){return{A:340,B:1.5,type:e.EXPONENTIAL}},ae[c.ORE]=function(t){return{A:340,B:1.5,type:e.EXPONENTIAL}},ae),getGain:{},getCapacityMultiplier:(ue={},ue[c.STONE]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue[c.ORE]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue[c.BIOMASS]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue),maxLevel:1},{id:n.FARMING_TOOLS,name:"Farming tools",description:"Improves farming output by 10%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0},getCost:(se={},se[c.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},se[c.RESEARCH]=function(t){return{A:35,B:1.5,type:e.EXPONENTIAL}},se[c.ORE]=function(t){return{A:400,B:1.5,type:e.EXPONENTIAL}},se),getGain:{},getGainMultiplier:(le={},le[c.NUTRITION]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},le),maxLevel:3},{id:n.DEEP_MINING,name:"Deep mining",description:"Improves stone and ore output by 20%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(pe={},pe[c.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},pe[c.RESEARCH]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},pe[c.ORE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},pe),getGain:{},getGainMultiplier:(Ee={},Ee[c.ORE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ee[c.STONE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ee),maxLevel:3},{id:n.UNDERGROUND_VAULTS,name:"Underground vaults",description:"Improves your stone, ore and biomass storage facilities by 50%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(de={},de[c.POWER]=function(t){return{A:250,B:1.75,type:e.EXPONENTIAL}},de[c.RESEARCH]=function(t){return{A:25,B:1.75,type:e.EXPONENTIAL}},de[c.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},de),getGain:{},getCapacityMultiplier:(ge={},ge[c.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[c.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[c.BIOMASS]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[c.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[c.IRON]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[c.PLATINUM]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge),maxLevel:3},{id:n.CARGO_CRANES,name:"Cargo cranes",description:"Improves your storage facilities by 25%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ENGINEERING)>0},getCost:(fe={},fe[c.POWER]=function(t){return{A:250,B:1.75,type:e.EXPONENTIAL}},fe[c.RESEARCH]=function(t){return{A:35,B:1.75,type:e.EXPONENTIAL}},fe[c.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},fe),getGain:{},getCapacityMultiplier:(Ae={},Ae[c.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ae[c.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ae),maxLevel:1},{id:n.CRANES,name:"Building cranes",description:"Decrease building level prices scaling by 10%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ENGINEERING)>0},getCost:(Re={},Re[c.POWER]=function(t){return{A:350,B:1.75,type:e.EXPONENTIAL}},Re[c.RESEARCH]=function(t){return{A:35,B:1.75,type:e.EXPONENTIAL}},Re[c.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},Re),getGain:{},getCapacityMultiplier:{},maxLevel:1},{id:n.WATER_DRILLING,name:"Water deposits",description:"Improves water output by 20%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(Ie={},Ie[c.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ie[c.RESEARCH]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Ie[c.ORE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Ie),getGain:{},getGainMultiplier:(Ne={},Ne[c.WATER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ne),maxLevel:3},{id:n.FLAMMABILITY,name:"Flammable Biomass",description:"Special flammable biomass produces more heat, increasing power generation.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(Oe={},Oe[c.POWER]=function(t){return{A:370,B:1.5,type:e.EXPONENTIAL}},Oe[c.RESEARCH]=function(t){return{A:95,B:1.5,type:e.EXPONENTIAL}},Oe[c.BIOMASS]=function(t){return{A:325,B:1.5,type:e.EXPONENTIAL}},Oe),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FLORA,name:"Nutritious Flora",description:"Place some special flora to your incubators to make them 50% more productive.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(me={},me[c.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},me[c.RESEARCH]=function(t){return{A:195,B:1.5,type:e.EXPONENTIAL}},me[c.BIOMASS]=function(t){return{A:525,B:1.5,type:e.EXPONENTIAL}},me),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FERTILIZING,name:"Fertilizing",description:"Your farmers start consume biomass, but increase nutrition output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(ye={},ye[c.POWER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},ye[c.RESEARCH]=function(t){return{A:245,B:1.5,type:e.EXPONENTIAL}},ye[c.BIOMASS]=function(t){return{A:1225,B:1.5,type:e.EXPONENTIAL}},ye),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FORESTER_TOOLS,name:"Forester tools",description:"Increases wood output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Le={},Le[c.POWER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},Le[c.RESEARCH]=function(t){return{A:200,B:1.5,type:e.EXPONENTIAL}},Le[c.WOOD]=function(t){return{A:30,B:1.5,type:e.EXPONENTIAL}},Le),getGain:{},getGainMultiplier:(Te={},Te[c.WOOD]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Te),maxLevel:1},{id:n.BROADLEAVED,name:"Broadleaved forests",description:"Allows planting forests generating oxygen.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Ce={},Ce[c.POWER]=function(t){return{A:880,B:1.5,type:e.EXPONENTIAL}},Ce[c.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},Ce[c.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ce),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.WOODEN_FURNITURE,name:"Wooden furniture",description:"Using wood in your living cabins allows them now contain one more colonist.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(he={},he[c.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},he[c.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},he[c.WOOD]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},he),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.IRON_TOOLS,name:"Metal tools",description:"Improves wood output by foresters.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0&&e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(ve={},ve[c.IRON]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},ve[c.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ve[c.WOOD]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ve),getGain:{},getGainMultiplier:(Be={},Be[c.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Be),maxLevel:1},{id:n.IRON_PARTS,name:"Metal machine parts",description:"Improves stone and ore output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Se={},Se[c.IRON]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Se[c.RESEARCH]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},Se[c.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Se),getGain:{},getGainMultiplier:(Pe={},Pe[c.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Pe[c.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Pe),maxLevel:1},{id:n.IRON_CONTAINERS,name:"Metal containers",description:"Improves all resources storages.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Me={},Me[c.IRON]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Me[c.RESEARCH]=function(t){return{A:175,B:1.5,type:e.EXPONENTIAL}},Me[c.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Me),getGain:{},getCapacityMultiplier:(Ue={},Ue[c.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.BIOMASS]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.IRON]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.WATER]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.OXYGEN]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue[c.PLATINUM]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ue),maxLevel:1},{id:n.IMPROVED_WIRES,name:"Better cables",description:"Improves your power capacity and output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(_e={},_e[c.IRON]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},_e[c.RESEARCH]=function(t){return{A:375,B:1.5,type:e.EXPONENTIAL}},_e[c.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},_e),getGain:{},getGainMultiplier:(Ge={},Ge[c.POWER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Ge),getCapacityMultiplier:(be={},be[c.POWER]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},be),maxLevel:1},{id:n.TREE_CARE,name:"Tree care",description:"Improves foresters output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(Xe={},Xe[c.WATER]=function(t){return{A:150,B:1.5,type:e.EXPONENTIAL}},Xe[c.RESEARCH]=function(t){return{A:375,B:1.5,type:e.EXPONENTIAL}},Xe[c.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Xe),getGain:{},getGainMultiplier:(we={},we[c.WOOD]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},we),getCapacityMultiplier:{},maxLevel:3},{id:n.FRUIT_TREES,name:"Fruit trees",description:"Tree plants also provide nutrition.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(De={},De[c.WATER]=function(t){return{A:150,B:1.5,type:e.EXPONENTIAL}},De[c.RESEARCH]=function(t){return{A:325,B:1.5,type:e.EXPONENTIAL}},De[c.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},De),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.NATURAL_ENVIRONMENT,name:"Natural Environment",description:"Forest plants now boost biomass production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(ke={},ke[c.WATER]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ke[c.RESEARCH]=function(t){return{A:475,B:1.5,type:e.EXPONENTIAL}},ke[c.BIOMASS]=function(t){return{A:2500,B:1.5,type:e.EXPONENTIAL}},ke),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.WATER_FILTERING,name:"Advanced water filtering",description:"Improves water output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(xe={},xe[c.OXYGEN]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},xe[c.RESEARCH]=function(t){return{A:225,B:1.5,type:e.EXPONENTIAL}},xe[c.POWER]=function(t){return{A:900,B:1.5,type:e.EXPONENTIAL}},xe),getGain:{},getGainMultiplier:(He={},He[c.WATER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},He),getCapacityMultiplier:{},maxLevel:3},{id:n.CHEMICAL_ANALYSIS,name:"Chemical analysis",description:"Improves science output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(We={},We[c.WATER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},We[c.RESEARCH]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},We[c.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},We),getGain:{},getGainMultiplier:(Ye={},Ye[c.RESEARCH]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Ye),getCapacityMultiplier:{},maxLevel:3},{id:n.BETTER_ELECTROLITES,name:"Improved electrolytes",description:"Improves power capacity.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(Ze={},Ze[c.WATER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Ze[c.RESEARCH]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ze[c.OXYGEN]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},Ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:(je={},je[c.POWER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},je),maxLevel:5},{id:n.PLATINUM_MINING,name:"Platinum mining",description:"Miners can now mine platinum.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GEOLOGY)>0},getCost:(Fe={},Fe[c.IRON]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Fe[c.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Fe[c.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Fe),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.PLATINUM_DRILLS,name:"Platinum drills",description:"Improves stone and ore output.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)>0},getCost:(Ke={},Ke[c.PLATINUM]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},Ke[c.RESEARCH]=function(t){return{A:420,B:1.5,type:e.EXPONENTIAL}},Ke[c.POWER]=function(t){return{A:775,B:1.5,type:e.EXPONENTIAL}},Ke),getGain:{},getGainMultiplier:(Ve={},Ve[c.STONE]=function(t){return{A:1,B:1.4,type:e.EXPONENTIAL}},Ve[c.ORE]=function(t){return{A:1,B:1.4,type:e.EXPONENTIAL}},Ve),getCapacityMultiplier:{},maxLevel:1},{id:n.PLATINUM_TOOLS,name:"Platinum tools",description:"Platinum tools provides additional production boost to your wood and crafting beams, plates and bricks",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)>0},getCost:(qe={},qe[c.PLATINUM]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},qe[c.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},qe[c.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},qe),getGain:{},getGainMultiplier:(Qe={},Qe[c.WOOD]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe[c.BEAM]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe[c.BRICK]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe[c.PLATE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe),getCapacityMultiplier:{},maxLevel:5},{id:n.COTTAGES,name:"Cottages",description:"Allow building cottages.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:(Je={},Je[c.BRICK]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Je[c.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Je[c.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Je),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ENTERTAINMENT,name:"Entertainment",description:"Mood of society research allowed better understanding of human needs, unlocking new ways to boost their happiness.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:(ze={},ze[c.RESEARCH]=function(t){return{A:420,B:1.5,type:e.EXPONENTIAL}},ze[c.POWER]=function(t){return{A:775,B:1.5,type:e.EXPONENTIAL}},ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.SOCIAL_RESEARCH_CENTER,name:"Social research center",description:"Unlocks new scientific building",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:($e={},$e[c.PLATE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},$e[c.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},$e[c.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},$e),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ADVANCED_METALLURGY,name:"Advanced metallurgy",description:"Increase smelter output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(et={},et[c.IRON]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},et[c.RESEARCH]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},et[c.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},et),getGain:{},getGainMultiplier:(tt={},tt[c.IRON]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},tt),getCapacityMultiplier:{},maxLevel:10},{id:n.HEAT_INSULATING_CAMERAS,name:"Heat Insulating Cameras",description:"Improves thermal plant efficiency by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(nt={},nt[c.ORE]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},nt[c.STONE]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},nt[c.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},nt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.COMPOSITE_METALS,name:"Composite metals",description:"Using composite metals allows to increase metal crafting output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(it={},it[c.IRON]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},it[c.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},it[c.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},it),getGain:{},getGainMultiplier:(ot={},ot[c.PLATE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},ot[c.WIRE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},ot),getCapacityMultiplier:{},maxLevel:3},{id:n.IMPROVED_WIRING,name:"Upgrade wiring",description:"Further increase power supply",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(rt={},rt[c.PLATINUM]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},rt[c.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},rt[c.WIRE]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},rt),getGain:{},getGainMultiplier:(ct={},ct[c.POWER]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},ct),getCapacityMultiplier:{},maxLevel:10},{id:n.ENERGY_SAVING,name:"Energy Saving",description:"Significantly reduces building power cost",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(at={},at[c.PLATINUM]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},at[c.RESEARCH]=function(t){return{A:1250,B:1.5,type:e.EXPONENTIAL}},at[c.WIRE]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},at),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.GERMETISATION,name:"Sealing",description:"Allows you building containers that providing boost to your storage capacity",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},getCost:(ut={},ut[c.RUBBER]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},ut[c.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},ut[c.POWER]=function(t){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},ut),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.RUBBER_DETAILS,name:"Rubber Details",description:"Using new materials further decreasing building costs scale",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},getCost:(st={},st[c.RUBBER]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},st[c.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},st[c.POWER]=function(t){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},st),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.SURVEILLANCE_CAMERAS,name:"Surveillance Cameras",description:"Increase policemen efficiency by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0&&e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(lt={},lt[c.PLASTICS]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},lt[c.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},lt[c.SEMICONDUCTOR]=function(t){return{A:20,B:1.5,type:e.EXPONENTIAL}},lt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.COMPUTERS,name:"Computers",description:"Unlocks computers crafting and building data-centers",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(pt={},pt[c.PLASTICS]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},pt[c.RESEARCH]=function(t){return{A:1500,B:1.5,type:e.EXPONENTIAL}},pt[c.SEMICONDUCTOR]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},pt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.INDUSTRY_AUTOMATION,name:"Industry Automation",description:"Gain 5% bonus to all crafting activities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(Et={},Et[c.WIRE]=function(t){return{A:145,B:1.5,type:e.EXPONENTIAL}},Et[c.RESEARCH]=function(t){return{A:1600,B:1.5,type:e.EXPONENTIAL}},Et[c.SEMICONDUCTOR]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},Et),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:5},{id:n.BUILDING_PRINTING,name:"3D Printers construction",description:"Further decrease building cost",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PRINTING_3D)>0},getCost:(dt={},dt[c.COMPUTER]=function(t){return{A:65,B:1.5,type:e.EXPONENTIAL}},dt[c.RESEARCH]=function(t){return{A:4600,B:1.5,type:e.EXPONENTIAL}},dt[c.RUBBER]=function(t){return{A:280,B:1.5,type:e.EXPONENTIAL}},dt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ORGANISM_PRINTING,name:"Organs printing",description:"Unlocks new medicine mode order",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PRINTING_3D)>0},getCost:(gt={},gt[c.COMPUTER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},gt[c.RESEARCH]=function(t){return{A:4600,B:1.5,type:e.EXPONENTIAL}},gt[c.WIRE]=function(t){return{A:280,B:1.5,type:e.EXPONENTIAL}},gt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.BETTER_DIAGNOSTICS,name:"Improve Health Diagnostics",description:"Using computers for better diagnostics can significantly improve healthcare. Each level increase clinics efficiency by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0&&e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(ft={},ft[c.RESEARCH]=function(t){return{A:1300,B:1.5,type:e.EXPONENTIAL}},ft[c.COMPUTER]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},ft),getGainMultiplier:{},maxLevel:5},{id:n.MULTISTORE_WAREHOUSES,name:"Multistore Warehouses",description:"Your warehouses can now store twice as much goods",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(At={},At[c.PLATE]=function(t){return{A:400,B:1.5,type:e.EXPONENTIAL}},At[c.RESEARCH]=function(t){return{A:7025,B:1.5,type:e.EXPONENTIAL}},At[c.WIRE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},At),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.GMO,name:"GMO",description:"Genetic modification of organisms can help boost nutrition and biomass production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0},getCost:(Rt={},Rt[c.RESEARCH]=function(t){return{A:2500,B:1.5,type:e.EXPONENTIAL}},Rt[c.BIOMASS]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},Rt),getGainMultiplier:(It={},It[c.BIOMASS]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},It[c.NUTRITION]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},It),maxLevel:5},{id:n.LASER_CUTTING,name:"Laser Cutting",description:"Laser Cutting of metal parts significantly simplifies plates and wires production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(Nt={},Nt[c.RESEARCH]=function(t){return{A:4500,B:1.5,type:e.EXPONENTIAL}},Nt[c.POWER]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},Nt),getGainMultiplier:(Ot={},Ot[c.PLATE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ot[c.WIRE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ot),maxLevel:3},{id:n.BETTER_PHOTOELEMENTS,name:"Better Photo-elements",description:"Boosts your solar satellites and solar panels output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(mt={},mt[c.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},mt[c.POWER]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},mt),getGainMultiplier:{},maxLevel:1},{id:n.IMPROVED_LITHOGRAPHY,name:"Improved Lithography",description:"Boosts computers production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(yt={},yt[c.RESEARCH]=function(t){return{A:4500,B:1.5,type:e.EXPONENTIAL}},yt[c.SEMICONDUCTOR]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},yt),getGainMultiplier:(Lt={},Lt[c.COMPUTER]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Lt),maxLevel:3},{id:n.GREAT_RADIO_TRANSMITTER,name:"Great Radio Transmitter",description:"Allows you to pass signals to other civilizations. Unlocks first prestige level",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(Tt={},Tt[c.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},Tt[c.COMPUTER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Tt[c.PLATINUM]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Tt),getGainMultiplier:{},maxLevel:1},{id:n.FLIGHT_TECHNOLOGY,name:"Rocket Flight Technology",description:"Allows using more saving rocket engine techs, which reduces rockets consumption by 20% for all space structures and ships",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Ct={},Ct[c.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},Ct[c.ROCKET_ENGINE]=function(t){return{A:20,B:1.5,type:e.EXPONENTIAL}},Ct[c.FUEL]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ct),getGainMultiplier:{},maxLevel:1},{id:n.FASTER_ROCKETS,name:"Faster Rockets",description:"Reducing time of flight allows to make your space tourism 50% more efficient",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(ht={},ht[c.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},ht[c.ROCKET_ENGINE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},ht[c.COMPUTER]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},ht),getGainMultiplier:{},maxLevel:1},{id:n.CONDUCTIVE_NANOPARTICLES,name:"Conductive nano-particles",description:"Improves your batteries and accumulators",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0},getCost:(vt={},vt[c.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},vt[c.WATER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},vt[c.WIRE]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},vt),getGainMultiplier:{},getCapacityMultiplier:(Bt={},Bt[c.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Bt),maxLevel:3},{id:n.NANO_BOTS,name:"Nanobots",description:"Unlocks building nanobots factory on your satellite that provides bonus to all crafting activities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0},getCost:(St={},St[c.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},St[c.COMPUTER]=function(t){return{A:60,B:1.5,type:e.EXPONENTIAL}},St[c.WIRE]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},St),getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1}],Di=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ki=function(){return ki=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ki.apply(this,arguments)},xi=function(e){function t(){var t=e.call(this)||this;return t.upgrades=[],t.workDispatcher.on("[landing-zone] do upgrade",(function(e){console.log("do upgrade",e),t.doUpgrade(e.id)})),t}return Di(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.upgrades=e},t.prototype.exportData=function(){return this.upgrades},t.prototype.dataToUI=function(){var e=this;return{list:wi.map((function(t){return e.processToUI(t)}))}},t.prototype.getUpgradeLevel=function(e){var t;return(null===(t=this.upgrades.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.upgrades.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0},this.upgrades.push(t));var n=C.calcBatchAll(e.getCost,_c.getInstance(),t.level,_c.getInstance().resources.getBatchObject()),i=e.getCapacityEffect?C.calcBatch(e.getCapacityEffect,_c.getInstance(),0):[],o=e.getCapacityMultiplier?C.calcBatch(e.getCapacityMultiplier,_c.getInstance(),t.level+1):[],r=e.getGain?C.calcBatch(e.getGain,_c.getInstance(),0):[],c=e.getGainMultiplier?C.calcBatch(e.getGainMultiplier,_c.getInstance(),t.level+1):[],a=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:a>=1,cost:_c.getInstance().resources.assertEnought(n,_c.getInstance().resources.getBatchObject(),_c.getInstance().resources.getBatchBalanceObject()),max:i.map((function(e){return ki(ki({},e),{amount:v(e.amount)})})),maxMult:o.map((function(e){return ki(ki({},e),{amount:"x".concat(v(e.amount))})})),consume:[],gain:r.map((function(e){return ki(ki({},e),{amount:v(e.amount)})})),gainMult:c.map((function(e){return ki(ki({},e),{amount:"x".concat(v(e.amount))})})),progress:a<1?(100*a).toPrecision(3):"0",isMaxedOut:!!e.maxLevel&&e.maxLevel<=t.level,maxLevel:e.maxLevel,level:t.level}},t.prototype.doUpgrade=function(e){var t=wi.find((function(t){return t.id===e}));if(t){var n=this.upgrades.findIndex((function(t){return t.id===e}));if(n<0)n=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(t.maxLevel&&this.upgrades[n].level>=t.maxLevel)return;var i=C.calcBatchAll(t.getCost,_c.getInstance(),this.upgrades[n].level,_c.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.upgrades[n].level++,console.log("costs: ",i),_c.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.getGain=function(e){var t=wi.filter((function(t){var n;return!!(null===(n=t.getGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getGain){var r=C.calculate(Gc,o.getGain[e],0,i.level);n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getGainMultiplier=function(e){var t=wi.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getGainMultiplier){var r=C.calculate(Gc,o.getGainMultiplier[e],i.level,1);r&&n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getCapacity=function(e){var t=wi.filter((function(t){var n;return!!(null===(n=t.getCapacityEffect)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityEffect){var r=C.calculate(Gc,o.getCapacityEffect[e],0,i.level);n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getCapacityMult=function(e){var t=wi.filter((function(t){var n;return!!(null===(n=t.getCapacityMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var r=C.calculate(Gc,o.getCapacityMultiplier[e],i.level,1);e===c.ORE&&console.log("NAIOB: ",r,i),r&&n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.process=function(e){},t.prototype.reset=function(){this.upgrades=[]},t}(R),Hi=xi.getInstance();!function(e){e.SCIENCE="Science",e.ECONOMY="Economy",e.SOCIAL="Social"}(Pt||(Pt={})),function(e){e.EXPERIMENTAL_MEDICINE="experimental_medicine",e.WATER_FILTERING="water_filtering",e.RESEARCH_GRANTS="research_grants",e.INDUSTRIALIZATION="industrialization",e.FOREST_BEHAVOUR="forest_behavour",e.SECURITY_DOTATIONS="security_dotations",e.ARTIFICIAL_ORGANS="artificial_organs"}(Mt||(Mt={}));var Wi,Yi,Zi,ji,Fi,Ki,Vi,qi,Qi,Ji,zi,$i,eo,to,no,io,oo,ro,co,ao,uo,so,lo,po,Eo,go,fo,Ao,Ro,Io,No,Oo,mo,yo,Lo,To,Co,ho,vo,Bo,So,Po,Mo,Uo,_o,Go,bo,Xo,wo,Do,ko,xo,Ho,Wo,Yo,Zo,jo,Fo,Ko=function(e){return Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.CRANES))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RUBBER_DETAILS))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BUILDING_PRINTING))},Vo=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENERGY_SAVING))},qo=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLIGHT_TECHNOLOGY))},Qo=function(e){switch(e.laws.getLawSelected(Mt.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.05;case 2:return 1.1}return 1},Jo=function(e){switch(e.laws.getLawSelected(Mt.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.5;case 2:return 2.5}return 1},zo=[{id:i.QUARRY,name:"Quarry",category:o.INDUSTRIAL,description:"Automatically collect some stone",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_QUARRYING)>0},getCost:(Ut={},Ut[c.ORE]=function(t){return{A:1,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ut[c.STONE]=function(t){return{A:2.5,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ut),getConsumption:(_t={},_t[c.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},_t),getGain:(Gt={},Gt[c.STONE]=function(t){return{A:(.06+.03*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.QUARRY_TECH)),B:0,type:e.LINEAR}},Gt),getStorage:{}},{id:i.MINE,name:"Mine",category:o.INDUSTRIAL,description:"Automatically collect some ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_MINERS)>0},getCost:(bt={},bt[c.ORE]=function(t){return{A:5,B:1+.3*Ko(t),type:e.EXPONENTIAL}},bt[c.STONE]=function(t){return{A:4.5,B:1+.3*Ko(t),type:e.EXPONENTIAL}},bt),getConsumption:(Xt={},Xt[c.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},Xt),getGain:(wt={},wt[c.ORE]=function(t){return{A:(.06+.03*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MINE_TECH)),B:0,type:e.LINEAR}},wt),getStorage:{}},{id:i.BACTERIA_INCUBATOR,category:o.INDUSTRIAL,name:"Bacteria Incubator",description:"Automatically collect some biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.COLLECT_BIOMASS)>0},getCost:(Dt={},Dt[c.BIOMASS]=function(t){return{A:3,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Dt[c.STONE]=function(t){return{A:4.5,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Dt),getConsumption:(kt={},kt[c.POWER]=function(t){return{A:.06*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)),B:0,type:e.LINEAR}},kt),getGain:(xt={},xt[c.BIOMASS]=function(t){return{A:(.04+.02*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BIO_TECH))*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLORA)),B:0,type:e.LINEAR}},xt[c.OXYGEN]=function(t){return{A:.01*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLORA)),B:0,type:e.LINEAR}},xt),getStorage:{}},{id:i.THERMOELECTRIC_STATION,category:o.POWER,name:"Thermoelectric Power plant",description:"Burns biomass to obtain electricity",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMBUSTION)>0},getCost:(Ht={},Ht[c.ORE]=function(t){return{A:6,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ht[c.STONE]=function(t){return{A:7,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ht),getConsumption:(Wt={},Wt[c.BIOMASS]=function(t){return{A:.03*Math.pow(.75,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMBUSTION_CAMERA)),B:0,type:e.LINEAR}},Wt[c.OXYGEN]=function(t){return{A:.006*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS),B:0,type:e.LINEAR}},Wt),getGain:(Yt={},Yt[c.POWER]=function(t){return{A:.09*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.THERMAL_TECH))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.THERMAL_TECH2))*(1+.75*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS))*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLAMMABILITY))*(1+.2*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.HEAT_INSULATING_CAMERAS)),B:0,type:e.LINEAR}},Yt),getStorage:(Zt={},Zt[c.POWER]=function(t){return{A:4*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESERVE_BATTERIES),B:0,type:e.LINEAR}},Zt)},{id:i.STORAGE,name:"Storage section",category:o.STORAGE,description:"Provides additional storage space",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(jt={},jt[c.ORE]=function(t){return{A:10,B:1+.5*Ko(t),type:e.EXPONENTIAL}},jt[c.STONE]=function(t){return{A:10,B:1+.5*Ko(t),type:e.EXPONENTIAL}},jt),getConsumption:{},getGain:{},getStorage:(Ft={},Ft[c.STONE]=function(t){return{A:10,B:0,type:e.LINEAR}},Ft[c.ORE]=function(t){return{A:10,B:0,type:e.LINEAR}},Ft[c.BIOMASS]=function(t){return{A:10,B:0,type:e.LINEAR}},Ft[c.IRON]=function(t){return{A:3,B:0,type:e.LINEAR}},Ft[c.WOOD]=function(t){return{A:10,B:0,type:e.LINEAR}},Ft)},{id:i.STORAGE_HUB,name:"Storage hub",category:o.STORAGE,description:"Provides more storage space, but consumes power",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>3},getCost:(Kt={},Kt[c.POWER]=function(t){return{A:30,B:1+.75*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Kt[c.ORE]=function(t){return{A:50,B:1+.75*Ko(t),type:e.EXPONENTIAL}},Kt[c.STONE]=function(t){return{A:50,B:1+.75*Ko(t),type:e.EXPONENTIAL}},Kt),getConsumption:(Vt={},Vt[c.POWER]=function(t){return{A:.15,B:0,type:e.LINEAR}},Vt),getGain:{},getStorage:(qt={},qt[c.STONE]=function(t){return{A:50,B:0,type:e.LINEAR}},qt[c.ORE]=function(t){return{A:50,B:0,type:e.LINEAR}},qt[c.BIOMASS]=function(t){return{A:50,B:0,type:e.LINEAR}},qt[c.IRON]=function(t){return{A:15,B:0,type:e.LINEAR}},qt[c.WOOD]=function(t){return{A:50,B:0,type:e.LINEAR}},qt)},{id:i.OXYGEN_COLLECTOR,name:"Oxygen compressor",category:o.STORAGE,description:"Provides more storage for oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_COMPRESSORS)>0},getCost:(Qt={},Qt[c.POWER]=function(t){return{A:50,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Qt[c.ORE]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Qt[c.STONE]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Qt),getConsumption:(Jt={},Jt[c.POWER]=function(t){return{A:.4,B:0,type:e.LINEAR}},Jt),getGain:{},getStorage:(zt={},zt[c.OXYGEN]=function(t){return{A:20,B:0,type:e.LINEAR}},zt)},{id:i.WATER_PUMP,name:"Water pump",category:o.INDUSTRIAL,description:"Provides water supply",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},getCost:($t={},$t[c.POWER]=function(t){return{A:75,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},$t[c.OXYGEN]=function(t){return{A:12,B:1+.5*Ko(t),type:e.EXPONENTIAL}},$t[c.STONE]=function(t){return{A:120,B:1+.5*Ko(t),type:e.EXPONENTIAL}},$t[c.ORE]=function(t){return{A:85,B:1+.5*Ko(t),type:e.EXPONENTIAL}},$t),getConsumption:(en={},en[c.POWER]=function(t){return{A:.3+(1===t.laws.getLawSelected(Mt.WATER_FILTERING)?.9:0),B:0,type:e.LINEAR}},en),getGain:(tn={},tn[c.WATER]=function(t){return{A:.03,B:0,type:e.LINEAR}},tn),getStorage:(nn={},nn[c.WATER]=function(t){return{A:1,B:0,type:e.LINEAR}},nn)},{id:i.WATER_STORAGE,name:"Water storage",category:o.STORAGE,description:"Provides water storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},getCost:(on={},on[c.POWER]=function(t){return{A:70,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},on[c.ORE]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},on[c.STONE]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},on),getConsumption:(rn={},rn[c.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},rn),getGain:{},getStorage:(cn={},cn[c.WATER]=function(t){return{A:15,B:0,type:e.LINEAR}},cn)},{id:i.BATTERY,name:"Battery",category:o.POWER,description:"Provides power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ELECTROLITES)>0},getCost:(an={},an[c.POWER]=function(t){return{A:20,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},an[c.ORE]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},an[c.WATER]=function(t){return{A:5,B:1+.5*Ko(t),type:e.EXPONENTIAL}},an),getConsumption:{},getGain:{},getStorage:(un={},un[c.POWER]=function(t){return{A:80,B:0,type:e.LINEAR}},un)},{id:i.LIVING_CABIN,name:"Living Cabin",category:o.RESIDENTAL,description:"Provides living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(sn={},sn[c.POWER]=function(t){return{A:120,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},sn[c.STONE]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},sn[c.ORE]=function(t){return{A:80,B:1+.5*Ko(t),type:e.EXPONENTIAL}},sn),getConsumption:{},getGain:{},getStorage:{},getMaxColonists:function(t){return{A:2+t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WOODEN_FURNITURE),B:0,type:e.LINEAR}}},{id:i.METEO_STATION,name:"Meteorology Station",category:o.SCIENCE,description:"Provides 25 science storage and boost science output by 2% multiplicative",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0},getCost:(ln={},ln[c.POWER]=function(t){return{A:80,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},ln[c.STONE]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},ln[c.ORE]=function(t){return{A:125,B:1+.5*Ko(t),type:e.EXPONENTIAL}},ln),getConsumption:{},getGain:{},getStorage:(pn={},pn[c.RESEARCH]=function(t){return{A:25,B:0,type:e.LINEAR}},pn),getGainMultiplier:(En={},En[c.RESEARCH]=function(t){return{A:1,B:1.02,type:e.EXPONENTIAL}},En)},{id:i.MONUMENT,name:"Monument",category:o.PUBLIC,description:"Provides some aesthetics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0},getCost:(dn={},dn[c.POWER]=function(t){return{A:50,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},dn[c.STONE]=function(t){return{A:820,B:1+.5*Ko(t),type:e.EXPONENTIAL}},dn[c.ORE]=function(t){return{A:480,B:1+.5*Ko(t),type:e.EXPONENTIAL}},dn),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(gn={},gn[m.AESTHETICS]=function(t){return{A:2,B:0,type:e.LINEAR}},gn)},{id:i.CLINIC,name:"Clinic",category:o.PUBLIC,description:"Provides basic healthcare service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(fn={},fn[c.POWER]=function(t){return{A:250,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},fn[c.STONE]=function(t){return{A:820,B:1+.5*Ko(t),type:e.EXPONENTIAL}},fn[c.ORE]=function(t){return{A:680,B:1+.5*Ko(t),type:e.EXPONENTIAL}},fn),getConsumption:(An={},An[c.POWER]=function(t){return{A:.3,B:0,type:e.LINEAR}},An),getGain:{},getStorage:(Rn={},Rn[c.RESEARCH]=function(t){return{A:1===t.laws.getLawSelected(Mt.EXPERIMENTAL_MEDICINE)?50:0,B:0,type:e.LINEAR}},Rn),getEffectGain:(In={},In[m.HEALTHCARE]=function(t){return{A:10*(1===t.laws.getLawSelected(Mt.EXPERIMENTAL_MEDICINE)?.5:1)*Math.pow(1.05,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_DIAGNOSTICS)),B:0,type:e.LINEAR}},In)},{id:i.PARK,name:"Park zone",category:o.PUBLIC,description:"Parking zone provides basic possibility to relax for your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Nn={},Nn[c.POWER]=function(t){return{A:150,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Nn[c.STONE]=function(t){return{A:120,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Nn[c.WOOD]=function(t){return{A:80,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Nn),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(On={},On[m.AESTHETICS]=function(t){return{A:5,B:0,type:e.LINEAR}},On[m.ENTERTAINMENT]=function(t){return{A:2,B:0,type:e.LINEAR}},On)},{id:i.BIO_LAB,category:o.SCIENCE,name:"Bio laboratory",description:"Provides even more science storage and boost science output by 5% multiplicative",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(mn={},mn[c.POWER]=function(t){return{A:120,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},mn[c.STONE]=function(t){return{A:1275,B:1+.5*Ko(t),type:e.EXPONENTIAL}},mn[c.ORE]=function(t){return{A:725,B:1+.5*Ko(t),type:e.EXPONENTIAL}},mn),getConsumption:(yn={},yn[c.POWER]=function(t){return{A:.75*Jo(t),B:0,type:e.LINEAR}},yn[c.BIOMASS]=function(t){return{A:.4,B:0,type:e.LINEAR}},yn),getGain:{},getStorage:(Ln={},Ln[c.RESEARCH]=function(t){return{A:50*Qo(t),B:0,type:e.LINEAR}},Ln),getGainMultiplier:(Tn={},Tn[c.RESEARCH]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},Tn)},{id:i.FOREST_PLANT,name:"Forest Plant",category:o.INDUSTRIAL,description:"Generates oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BROADLEAVED)>0},getCost:(Cn={},Cn[c.WOOD]=function(t){return{A:20,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Cn[c.STONE]=function(t){return{A:2.5,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Cn),getConsumption:(hn={},hn[c.WATER]=function(t){return{A:.01,B:0,type:e.LINEAR}},hn),getGain:(vn={},vn[c.OXYGEN]=function(t){return{A:.06*(0===t.laws.getLawSelected(Mt.FOREST_BEHAVOUR)?1:.5),B:0,type:e.LINEAR}},vn[c.NUTRITION]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FRUIT_TREES),B:0,type:e.LINEAR}},vn),getGainMultiplier:(Bn={},Bn[c.BIOMASS]=function(t){return{A:t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.NATURAL_ENVIRONMENT),B:1.02,type:e.EXPONENTIAL}},Bn),getStorage:{},getEffectGain:(Sn={},Sn[m.AESTHETICS]=function(t){return{A:1===t.laws.getLawSelected(Mt.FOREST_BEHAVOUR)?2:0,B:0,type:e.LINEAR}},Sn[m.ENTERTAINMENT]=function(t){return{A:2===t.laws.getLawSelected(Mt.FOREST_BEHAVOUR)?2:0,B:0,type:e.LINEAR}},Sn)},{id:i.SMELTER,name:"Smelter",category:o.INDUSTRIAL,description:"Converts ore and wood into rolled metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Pn={},Pn[c.ORE]=function(t){return{A:600,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Pn[c.STONE]=function(t){return{A:1250,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Pn),getConsumption:(Mn={},Mn[c.WOOD]=function(t){return{A:.3,B:0,type:e.LINEAR}},Mn[c.ORE]=function(t){return{A:.5,B:0,type:e.LINEAR}},Mn),getGain:(Un={},Un[c.IRON]=function(t){return{A:.02,B:0,type:e.LINEAR}},Un),getStorage:{}},{id:i.WAREHOUSE,name:"Warehouse",category:o.STORAGE,description:"Provides more raw materials storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(_n={},_n[c.POWER]=function(t){return{A:30,B:1+.25*Ko(t)*Vo(t),type:e.EXPONENTIAL}},_n[c.BEAM]=function(t){return{A:2,B:1+.25*Ko(t),type:e.EXPONENTIAL}},_n[c.BRICK]=function(t){return{A:4,B:1+.25*Ko(t),type:e.EXPONENTIAL}},_n),getConsumption:(Gn={},Gn[c.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Gn),getGain:{},getStorage:(bn={},bn[c.STONE]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},bn[c.ORE]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},bn[c.BIOMASS]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},bn[c.IRON]=function(t){return{A:10*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},bn[c.WOOD]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},bn[c.PLATINUM]=function(t){return{A:5*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},bn)},{id:i.TANK,name:"Tank",category:o.STORAGE,description:"Provides oxygen and water storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Xn={},Xn[c.POWER]=function(t){return{A:30,B:1+.25*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Xn[c.PLATE]=function(t){return{A:2,B:1+.25*Ko(t),type:e.EXPONENTIAL}},Xn[c.BRICK]=function(t){return{A:5,B:1+.25*Ko(t),type:e.EXPONENTIAL}},Xn),getConsumption:{},getGain:{},getStorage:(wn={},wn[c.OXYGEN]=function(t){return{A:25,B:0,type:e.LINEAR}},wn[c.WATER]=function(t){return{A:25,B:0,type:e.LINEAR}},wn)},{id:i.COTTAGE,name:"Cottage",category:o.RESIDENTAL,description:"Provides additional living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COTTAGES)>0},getCost:(Dn={},Dn[c.POWER]=function(t){return{A:80,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Dn[c.BRICK]=function(t){return{A:10,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Dn[c.BEAM]=function(t){return{A:8,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Dn),getConsumption:(kn={},kn[c.POWER]=function(t){return{A:.05,B:0,type:e.LINEAR}},kn),getGain:{},getStorage:{},getMaxColonists:function(t){return{A:2,B:0,type:e.LINEAR}}},{id:i.CINEMA,name:"Cinema",category:o.PUBLIC,description:"Provides additional 2% boost to your colonists production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENTERTAINMENT)>0},getCost:(xn={},xn[c.POWER]=function(t){return{A:380,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},xn[c.BRICK]=function(t){return{A:10,B:1+.5*Ko(t),type:e.EXPONENTIAL}},xn[c.BEAM]=function(t){return{A:8,B:1+.5*Ko(t),type:e.EXPONENTIAL}},xn[c.PLATE]=function(t){return{A:5,B:1+.5*Ko(t),type:e.EXPONENTIAL}},xn),getConsumption:(Hn={},Hn[c.POWER]=function(t){return{A:.5,B:0,type:e.LINEAR}},Hn),getGain:{},getStorage:{},getEffectGain:(Wn={},Wn[m.ENTERTAINMENT]=function(t){return{A:10,B:0,type:e.LINEAR}},Wn)},{id:i.SOCIAL_RESEARCH_CENTER,name:"Social research center",category:o.SCIENCE,description:"Provides additional science capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SOCIAL_RESEARCH_CENTER)>0},getCost:(Yn={},Yn[c.POWER]=function(t){return{A:1200,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Yn[c.BRICK]=function(t){return{A:125,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Yn[c.BEAM]=function(t){return{A:100,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Yn[c.PLATE]=function(t){return{A:25,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Yn),getConsumption:(Zn={},Zn[c.POWER]=function(t){return{A:1*Jo(t),B:0,type:e.LINEAR}},Zn),getGain:{},getStorage:(jn={},jn[c.RESEARCH]=function(t){return{A:225*Qo(t),B:0,type:e.LINEAR}},jn),getGainMultiplier:(Fn={},Fn[c.RESEARCH]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Fn)},{id:i.METALLURGY_COMPLEX,name:"Metallurgy Complex",category:o.INDUSTRIAL,description:"Provides bonus to metal output",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ADVANCED_METALLURGY)>0},getCost:(Kn={},Kn[c.PLATINUM]=function(t){return{A:20,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Kn[c.BRICK]=function(t){return{A:100,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Kn[c.BEAM]=function(t){return{A:25,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Kn[c.PLATE]=function(t){return{A:25,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Kn),getConsumption:(Vn={},Vn[c.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},Vn),getGain:{},getStorage:{},getGainMultiplier:(qn={},qn[c.IRON]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},qn)},{id:i.BUILDING_FACTORY,name:"Building materials factory",category:o.INDUSTRIAL,description:"Provides bonus to bricks, beams and plates production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ADVANCED_METALLURGY)>0},getCost:(Qn={},Qn[c.BRICK]=function(t){return{A:30,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Qn[c.BEAM]=function(t){return{A:75,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Qn[c.PLATE]=function(t){return{A:5,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Qn),getConsumption:(Jn={},Jn[c.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},Jn),getGain:{},getStorage:{},getGainMultiplier:(zn={},zn[c.BEAM]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},zn[c.BRICK]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},zn[c.PLATE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},zn[c.WIRE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},zn)},{id:i.STORAGE_CONTAINER,name:"Storage container",category:o.STORAGE,description:"Provides 5% bonus to your materials storage in warehouses",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GERMETISATION)>0},getCost:($n={},$n[c.POWER]=function(t){return{A:5,B:1+.1*Ko(t)*Vo(t),type:e.EXPONENTIAL}},$n[c.PLATE]=function(t){return{A:5,B:1+.1*Ko(t),type:e.EXPONENTIAL}},$n[c.RUBBER]=function(t){return{A:5,B:1+.1*Ko(t),type:e.EXPONENTIAL}},$n),getConsumption:{},getGain:{},getStorage:{}},{id:i.SOLAR_PANEL,category:o.POWER,name:"Solar Panel",description:"Provides power from solar radiation",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(ei={},ei[c.PLATE]=function(t){return{A:6,B:1+.3*Ko(t),type:e.EXPONENTIAL}},ei[c.WIRE]=function(t){return{A:10,B:1+.3*Ko(t),type:e.EXPONENTIAL}},ei[c.SEMICONDUCTOR]=function(t){return{A:10,B:1+.3*Ko(t),type:e.EXPONENTIAL}},ei),getConsumption:{},getGain:(ti={},ti[c.POWER]=function(t){return{A:.4*Math.pow(1.1,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_PHOTOELEMENTS)),B:0,type:e.LINEAR}},ti),getStorage:{}},{id:i.SHRINE,category:o.PUBLIC,name:"Shrine",description:"Provides some religious service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(ni={},ni[c.BEAM]=function(t){return{A:50,B:1+.3*Ko(t),type:e.EXPONENTIAL}},ni[c.STONE]=function(t){return{A:1e3,B:1+.3*Ko(t),type:e.EXPONENTIAL}},ni),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(ii={},ii[m.RELIGION]=function(t){return{A:3,B:0,type:e.LINEAR}},ii)},{id:i.DATA_CENTER,name:"Data Center",category:o.SCIENCE,description:"Provides additional science capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMPUTERS)>0},getCost:(oi={},oi[c.POWER]=function(t){return{A:1500,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},oi[c.BRICK]=function(t){return{A:125,B:1+.5*Ko(t),type:e.EXPONENTIAL}},oi[c.COMPUTER]=function(t){return{A:20,B:1+.5*Ko(t),type:e.EXPONENTIAL}},oi[c.WIRE]=function(t){return{A:75,B:1+.5*Ko(t),type:e.EXPONENTIAL}},oi),getConsumption:(ri={},ri[c.POWER]=function(t){return{A:2*Jo(t),B:0,type:e.LINEAR}},ri),getGain:{},getStorage:(ci={},ci[c.RESEARCH]=function(t){return{A:675*Qo(t),B:0,type:e.LINEAR}},ci),getGainMultiplier:(ai={},ai[c.RESEARCH]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ai)},{id:i.APARTMENT,name:"Apartment",category:o.RESIDENTAL,description:"Provides additional living space for 5 colonists",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(ui={},ui[c.POWER]=function(t){return{A:1280,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},ui[c.BRICK]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},ui[c.WIRE]=function(t){return{A:50,B:1+.5*Ko(t),type:e.EXPONENTIAL}},ui),getConsumption:(si={},si[c.POWER]=function(t){return{A:.05,B:0,type:e.LINEAR}},si),getGain:{},getStorage:{},getMaxColonists:function(t){return{A:5,B:0,type:e.LINEAR}}},{id:i.TEMPLE,category:o.PUBLIC,name:"Temple",description:"Great building devoted to the Gods. Significantly boosts your religion service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(li={},li[c.BRICK]=function(t){return{A:750,B:1+.5*Ko(t),type:e.EXPONENTIAL}},li[c.BEAM]=function(t){return{A:500,B:1+.5*Ko(t),type:e.EXPONENTIAL}},li[c.PLATINUM]=function(t){return{A:500,B:1+.5*Ko(t),type:e.EXPONENTIAL}},li),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(pi={},pi[m.RELIGION]=function(t){return{A:10,B:0,type:e.LINEAR}},pi)},{id:i.PANDEMIC_RESEARCH_CENTER,name:"Pandemic research center",category:o.PUBLIC,description:"Boosts knowledge about virus diseases. Each level decrease colony health consumption by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0},getCost:(Ei={},Ei[c.POWER]=function(t){return{A:3280,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},Ei[c.BRICK]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ei[c.PLASTICS]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ei[c.RUBBER]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ei),getConsumption:(di={},di[c.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},di),getGain:{},getStorage:{}},{id:i.ADMINISTRATIVE_CENTER,name:"Administrative service center",category:o.PUBLIC,description:"Each level decrease public services requirements by your people by 2%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(gi={},gi[c.POWER]=function(t){return{A:3280,B:1+.5*Ko(t)*Vo(t),type:e.EXPONENTIAL}},gi[c.BRICK]=function(t){return{A:180,B:1+.5*Ko(t),type:e.EXPONENTIAL}},gi[c.BEAM]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},gi[c.PLASTICS]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},gi),getConsumption:(fi={},fi[c.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},fi),getGain:{},getStorage:{}},{id:i.ELECTRONICS_FACTORY,name:"Electronics factory",category:o.INDUSTRIAL,description:"Provides bonus to wires, semiconductors and computers production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(Ai={},Ai[c.BRICK]=function(t){return{A:30,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ai[c.SEMICONDUCTOR]=function(t){return{A:15,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ai[c.WIRE]=function(t){return{A:5,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ai),getConsumption:(Ri={},Ri[c.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},Ri),getGain:{},getStorage:{},getGainMultiplier:(Ii={},Ii[c.WIRE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ii[c.COMPUTER]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ii[c.SEMICONDUCTOR]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ii)},{id:i.SOLAR_SATELLITE,category:r.ORBIT,name:"Solar Panel Satellite",description:"Provides power from solar radiation. More efficient comparing to planet surface analog",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},getCost:(Ni={},Ni[c.ROCKET_ENGINE]=function(t){return{A:1*qo(t),B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ni[c.WIRE]=function(t){return{A:5,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ni[c.SEMICONDUCTOR]=function(t){return{A:5,B:1+.3*Ko(t),type:e.EXPONENTIAL}},Ni),getConsumption:{},getGain:(Oi={},Oi[c.POWER]=function(t){return{A:1.5*Math.pow(1.1,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_PHOTOELEMENTS)),B:0,type:e.LINEAR}},Oi),getStorage:(mi={},mi[c.POWER]=function(t){return{A:25,B:0,type:e.LINEAR}},mi)},{id:i.ORBITAL_TOURISM_CENTER,category:r.ORBIT,name:"Orbital Tourism Center",description:"Small space station that provides some entertainment and aesthetics to your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RADIATION_STUDY)>0},getCost:(yi={},yi[c.ROCKET_ENGINE]=function(t){return{A:5*qo(t),B:1+.5*Ko(t),type:e.EXPONENTIAL}},yi[c.COMPUTER]=function(t){return{A:25,B:1+.5*Ko(t),type:e.EXPONENTIAL}},yi[c.RUBBER]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},yi),getConsumption:(Li={},Li[c.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},Li),getGain:{},getStorage:{},getEffectGain:(Ti={},Ti[m.AESTHETICS]=function(t){return{A:8*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FASTER_ROCKETS)),B:0,type:e.LINEAR}},Ti[m.ENTERTAINMENT]=function(t){return{A:8*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FASTER_ROCKETS)),B:0,type:e.LINEAR}},Ti)},{id:i.ICE_MELTING_STATION,category:r.MOON,name:"Ice Melting Station",description:"Melts ice on your cold satellite to obtain water",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Ci={},Ci[c.ROCKET_ENGINE]=function(t){return{A:15*qo(t),B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ci[c.COMPUTER]=function(t){return{A:25,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ci[c.RUBBER]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ci[c.BRICK]=function(t){return{A:250,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Ci),getConsumption:(hi={},hi[c.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},hi),getGain:(vi={},vi[c.WATER]=function(t){return{A:.3,B:0,type:e.LINEAR}},vi),getStorage:{},getEffectGain:{}},{id:i.FUEL_FACTORY,category:r.MOON,name:"Fuel Factory",description:"Move toxic fuel production outside of your planet to avoid ecology restrictions and enlarge your fuel production capabilities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Bi={},Bi[c.ROCKET_ENGINE]=function(t){return{A:25*qo(t),B:1+.5*Ko(t),type:e.EXPONENTIAL}},Bi[c.SEMICONDUCTOR]=function(t){return{A:125,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Bi[c.PLASTICS]=function(t){return{A:150,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Bi[c.PLATINUM]=function(t){return{A:250,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Bi),getConsumption:(Si={},Si[c.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Si),getGain:{},getGainMultiplier:(Pi={},Pi[c.FUEL]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Pi),getStorage:{},getEffectGain:{}},{id:i.NANOBOTS_FACTORY,name:"Nanobots Factory",category:r.MOON,description:"Each level provides 3% bonus to all your crafting productions",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.NANO_BOTS)>0&&e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Mi={},Mi[c.ROCKET_ENGINE]=function(t){return{A:20*qo(t),B:1+.5*Ko(t),type:e.EXPONENTIAL}},Mi[c.COMPUTER]=function(t){return{A:50,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Mi[c.PLATINUM]=function(t){return{A:225,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Mi[c.WIRE]=function(t){return{A:75,B:1+.5*Ko(t),type:e.EXPONENTIAL}},Mi),getConsumption:(Ui={},Ui[c.POWER]=function(t){return{A:3,B:0,type:e.LINEAR}},Ui),getGain:{},getStorage:{},getGainMultiplier:{}}],$o=function(e){var t,n,i,o,r,a,u,s,l,p,E,d,g,f,A,R,I,N,O,m,y,L,T=((t={})[c.POWER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base battery",value:20}],multiplier:[]}},t[c.STONE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[c.ORE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[c.BIOMASS]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[c.OXYGEN]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[c.WATER]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.005*Gc.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[c.NUTRITION]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.1*Gc.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[c.RESEARCH]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.IRON]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.PLATINUM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.WOOD]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[c.BEAM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.BRICK]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.PLATE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.WIRE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.RUBBER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.PLASTICS]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.FUEL]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.SEMICONDUCTOR]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.COMPUTER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.ROCKET_ENGINE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[c.KNOWLEDGE_POINT]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t);for(var C in T)(n=T[C].income.linear).push.apply(n,Gc.landingZone.landingZoneBuildings.getResourceBeingProduced(C)),(i=T[C].income.multiplier).push.apply(i,Gc.landingZone.landingZoneBuildings.getResourceMultiplier(C)),null===(d=T[C].income.consumption)||void 0===d||d.push.apply(d,Gc.landingZone.landingZoneBuildings.getResourceBeingConsumed(C)),null===(g=T[C].max.linear)||void 0===g||g.push.apply(g,Gc.landingZone.landingZoneBuildings.getResourceBeingStored(C)),(o=T[C].income.linear).push.apply(o,Gc.landingZone.landingZoneUpgrades.getGain(C)),(r=T[C].income.multiplier).push.apply(r,Gc.landingZone.landingZoneUpgrades.getGainMultiplier(C)),null===(f=T[C].max.linear)||void 0===f||f.push.apply(f,Gc.landingZone.landingZoneUpgrades.getCapacity(C)),null===(A=T[C].max.multiplier)||void 0===A||A.push.apply(A,Gc.landingZone.landingZoneUpgrades.getCapacityMult(C)),(a=T[C].income.linear).push.apply(a,Gc.colony.colonyJobs.getResourceBeingProduced(C)),null===(R=T[C].income.consumption)||void 0===R||R.push.apply(R,Gc.colony.colonyJobs.getResourceBeingConsumed(C)),null===(I=T[C].income.multiplier)||void 0===I||I.push.apply(I,Gc.colony.colonyJobs.getResourceBeingMultiplied(C)),(u=T[C].income.linear).push.apply(u,Gc.crafting.craftingJobs.getResourceBeingProduced(C)),null===(N=T[C].income.consumption)||void 0===N||N.push.apply(N,Gc.crafting.craftingJobs.getResourceBeingConsumed(C)),(s=T[C].income.linear).push.apply(s,Gc.laws.getResourceBeingProduced(C)),(l=T[C].income.multiplier).push.apply(l,Gc.laws.getResourceMultiplier(C)),null===(O=T[C].income.consumption)||void 0===O||O.push.apply(O,Gc.laws.getResourceBeingConsumed(C)),null===(m=T[C].max.linear)||void 0===m||m.push.apply(m,Gc.laws.getResourceBeingStored(C)),(p=T[C].income.linear).push.apply(p,Gc.prestige.transmitKnowledge.getResourceBeingProduced(C)),(E=T[C].income.multiplier).push.apply(E,Gc.prestige.transmitKnowledge.getResourceMultiplier(C)),null===(y=T[C].max.linear)||void 0===y||y.push.apply(y,Gc.prestige.transmitKnowledge.getResourceBeingStored(C)),null===(L=T[C].max.multiplier)||void 0===L||L.push.apply(L,Gc.prestige.transmitKnowledge.getCapacityMult(C));return T},er=function(){return er=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},er.apply(this,arguments)},tr=function(){function e(){this.cachedBreakdown={},this.resourcesStatus=y.map((function(e){return{id:e.id,amount:0,balance:0,max:1,hasCapacityLimit:!0,potentialEfficiency:1}}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getResourceEfficiency=function(t){return t in e.lackEfficiencyResources?null==e.lackEfficiencyResources[t]?1:e.lackEfficiencyResources[t]:1},e.prototype.addResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=y.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].amount=this.resourcesStatus[n].amount+t,this.resourcesStatus[n].max>0&&(this.resourcesStatus[n].amount=Math.min(this.resourcesStatus[n].amount,this.resourcesStatus[n].max)),this.resourcesStatus[n].amount<0&&(this.resourcesStatus[n].amount=0)},e.prototype.setResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=y.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].amount=t},e.prototype.subtractResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));n<0||(this.resourcesStatus[n].amount=this.resourcesStatus[n].amount-t)},e.prototype.subtractResourceBatch=function(e){var t=this;e.forEach((function(e){t.subtractResource(e.id,e.amount)}))},e.prototype.setBalance=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=y.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].balance=t},e.prototype.setCapacity=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=y.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].max=t},e.prototype.saveBalances=function(){var e=this;Gc.colony.colonyEffects.getBreakdowns();var t=$o(),n={};y.forEach((function(i){var o,r,c,a;if(i.unlockCondition(Gc)){n[i.id]={max:{income:[],multiplier:[],consumption:[]},income:{income:[],multiplier:[],consumption:[]}};var u=t[i.id].max.linear.reduce((function(e,t){return e+t.value}),0),s=t[i.id].max.multiplier.reduce((function(e,t){return e*t.value}),1);e.setCapacity(i.id,u*s),n[i.id].max.income=t[i.id].max.linear.filter((function(e){return e.value})).map((function(e){return er(er({},e),{value:"+".concat(e.value.toPrecision(4))})})),n[i.id].max.multiplier=t[i.id].max.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return er(er({},e),{value:"x".concat(e.value.toPrecision(4))})}));var l=t[i.id].income.linear.reduce((function(e,t){return e+t.value}),0),p=t[i.id].income.multiplier.reduce((function(e,t){return e*t.value}),1),E=(null===(o=t[i.id].income.consumption)||void 0===o?void 0:o.reduce((function(e,t){return e+t.value}),0))||0;if(e.setBalance(i.id,l*p-E),null===(r=n[i.id])||void 0===r||(r.income.income=t[i.id].income.linear.filter((function(e){return e.value})).map((function(e){return er(er({},e),{value:"+".concat(e.value.toPrecision(4))})}))),null===(c=n[i.id])||void 0===c||(c.income.multiplier=t[i.id].income.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return er(er({},e),{value:"x".concat(e.value.toPrecision(4))})}))),null===(a=n[i.id])||void 0===a||(a.income.consumption=t[i.id].income.consumption.filter((function(e){return e.value})).map((function(e){return er(er({},e),{value:"-".concat(e.value.toPrecision(4))})}))),i.hasCapacityLimit){var d=t[i.id].max.linear.reduce((function(e,t){return e+t.value}),0),g=t[i.id].max.multiplier.reduce((function(e,t){return e*t.value}),1);e.setCapacity(i.id,d*g)}}})),this.cachedBreakdown=n},e.prototype.resetEfficiency=function(){e.lackEfficiencyResources={},Gc.landingZone.landingZoneBuildings.resetEfficiency(),Gc.crafting.craftingJobs.resetEfficiency()},e.prototype.assertBalances=function(t){var n;void 0===t&&(t=!1),Gc.colony.colonyEffects.getBreakdowns();var i=$o(),o={};for(var r in i){var a=i[r].income.linear.reduce((function(e,t){return e+t.value}),0),u=i[r].income.multiplier.reduce((function(e,t){return e*t.value}),1),s=(null===(n=i[r].income.consumption)||void 0===n?void 0:n.reduce((function(e,t){return e+t.value}),0))||0,l=this.getPotentialEfficiency(Math.max(0,this.getResource(r))+a*u,-s);r===c.POWER&&console.log("power: ",a*u,s,l,e.lackEfficiencyResources[r]),o[r]=l<1&&t?0:l}return o},e.prototype.shouldChangeBalances=function(e){return Object.values(e).findIndex((function(e){return e<1}))>-1},e.prototype.applyBalances=function(t){for(var n in t){var i=n;i in e.lackEfficiencyResources&&null!=e.lackEfficiencyResources[i]?e.lackEfficiencyResources[i]*=t[i]:e.lackEfficiencyResources[i]=t[i]}},e.prototype.applyEfficiencies=function(){Gc.landingZone.landingZoneBuildings.adaptEfficiency(),Gc.crafting.craftingJobs.adaptEfficiency()},e.prototype.assertAndApplyBalances=function(){var t=this.assertBalances(),n=0;for(console.log("balancesCalculated: ",t);this.shouldChangeBalances(t)&&n<15;)this.applyBalances(t),this.applyEfficiencies(),t=this.assertBalances(n>10),console.log("iter: ",n,t,e.lackEfficiencyResources[c.POWER]),n++},e.prototype.reassertBalances=function(){this.resetEfficiency(),this.assertAndApplyBalances(),this.saveBalances()},e.prototype.process=function(t){var n=this,i=!1,o="";this.resourcesStatus.forEach((function(e){e.balance<0&&e.balance<-e.amount&&(i=!0,o=e.id)})),i&&(console.log("should re-assert: ",i,o,e.lackEfficiencyResources),this.reassertBalances()),this.resourcesStatus.forEach((function(e){n.addResource(e.id,e.balance*t)}))},e.prototype.getResource=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].amount},e.prototype.getBalance=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].balance},e.prototype.getPotentialEfficiency=function(e,t){return t>=0?1:Math.min(1,-Math.max(0,e)/t)},e.prototype.getBatchObject=function(){return this.resourcesStatus.reduce((function(e,t){return e[t.id]=t.amount,e}),{})},e.prototype.getBatchBalanceObject=function(){return this.resourcesStatus.reduce((function(e,t){return e[t.id]=t.balance,e}),{})},e.prototype.getResourceBalance=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].balance},e.prototype.getResourceCap=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].max},e.prototype.assertEnought=function(e,t,n){var i=[];return e.forEach((function(e){var n="0";if(t[e.id]||(t[e.id]=0),e.amount&&e.amount>0&&t[e.id]>0){var o=100*t[e.id]/e.amount;o>100&&(o=100),n=o.toPrecision(3)}e.amount>0&&i.push({id:e.id,name:e.name,amount:v(e.amount),percentage:n,maxAmount:v(e.max),isAvailable:e.max>=1,eta:h(e.eta)})})),i},e.prototype.exportData=function(){return this.resourcesStatus.map((function(e){return{id:e.id,amount:e.amount}}))},e.prototype.importData=function(e){this.resourcesStatus=e.map((function(e){var t=y.find((function(t){return t.id===e.id}));if(!t)throw new Error("Invalid resource");return{id:e.id,amount:e.amount,balance:0,hasCapacityLimit:t.hasCapacityLimit,max:0,potentialEfficiency:1}}))},e.prototype.dataToUI=function(){var e=this;return{resources:y.map((function(t){var n,i,o=e.resourcesStatus.find((function(e){return e.id===t.id}));return{id:t.id,name:t.name,amount:v((null==o?void 0:o.amount)||0),balance:v((null==o?void 0:o.balance)||0),isUnlocked:t.unlockCondition(Gc),max:v((null==o?void 0:o.max)||0),toFullPercentage:(o&&o.max>0?o.amount/o.max:0).toPrecision(3),hasMaxLimit:t.hasCapacityLimit,breakdown:e.cachedBreakdown[t.id],toFullTime:(null==o?void 0:o.max)&&(null==o?void 0:o.balance)>0?h((o.max-o.amount)/o.balance):"",toEmptyTime:o&&(null==o?void 0:o.balance)<0?h(-(null==o?void 0:o.amount)/(null==o?void 0:o.balance)):"",isSecondary:null!==(n=t.isCraftable)&&void 0!==n&&n,isHidden:null!==(i=t.isHidden)&&void 0!==i&&i,isNegative:((null==o?void 0:o.balance)||0)<0||(e.getResourceEfficiency(t.id)||0)<1,isCapped:!!o&&o.max>0&&o.max<=o.amount+2*Gc.dT*o.balance}}))}},e.prototype.reset=function(){this.resourcesStatus=[]},e.lackEfficiencyResources={},e}(),nr=tr.getInstance(),ir=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),or=function(){return or=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},or.apply(this,arguments)},rr=function(e){function t(){var t=e.call(this)||this;return t.buildings=[],t.workDispatcher.on("[landing-zone] do build",(function(e){console.log("do upgrade",e),t.doBuild(e.id)})),t.workDispatcher.on("[landing-zone] set building amount",(function(e){console.log("set amount",e),t.setActiveAmount(e.id,e.amount)})),t}return ir(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.buildings=e},t.prototype.exportData=function(){return this.buildings},t.prototype.dataToUI=function(){var e=this;return{list:zo.map((function(t){return e.processToUI(t)}))}},t.prototype.getBuildingLevel=function(e){var t;return(null===(t=this.buildings.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.buildings.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0,efficiency:1,activeAmount:0},this.buildings.push(t));var n=C.calcBatchAll(e.getCost,_c.getInstance(),t.level,_c.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300),o=C.calcBatchAll(e.getConsumption,_c.getInstance(),0,_c.getInstance().resources.getBatchObject()),r=C.calcBatch(e.getGain,_c.getInstance(),0),c=e.getStorage?C.calcBatch(e.getStorage,_c.getInstance(),0):[],a=e.getGainMultiplier?C.calcBatch(e.getGainMultiplier,_c.getInstance(),1):[],u=e.getEffectConsumption?C.calcBatchAll(e.getEffectConsumption,_c.getInstance(),0,_c.getInstance().resources.getBatchObject()):[],s=e.getEffectGain?C.calcBatch(e.getEffectGain,_c.getInstance(),0):[];return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:i>=1,cost:_c.getInstance().resources.assertEnought(n,_c.getInstance().resources.getBatchObject(),_c.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"0",consume:o.filter((function(e){return e.amount})).map((function(e){return or(or({},e),{amount:v(e.amount)})})),gain:r.filter((function(e){return e.amount})).map((function(e){return or(or({},e),{amount:v(e.amount)})})),gainMult:a.filter((function(e){return e.amount})).map((function(e){return or(or({},e),{amount:"x".concat(v(e.amount))})})),consumeEffect:u.filter((function(e){return e.amount})).map((function(e){return or(or({},e),{amount:v(e.amount)})})),gainEffect:s.filter((function(e){return e.amount})).map((function(e){return or(or({},e),{amount:v(e.amount)})})),max:c.filter((function(e){return e.amount})).map((function(e){return or(or({},e),{amount:v(e.amount)})})),level:t.level,activeAmount:t.activeAmount,category:e.category}},t.prototype.setActiveAmount=function(e,t){var n=this.buildings.findIndex((function(t){return t.id===e}));n<0||(this.buildings[n].activeAmount=Math.min(t,this.buildings[n].level),Gc.resources.reassertBalances())},t.prototype.doBuild=function(e){var t=zo.find((function(t){return t.id===e}));if(t){var n=this.buildings.findIndex((function(t){return t.id===e}));n<0&&(n=this.buildings.length,this.buildings.push({id:e,level:0,efficiency:1,activeAmount:0}));var i=C.calcBatchAll(t.getCost,_c.getInstance(),this.buildings[n].level,_c.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.buildings[n].level++,this.buildings[n].activeAmount++,console.log("costs: ",i),_c.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.getEffectGain=function(e){var t=zo.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectGain[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(r.name),value:c,id:"building-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=zo.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectMultiplier[e],i.activeAmount,1)*i.efficiency;c&&n.push({label:"Building: ".concat(r.name),value:c,id:"building-".concat(r.id)})}}),0),n},t.prototype.getEffectBeingConsumed=function(e){var t=zo.filter((function(t){var n;return!!(null===(n=t.getEffectConsumption)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectConsumption[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(r.name),value:c,id:"building-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=zo.filter((function(t){return!!t.getGain[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=C.calculate(Gc,o.getGain[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getResourceMultiplier=function(e){var t=zo.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getGainMultiplier[e],i.activeAmount,1)*i.efficiency;console.log("0--0",e,r.id,c),c&&n.push({label:"Building: ".concat(r.name),value:c,id:"building-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingConsumed=function(e){var t=zo.filter((function(t){return!!t.getConsumption[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=C.calculate(Gc,o.getConsumption[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getResourceBeingStored=function(e){var t=zo.filter((function(t){return!!t.getStorage[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=C.calculate(Gc,o.getStorage[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getColonistsCap=function(){var e=zo.filter((function(e){return!!e.getMaxColonists})),t=[];return this.buildings.forEach((function(n){var i=e.find((function(e){return e.id===n.id}));if(i&&i.getMaxColonists){var o=C.calculate(Gc,i.getMaxColonists,0,n.activeAmount)*n.efficiency;t.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),t},t.prototype.getHappinessBonus=function(){var e=zo.filter((function(e){return!!e.getHappinessBonus})),t=[];return this.buildings.forEach((function(n){var i=e.find((function(e){return e.id===n.id}));if(i&&i.getHappinessBonus){var o=C.calculate(Gc,i.getHappinessBonus,0,n.activeAmount)*n.efficiency;t.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),t},t.prototype.preProcess=function(e){var t=this;this.buildings.forEach((function(e,n){t.buildings[n].efficiency=1}))},t.prototype.resetEfficiency=function(){var e=this;this.buildings.forEach((function(t,n){e.buildings[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=tr.lackEfficiencyResources,n=Object.keys(t);this.buildings.forEach((function(i,o){var r=zo.find((function(e){return e.id===i.id}));if(r){var c=Object.keys(r.getConsumption);n.filter((function(e){return c.includes(e)})).forEach((function(n){e.buildings[o].efficiency=Math.min(e.buildings[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){},t.prototype.reset=function(){this.buildings=[]},t}(R),cr=rr.getInstance(),ar=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ur=function(e){function t(){var t=e.call(this)||this;return t.landingZoneActions=Xi,t.landingZoneUpgrades=Hi,t.landingZoneBuildings=cr,t}return ar(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.landingZoneActions.importData(e.actions),this.landingZoneUpgrades.importData(e.upgrades),this.landingZoneBuildings.importData(e.buildings)},t.prototype.exportData=function(){return{actions:this.landingZoneActions.exportData(),upgrades:this.landingZoneUpgrades.exportData(),buildings:this.landingZoneBuildings.exportData()}},t.prototype.dataToUI=function(){return{actions:this.landingZoneActions.dataToUI(),upgrades:this.landingZoneUpgrades.dataToUI(),buildings:this.landingZoneBuildings.dataToUI()}},t.prototype.preProcess=function(e){this.landingZoneBuildings.preProcess(e)},t.prototype.process=function(e){this.landingZoneActions.process(e),this.landingZoneBuildings.process(e)},t.prototype.reset=function(){this.landingZoneActions.reset(),this.landingZoneUpgrades.reset(),this.landingZoneBuildings.reset()},t}(R).getInstance(),sr=[],lr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pr=function(e){function t(){var t=e.call(this)||this;return t.milestonesState=[],t}return lr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.milestonesState=e},t.prototype.exportData=function(){return this.milestonesState},t.prototype.dataToUI=function(){return this.milestonesState},t.prototype.milestoneUnlocked=function(e){return!!this.milestonesState.find((function(t){return t.id===e&&t.isReached}))},t.prototype.process=function(e){var t=this;sr.filter((function(e){return!t.milestonesState.find((function(t){return t.id===e.id&&t.isReached}))})).forEach((function(e){e.unlockCondition(Gc)&&t.milestonesState.push({id:e.id,isReached:!0})}))},t}(R).getInstance(),Er=function(e){return e.colony.getColonistsHappiness()},dr=[{id:O.MINER,unlockCondition:function(e){return!0},name:"Miner",description:"Mines ore",getGain:(Wi={},Wi[c.ORE]=function(t){return{A:.5*Er(t),B:0,type:e.LINEAR}},Wi[c.PLATINUM]=function(t){return{A:(t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)?.01:0)*Er(t),B:0,type:e.LINEAR}},Wi)},{id:O.QUARRYMAN,unlockCondition:function(e){return!0},name:"Quarrymen",description:"Mines stone",getGain:(Yi={},Yi[c.STONE]=function(t){return{A:.5*Er(t),B:0,type:e.LINEAR}},Yi)},{id:O.SCIENTIST,unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0},name:"Researcher",description:"Generates research",getGain:(Zi={},Zi[c.RESEARCH]=function(t){return{A:.04*Er(t),B:0,type:e.LINEAR}},Zi)},{id:O.FARMER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0},name:"Farmer",description:"Generates nutrition",getGain:(ji={},ji[c.NUTRITION]=function(t){return{A:(.15+.05*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING))*Er(t),B:0,type:e.LINEAR}},ji),getConsumption:(Fi={},Fi[c.BIOMASS]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING),B:0,type:e.LINEAR}},Fi)},{id:O.FORESTER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},name:"Forester",description:"Plants and cuts wood",getGain:(Ki={},Ki[c.WOOD]=function(t){return{A:.05*Er(t),B:0,type:e.LINEAR}},Ki),getConsumption:(Vi={},Vi[c.BIOMASS]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING),B:0,type:e.LINEAR}},Vi)},{id:O.ARTISAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},name:"Artisan",description:"Crafts various goods",getGain:{},getConsumption:{}},{id:O.POLICEMAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},name:"Policeman",description:"Provides some security",getGain:{},getConsumption:(qi={},qi[c.NUTRITION]=function(t){return{A:1===t.laws.getLawSelected(Mt.SECURITY_DOTATIONS)?.5:0,B:0,type:e.LINEAR}},qi[c.WATER]=function(t){return{A:1===t.laws.getLawSelected(Mt.SECURITY_DOTATIONS)?.1:0,B:0,type:e.LINEAR}},qi),getEffectGain:(Qi={},Qi[m.SECURITY]=function(t){return{A:4*Math.pow(1.25,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SURVEILLANCE_CAMERAS))*(1+.75*(1===t.laws.getLawSelected(Mt.SECURITY_DOTATIONS)?1:0)),B:0,type:e.LINEAR}},Qi)}],gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fr=function(){return fr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fr.apply(this,arguments)},Ar=function(e){function t(){var t=e.call(this)||this;return t.jobs=[],t.freeWorkers=0,t.workDispatcher.on("[colony] assign colonists",(function(e){console.log("set amount",e),t.setAmount(e.id,e.amount)})),t}return gr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.jobs=e},t.prototype.exportData=function(){return this.jobs},t.prototype.dataToUI=function(){var e=this;return{list:dr.map((function(t){return e.processToUI(t)})),freeWorkers:this.freeWorkers}},t.prototype.getBusyWorkers=function(){return this.jobs.reduce((function(e,t){return e+t.amount}),0)},t.prototype.getWorkersAmount=function(e){var t;return(null===(t=this.jobs.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.jobs.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0,efficiency:1},this.jobs.push(t));var n=e.getConsumption?C.calcBatchAll(e.getConsumption,_c.getInstance(),0,_c.getInstance().resources.getBatchObject()):[],i=e.getGain?C.calcBatch(e.getGain,_c.getInstance(),0):[],o=e.getMultiplier?C.calcBatch(e.getMultiplier,_c.getInstance(),0):[];return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),consume:n.filter((function(e){return e.amount})).map((function(e){return fr(fr({},e),{amount:v(e.amount)})})),gain:i.filter((function(e){return e.amount})).map((function(e){return fr(fr({},e),{amount:v(e.amount)})})),multiplier:o.filter((function(e){return e.amount})).map((function(e){return fr(fr({},e),{amount:"x".concat(v(e.amount))})})),amount:t.amount,isAvailable:this.freeWorkers>0,max:this.freeWorkers+t.amount}},t.prototype.setAmount=function(e,t){var n=this.jobs.findIndex((function(t){return t.id===e}));n<0&&(n=this.jobs.length,this.jobs.push({id:e,amount:0,efficiency:1})),this.jobs[n].amount=Math.min(Math.max(t,0),this.jobs[n].amount+this.freeWorkers),Gc.resources.reassertBalances()},t.prototype.getEffectGain=function(e){var t=dr.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectGain[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:c,id:"job-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=dr.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectMultiplier[e],i.amount,1)*i.efficiency;c&&n.push({label:"Job: ".concat(r.name),value:c,id:"job-".concat(r.id)})}}),0),n},t.prototype.getEffectBeingConsumed=function(e){var t=dr.filter((function(t){var n;return!!(null===(n=t.getEffectConsumption)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:c,id:"job-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=dr.filter((function(t){return t.getGain&&!!t.getGain[e]})),n=[],i=Gc.colony.getColonistsHappiness();return console.log("happ: ",i),this.jobs.forEach((function(o){var r,c=t.find((function(e){return e.id===o.id}));if(c&&(null===(r=c.getGain)||void 0===r?void 0:r[e])){var a=C.calculate(Gc,c.getGain[e],0,o.amount)*o.efficiency*i;n.push({label:"Job: ".concat(c.name),value:a,id:"job-".concat(c.id)})}}),0),n},t.prototype.getResourceBeingConsumed=function(e){var t=dr.filter((function(t){return t.getConsumption&&!!t.getConsumption[e]})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:c,id:"job-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingMultiplied=function(e){var t=dr.filter((function(t){return t.getMultiplier&&!!t.getMultiplier[e]})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getMultiplier)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getMultiplier[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:c,id:"job-".concat(r.id)})}}),0),n},t.prototype.resetEfficiency=function(){var e=this;this.jobs.forEach((function(t,n){e.jobs[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=tr.lackEfficiencyResources,n=Object.keys(t);this.jobs.forEach((function(i,o){var r=dr.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var c=Object.keys(r.getConsumption);n.filter((function(e){return c.includes(e)})).forEach((function(n){e.jobs[o].efficiency=Math.min(e.jobs[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){var t=Gc.colony.colonists-this.getBusyWorkers();if(t<0){for(var n=this.jobs.length-1;n>=0;n--){var i=Math.min(this.jobs[n].amount,-t);if(this.jobs[n].amount-=i,(t+=i)>=0)break}Gc.resources.reassertBalances()}this.freeWorkers=t},t.prototype.reset=function(){this.jobs=[]},t}(R),Rr=Ar.getInstance(),Ir=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nr=function(){return Nr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nr.apply(this,arguments)},Or=function(e){function t(){var t=e.call(this)||this;return t.happinessEffects={},t.happinessBreakdowns={},t}return Ir(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){},t.prototype.exportData=function(){return[]},t.prototype.dataToUI=function(){var e=this;return{effects:L.map((function(t){return e.processToUI(t)})),happiness:this.assertHappiness()}},t.prototype.assertHappiness=function(){return Math.pow(Object.values(this.happinessEffects).reduce((function(e,t){return e*(t/100)}),1),.33)},t.prototype.assertConsumptionMitigation=function(){return Math.pow(.98,Gc.landingZone.landingZoneBuildings.getBuildingLevel(i.ADMINISTRATIVE_CENTER))},t.prototype.getEffectBeingConsumed=function(e){var t=[],n=L.find((function(t){return t.id===e}));if(null==n?void 0:n.getConsumption){var i=n.getConsumption(Gc)*this.assertConsumptionMitigation();t.push({label:"Population",value:i,id:"population"})}return t},t.prototype.getBreakdowns=function(){var e=this,t=function(e){var t,n,i,o,r,c,a,u,s,l,p,E=((t={})[m.SECURITY]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[m.AESTHETICS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[m.ENTERTAINMENT]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[m.HEALTHCARE]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[m.RELIGION]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[m.WORK_CONDITIONS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t);for(var d in E)(n=E[d].linear).push.apply(n,Gc.landingZone.landingZoneBuildings.getEffectGain(d)),(i=E[d].multiplier).push.apply(i,Gc.landingZone.landingZoneBuildings.getEffectMultiplier(d)),null===(u=E[d].consumption)||void 0===u||u.push.apply(u,Gc.landingZone.landingZoneBuildings.getEffectBeingConsumed(d)),(o=E[d].linear).push.apply(o,Gc.colony.colonyJobs.getEffectGain(d)),(r=E[d].multiplier).push.apply(r,Gc.colony.colonyJobs.getEffectMultiplier(d)),null===(s=E[d].consumption)||void 0===s||s.push.apply(s,Gc.colony.colonyJobs.getEffectBeingConsumed(d)),null===(l=E[d].consumption)||void 0===l||l.push.apply(l,Gc.colony.colonyEffects.getEffectBeingConsumed(d)),(c=E[d].linear).push.apply(c,Gc.laws.getEffectGain(d)),(a=E[d].multiplier).push.apply(a,Gc.laws.getEffectMultiplier(d)),null===(p=E[d].consumption)||void 0===p||p.push.apply(p,Gc.laws.getEffectBeingConsumed(d));return E}(),n={};L.forEach((function(i){var o,r,c;if(i.unlockCondition(Gc)){n[i.id]={income:[],multiplier:[],consumption:[]};var a=null===(o=t[i.id].linear)||void 0===o?void 0:o.reduce((function(e,t){return e+t.value}),0),u=null===(r=t[i.id].multiplier)||void 0===r?void 0:r.reduce((function(e,t){return e*t.value}),1),s=(null===(c=t[i.id].consumption)||void 0===c?void 0:c.reduce((function(e,t){return e+t.value}),0))||0;e.happinessEffects[i.id]=Math.min(i.maximum,Math.max(i.minimum,a*u-s)),n[i.id].income=t[i.id].linear.filter((function(e){return e.value})).map((function(e){return Nr(Nr({},e),{value:"+".concat(e.value.toPrecision(4))})})),n[i.id].multiplier=t[i.id].multiplier.filter((function(e){return 1!==e.value})).map((function(e){return Nr(Nr({},e),{value:"x".concat(e.value.toPrecision(4))})})),n[i.id].consumption=t[i.id].consumption.filter((function(e){return e.value})).map((function(e){return Nr(Nr({},e),{value:"-".concat(e.value.toPrecision(4))})}))}})),this.happinessBreakdowns=n},t.prototype.processToUI=function(e){var t,n;return e.getConsumption&&e.getConsumption(Gc),{id:e.id,name:e.name,isUnlocked:e.unlockCondition(Gc),amount:v(null!==(t=this.happinessEffects[e.id])&&void 0!==t?t:0),breakdown:null!==(n=this.happinessBreakdowns[e.id])&&void 0!==n?n:{income:[],multiplier:[],consumption:[]}}},t.prototype.process=function(e){this.getBreakdowns()},t.prototype.reset=function(){this.happinessBreakdowns={},this.happinessEffects={}},t}(R),mr=Or.getInstance(),yr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Lr=function(e){function t(){var t=e.call(this)||this;return t.colonists=0,t.maxColonists=0,t.colonyJobs=Rr,t.colonyEffects=mr,t}return yr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.colonists=e.colonists||0,this.colonyJobs.importData(e.jobs)},t.prototype.exportData=function(){return{jobs:this.colonyJobs.exportData(),colonists:this.colonists}},t.prototype.dataToUI=function(){return{colonists:this.colonists||0,maxColonists:this.maxColonists,isUnlocked:Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0,jobs:this.colonyJobs.dataToUI(),effects:this.colonyEffects.dataToUI()}},t.prototype.getMaxColonists=function(){return Math.round(Gc.landingZone.landingZoneBuildings.getColonistsCap().reduce((function(e,t){return e+t.value}),0))},t.prototype.getColonistsHappiness=function(){return this.colonyEffects.assertHappiness()},t.prototype.missingSupply=function(){return!!this.colonists&&(null!=tr.lackEfficiencyResources[c.NUTRITION]&&(tr.lackEfficiencyResources[c.NUTRITION]||0)<1||null!=tr.lackEfficiencyResources[c.WATER]&&(tr.lackEfficiencyResources[c.WATER]||0)<1)},t.prototype.process=function(e){this.maxColonists=this.getMaxColonists(),(this.missingSupply()||this.colonists>this.maxColonists)&&(console.log("missing supply. Colonist is leaving"),this.colonists--,Gc.resources.reassertBalances()),this.colonists<this.maxColonists&&Math.random()<.02&&(this.colonists++,Gc.resources.reassertBalances()),this.colonyEffects.process(e),this.colonyJobs.process(e)},t.prototype.reset=function(){this.colonists=0,this.maxColonists=0,this.colonyJobs.reset(),this.colonyEffects.reset()},t}(R).getInstance(),Tr=[{id:I.EXOFARMING,name:"Exo farming",description:"Learn how to work with soil on a foreign planet. Allows you hiring farmers",getCost:(Ji={},Ji[c.RESEARCH]=function(t){return{A:25,B:0,type:e.LINEAR}},Ji),unlockCondition:function(e){return!0}},{id:I.METEOROLOGY,name:"Meteorology",description:"Learn your atmosphere closer. Unlocks new upgrades and buildings",getCost:(zi={},zi[c.RESEARCH]=function(t){return{A:75,B:0,type:e.LINEAR}},zi),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.MINERALOGY,name:"Mineralogy",description:"Learn more about minerals available at your new home",getCost:($i={},$i[c.RESEARCH]=function(t){return{A:125,B:0,type:e.LINEAR}},$i),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.CIVIL_SERVICE,name:"Service Industry",description:"Unlock providing some services to your groving colony",getCost:(eo={},eo[c.RESEARCH]=function(t){return{A:225,B:0,type:e.LINEAR}},eo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.ENGINEERING,name:"Engineering",description:"Learn engineering specific in high gravity conditions",getCost:(to={},to[c.RESEARCH]=function(t){return{A:200,B:0,type:e.LINEAR}},to),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0}},{id:I.EXOBIOLOGY,name:"Exo biology",description:"Learn more about local organisms",getCost:(no={},no[c.RESEARCH]=function(t){return{A:225,B:0,type:e.LINEAR}},no),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0}},{id:I.METALLURGY,name:"Metallurgy",description:"Learn how to work with exotic ores. Unlocks crafting ",getCost:(io={},io[c.RESEARCH]=function(t){return{A:420,B:0,type:e.LINEAR}},io),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0}},{id:I.EXOFORESTRY,name:"Exo-forestry",description:"Lets learn how to plant something bigger in this empty grounds",getCost:(oo={},oo[c.RESEARCH]=function(t){return{A:375,B:0,type:e.LINEAR}},oo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0}},{id:I.FLORA_RESEARCH,name:"Exo-flora",description:"Advanced flora researches unlocks new tools for you to boost agriculture",getCost:(ro={},ro[c.RESEARCH]=function(t){return{A:425,B:0,type:e.LINEAR}},ro),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0}},{id:I.CHEMISTRY,name:"Chemistry",description:"Unlocks new materials and upgrades",getCost:(co={},co[c.RESEARCH]=function(t){return{A:575,B:0,type:e.LINEAR}},co),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0}},{id:I.GEOLOGY,name:"Geology",description:"Further research precious minerals at your new habitat",getCost:(ao={},ao[c.RESEARCH]=function(t){return{A:550,B:0,type:e.LINEAR}},ao),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.METALLURGY)>0}},{id:I.SOCIOLOGY,name:"Sociology",description:"Unlocks new ways to make your little society happier and more efficient",getCost:(uo={},uo[c.RESEARCH]=function(t){return{A:550,B:0,type:e.LINEAR}},uo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0}},{id:I.MATERIAL_KNOWLEDGE,name:"Material Knowledge",description:"Further advances crafting and metal processing",getCost:(so={},so[c.RESEARCH]=function(t){return{A:825,B:0,type:e.LINEAR}},so),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0}},{id:I.CODEX_OF_LAW,name:"Law",description:"Unlocks new aspects of your civilization development",getCost:(lo={},lo[c.RESEARCH]=function(t){return{A:1050,B:0,type:e.LINEAR}},lo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0}},{id:I.ELECTRICITY_STUDY,name:"Electricity Study",description:"Improves knowledge about conductivity of various materials",getCost:(po={},po[c.RESEARCH]=function(t){return{A:1375,B:0,type:e.LINEAR}},po),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0}},{id:I.ORGANIC_CHEMISTRY,name:"Organic Chemistry",description:"Learn about new use of your biomass",getCost:(Eo={},Eo[c.RESEARCH]=function(t){return{A:1025,B:0,type:e.LINEAR}},Eo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0}},{id:I.ELECTRONICS,name:"Electronics",description:"Unlock electronics production",getCost:(go={},go[c.RESEARCH]=function(t){return{A:2e3,B:0,type:e.LINEAR}},go),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0}},{id:I.PUBLIC_SERVICE,name:"Civil Service",description:"Unlock new civil service jobs",getCost:(fo={},fo[c.RESEARCH]=function(t){return{A:2e3,B:0,type:e.LINEAR}},fo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0}},{id:I.PRINTING_3D,name:"3D Printing",description:"Unlock new powerful tools to boost your civilization development",getCost:(Ao={},Ao[c.RESEARCH]=function(t){return{A:4e3,B:0,type:e.LINEAR}},Ao),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0}},{id:I.HIGH_GRAVITY_PHYSICS,name:"Advanced Physics",description:"Learn more about surviving and creating in high gravity conditions",getCost:(Ro={},Ro[c.RESEARCH]=function(t){return{A:4e3,B:0,type:e.LINEAR}},Ro),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0}},{id:I.ADVANCED_ANATOMY,name:"Advanced anatomy",description:"Further research human body can make maintaining larger colony much easier",getCost:(Io={},Io[c.RESEARCH]=function(t){return{A:2600,B:0,type:e.LINEAR}},Io),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0}},{id:I.ROCKET_SCIENCE,name:"Rocket science",description:"Its too little space on our planet, isn't?",getCost:(No={},No[c.RESEARCH]=function(t){return{A:5600,B:0,type:e.LINEAR}},No),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0&&Gc.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0}},{id:I.ADVANCED_BIOLOGY,name:"Advanced Biology",description:"Further advance biology knowledge",getCost:(Oo={},Oo[c.RESEARCH]=function(t){return{A:4250,B:0,type:e.LINEAR}},Oo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0}},{id:I.RADIATION_STUDY,name:"Radiation Study",description:"Learn more about impact of radiation on living organisms. Unlocks piloted missions",getCost:(mo={},mo[c.RESEARCH]=function(t){return{A:5900,B:0,type:e.LINEAR}},mo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0}},{id:I.QUANTUM_PHYSICS,name:"Quantum Physics",description:"Better understanding of quantum physics can significantly boost your civilization",getCost:(yo={},yo[c.RESEARCH]=function(t){return{A:6215,B:0,type:e.LINEAR}},yo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0}},{id:I.GRAVITY_THEORY,name:"Gravity Theory",description:"Allows you to send missions to other planets",getCost:(Lo={},Lo[c.RESEARCH]=function(t){return{A:8750,B:0,type:e.LINEAR}},Lo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.NANO_PHYSICS,name:"Nano-physics",description:"Further nanotechnologies investigation can further boost your civilization development",getCost:(To={},To[c.RESEARCH]=function(t){return{A:8750,B:0,type:e.LINEAR}},To),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.ASTROPHYSICS,name:"Astrophysics",description:"Allows further advance of your science",getCost:(Co={},Co[c.RESEARCH]=function(t){return{A:9500,B:0,type:e.LINEAR}},Co),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0}}],Cr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),hr=function(e){function t(){var t=e.call(this)||this;return t.researches=[],t.freeWorkers=0,t.workDispatcher.on("[science] do research",(function(e){console.log("research",e),t.doResearch(e.id)})),t}return Cr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.researches=e},t.prototype.exportData=function(){return this.researches},t.prototype.dataToUI=function(){var e=this;return{list:Tr.map((function(t){return e.processToUI(t)}))}},t.prototype.getResearchLevel=function(e){var t;return(null===(t=this.researches.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.researches.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0},this.researches.push(t));var n=C.calcBatchAll(e.getCost,_c.getInstance(),t.amount,_c.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:i>=1,cost:_c.getInstance().resources.assertEnought(n,_c.getInstance().resources.getBatchObject(),_c.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"0",isResearched:t.amount>0}},t.prototype.doResearch=function(e){var t=this.researches.findIndex((function(t){return t.id===e}));t<0&&(t=this.researches.length,this.researches.push({id:e,amount:0}));var n=Tr.find((function(t){return t.id===e}));if(n){var i=C.calcBatchAll(n.getCost,_c.getInstance(),this.researches[t].amount,_c.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(_c.getInstance().resources.subtractResourceBatch(i),this.researches[t].amount++,Gc.resources.reassertBalances())}},t.prototype.process=function(e){},t.prototype.reset=function(){this.researches=[]},t}(R),vr=hr.getInstance(),Br=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sr=function(e){function t(){var t=e.call(this)||this;return t.scienceResearches=vr,t}return Br(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.scienceResearches.importData(e.research)},t.prototype.exportData=function(){return{research:this.scienceResearches.exportData()}},t.prototype.dataToUI=function(){return{research:this.scienceResearches.dataToUI(),isUnlocked:Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0}},t.prototype.process=function(e){this.scienceResearches.process(e)},t.prototype.reset=function(){this.scienceResearches.reset()},t}(R).getInstance(),Pr=[{id:c.BEAM,complexity:100,getConsumption:(ho={},ho[c.WOOD]=function(t){return{A:.25,B:0,type:e.LINEAR}},ho),getGain:(vo={},vo[c.BEAM]=function(t){return{A:.01,B:0,type:e.LINEAR}},vo)},{id:c.BRICK,complexity:100,getConsumption:(Bo={},Bo[c.STONE]=function(t){return{A:.75,B:0,type:e.LINEAR}},Bo),getGain:(So={},So[c.BRICK]=function(t){return{A:.01,B:0,type:e.LINEAR}},So)},{id:c.PLATE,complexity:100,getConsumption:(Po={},Po[c.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},Po),getGain:(Mo={},Mo[c.PLATE]=function(t){return{A:.002,B:0,type:e.LINEAR}},Mo)},{id:c.WIRE,complexity:100,getConsumption:(Uo={},Uo[c.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},Uo),getGain:(_o={},_o[c.WIRE]=function(t){return{A:.002,B:0,type:e.LINEAR}},_o)},{id:c.FUEL,complexity:250,getConsumption:(Go={},Go[c.BIOMASS]=function(t){return{A:.5,B:0,type:e.LINEAR}},Go[c.WATER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Go),getGain:(bo={},bo[c.FUEL]=function(t){return{A:.002,B:0,type:e.LINEAR}},bo)},{id:c.RUBBER,complexity:100,getConsumption:(Xo={},Xo[c.BIOMASS]=function(t){return{A:1,B:0,type:e.LINEAR}},Xo[c.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Xo),getGain:(wo={},wo[c.RUBBER]=function(t){return{A:.008,B:0,type:e.LINEAR}},wo)},{id:c.PLASTICS,complexity:100,getConsumption:(Do={},Do[c.BIOMASS]=function(t){return{A:1,B:0,type:e.LINEAR}},Do[c.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Do),getGain:(ko={},ko[c.PLASTICS]=function(t){return{A:.008,B:0,type:e.LINEAR}},ko)},{id:c.SEMICONDUCTOR,complexity:100,getConsumption:(xo={},xo[c.IRON]=function(t){return{A:.02,B:0,type:e.LINEAR}},xo[c.STONE]=function(t){return{A:1,B:0,type:e.LINEAR}},xo),getGain:(Ho={},Ho[c.SEMICONDUCTOR]=function(t){return{A:.004,B:0,type:e.LINEAR}},Ho)},{id:c.COMPUTER,complexity:250,getConsumption:(Wo={},Wo[c.SEMICONDUCTOR]=function(t){return{A:.1,B:0,type:e.LINEAR}},Wo[c.PLASTICS]=function(t){return{A:.1,B:0,type:e.LINEAR}},Wo),getGain:(Yo={},Yo[c.COMPUTER]=function(t){return{A:.004,B:0,type:e.LINEAR}},Yo)},{id:c.ROCKET_ENGINE,complexity:750,getConsumption:(Zo={},Zo[c.PLATE]=function(t){return{A:.1,B:0,type:e.LINEAR}},Zo[c.FUEL]=function(t){return{A:.1,B:0,type:e.LINEAR}},Zo),getGain:(jo={},jo[c.ROCKET_ENGINE]=function(t){return{A:.002,B:0,type:e.LINEAR}},jo)}],Mr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ur=function(){return Ur=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ur.apply(this,arguments)},_r=function(e){function t(){var t=e.call(this)||this;return t.crafters=[],t.craftingSlots=0,t.workDispatcher.on("[crafting] assign crafter",(function(e){console.log("set amount",e),t.setAmount(e.id,e.amount)})),t}return Mr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.crafters=e},t.prototype.exportData=function(){return this.crafters},t.prototype.dataToUI=function(){var e=this;return{list:Pr.map((function(t){return e.processToUI(t)})),craftingSlots:this.craftingSlots}},t.prototype.getTotalCraftingBonus=function(){return Math.pow(1.05,Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.INDUSTRY_AUTOMATION))*Math.pow(1.03,Gc.landingZone.landingZoneBuildings.getBuildingLevel(i.NANOBOTS_FACTORY))},t.prototype.getBusyWorkers=function(){return this.crafters.reduce((function(e,t){return e+t.amount}),0)},t.prototype.getWorkersAmount=function(e){var t;return(null===(t=this.crafters.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.crafters.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0,efficiency:1},this.crafters.push(t));var n=y.find((function(t){return t.id===e.id}));if(!n)throw new Error("Invalid recipe: ".concat(e.id));var i=e.getConsumption?C.calcBatchAll(e.getConsumption,_c.getInstance(),0,_c.getInstance().resources.getBatchObject()):[],o=e.getGain?C.calcBatch(e.getGain,_c.getInstance(),0):[];return{id:e.id,name:n.name,isUnlocked:n.unlockCondition(Gc),consume:i.filter((function(e){return e.amount})).map((function(e){return Ur(Ur({},e),{amount:v(e.amount)})})),gain:o.filter((function(e){return e.amount})).map((function(e){return Ur(Ur({},e),{amount:v(e.amount)})})),amount:t.amount,isAvailable:this.craftingSlots>0,max:this.craftingSlots+t.amount}},t.prototype.setAmount=function(e,t){var n=this.crafters.findIndex((function(t){return t.id===e}));n<0&&(n=this.crafters.length,this.crafters.push({id:e,amount:0,efficiency:1})),this.crafters[n].amount=Math.min(Math.max(t,0),this.crafters[n].amount+this.craftingSlots),Gc.resources.reassertBalances()},t.prototype.getResourceBeingProduced=function(e){var t=this,n=Pr.filter((function(t){return t.getGain&&!!t.getGain[e]})),i=[];return this.crafters.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c&&(null===(r=c.getGain)||void 0===r?void 0:r[e])){var a=C.calculate(Gc,c.getGain[e],0,o.amount)*o.efficiency*t.getTotalCraftingBonus();i.push({label:"Crafting",value:a,id:"job-".concat(c.id)})}}),0),i},t.prototype.getResourceBeingConsumed=function(e){if(!y.find((function(t){return t.id===e})))throw new Error("Invalid resource");var t=Pr.filter((function(t){return t.getConsumption&&!!t.getConsumption[e]})),n=[];return this.crafters.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Crafting: ".concat(T(r.id)),value:c,id:"job-".concat(r.id)})}}),0),n},t.prototype.resetEfficiency=function(){var e=this;this.crafters.forEach((function(t,n){e.crafters[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=tr.lackEfficiencyResources,n=Object.keys(t);this.crafters.forEach((function(i,o){var r=Pr.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var c=Object.keys(r.getConsumption);n.filter((function(e){return c.includes(e)})).forEach((function(n){e.crafters[o].efficiency=Math.min(e.crafters[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){var t=Gc.crafting.slots-this.getBusyWorkers();if(t<0){for(var n=this.crafters.length-1;n>=0;n--){var i=Math.min(this.crafters[n].amount,-t);if(this.crafters[n].amount-=i,(t+=i)>=0)break}Gc.resources.reassertBalances()}this.craftingSlots=t},t.prototype.reset=function(){this.craftingSlots=0,this.crafters=[]},t}(R),Gr=_r.getInstance(),br=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xr=function(e){function t(){var t=e.call(this)||this;return t.slots=-1,t.craftingJobs=Gr,t}return br(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.craftingJobs.importData(e.craftmen)},t.prototype.exportData=function(){return{craftmen:this.craftingJobs.exportData()}},t.prototype.dataToUI=function(){return{maxSlots:this.slots||0,isUnlocked:Gc.science.scienceResearches.getResearchLevel(I.METALLURGY)>0,jobs:this.craftingJobs.dataToUI()}},t.prototype.getCraftingSlots=function(){var e;return 0+((null===(e=Gc.colony.colonyJobs.jobs.find((function(e){return e.id===O.ARTISAN})))||void 0===e?void 0:e.amount)||0)},t.prototype.process=function(e){this.slots=this.getCraftingSlots(),this.craftingJobs.process(e)},t.prototype.reset=function(){this.slots=-1,this.craftingJobs.reset()},t}(R),wr=Xr.getInstance();!function(e){e.RESOURCE="resource",e.UPGRADE="upgrade",e.BUILDING="building",e.RESEARCH="research",e.POPULATION="population"}(Fo||(Fo={}));var Dr,kr,xr,Hr,Wr,Yr,Zr,jr,Fr,Kr,Vr,qr,Qr,Jr,zr,$r,ec,tc,nc,ic,oc,rc,cc,ac,uc,sc,lc,pc,Ec,dc,gc,fc=[{id:"start",description:"Power up",requirements:[{type:Fo.RESOURCE,target:c.POWER,amount:10}]},{id:"start2",description:"Drill some stone",requirements:[{type:Fo.RESOURCE,target:c.STONE,amount:1}]},{id:"repairFacilities",description:"Repair facilities",requirements:[{type:Fo.UPGRADE,target:n.REPAIR_DRILL,amount:4}]},{id:"drillOre",description:"Drill ore",requirements:[{type:Fo.RESOURCE,target:c.ORE,amount:1}]},{id:"furtherRepair",description:"Further facilities repair",requirements:[{type:Fo.UPGRADE,target:n.REPAIR_DRILL,amount:5},{type:Fo.UPGRADE,target:n.REPAIR_CABLE,amount:5}]},{id:"biomass",description:"Collect some organics",requirements:[{type:Fo.UPGRADE,target:n.REPAIR_MANIPULATORS,amount:3},{type:Fo.RESOURCE,target:c.BIOMASS,amount:6}]},{id:"autonomousPowerSupply",description:"Autonomous power supply",requirements:[{type:Fo.UPGRADE,target:n.COMBUSTION,amount:1},{type:Fo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:1},{type:Fo.BUILDING,target:i.BACTERIA_INCUBATOR,amount:1}]},{id:"storage",description:"Storage facilities",requirements:[{type:Fo.UPGRADE,target:n.REPAIR_STORAGE_MODULE,amount:1},{type:Fo.BUILDING,target:i.STORAGE,amount:1}]},{id:"powerUp2",description:"Boost power supply",requirements:[{type:Fo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:3},{type:Fo.BUILDING,target:i.BACTERIA_INCUBATOR,amount:2}]},{id:"stoneProduction",description:"Stone production",requirements:[{type:Fo.UPGRADE,target:n.AUTO_QUARRYING,amount:1},{type:Fo.BUILDING,target:i.QUARRY,amount:1}]},{id:"oreProduction",description:"Ore production",requirements:[{type:Fo.UPGRADE,target:n.REPAIR_MACHINERY,amount:1},{type:Fo.UPGRADE,target:n.AUTO_MINERS,amount:1},{type:Fo.BUILDING,target:i.MINE,amount:1}]},{id:"powerCaps",description:"Power capacity",requirements:[{type:Fo.UPGRADE,target:n.REPAIR_MANIPULATORS,amount:5},{type:Fo.UPGRADE,target:n.REPAIR_BATTERY,amount:2}]},{id:"organicsUtilization",description:"Organics utilization",requirements:[{type:Fo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:5},{type:Fo.BUILDING,target:i.BACTERIA_INCUBATOR,amount:5}]},{id:"economyBoost",description:"Economy Boost",requirements:[{type:Fo.BUILDING,target:i.QUARRY,amount:5},{type:Fo.BUILDING,target:i.MINE,amount:5}]},{id:"moreStorage",description:"More Storage",requirements:[{type:Fo.BUILDING,target:i.STORAGE,amount:4}]},{id:"breath-in",description:"Breath In",requirements:[{type:Fo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:10},{type:Fo.UPGRADE,target:n.BIO_TECH,amount:1},{type:Fo.UPGRADE,target:n.BACTERIA_SELECTION,amount:1}]},{id:"basicNeeds",description:"Basic habitability requirements",requirements:[{type:Fo.BUILDING,target:i.OXYGEN_COLLECTOR,amount:1},{type:Fo.BUILDING,target:i.WATER_PUMP,amount:1},{type:Fo.BUILDING,target:i.WATER_STORAGE,amount:1}]},{id:"finalPreparation",description:"Final preparation",requirements:[{type:Fo.UPGRADE,target:n.ELECTROLITES,amount:1},{type:Fo.UPGRADE,target:n.SUPPLY_MODULE,amount:1}]},{id:"firstColonists",description:"First colonists",requirements:[{type:Fo.UPGRADE,target:n.DOCKING_MODULE,amount:1},{type:Fo.BUILDING,target:i.LIVING_CABIN,amount:1}]},{id:"research",description:"Scientific basics",requirements:[{type:Fo.UPGRADE,target:n.RESEARCH_MODULE,amount:1},{type:Fo.RESEARCH,target:I.EXOFARMING,amount:1}]},{id:"population",description:"Population",requirements:[{type:Fo.POPULATION,target:I.METEOROLOGY,amount:10}]},{id:"healthcare",description:"Healthcare",requirements:[{type:Fo.RESEARCH,target:I.CIVIL_SERVICE,amount:1},{type:Fo.RESEARCH,target:I.EXOBIOLOGY,amount:1},{type:Fo.BUILDING,target:i.CLINIC,amount:1}]},{id:"crafting",description:"Crafting",requirements:[{type:Fo.RESEARCH,target:I.METALLURGY,amount:1},{type:Fo.RESOURCE,target:c.BEAM,amount:20},{type:Fo.RESOURCE,target:c.BRICK,amount:20}]},{id:"civilized",description:"Civilized life",requirements:[{type:Fo.RESEARCH,target:I.SOCIOLOGY,amount:1},{type:Fo.RESEARCH,target:I.CODEX_OF_LAW,amount:1}]},{id:"population",description:"Population",requirements:[{type:Fo.POPULATION,target:I.METEOROLOGY,amount:70}]},{id:"advanced",description:"Advanced Science",requirements:[{type:Fo.RESEARCH,target:I.ELECTRICITY_STUDY,amount:1},{type:Fo.RESEARCH,target:I.HIGH_GRAVITY_PHYSICS,amount:1}]},{id:"infoera",description:"Knowledge",requirements:[{type:Fo.RESEARCH,target:I.QUANTUM_PHYSICS,amount:1},{type:Fo.UPGRADE,target:n.GREAT_RADIO_TRANSMITTER,amount:1}]}],Ac=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Rc=function(e){function t(){var t=e.call(this)||this;return t.currentGoalIdx=0,t.goalsState=[],t}return Ac(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.currentGoalIdx=e.currentGoalIdx||0},t.prototype.exportData=function(){return{currentGoalIdx:this.currentGoalIdx}},t.prototype.dataToUI=function(){return{index:this.currentGoalIdx,current:this.currentGoalToUI()}},t.prototype.getCurrentGoalDB=function(){var e;return null!==(e=fc[this.currentGoalIdx])&&void 0!==e?e:{id:"complete",description:"Complete",requirements:[]}},t.prototype.getRequirementText=function(e){var t,n,i,o,r="";switch(e.type){case Fo.RESOURCE:r="Resource: "+(null===(t=y.find((function(t){return t.id===e.target})))||void 0===t?void 0:t.name);break;case Fo.UPGRADE:r="Upgrade: "+(null===(n=wi.find((function(t){return t.id===e.target})))||void 0===n?void 0:n.name);break;case Fo.RESEARCH:r="Research: "+(null===(i=Tr.find((function(t){return t.id===e.target})))||void 0===i?void 0:i.name);break;case Fo.BUILDING:r="Building: "+(null===(o=zo.find((function(t){return t.id===e.target})))||void 0===o?void 0:o.name);break;case Fo.POPULATION:r="Population"}return r},t.prototype.getRequirementAmount=function(e){var t=0;switch(e.type){case Fo.RESOURCE:t=Gc.resources.getResource(e.target);break;case Fo.UPGRADE:t=Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(e.target);break;case Fo.RESEARCH:t=Gc.science.scienceResearches.getResearchLevel(e.target);break;case Fo.BUILDING:t=Gc.landingZone.landingZoneBuildings.getBuildingLevel(e.target);break;case Fo.POPULATION:t=Gc.colony.colonists}return t},t.prototype.checkGoalStatus=function(){var e=this,t=this.getCurrentGoalDB(),n=!0;t.requirements.forEach((function(t){e.getRequirementAmount(t)<t.amount&&(n=!1)})),n&&this.currentGoalIdx<fc.length&&this.currentGoalIdx++},t.prototype.currentGoalToUI=function(){var e=this,t=this.getCurrentGoalDB();return{id:t.id,name:t.description,requirements:t.requirements.map((function(t){var n=e.getRequirementAmount(t),i=n>=t.amount;return{actual:n,target:t.amount,isComplete:i,text:e.getRequirementText(t)}}))}},t.prototype.process=function(e){this.checkGoalStatus()},t}(R),Ic=Rc.getInstance(),Nc=[{id:Mt.EXPERIMENTAL_MEDICINE,name:"Experimental medicine",description:"",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Pt.SOCIAL,options:[{name:"Forbid",description:"Clinics are working in regular way, providing service using only reliable traditional medicine methods"},{name:"Allow",description:"Using experimental medicine reduces healthcare efficiency of clinics, but they now provide some max research boost"}]},{id:Mt.WATER_FILTERING,name:"Water Filtering Control",description:"",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Pt.SOCIAL,options:[{name:"Off",description:"Waterpumps working in regular way"},{name:"On",description:"Waterpumps consume 4 times more power. Increase healthcare by 10.",getEffectGain:(Dr={},Dr[m.HEALTHCARE]=function(e){return 10},Dr)}]},{id:Mt.RESEARCH_GRANTS,name:"Research grants",description:"Setting research as priority of your civilization can boost your development, but it won't be free.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Pt.SCIENCE,options:[{name:"No grants",description:"Science buildings operate as normally"},{name:"Small grants",description:"Science buildings consume 50% more electricity but provide 5% more science capacity"},{name:"Bigger grants",description:"Science buildings consume 150% more electricity but provide 10% more science capacity"}]},{id:Mt.FOREST_BEHAVOUR,name:"Rules of behavior in the forest",description:"Your forest plants can be used in different modes, providing various advantages to you.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},category:Pt.SOCIAL,options:[{name:"Normal",description:"Forest plants operating as normal"},{name:"Nature Reserve",description:'Forest plants produce 50% of oxygen only, but provide small bonus to "Aesthetics"'},{name:"Picnic zones",description:'Forest plants produce 50% of oxygen only, but provide small bonus to "Entertainment"'}]},{id:Mt.SECURITY_DOTATIONS,name:"Security dotations",description:"Your police starts consuming more resources but provide better service.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},category:Pt.SOCIAL,options:[{name:"Off",description:"Policemen does not consume additional resources"},{name:"On",description:"Policemen consume 0.5 Nutrition and 0.2 water each but provides better service"}]},{id:Mt.ARTIFICIAL_ORGANS,name:"Artificial organs",description:"Using 3D printers in creating or healing organs can significantly boost healthcare but religious people can suffer",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ORGANISM_PRINTING)>0},category:Pt.SOCIAL,options:[{name:"Forbid",description:"No effect"},{name:"Allow",description:"Increase healthcare service but decrease religious",getEffectGain:(kr={},kr[m.HEALTHCARE]=function(e){return 20},kr),getEffectConsumption:(xr={},xr[m.RELIGION]=function(e){return 20},xr)}]}],Oc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),mc=function(){return mc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mc.apply(this,arguments)},yc=function(e){function t(){var t=e.call(this)||this;return t.lawsStatuses=[],t.workDispatcher.on("[laws] set option",(function(e){console.log("change law",e),t.selectLawOption(e.id,e.optionId)})),t}return Oc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.lawsStatuses=(null==e?void 0:e.laws)||[]},t.prototype.exportData=function(){return{laws:this.lawsStatuses}},t.prototype.dataToUI=function(){var e=this;return{laws:Nc.map((function(t){return e.processToUI(t)})),isUnlocked:Gc.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0}},t.prototype.getLawSelected=function(e){var t;return(null===(t=this.lawsStatuses.find((function(t){return t.id===e})))||void 0===t?void 0:t.selectedOptionId)||0},t.prototype.processToUI=function(e){var t=this.lawsStatuses.find((function(t){return t.id===e.id}));t||(t={id:e.id,selectedOptionId:0},this.lawsStatuses.push(t));var n=[];return e.options.forEach((function(e,i){var o={name:e.name,description:e.description,gain:e.getGain?C.getValue(e.getGain,_c.getInstance()).filter((function(e){return e.amount})).map((function(e){return mc(mc({},e),{amount:v(e.amount)})})):[],max:e.getStorage?C.getValue(e.getStorage,_c.getInstance()).filter((function(e){return e.amount})).map((function(e){return mc(mc({},e),{amount:v(e.amount)})})):[],consume:e.getConsumption?C.getValue(e.getConsumption,_c.getInstance()).filter((function(e){return e.amount})).map((function(e){return mc(mc({},e),{amount:v(e.amount)})})):[],consumeEffect:e.getEffectConsumption?C.getValue(e.getEffectConsumption,_c.getInstance()).filter((function(e){return e.amount})).map((function(e){return mc(mc({},e),{amount:v(e.amount)})})):[],gainEffect:e.getEffectGain?C.getValue(e.getEffectGain,_c.getInstance()).filter((function(e){return e.amount})).map((function(e){return mc(mc({},e),{amount:v(e.amount)})})):[],gainMult:e.getGainMultiplier?C.getValue(e.getGainMultiplier,_c.getInstance()).filter((function(e){return e.amount})).map((function(e){return mc(mc({},e),{amount:v(e.amount)})})):[],isSelected:(null==t?void 0:t.selectedOptionId)===i};n.push(o)})),{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:!0,options:n,category:e.category}},t.prototype.getEffectGain=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getEffectGain)||void 0===r?void 0:r[e])){var u=a.getEffectGain[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getEffectMultiplier=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getEffectMultiplier)||void 0===r?void 0:r[e])){var u=a.getEffectMultiplier[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getEffectBeingConsumed=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getEffectConsumption)||void 0===r?void 0:r[e])){var u=a.getEffectConsumption[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getResourceBeingProduced=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var u=a.getGain[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getResourceMultiplier=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getGainMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getGainMultiplier)||void 0===r?void 0:r[e])){var u=a.getGainMultiplier[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getResourceBeingConsumed=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getConsumption)||void 0===r?void 0:r[e])){var u=a.getConsumption[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getResourceBeingStored=function(e){var t=this,n=Nc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getStorage)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,c=n.find((function(e){return e.id===o.id}));if(c){var a=c.options[t.getLawSelected(c.id)];if(c&&(null===(r=a.getStorage)||void 0===r?void 0:r[e])){var u=a.getStorage[e](_c.getInstance());i.push({label:"Law ".concat(c.name,": ").concat(a.name),value:u,id:"law-".concat(c.id)})}}}),0),i},t.prototype.getColonistsCap=function(){var e=this,t=Nc.filter((function(t){return!!t.options[e.getLawSelected(t.id)].getMaxColonists})),n=[];return this.lawsStatuses.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=o.options[e.getLawSelected(o.id)];if(o&&r.getMaxColonists){var c=r.getMaxColonists(_c.getInstance());n.push({label:"Law ".concat(o.name,": ").concat(r.name),value:c,id:"law-".concat(o.id)})}}}),0),n},t.prototype.selectLawOption=function(e,t){var n=this.lawsStatuses.findIndex((function(t){return t.id===e}));n<0?this.lawsStatuses.push({id:e,selectedOptionId:t}):this.lawsStatuses[n].selectedOptionId=t,_c.getInstance().resources.reassertBalances()},t.prototype.process=function(e){},t.prototype.reset=function(){this.lawsStatuses=[]},t}(R),Lc=yc.getInstance(),Tc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Cc=function(e){function t(){return e.call(this)||this}return Tc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){},t.prototype.exportData=function(){return{}},t.prototype.dataToUI=function(){return{isUnlocked:Gc.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0}},t}(R).getInstance(),hc=[{id:a.DRONE_MASTERITY,name:"Drone masterity",description:"Every point increase drone actions output by 10%",unlockCondition:function(e){return!0},getCost:(Hr={},Hr[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Hr),category:u.START,maxLevel:10},{id:a.REPAIRED_SOLAR_PANEL,name:"Drone Solar Panel",description:"Your solar panel on drone grants small power generation",unlockCondition:function(e){return!0},getCost:(Wr={},Wr[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Wr),getGain:(Yr={},Yr[c.POWER]=function(t){return{A:.03,B:0,type:e.LINEAR}},Yr),category:u.START,maxLevel:10},{id:a.POWER_MASTERITY,name:"Power Mastery",description:"Every point boost power production by 4%",unlockCondition:function(e){return!0},getCost:(Zr={},Zr[c.KNOWLEDGE_POINT]=function(t){return{A:3,B:1.1,type:e.EXPONENTIAL}},Zr),getGainMultiplier:(jr={},jr[c.POWER]=function(t){return{A:.04,B:1,type:e.LINEAR}},jr),category:u.MASTERITIES,maxLevel:0},{id:a.MINING_MASTERITY,name:"Mining Mastery",description:"Every point boost stone, ore and platinum production by 4%",unlockCondition:function(e){return!0},getCost:(Fr={},Fr[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Fr),getGainMultiplier:(Kr={},Kr[c.STONE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Kr[c.ORE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Kr[c.IRON]=function(t){return{A:.04,B:1,type:e.LINEAR}},Kr[c.PLATINUM]=function(t){return{A:.04,B:1,type:e.LINEAR}},Kr),category:u.MASTERITIES,maxLevel:0},{id:a.NATURE_MASTERITY,name:"Nature Mastery",description:"Every point boost biomass, wood and nutrition production by 4%",unlockCondition:function(e){return!0},getCost:(Vr={},Vr[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Vr),getGainMultiplier:(qr={},qr[c.NUTRITION]=function(t){return{A:.04,B:1,type:e.LINEAR}},qr[c.BIOMASS]=function(t){return{A:.04,B:1,type:e.LINEAR}},qr[c.WOOD]=function(t){return{A:.04,B:1,type:e.LINEAR}},qr),category:u.MASTERITIES,maxLevel:0},{id:a.GAS_MASTERITY,name:"Gas & Liquid Mastery",description:"Every point boost oxygen and water production 4%",unlockCondition:function(e){return!0},getCost:(Qr={},Qr[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qr),getGainMultiplier:(Jr={},Jr[c.OXYGEN]=function(t){return{A:.04,B:1,type:e.LINEAR}},Jr[c.WATER]=function(t){return{A:.04,B:1,type:e.LINEAR}},Jr),category:u.MASTERITIES,maxLevel:0},{id:a.BUILDING_MASTERITY,name:"Materials Mastery",description:"Every point boost beam, brick and plate production by 4%",unlockCondition:function(e){return!0},getCost:(zr={},zr[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},zr),getGainMultiplier:($r={},$r[c.BEAM]=function(t){return{A:.04,B:1,type:e.LINEAR}},$r[c.BRICK]=function(t){return{A:.04,B:1,type:e.LINEAR}},$r[c.PLATE]=function(t){return{A:.04,B:1,type:e.LINEAR}},$r),category:u.MASTERITIES,maxLevel:0},{id:a.ELECTRONICS_MASTERITY,name:"Electronics Mastery",description:"Every point boost electronics (wire, semiconductor, computer, etc) production 4%",unlockCondition:function(e){return!0},getCost:(ec={},ec[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ec),getGainMultiplier:(tc={},tc[c.WIRE]=function(t){return{A:.04,B:1,type:e.LINEAR}},tc[c.COMPUTER]=function(t){return{A:.04,B:1,type:e.LINEAR}},tc[c.SEMICONDUCTOR]=function(t){return{A:.04,B:1,type:e.LINEAR}},tc),category:u.MASTERITIES,maxLevel:0},{id:a.ROCKET_MASTERITY,name:"Rocket Mastery",description:"Every point boost fuel and rockets production by 4%",unlockCondition:function(e){return!0},getCost:(nc={},nc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},nc),getGainMultiplier:(ic={},ic[c.FUEL]=function(t){return{A:.04,B:1,type:e.LINEAR}},ic[c.ROCKET_ENGINE]=function(t){return{A:.04,B:1,type:e.LINEAR}},ic),category:u.MASTERITIES,maxLevel:0},{id:a.MATERIALS_CAPACITY,name:"Materials Capacity",description:"Every point boost all solid materials capacity 4%",unlockCondition:function(e){return!0},getCost:(oc={},oc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},oc),getCapacityMultiplier:(rc={},rc[c.STONE]=function(t){return{A:.04,B:1,type:e.LINEAR}},rc[c.IRON]=function(t){return{A:.04,B:1,type:e.LINEAR}},rc[c.WOOD]=function(t){return{A:.04,B:1,type:e.LINEAR}},rc[c.ORE]=function(t){return{A:.04,B:1,type:e.LINEAR}},rc[c.PLATINUM]=function(t){return{A:.04,B:1,type:e.LINEAR}},rc[c.BIOMASS]=function(t){return{A:.04,B:1,type:e.LINEAR}},rc),category:u.CAPACITY,maxLevel:0},{id:a.LIQUIDS_CAPACITY,name:"Liquid & Gas Capacity",description:"Every point boost oxygen and water capacity 4%",unlockCondition:function(e){return!0},getCost:(cc={},cc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},cc),getCapacityMultiplier:(ac={},ac[c.OXYGEN]=function(t){return{A:.04,B:1,type:e.LINEAR}},ac[c.WATER]=function(t){return{A:.04,B:1,type:e.LINEAR}},ac),category:u.CAPACITY,maxLevel:0},{id:a.RESEARCH_CAPACITY,name:"Research Capacity",description:"Every point science capacity 4%",unlockCondition:function(e){return!0},getCost:(uc={},uc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},uc),getCapacityMultiplier:(sc={},sc[c.RESEARCH]=function(t){return{A:.04,B:1,type:e.LINEAR}},sc),category:u.CAPACITY,maxLevel:0},{id:a.AESTHETICS_CONSUMPTION,name:"Aesthetics Consumption",description:"Every point decrease aesthetics consumption by 4%",unlockCondition:function(e){return!0},getCost:(lc={},lc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},lc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:a.ENTERTAINMENT_CONSUMPTION,name:"Entertainment Consumption",description:"Every point decrease entertainment consumption by 4%",unlockCondition:function(e){return!0},getCost:(pc={},pc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},pc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:a.RELIGION_CONSUMPTION,name:"Religion Consumption",description:"Every point decrease religion consumption by 4%",unlockCondition:function(e){return!0},getCost:(Ec={},Ec[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ec),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:a.SECURITY_CONSUMPTION,name:"Security Consumption",description:"Every point decrease security consumption by 4%",unlockCondition:function(e){return!0},getCost:(dc={},dc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},dc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:a.SECURITY_CONSUMPTION,name:"Healthcare Consumption",description:"Every point decrease healthcare consumption by 4%",unlockCondition:function(e){return!0},getCost:(gc={},gc[c.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},gc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0}],vc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bc=function(e){function t(){var t=e.call(this)||this;return t.upgrades=[],t.numPrestiged=0,t.workDispatcher.on("[transmit-knowledge] do prestige",(function(e){console.log("do prestige",e),t.doPrestige()})),t.workDispatcher.on("[transmit-knowledge] do upgrade",(function(e){console.log("do prestige",e),t.doUpgrade(e.id)})),t}return vc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.upgrades=e.upgrades,this.numPrestiged=e.numPrestiged},t.prototype.exportData=function(){return{upgrades:this.upgrades,numPrestiged:this.numPrestiged}},t.prototype.dataToUI=function(){var e=this;return{upgrades:hc.map((function(t){return e.processToUI(t)})),isUnlocked:this.numPrestiged>0||this.isPrestigeAvailable(),kp:v(Gc.resources.getResource(c.KNOWLEDGE_POINT)),prestige:{isAvailable:this.isPrestigeAvailable(),description:"",potentialGain:v(this.getPrestigeGain())}}},t.prototype.getUpgradeLevel=function(e){var t;return(null===(t=this.upgrades.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.upgrades.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0},this.upgrades.push(t));var n=C.calcBatchAll(e.getCost,_c.getInstance(),t.level,_c.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:i>=1,cost:_c.getInstance().resources.assertEnought(n,_c.getInstance().resources.getBatchObject(),_c.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"0",isMaxedOut:!!e.maxLevel&&e.maxLevel<=t.level,maxLevel:e.maxLevel,level:t.level,category:e.category}},t.prototype.getEffectGain=function(e){var t=hc.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectGain[e],0,i.level);n.push({label:"Knowledge: ".concat(r.name),value:c,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=hc.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getEffectMultiplier[e],i.level,1);c&&n.push({label:"Knowledge: ".concat(r.name),value:c,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=hc.filter((function(t){var n;return!!(null===(n=t.getGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGain)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getGain[e],0,i.level);n.push({label:"Knowledge: ".concat(r.name),value:c,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceMultiplier=function(e){var t=hc.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var c=C.calculate(Gc,r.getGainMultiplier[e],0,i.level);console.log("thisProd: ",c,e,i.level),c&&n.push({label:"Knowledge: ".concat(r.name),value:c,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingStored=function(e){var t=hc.filter((function(t){var n;return!!(null===(n=t.getCapacityEffect)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r,c=t.find((function(e){return e.id===i.id}));if(c&&(null===(o=c.getCapacityEffect)||void 0===o?void 0:o[e])){var a=C.calculate(Gc,null===(r=c.getCapacityEffect)||void 0===r?void 0:r[e],0,i.level);n.push({label:"Knowledge: ".concat(c.name),value:a,id:"knowledge-".concat(c.id)})}}),0),n},t.prototype.getCapacityMult=function(e){var t=hc.filter((function(t){var n;return!!(null===(n=t.getCapacityMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var r=C.calculate(Gc,o.getCapacityMultiplier[e],0,i.level);r&&n.push({label:"Knowledge: ".concat(o.name),value:r,id:"knowledge-".concat(o.id)})}}),0),n},t.prototype.doUpgrade=function(e){var t=hc.find((function(t){return t.id===e}));if(t){var n=this.upgrades.findIndex((function(t){return t.id===e}));if(n<0)n=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(t.maxLevel&&this.upgrades[n].level>=t.maxLevel)return;var i=C.calcBatchAll(t.getCost,_c.getInstance(),this.upgrades[n].level,_c.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.upgrades[n].level++,console.log("costs: ",i),_c.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.isPrestigeAvailable=function(){return Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GREAT_RADIO_TRANSMITTER)>0&&Gc.colony.colonists>50},t.prototype.getPrestigeGain=function(){return Gc.colony.colonists-50},t.prototype.doPrestige=function(){if(this.isPrestigeAvailable()){var e=this.getPrestigeGain();Gc.landingZone.reset(),Gc.colony.reset(),Gc.crafting.reset(),Gc.science.reset(),Gc.laws.reset(),Gc.resources.reset(),Gc.resources.addResource(c.KNOWLEDGE_POINT,e),this.numPrestiged++,Gc.resources.reassertBalances()}},t.prototype.process=function(e){},t}(R),Sc=Bc.getInstance(),Pc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Mc=function(e){function t(){var t=e.call(this)||this;return t.transmitKnowledge=Sc,t}return Pc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.transmitKnowledge.importData(e.transmitKnowledge)},t.prototype.exportData=function(){return{transmitKnowledge:this.transmitKnowledge.exportData()}},t.prototype.dataToUI=function(){return{transmitKnowledge:this.transmitKnowledge.dataToUI(),isUnlocked:this.transmitKnowledge.isPrestigeAvailable()||this.transmitKnowledge.numPrestiged>0}},t.prototype.preProcess=function(e){},t.prototype.process=function(e){this.transmitKnowledge.process(e)},t}(R).getInstance(),Uc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_c=function(e){function t(){var t=e.call(this)||this;return t.dT=0,t.timeInGame=0,t.timeInPrestige=0,t.isFirstIter=!1,t.workDispatcher.on("initialize",(function(e){console.log("Received payload",e)})),t.workDispatcher.on("[game] load",(function(e){console.log("Received load",e),t.importData(e)})),t.workDispatcher.on("[game] export text",(function(e){console.log("Received export text",e),t.workDispatcher.output("[game] export to string",t.exportData())})),t.workDispatcher.on("[game] export file",(function(e){console.log("Received export to file",e),t.workDispatcher.output("[game] export to file",t.exportData())})),t.workDispatcher.on("[game] purchase max",(function(e){console.log("Received purchase max",e),t.purchaseMax()})),t.workDispatcher.on("[game] trigger save",(function(e){t.workDispatcher.output("[game] save",t.exportData())})),t.resources=nr,t.milestones=pr,t.landingZone=ur,t.colony=Lr,t.science=Sr,t.crafting=wr,t.goals=Ic,t.laws=Lc,t.space=Cc,t.prestige=Mc,setInterval((function(){t.process(.1)}),100),setInterval((function(){t.workDispatcher.output("[game] update ui",t.dataToUI())}),200),setInterval((function(){t.workDispatcher.output("[game] save",t.exportData())}),1e4),t}return Uc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.process=function(e){this.dT=1*e,this.landingZone.preProcess(1*e),this.milestones.process(1*e),this.landingZone.process(1*e),this.colony.process(1*e),this.resources.process(1*e),this.colony.process(1*e),this.science.process(1*e),this.crafting.process(1*e),this.goals.process(1*e),this.space.process(1*e),this.prestige.process(1*e),this.timeInPrestige+=1*e,this.timeInGame+=1*e,this.isFirstIter&&(this.isFirstIter=!1,this.resources.reassertBalances())},t.prototype.importData=function(e){this.resources.importData(e.resources),this.milestones.importData(e.milestones||[]),this.landingZone.importData(e.landingZone),this.colony.importData(e.colony),this.science.importData(e.science),this.crafting.importData(e.crafting),this.goals.importData(e.goals),this.laws.importData(e.laws),this.prestige.importData(e.prestige),this.resources.reassertBalances(),this.timeInGame=e.timeInGame,this.timeInPrestige=e.timeInPrestige,this.isFirstIter=!0},t.prototype.exportData=function(){return{landingZone:this.landingZone.exportData(),colony:this.colony.exportData(),resources:this.resources.exportData(),milestones:this.milestones.exportData(),science:this.science.exportData(),crafting:this.crafting.exportData(),goals:this.goals.exportData(),laws:this.laws.exportData(),prestige:this.prestige.exportData(),timeInPrestige:this.timeInPrestige,timeInGame:this.timeInGame}},t.prototype.dataToUI=function(){return{landingZone:this.landingZone.dataToUI(),colony:this.colony.dataToUI(),science:this.science.dataToUI(),crafting:this.crafting.dataToUI(),resources:this.resources.dataToUI(),laws:this.laws.dataToUI(),goals:this.goals.dataToUI(),space:this.space.dataToUI(),prestige:this.prestige.dataToUI(),timeInPrestige:h(this.timeInPrestige),timeInGame:h(this.timeInGame)}},t.prototype.purchaseMax=function(){},t}(R),Gc=_c.getInstance();self.addEventListener("message",(function(e){var t=e.data;console.log("send to worker: ",t),Gc.workDispatcher.handleInput(t.type,t.payload)}))})();