(()=>{"use strict";var e,t,n,i,o,r,a,c,u,s,l,p,E,d,g,f,A=function(){function e(){this.events=[],this.events=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.on=function(e,t){this.events.push({action:e,callback:t})},e.prototype.handleInput=function(e,t){var n=this.events.find((function(t){return t.action===e}));n?n.callback(t):console.error("Unknown event: ",e)},e.prototype.output=function(e,t){postMessage({type:e,payload:t})},e}().getInstance(),R=function(){function e(){this.workDispatcher=A}return e.prototype.importData=function(e){},e.prototype.exportData=function(){return{}},e.prototype.dataToUI=function(){return{}},e.prototype.process=function(e){},e}();!function(e){e[e.POLYNOMIAL=0]="POLYNOMIAL",e[e.EXPONENTIAL=1]="EXPONENTIAL",e[e.LINEAR=2]="LINEAR"}(e||(e={})),function(e){e.CHARGE="charge",e.DRILL_ROCK="drillRock",e.DRILL_ORE="drillOre",e.COLLECT_BIOMASS="collectBiomass"}(t||(t={})),function(e){e.REPAIR_DRILL="repair-drill",e.REPAIR_CABLE="repair-cable",e.REPAIR_MANIPULATORS="repair-manipulators",e.REPAIR_MACHINERY="repair-machinery",e.AUTO_QUARRYING="autoquarrying",e.AUTO_MINERS="autominers",e.COMBUSTION="combustion",e.REPAIR_STORAGE_MODULE="storage-module",e.REPAIR_BATTERY="repair-battery",e.COMBUSTION_CAMERA="combuscion-camera",e.THERMAL_TECH="thermal-tech",e.MINE_TECH="mine-tech",e.QUARRY_TECH="quarry-tech",e.BIO_TECH="bio-tech",e.STORAGE_TECH="storage-tech",e.BACTERIA_SELECTION="bacteria-selection",e.THERMAL_TECH2="thermal-tech2",e.OXYGEN_CAMERAS="oxygen-cameras",e.RESERVE_BATTERIES="reserve-batteries",e.OXYGEN_COMPRESSORS="oxygen-compressors",e.WATER_PUMPING="water-pumping",e.ELECTROLITES="electrolites",e.SUPPLY_MODULE="supply-module",e.DOCKING_MODULE="docking-module",e.RESEARCH_MODULE="research-module",e.CARGO_SORTING="cargo-sorting",e.FARMING_TOOLS="farming-tools",e.DEEP_MINING="deep-mining",e.UNDERGROUND_VAULTS="underground-vaults",e.WATER_DRILLING="water-drill",e.FERTILIZING="fertilizing",e.FLORA="flora",e.FLAMMABILITY="flammability",e.CRANES="cranes",e.CARGO_CRANES="cargo-cranes",e.FORESTER_TOOLS="forester-tools",e.BROADLEAVED="broad-leaved",e.WOODEN_FURNITURE="furniture",e.IRON_TOOLS="iron-tools",e.IRON_PARTS="iron-parts",e.IRON_CONTAINERS="iron-containers",e.IMPROVED_WIRES="improved wires",e.REFRACTORY_MATERIALS="refractory-materials",e.METAL_WORKING="metal-working",e.CEMENT="cement",e.TREE_CARE="tree-care",e.NATURAL_ENVIRONMENT="natural-environment",e.FRUIT_TREES="fruit-trees",e.WATER_FILTERING="water-filtering",e.CHEMICAL_ANALYSIS="chemical-analysis",e.BETTER_ELECTROLITES="better-electrolites",e.HIGH_TEMPERATURE_ENGINE="high-temperature-engine",e.PLATINUM_MINING="platinum-mining",e.PLATINUM_DRILLS="platinum-drills",e.PLATINUM_TOOLS="platinum-tools",e.SOCIAL_RESEARCH_CENTER="social-research-center",e.COTTAGES="cottages",e.ENTERTAINMENT="entertainment",e.ADVANCED_METALLURGY="advanced_metallurgy",e.COMPOSITE_METALS="composite_metals",e.HEAT_INSULATING_CAMERAS="heat_insulating_cameras",e.GERMETISATION="germetisation",e.RUBBER_DETAILS="rubber_details",e.IMPROVED_WIRING="improved_wiring",e.ENERGY_SAVING="energy_saving",e.ENERGY_SAVING_EXPEDITION_DRONES="energy-saving-expedition-drones",e.SURVEILLANCE_CAMERAS="surveillance_cameras",e.COMPUTERS="computers",e.INDUSTRY_AUTOMATION="idustrial_automation",e.BUILDING_PRINTING="building_printer",e.ORGANISM_PRINTING="organs_printing",e.BETTER_DIAGNOSTICS="better-diagnostics",e.MULTISTORE_WAREHOUSES="multistore_warehouses",e.GMO="GMO",e.LASER_CUTTING="laser-cutting",e.IMPROVED_LITHOGRAPHY="improved-lithography",e.BETTER_PHOTOELEMENTS="better-photo-elements",e.GREAT_RADIO_TRANSMITTER="great_radio_transmitter",e.FLIGHT_TECHNOLOGY="flight-technology",e.FASTER_ROCKETS="faster-rockets",e.CONDUCTIVE_NANOPARTICLES="conductive-nanoparticles",e.NANO_BOTS="nano_bots",e.TELESCOPE="telescope"}(n||(n={})),function(e){e.QUARRY="quarry",e.MINE="mine",e.BACTERIA_INCUBATOR="bacteria-incubator",e.THERMOELECTRIC_STATION="thermo-electric-station",e.STORAGE="storage-section",e.STORAGE_HUB="storage-hub",e.OXYGEN_COLLECTOR="oxygen-collector",e.WATER_PUMP="water-pump",e.WATER_STORAGE="water-storage",e.BATTERY="battery",e.LIVING_CABIN="living-cabin",e.METEO_STATION="meteo-station",e.MONUMENT="monument",e.CLINIC="clinic",e.PARK="park",e.BIO_LAB="bio-lab",e.FOREST_PLANT="forest-plant",e.SMELTER="smelter",e.EXPEDITION_CENTER="expedition_center",e.WAREHOUSE="warehouse",e.TANK="tank",e.COTTAGE="cottage",e.CINEMA="cinema",e.SOCIAL_RESEARCH_CENTER="social_research_center",e.METALLURGY_COMPLEX="metallurgy_complex",e.BUILDING_FACTORY="building_factory",e.STORAGE_CONTAINER="storage_container",e.SOLAR_PANEL="solar-panel",e.SHRINE="shrine",e.DATA_CENTER="data-center",e.APARTMENT="apartment",e.PANDEMIC_RESEARCH_CENTER="pandemic-research-center",e.ELECTRONICS_FACTORY="electronics-factory",e.TEMPLE="temple",e.ADMINISTRATIVE_CENTER="administrative_center",e.SOLAR_SATELLITE="solar-satellite",e.ORBITAL_TOURISM_CENTER="orbital-tourism-center",e.ICE_MELTING_STATION="ice-melting-station",e.FUEL_FACTORY="fuel-factory",e.NANOBOTS_FACTORY="nanobots-factory"}(i||(i={})),function(e){e.POWER="Power",e.INDUSTRIAL="Industrial",e.STORAGE="Storage",e.SCIENCE="Science",e.MILITARY="Military",e.PUBLIC="Public",e.RESIDENTAL="Residental"}(o||(o={})),function(e){e.ORBIT="Orbit",e.MOON="Moon"}(r||(r={})),function(e){e.STONE="stone",e.POWER="power",e.ORE="ore",e.BIOMASS="biomass",e.OXYGEN="oxygen",e.NUTRITION="nutrition",e.WATER="water",e.RESEARCH="research",e.WOOD="wood",e.IRON="iron",e.PLATINUM="platinum",e.BEAM="beam",e.BRICK="brick",e.PLATE="plate",e.WIRE="wire",e.FUEL="fuel",e.RUBBER="rubber",e.PLASTICS="plastics",e.SEMICONDUCTOR="semiconductor",e.COMPUTER="computer",e.ROCKET_ENGINE="rocket-engine",e.KNOWLEDGE_POINT="knowledge-point"}(a||(a={})),function(e){e.DRONE_MASTERITY="Drone Masterity",e.REPAIRED_SOLAR_PANEL="Drone Solar Panel",e.POWER_MASTERITY="Power Masterity",e.MINING_MASTERITY="Mining Masterity",e.NATURE_MASTERITY="Nature Masterity",e.GAS_MASTERITY="Gas And Liquids",e.BUILDING_MASTERITY="Building Masterity",e.ELECTRONICS_MASTERITY="Electronics Masterity",e.ROCKET_MASTERITY="Rocket Masterity",e.SCIENCE_MASTERITY="Science Masterity",e.MATERIALS_CAPACITY="Materials Capacity",e.LIQUIDS_CAPACITY="Liquids Capacity",e.RESEARCH_CAPACITY="Research Capacity",e.AESTHETICS_CONSUMPTION="Aesthetics Consumption",e.HEALTH_CONSUMPTION="Health Consumption",e.ENTERTAINMENT_CONSUMPTION="Entertainment Consumption",e.RELIGION_CONSUMPTION="Religion Consumption",e.SECURITY_CONSUMPTION="Security Consumption"}(c||(c={})),function(e){e.START="Start",e.MASTERITIES="Production",e.CAPACITY="Capacity",e.COLONY="Colony"}(u||(u={}));var I,N=[{id:t.CHARGE,name:"Charge",description:"Recover your energy power",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:{},getGain:(s={},s[a.POWER]=function(t){return{A:(1+.6*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_CABLE))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},s)},{id:t.DRILL_ROCK,name:"Drill rock",description:"Drill rock at cost of some energy",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:(l={},l[a.POWER]=function(t){return{A:1,B:1,type:e.EXPONENTIAL}},l),getGain:(p={},p[a.STONE]=function(t){return{A:(.25+.125*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},p)},{id:t.DRILL_ORE,name:"Drill ore",description:"Drill ore at cost of some energy",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL)>3},availableCondition:function(e){return!0},getCost:(E={},E[a.POWER]=function(t){return{A:2,B:1,type:e.EXPONENTIAL}},E),getGain:(d={},d[a.ORE]=function(t){return{A:(.2+.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},d)},{id:t.COLLECT_BIOMASS,name:"Collect Biomass",description:"Dig and get some organics",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>0},availableCondition:function(e){return!0},getCost:(g={},g[a.POWER]=function(t){return{A:4,B:1,type:e.EXPONENTIAL}},g),getGain:(f={},f[a.BIOMASS]=function(t){return{A:(.2+.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},f)}];!function(e){e.EXOFARMING="exofarming",e.METEOROLOGY="meteorology",e.MINERALOGY="mineralogy",e.CIVIL_SERVICE="civilservice",e.ENGINEERING="engineering",e.EXOBIOLOGY="exobiology",e.METALLURGY="metallurgy",e.EXOFORESTRY="exo-forestry",e.FLORA_RESEARCH="flora-research",e.CHEMISTRY="chemistry",e.SOCIOLOGY="sociology",e.GEOLOGY="geology",e.GEOGRAPHY="geography",e.MATERIAL_KNOWLEDGE="material_knowledge",e.ORGANIC_CHEMISTRY="organic_chemistry",e.CODEX_OF_LAW="codex_of_law",e.ELECTRICITY_STUDY="electricity_study",e.ELECTRONICS="electronics",e.PUBLIC_SERVICE="public_service",e.PRINTING_3D="printing_3d",e.GENETICS="genetics",e.HIGH_GRAVITY_PHYSICS="high_gravity_physics",e.ADVANCED_ANATOMY="advanced_anatomy",e.ROCKET_SCIENCE="rocket-science",e.GRAVITY_THEORY="gravity-theory",e.ADVANCED_BIOLOGY="advanced-biology",e.RADIATION_STUDY="radiation-study",e.QUANTUM_PHYSICS="quantum-physics",e.NANO_PHYSICS="nano-physics",e.ASTROPHYSICS="astrophysics"}(I||(I={}));var O,y,m=[{id:a.POWER,name:"Power",unlockCondition:function(e){return!0},hasCapacityLimit:!0,valuability:4},{id:a.WATER,name:"Water",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},hasCapacityLimit:!0,valuability:8},{id:a.NUTRITION,name:"Nutrition",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SUPPLY_MODULE)>0},hasCapacityLimit:!0,valuability:4},{id:a.OXYGEN,name:"Oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},hasCapacityLimit:!0,valuability:8},{id:a.WOOD,name:"Wood",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},hasCapacityLimit:!0,valuability:4},{id:a.STONE,name:"Stone",unlockCondition:function(e){return!0},hasCapacityLimit:!0,valuability:1},{id:a.ORE,name:"Ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL)>3},hasCapacityLimit:!0,valuability:1},{id:a.IRON,name:"Metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!0,valuability:4},{id:a.PLATINUM,name:"Platinum",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GEOLOGY)>0},hasCapacityLimit:!0,valuability:16},{id:a.BIOMASS,name:"Biomass",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>0},hasCapacityLimit:!0,valuability:2},{id:a.RESEARCH,name:"Research",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0},hasCapacityLimit:!0,valuability:4},{id:a.BEAM,name:"Beam",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:64},{id:a.BRICK,name:"Brick",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:64},{id:a.PLATE,name:"Plate",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.FUEL,name:"Fuel",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:256},{id:a.RUBBER,name:"Rubber",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.PLASTICS,name:"Plastics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.WIRE,name:"Wire",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.SEMICONDUCTOR,name:"Semiconduct.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:256},{id:a.COMPUTER,name:"Computer.",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMPUTERS)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:512},{id:a.ROCKET_ENGINE,name:"Rocket",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:1024},{id:a.KNOWLEDGE_POINT,name:"Knowledge Point",unlockCondition:function(e){return!0},hasCapacityLimit:!1,isHidden:!0,valuability:1096428}];!function(e){e.QUARRYMAN="quarryman",e.MINER="miner",e.SCIENTIST="scientist",e.FARMER="farmer",e.FORESTER="forester",e.ARTISAN="artisan",e.POLICEMAN="policeman"}(O||(O={})),function(e){e.AESTHETICS="AESTHETICS",e.ENTERTAINMENT="ENTERTAINMENT",e.SECURITY="SECURITY",e.HEALTHCARE="HEALTHCARE",e.RELIGION="RELIGION",e.WORK_CONDITIONS="WORK_CONDITIONS"}(y||(y={}));var L=[{id:y.ENTERTAINMENT,name:"Entertainment",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max(2*(e.colony.colonists-10)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.ENTERTAINMENT_CONSUMPTION),0)}},{id:y.HEALTHCARE,name:"Healthcare",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max((2*(e.colony.colonists-10)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.HEALTH_CONSUMPTION))*Math.pow(.95,e.landingZone.landingZoneBuildings.getBuildingLevel(i.PANDEMIC_RESEARCH_CENTER)),0)}},{id:y.AESTHETICS,name:"Aesthetics",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>0},getConsumption:function(e){return Math.max(2*e.colony.colonists-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.AESTHETICS_CONSUMPTION),0)}},{id:y.SECURITY,name:"Security",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.SECURITY_CONSUMPTION),0)}},{id:y.RELIGION,name:"Religion",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.RELIGION_CONSUMPTION),0)}}],T=function(e){var t=m.find((function(t){return t.id===e}))||L.find((function(t){return t.id===e}));return t?t.unlockCondition(Ha)?t.name:"???":e},C=function(){function t(){}return t.calculate=function(e,n,i,o){void 0===o&&(o=1);var r=n(e);return t.calculateFormulaBatch(r,i,o)},t.calculateFormula=function(n,i){switch(n.type){case e.EXPONENTIAL:return t.calculateExponential(n,i);case e.POLYNOMIAL:return t.calculatePolynomial(n,i);case e.LINEAR:return t.calculateLinear(n,i);default:return 0}},t.calculateExponential=function(e,t){return e.A*Math.pow(e.B,t)},t.calculatePolynomial=function(e,t){return e.A*Math.pow(t,e.B)},t.calculateLinear=function(e,t){return e.A*t+e.B},t.calculateFormulaBatch=function(n,i,o){switch(n.type){case e.EXPONENTIAL:return t.calculateExponentialBatch(n,i,o);case e.POLYNOMIAL:return t.calculatePolynomialBatch(n,i,o);case e.LINEAR:return t.calculateLinearBatch(n,i,o);default:return 0}},t.calculateExponentialBatch=function(e,t,n){return 1===e.B?e.A*n:e.A*Math.pow(e.B,t)*(Math.pow(e.B,n)-1)/(e.B-1)},t.calculatePolynomialBatch=function(e,t,n){return console.error("Polynomial batch is not implemented"),0},t.calculateLinearBatch=function(e,t,n){return e.A*n+e.B},t.calculateDX=function(e,n,i,o){var r=n(e);return t.calculateDXByFormula(r,i,o)},t.calculateDXByFormula=function(n,i,o){switch(n.type){case e.EXPONENTIAL:return t.calculateDXExponential(n,i,o);case e.POLYNOMIAL:return t.calculateDXPolynomial(n,i,o);case e.LINEAR:return t.calculateDXLinear(n,i,o);default:return 0}},t.calculateDXExponential=function(e,t,n){return 0===e.A?1e300:1===e.B?n/e.A:n?Math.log(n*(e.B-1)/(e.A*Math.pow(e.B,t))+1)/Math.log(e.B):0},t.calculateDXPolynomial=function(e,t,n){return console.error("Polynomial dX is not implemented"),0},t.calculateDXLinear=function(e,t,n){return(n-e.B)/e.A},t.calcBatch=function(e,n,i,o){void 0===o&&(o=1);var r=[];return Object.entries(e).forEach((function(e){var a=e[0],c=e[1];r.push({id:a,name:T(a),amount:t.calculate(n,c,i,o)})})),r},t.calcDXBatch=function(e,n,i,o){var r={};return Object.entries(e).forEach((function(e){var a=e[0],c=e[1];r[a]=t.calculateDX(n,c,i,o[a])})),r},t.calcBatchAll=function(e,n,i,o,r){void 0===r&&(r=1);var a=[];return Object.entries(e).forEach((function(e){var c=e[0],u=e[1],s=t.calculateDX(n,u,i,o[c]),l=t.calculate(n,u,i,r),p=0;if(s<1){var E=n.resources.getResourceCap(c);p=E&&E<l||n.resources.getResourceBalance(c)<0&&l-(o[c]||0)>0?1e300:(l-(o[c]||0))/(n.resources.getResourceBalance(c)||1e-300)}a.push({id:c,name:T(c),amount:l,max:s,eta:p})})),a},t.getValue=function(e,t){var n=[];return Object.entries(e).forEach((function(e){var i=e[0],o=e[1];n.push({id:i,name:T(i),amount:o(t)})})),n},t}();function h(e){if(e>1e12)return"Never";if(!e||e<0)return"00:00:00";e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(t>9?"".concat(t,":"):"0".concat(t,":"))+(n>9?"".concat(n,":"):"0".concat(n,":"))+(i>9?"".concat(i):"0".concat(i))}function v(e,t,n){if(void 0===t&&(t=3),void 0===n&&(n=12),Math.abs(e)>Math.pow(10,n))return e.toExponential(t);if(Math.abs(e)<1e-4)return"0.00";if(Math.abs(e)<1)return e.toFixed(t);var i=Math.abs(e),o=Math.log10(i),r=Math.floor(o/3),a=i/Math.pow(10,3*r),c="";switch(r){case 1:c="K";break;case 1:c="M";break;case 1:c="B";break;case 1:c="T";break;default:c=""}return"".concat((Math.sign(e)*a).toPrecision(t)).concat(c)}var B,S,P,M,_,U,G,b,X,w,D,x,k,H,Y,W,Z,F,j,K,V,q,Q,J,z,$,ee,te,ne,ie,oe,re,ae,ce,ue,se,le,pe,Ee,de,ge,fe,Ae,Re,Ie,Ne,Oe,ye,me,Le,Te,Ce,he,ve,Be,Se,Pe,Me,_e,Ue,Ge,be,Xe,we,De,xe,ke,He,Ye,We,Ze,Fe,je,Ke,Ve,qe,Qe,Je,ze,$e,et,tt,nt,it,ot,rt,at,ct,ut,st,lt,pt,Et,dt,gt,ft,At,Rt,It,Nt,Ot,yt,mt,Lt,Tt,Ct,ht,vt,Bt,St,Pt,Mt,_t,Ut,Gt,bt,Xt,wt,Dt,xt,kt,Ht,Yt,Wt,Zt,Ft,jt,Kt,Vt,qt,Qt,Jt,zt,$t,en,tn,nn,on,rn,an,cn,un,sn,ln,pn,En,dn,gn,fn,An,Rn,In,Nn,On,yn,mn,Ln,Tn,Cn,hn,vn,Bn,Sn,Pn,Mn,_n,Un,Gn,bn,Xn,wn,Dn,xn,kn,Hn,Yn,Wn,Zn,Fn,jn,Kn,Vn,qn,Qn,Jn,zn,$n,ei,ti,ni,ii,oi,ri,ai,ci,ui,si,li,pi,Ei,di,gi,fi,Ai,Ri,Ii,Ni,Oi,yi,mi,Li,Ti,Ci,hi,vi,Bi,Si,Pi,Mi,_i,Ui,Gi,bi,Xi=(B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},B(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),wi=function(){return wi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wi.apply(this,arguments)},Di=function(e){function t(){var t=e.call(this)||this;return t.actions=[],t.workDispatcher.on("[landing-zone] do action",(function(e){console.log("do action",e),t.doAction(e.id)})),t}return Xi(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.actions=e},t.prototype.exportData=function(){return this.actions},t.prototype.dataToUI=function(){var e=this;return{list:N.map((function(t){return e.processToUI(t)}))}},t.prototype.processToUI=function(e){var t=this.actions.find((function(t){return t.id===e.id}));t||(t={id:e.id,cooldown:0,progress:0,performed:0},this.actions.push(t));var n=C.calcBatchAll(e.getCost,ka.getInstance(),0,ka.getInstance().resources.getBatchObject()),i=C.calcBatch(e.getGain,ka.getInstance(),0),o=n.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300),r=n.reduce((function(e,t){return e&&t.eta<1e80}),!0);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),isAvailable:e.availableCondition(Ha)&&o>=1,cost:ka.getInstance().resources.assertEnought(n,ka.getInstance().resources.getBatchObject(),ka.getInstance().resources.getBatchBalanceObject()),gain:i.map((function(e){return wi(wi({},e),{amount:v(e.amount)})})),progress:(t.cooldown?100*t.progress/t.cooldown:100).toPrecision(3),isBlocked:!r}},t.prototype.doAction=function(e){var t=N.find((function(t){return t.id===e}));if(t){var n=this.actions.findIndex((function(t){return t.id===e}));if(n<0)n=this.actions.length,this.actions.push({id:e,cooldown:0,progress:0,performed:0});else if(this.actions[n].cooldown>0)return;var i=C.calcBatchAll(t.getCost,ka.getInstance(),0,ka.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.actions[n].cooldown=1.5,this.actions[n].performed++,console.log("costs: ",i),ka.getInstance().resources.subtractResourceBatch(i),Ha.resources.reassertBalances())}},t.prototype.getActionPerformed=function(e){var t;return(null===(t=this.actions.find((function(t){return t.id===e})))||void 0===t?void 0:t.performed)||0},t.prototype.process=function(e){this.actions.forEach((function(t,n){if(t.cooldown&&(t.progress+=e,t.progress>=t.cooldown)){t.cooldown=0,t.progress=0;var i=N.find((function(e){return t.id===e.id}));if(!i)return;var o=C.calcBatch(i.getGain,ka.getInstance(),0);console.log("gain: ",o,Ha.resources.resourcesStatus),o.forEach((function(e){Ha.resources.addResource(e.id,e.amount)})),Ha.resources.reassertBalances()}}))},t.prototype.reset=function(){this.actions=[]},t}(R),xi=Di.getInstance(),ki=[{id:n.REPAIR_DRILL,name:"Repair Drill",description:"Allows drilling harder materials. Also improves stone output",unlockCondition:function(e){return!0},getCost:(S={},S[a.POWER]=function(t){return{A:2,B:1.3,type:e.EXPONENTIAL}},S[a.STONE]=function(t){return{A:.5,B:1.3,type:e.EXPONENTIAL}},S),maxLevel:8},{id:n.REPAIR_CABLE,name:"Repair Charging Cable",description:"Improves Charge Output",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(P={},P[a.POWER]=function(t){return{A:3,B:1.3,type:e.EXPONENTIAL}},P[a.ORE]=function(t){return{A:1,B:1.3,type:e.EXPONENTIAL}},P),maxLevel:5},{id:n.REPAIR_MANIPULATORS,name:"Repair Manipulators",description:"Allows digging and picking more materials",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(M={},M[a.POWER]=function(t){return{A:5,B:1.3,type:e.EXPONENTIAL}},M[a.ORE]=function(t){return{A:2,B:1.3,type:e.EXPONENTIAL}},M),maxLevel:5},{id:n.AUTO_QUARRYING,name:"Auto-quarrying",description:"Allows building quarries",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(_={},_[a.POWER]=function(t){return{A:8,B:1.3,type:e.EXPONENTIAL}},_[a.ORE]=function(t){return{A:4,B:1.3,type:e.EXPONENTIAL}},_),maxLevel:1},{id:n.REPAIR_MACHINERY,name:"Repair machinery",description:"Repair machinery. Improves your automatic quarries and mines by 50%",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_QUARRYING)>0},getCost:(U={},U[a.POWER]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},U[a.ORE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},U),maxLevel:4},{id:n.AUTO_MINERS,name:"Auto-miners",description:"Allows building ore mines",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY)>0},getCost:(G={},G[a.POWER]=function(t){return{A:8,B:1.3,type:e.EXPONENTIAL}},G[a.ORE]=function(t){return{A:4,B:1.3,type:e.EXPONENTIAL}},G),maxLevel:1},{id:n.COMBUSTION,name:"Combustion",description:"Allows producing electricity power by burning biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.COLLECT_BIOMASS)>0},getCost:(b={},b[a.POWER]=function(t){return{A:12,B:1.3,type:e.EXPONENTIAL}},b[a.BIOMASS]=function(t){return{A:6,B:1.3,type:e.EXPONENTIAL}},b),maxLevel:1},{id:n.REPAIR_STORAGE_MODULE,name:"Repair Storage Module",description:"Repair the storage module. Allows building storage sections",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>2},getCost:(X={},X[a.POWER]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},X[a.ORE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},X),maxLevel:1},{id:n.REPAIR_BATTERY,name:"Repair Battery",description:"Improves energy storage by 20",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>4&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(w={},w[a.POWER]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},w[a.ORE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},w),getCapacityEffect:(D={},D[a.POWER]=function(t){return{A:20,B:0,type:e.LINEAR}},D),maxLevel:3},{id:n.COMBUSTION_CAMERA,name:"Combustion Cameras",description:"Extra combustion cameras decrease biomass consumption by thermoelectric power plants by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(x={},x[a.POWER]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},x[a.STONE]=function(t){return{A:18,B:1.5,type:e.EXPONENTIAL}},x),maxLevel:1},{id:n.QUARRY_TECH,name:"Improved Quarry",description:"Increases quarries output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.QUARRY)>4},getCost:(k={},k[a.STONE]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},k[a.ORE]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},k),maxLevel:1},{id:n.MINE_TECH,name:"Improved Mine",description:"Increases mines output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.MINE)>4},getCost:(H={},H[a.ORE]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},H[a.POWER]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},H),maxLevel:1},{id:n.THERMAL_TECH,name:"Improved Combustion",description:"Increases thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>4},getCost:(Y={},Y[a.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Y[a.BIOMASS]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},Y),maxLevel:1},{id:n.BIO_TECH,name:"Improved Bio Technology",description:"Increases incubators output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.BACTERIA_INCUBATOR)>4},getCost:(W={},W[a.BIOMASS]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},W[a.STONE]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},W),maxLevel:1},{id:n.STORAGE_TECH,name:"Improved Storage",description:"Increases stone, ore and biomass storage from storage sections and hubs by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>4},getCost:(Z={},Z[a.STONE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z[a.ORE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z),getCapacityMultiplier:(F={},F[a.STONE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},F[a.ORE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},F[a.BIOMASS]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},F),maxLevel:1},{id:n.BACTERIA_SELECTION,name:"Bacteria Selection",description:"Increases electricity consumption by incubators, but incubators start producing oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BIO_TECH)>0},getCost:(j={},j[a.POWER]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},j[a.BIOMASS]=function(t){return{A:90,B:1.5,type:e.EXPONENTIAL}},j),maxLevel:1},{id:n.THERMAL_TECH2,name:"Improved Thermal Plants",description:"Increases thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>9},getCost:(K={},K[a.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},K[a.BIOMASS]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},K),maxLevel:1},{id:n.OXYGEN_CAMERAS,name:"Oxidize Combustion Cameras",description:"Thermal plants are 50% more efficient, but now require oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},getCost:(V={},V[a.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},V[a.OXYGEN]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},V),maxLevel:1},{id:n.OXYGEN_COMPRESSORS,name:"Oxygen Compressors",description:"Allows building oxygen compressors to store more oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},getCost:(q={},q[a.POWER]=function(t){return{A:65,B:1.5,type:e.EXPONENTIAL}},q[a.ORE]=function(t){return{A:165,B:1.5,type:e.EXPONENTIAL}},q[a.OXYGEN]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},q),maxLevel:1},{id:n.RESERVE_BATTERIES,name:"Reserve Batteries",description:"Thermoelectric plants now also provide small power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS)>0},getCost:(Q={},Q[a.POWER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Q[a.OXYGEN]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},Q[a.ORE]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Q),maxLevel:1},{id:n.WATER_PUMPING,name:"Water Pumping",description:"Allows building water pumping stations",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS)>0},getCost:(J={},J[a.POWER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},J[a.STONE]=function(t){return{A:165,B:1.5,type:e.EXPONENTIAL}},J[a.ORE]=function(t){return{A:175,B:1.5,type:e.EXPONENTIAL}},J),maxLevel:1},{id:n.ELECTROLITES,name:"Electrolytes",description:"Allows building extra batteries. Also, improves power output by 20%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0},getCost:(z={},z[a.POWER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},z[a.WATER]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},z[a.ORE]=function(t){return{A:225,B:1.5,type:e.EXPONENTIAL}},z),getGain:{},getGainMultiplier:($={},$[a.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},$),getCapacityEffect:(ee={},ee[a.NUTRITION]=function(t){return{A:40,B:0,type:e.LINEAR}},ee),maxLevel:1},{id:n.SUPPLY_MODULE,name:"Repair Supply Module",description:"Start generating trace amount of nutrition",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ELECTROLITES)>0},getCost:(te={},te[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},te[a.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},te[a.ORE]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},te),getGain:(ne={},ne[a.NUTRITION]=function(t){return{A:.2,B:0,type:e.LINEAR}},ne),getCapacityEffect:(ie={},ie[a.NUTRITION]=function(t){return{A:40,B:0,type:e.LINEAR}},ie),maxLevel:1},{id:n.DOCKING_MODULE,name:"Repair Docking Module",description:"Enables colonists arrival",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SUPPLY_MODULE)>0},getCost:(oe={},oe[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},oe[a.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},oe[a.ORE]=function(t){return{A:360,B:1.5,type:e.EXPONENTIAL}},oe),getGain:{},getCapacityEffect:{},maxLevel:1},{id:n.RESEARCH_MODULE,name:"Repair Research Module",description:"Repair the research module to allow colonists to work as researchers and produce science",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(re={},re[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},re[a.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},re[a.OXYGEN]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},re),getGain:{},getCapacityEffect:(ae={},ae[a.RESEARCH]=function(t){return{A:100,B:0,type:e.LINEAR}},ae),maxLevel:1},{id:n.CARGO_SORTING,name:"Cargo Sorting",description:"Repairs sorting machinery. Gives 75% bonus to stone, ore and biomass storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(ce={},ce[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},ce[a.STONE]=function(t){return{A:340,B:1.5,type:e.EXPONENTIAL}},ce[a.ORE]=function(t){return{A:340,B:1.5,type:e.EXPONENTIAL}},ce),getGain:{},getCapacityMultiplier:(ue={},ue[a.STONE]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue[a.ORE]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue[a.BIOMASS]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue),maxLevel:1},{id:n.FARMING_TOOLS,name:"Farming Tools",description:"Provide some basic tools to your farmers. Improves farming output by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0},getCost:(se={},se[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},se[a.RESEARCH]=function(t){return{A:35,B:1.5,type:e.EXPONENTIAL}},se[a.ORE]=function(t){return{A:400,B:1.5,type:e.EXPONENTIAL}},se),getGain:{},getGainMultiplier:(le={},le[a.NUTRITION]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},le),maxLevel:3},{id:n.DEEP_MINING,name:"Deep Mining",description:"Improves stone and ore output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(pe={},pe[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},pe[a.RESEARCH]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},pe[a.ORE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},pe),getGain:{},getGainMultiplier:(Ee={},Ee[a.ORE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ee[a.STONE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ee),maxLevel:3},{id:n.UNDERGROUND_VAULTS,name:"Underground Vaults",description:"Improves your stone, ore and biomass storage facilities by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(de={},de[a.POWER]=function(t){return{A:250,B:1.75,type:e.EXPONENTIAL}},de[a.RESEARCH]=function(t){return{A:25,B:1.75,type:e.EXPONENTIAL}},de[a.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},de),getGain:{},getCapacityMultiplier:(ge={},ge[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.BIOMASS]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.IRON]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.PLATINUM]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge),maxLevel:3},{id:n.CARGO_CRANES,name:"Cargo Cranes",description:"Improves your storage facilities by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ENGINEERING)>0},getCost:(fe={},fe[a.POWER]=function(t){return{A:250,B:1.75,type:e.EXPONENTIAL}},fe[a.RESEARCH]=function(t){return{A:35,B:1.75,type:e.EXPONENTIAL}},fe[a.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},fe),getGain:{},getCapacityMultiplier:(Ae={},Ae[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ae[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ae),maxLevel:1},{id:n.CRANES,name:"Building Cranes",description:"Decreases price scaling of buildings by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ENGINEERING)>0},getCost:(Re={},Re[a.POWER]=function(t){return{A:350,B:1.75,type:e.EXPONENTIAL}},Re[a.RESEARCH]=function(t){return{A:35,B:1.75,type:e.EXPONENTIAL}},Re[a.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},Re),getGain:{},getCapacityMultiplier:{},maxLevel:1},{id:n.WATER_DRILLING,name:"Water Deposits",description:"Improves water production by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(Ie={},Ie[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ie[a.RESEARCH]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Ie[a.ORE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Ie),getGain:{},getGainMultiplier:(Ne={},Ne[a.WATER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ne),maxLevel:3},{id:n.FLAMMABILITY,name:"Flammable Biomass",description:"Special flammable biomass produces more heat, increasing power generation from your thermal plants by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(Oe={},Oe[a.POWER]=function(t){return{A:370,B:1.5,type:e.EXPONENTIAL}},Oe[a.RESEARCH]=function(t){return{A:95,B:1.5,type:e.EXPONENTIAL}},Oe[a.BIOMASS]=function(t){return{A:325,B:1.5,type:e.EXPONENTIAL}},Oe),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FLORA,name:"Nutritious Flora",description:"Plant some special flora in your incubators to make them 50% more productive",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(ye={},ye[a.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},ye[a.RESEARCH]=function(t){return{A:195,B:1.5,type:e.EXPONENTIAL}},ye[a.BIOMASS]=function(t){return{A:525,B:1.5,type:e.EXPONENTIAL}},ye),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FERTILIZING,name:"Fertilizing",description:"Your farmers start using 0.1 biomass, but increase nutrition output by 30%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(me={},me[a.POWER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},me[a.RESEARCH]=function(t){return{A:245,B:1.5,type:e.EXPONENTIAL}},me[a.BIOMASS]=function(t){return{A:1225,B:1.5,type:e.EXPONENTIAL}},me),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FORESTER_TOOLS,name:"Forester Tools",description:"Create new tools for your foresters to increases wood output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Le={},Le[a.POWER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},Le[a.RESEARCH]=function(t){return{A:200,B:1.5,type:e.EXPONENTIAL}},Le[a.WOOD]=function(t){return{A:30,B:1.5,type:e.EXPONENTIAL}},Le),getGain:{},getGainMultiplier:(Te={},Te[a.WOOD]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Te),maxLevel:1},{id:n.BROADLEAVED,name:"Broad-leaved Forests",description:"Start planting trees with broad leaves. Forests generate oxygen",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Ce={},Ce[a.POWER]=function(t){return{A:880,B:1.5,type:e.EXPONENTIAL}},Ce[a.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},Ce[a.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ce),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.WOODEN_FURNITURE,name:"Wooden Furniture",description:"Using wooden furniture allows housing an extra colonist in every cabin",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(he={},he[a.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},he[a.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},he[a.WOOD]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},he),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.IRON_TOOLS,name:"Metal Tools",description:"Create metal tools to improve wood output by foresters",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0&&e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(ve={},ve[a.IRON]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},ve[a.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ve[a.WOOD]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ve),getGain:{},getGainMultiplier:(Be={},Be[a.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Be),maxLevel:1},{id:n.IRON_PARTS,name:"Metal Machine Parts",description:"Replace old parts with metal, which improves stone and ore output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Se={},Se[a.IRON]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Se[a.RESEARCH]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},Se[a.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Se),getGain:{},getGainMultiplier:(Pe={},Pe[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Pe[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Pe),maxLevel:1},{id:n.IRON_CONTAINERS,name:"Metal containers",description:"Improves all resources storages.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Me={},Me[a.IRON]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Me[a.RESEARCH]=function(t){return{A:175,B:1.5,type:e.EXPONENTIAL}},Me[a.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Me),getGain:{},getCapacityMultiplier:(_e={},_e[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.BIOMASS]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.IRON]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.WATER]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.OXYGEN]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.PLATINUM]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e),maxLevel:1},{id:n.IMPROVED_WIRES,name:"Better cables",description:"Improves your power capacity and output.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Ue={},Ue[a.IRON]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ue[a.RESEARCH]=function(t){return{A:375,B:1.5,type:e.EXPONENTIAL}},Ue[a.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ue),getGain:{},getGainMultiplier:(Ge={},Ge[a.POWER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Ge),getCapacityMultiplier:(be={},be[a.POWER]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},be),maxLevel:1},{id:n.TREE_CARE,name:"Rangers",description:"Teach your foresters better conservation methods. Improves foresters output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(Xe={},Xe[a.WATER]=function(t){return{A:150,B:1.5,type:e.EXPONENTIAL}},Xe[a.RESEARCH]=function(t){return{A:375,B:1.5,type:e.EXPONENTIAL}},Xe[a.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Xe),getGain:{},getGainMultiplier:(we={},we[a.WOOD]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},we),getCapacityMultiplier:{},maxLevel:3},{id:n.FRUIT_TREES,name:"Fruit trees",description:"Plant fruit trees in your forests. Forest plants now also provide nutrition",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(De={},De[a.WATER]=function(t){return{A:150,B:1.5,type:e.EXPONENTIAL}},De[a.RESEARCH]=function(t){return{A:325,B:1.5,type:e.EXPONENTIAL}},De[a.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},De),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.NATURAL_ENVIRONMENT,name:"Natural Environment",description:"Forest ecosystem is favourable for plant growth. Forest plants now boost biomass production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(xe={},xe[a.WATER]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},xe[a.RESEARCH]=function(t){return{A:475,B:1.5,type:e.EXPONENTIAL}},xe[a.BIOMASS]=function(t){return{A:2500,B:1.5,type:e.EXPONENTIAL}},xe),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.WATER_FILTERING,name:"Advanced water filtering",description:"Better filtration methods allow reusing more water. Improves water output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(ke={},ke[a.OXYGEN]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},ke[a.RESEARCH]=function(t){return{A:225,B:1.5,type:e.EXPONENTIAL}},ke[a.POWER]=function(t){return{A:900,B:1.5,type:e.EXPONENTIAL}},ke),getGain:{},getGainMultiplier:(He={},He[a.WATER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},He),getCapacityMultiplier:{},maxLevel:3},{id:n.CHEMICAL_ANALYSIS,name:"Chemical analysis",description:"Study chemical reactions. Improves science output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(Ye={},Ye[a.WATER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Ye[a.RESEARCH]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ye[a.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},Ye),getGain:{},getGainMultiplier:(We={},We[a.RESEARCH]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},We),getCapacityMultiplier:{},maxLevel:3},{id:n.BETTER_ELECTROLITES,name:"Improved electrolytes",description:"Create new electrolyte solution to improve power capacity",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(Ze={},Ze[a.WATER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Ze[a.RESEARCH]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ze[a.OXYGEN]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},Ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:(Fe={},Fe[a.POWER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Fe),maxLevel:5},{id:n.PLATINUM_MINING,name:"Platinum mining",description:"Allows colonist miners to extract platinum",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GEOLOGY)>0},getCost:(je={},je[a.IRON]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},je[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},je[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},je),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.PLATINUM_DRILLS,name:"Platinum drills",description:"Replace drill heads with platinum. Improves stone and ore output",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)>0},getCost:(Ke={},Ke[a.PLATINUM]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},Ke[a.RESEARCH]=function(t){return{A:420,B:1.5,type:e.EXPONENTIAL}},Ke[a.POWER]=function(t){return{A:775,B:1.5,type:e.EXPONENTIAL}},Ke),getGain:{},getGainMultiplier:(Ve={},Ve[a.STONE]=function(t){return{A:1,B:1.4,type:e.EXPONENTIAL}},Ve[a.ORE]=function(t){return{A:1,B:1.4,type:e.EXPONENTIAL}},Ve),getCapacityMultiplier:{},maxLevel:1},{id:n.PLATINUM_TOOLS,name:"Platinum tools",description:"Create platinum tools to provide additional production boost. Increases wood production and wooden beam, brick and metal plate crafting",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)>0},getCost:(qe={},qe[a.PLATINUM]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},qe[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},qe[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},qe),getGain:{},getGainMultiplier:(Qe={},Qe[a.WOOD]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe[a.BEAM]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe[a.BRICK]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe[a.PLATE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qe),getCapacityMultiplier:{},maxLevel:5},{id:n.COTTAGES,name:"Cottages",description:"Create plans for a new housing unit",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:(Je={},Je[a.BRICK]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Je[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Je[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Je),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ENTERTAINMENT,name:"Entertainment",description:"Society research allows better understanding of human needs. Unlocks new ways to boost population happiness",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:(ze={},ze[a.RESEARCH]=function(t){return{A:420,B:1.5,type:e.EXPONENTIAL}},ze[a.POWER]=function(t){return{A:775,B:1.5,type:e.EXPONENTIAL}},ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.SOCIAL_RESEARCH_CENTER,name:"Social research center",description:"Unlocks new scientific building for studying sociology",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:($e={},$e[a.PLATE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},$e[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},$e[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},$e),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ADVANCED_METALLURGY,name:"Advanced metallurgy",description:"Improved smelting technique increases smelter output",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(et={},et[a.IRON]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},et[a.RESEARCH]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},et[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},et),getGain:{},getGainMultiplier:(tt={},tt[a.IRON]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},tt),getCapacityMultiplier:{},maxLevel:10},{id:n.HEAT_INSULATING_CAMERAS,name:"Heat Insulating Cameras",description:"Create insulation for combustion cameras. Improves thermal plant efficiency by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(nt={},nt[a.ORE]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},nt[a.STONE]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},nt[a.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},nt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.COMPOSITE_METALS,name:"Composite metals",description:"Using composite metals allows to increase crafting output for metal plates and wires",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(it={},it[a.IRON]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},it[a.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},it[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},it),getGain:{},getGainMultiplier:(ot={},ot[a.PLATE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},ot[a.WIRE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},ot),getCapacityMultiplier:{},maxLevel:3},{id:n.IMPROVED_WIRING,name:"Upgrade wiring",description:"Lay new wires to further increase power supply",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(rt={},rt[a.PLATINUM]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},rt[a.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},rt[a.WIRE]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},rt),getGain:{},getGainMultiplier:(at={},at[a.POWER]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},at),getCapacityMultiplier:{},maxLevel:10},{id:n.ENERGY_SAVING,name:"Energy Saving",description:"Implement energy saving mode for downtime. Significantly reduces building power cost",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(ct={},ct[a.PLATINUM]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},ct[a.RESEARCH]=function(t){return{A:1250,B:1.5,type:e.EXPONENTIAL}},ct[a.WIRE]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},ct),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ENERGY_SAVING_EXPEDITION_DRONES,name:"Saving Expedition Drones",description:"Rerout energy toward terrain scanners of your expedition drones. Increases expedition loot by 30%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0&&e.science.scienceResearches.getResearchLevel(I.GEOGRAPHY)>0},getCost:(ut={},ut[a.PLATINUM]=function(t){return{A:85,B:1.5,type:e.EXPONENTIAL}},ut[a.RESEARCH]=function(t){return{A:1250,B:1.5,type:e.EXPONENTIAL}},ut[a.WIRE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},ut),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.GERMETISATION,name:"Vacuum Sealing",description:"Allows building air-tight containers, increasing storage capacity",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},getCost:(st={},st[a.RUBBER]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},st[a.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},st[a.POWER]=function(t){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},st),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.RUBBER_DETAILS,name:"Rubber Padding",description:"Add rubber padding to your buildings. Further decrease building costs scaling",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},getCost:(lt={},lt[a.RUBBER]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},lt[a.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},lt[a.POWER]=function(t){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},lt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.SURVEILLANCE_CAMERAS,name:"Surveillance Cameras",description:"Install surveillance cameras around your colony. Improves policemen efficiency by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0&&e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(pt={},pt[a.PLASTICS]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},pt[a.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},pt[a.SEMICONDUCTOR]=function(t){return{A:20,B:1.5,type:e.EXPONENTIAL}},pt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.COMPUTERS,name:"Computers",description:"Unlocks computers crafting and building data-centers",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(Et={},Et[a.PLASTICS]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Et[a.RESEARCH]=function(t){return{A:1500,B:1.5,type:e.EXPONENTIAL}},Et[a.SEMICONDUCTOR]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},Et),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.INDUSTRY_AUTOMATION,name:"Industry Automation",description:"Automate some mundane task for your artisans. Gain 5% bonus to all crafting activities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(dt={},dt[a.WIRE]=function(t){return{A:145,B:1.5,type:e.EXPONENTIAL}},dt[a.RESEARCH]=function(t){return{A:1600,B:1.5,type:e.EXPONENTIAL}},dt[a.SEMICONDUCTOR]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},dt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:5},{id:n.BUILDING_PRINTING,name:"3D Printers Construction",description:"Create prefabricated sections on your 3D printers. Further decreases building cost",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PRINTING_3D)>0},getCost:(gt={},gt[a.COMPUTER]=function(t){return{A:65,B:1.5,type:e.EXPONENTIAL}},gt[a.RESEARCH]=function(t){return{A:4600,B:1.5,type:e.EXPONENTIAL}},gt[a.RUBBER]=function(t){return{A:280,B:1.5,type:e.EXPONENTIAL}},gt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ORGANISM_PRINTING,name:"Organs Printing",description:"New synthetic organs allow for a better treatment of your colonists. Unlocks a new medicine mode",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PRINTING_3D)>0},getCost:(ft={},ft[a.COMPUTER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},ft[a.RESEARCH]=function(t){return{A:4600,B:1.5,type:e.EXPONENTIAL}},ft[a.WIRE]=function(t){return{A:280,B:1.5,type:e.EXPONENTIAL}},ft),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.BETTER_DIAGNOSTICS,name:"Improve Health Diagnostics",description:"Using computers for diagnostics can significantly improve healthcare services. Each level increases clinic efficiency by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0&&e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(At={},At[a.RESEARCH]=function(t){return{A:1300,B:1.5,type:e.EXPONENTIAL}},At[a.COMPUTER]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},At),getGainMultiplier:{},maxLevel:5},{id:n.MULTISTORE_WAREHOUSES,name:"Multistore Warehouses",description:"Create a scalable solution for your storages. Your warehouses can now store twice as much goods",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(Rt={},Rt[a.PLATE]=function(t){return{A:400,B:1.5,type:e.EXPONENTIAL}},Rt[a.RESEARCH]=function(t){return{A:7025,B:1.5,type:e.EXPONENTIAL}},Rt[a.WIRE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Rt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.GMO,name:"GMO",description:"Genetic modification of organisms can help boost nutrition and biomass production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0},getCost:(It={},It[a.RESEARCH]=function(t){return{A:2500,B:1.5,type:e.EXPONENTIAL}},It[a.BIOMASS]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},It),getGainMultiplier:(Nt={},Nt[a.BIOMASS]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Nt[a.NUTRITION]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},Nt),maxLevel:5},{id:n.LASER_CUTTING,name:"Laser Cutting",description:"Using lasers to cut out metal parts significantly simplifies plates and wires production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(Ot={},Ot[a.RESEARCH]=function(t){return{A:4500,B:1.5,type:e.EXPONENTIAL}},Ot[a.POWER]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},Ot),getGainMultiplier:(yt={},yt[a.PLATE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},yt[a.WIRE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},yt),maxLevel:3},{id:n.BETTER_PHOTOELEMENTS,name:"Better Photo-elements",description:"Improved photoelement technology allows you to boost solar satellites and solar panels output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(mt={},mt[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},mt[a.POWER]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},mt),getGainMultiplier:{},maxLevel:1},{id:n.IMPROVED_LITHOGRAPHY,name:"Improved Lithography",description:"New methods of lithography improve assembling processes. Boosts computers production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(Lt={},Lt[a.RESEARCH]=function(t){return{A:4500,B:1.5,type:e.EXPONENTIAL}},Lt[a.SEMICONDUCTOR]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},Lt),getGainMultiplier:(Tt={},Tt[a.COMPUTER]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Tt),maxLevel:3},{id:n.GREAT_RADIO_TRANSMITTER,name:"Great Radio Transmitter",description:"Create a signal transmitter with a much stronger output. Allows you to send signals to other civilizations. Unlocks first prestige level",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(Ct={},Ct[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},Ct[a.COMPUTER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ct[a.PLATINUM]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ct),getGainMultiplier:{},maxLevel:1},{id:n.FLIGHT_TECHNOLOGY,name:"Fuel Conservation",description:"Improved fuel combustion cycle allows to install less rockets to achieve the same thrust. Reduces rocket consumption by 20% for all space structures and ships",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(ht={},ht[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},ht[a.ROCKET_ENGINE]=function(t){return{A:20,B:1.5,type:e.EXPONENTIAL}},ht[a.FUEL]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},ht),getGainMultiplier:{},maxLevel:1},{id:n.FASTER_ROCKETS,name:"Faster Rockets",description:"Using improved flight path calculation reduces total flight time. Space tourism is now 50% more efficient",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(vt={},vt[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},vt[a.ROCKET_ENGINE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},vt[a.COMPUTER]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},vt),getGainMultiplier:{},maxLevel:1},{id:n.CONDUCTIVE_NANOPARTICLES,name:"Conductive Nano-particles",description:"Using new conductive particles improves the efficiency of your batteries and accumulators",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0},getCost:(Bt={},Bt[a.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},Bt[a.WATER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},Bt[a.WIRE]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Bt),getGainMultiplier:{},getCapacityMultiplier:(St={},St[a.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},St),maxLevel:3},{id:n.NANO_BOTS,name:"Nanobots",description:"Unlocks nanobots factory building on your satellite that provides bonus to all crafting activities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0},getCost:(Pt={},Pt[a.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},Pt[a.COMPUTER]=function(t){return{A:60,B:1.5,type:e.EXPONENTIAL}},Pt[a.WIRE]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Pt),getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1}],Hi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yi=function(){return Yi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yi.apply(this,arguments)},Wi=function(e){function t(){var t=e.call(this)||this;return t.upgrades=[],t.workDispatcher.on("[landing-zone] do upgrade",(function(e){console.log("do upgrade",e),t.doUpgrade(e.id)})),t}return Hi(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.upgrades=e},t.prototype.exportData=function(){return this.upgrades},t.prototype.dataToUI=function(){var e=this;return{list:ki.map((function(t){return e.processToUI(t)}))}},t.prototype.getUpgradeLevel=function(e){var t;return(null===(t=this.upgrades.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.upgrades.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0},this.upgrades.push(t));var n=C.calcBatchAll(e.getCost,ka.getInstance(),t.level,ka.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return e&&t.eta<1e80}),!0),o=e.getCapacityEffect?C.calcBatch(e.getCapacityEffect,ka.getInstance(),0):[],r=e.getCapacityMultiplier?C.calcBatch(e.getCapacityMultiplier,ka.getInstance(),t.level+1):[],a=e.getGain?C.calcBatch(e.getGain,ka.getInstance(),0):[],c=e.getGainMultiplier?C.calcBatch(e.getGainMultiplier,ka.getInstance(),t.level+1):[],u=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),isAvailable:u>=1,cost:ka.getInstance().resources.assertEnought(n,ka.getInstance().resources.getBatchObject(),ka.getInstance().resources.getBatchBalanceObject()),max:o.map((function(e){return Yi(Yi({},e),{amount:v(e.amount)})})),maxMult:r.map((function(e){return Yi(Yi({},e),{amount:"x".concat(v(e.amount))})})),consume:[],gain:a.map((function(e){return Yi(Yi({},e),{amount:v(e.amount)})})),gainMult:c.map((function(e){return Yi(Yi({},e),{amount:"x".concat(v(e.amount))})})),progress:u<1?(100*u).toPrecision(3):"100",isMaxedOut:!!e.maxLevel&&e.maxLevel<=t.level,maxLevel:e.maxLevel,level:t.level,isBlocked:!i}},t.prototype.doUpgrade=function(e){var t=ki.find((function(t){return t.id===e}));if(t){var n=this.upgrades.findIndex((function(t){return t.id===e}));if(n<0)n=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(t.maxLevel&&this.upgrades[n].level>=t.maxLevel)return;var i=C.calcBatchAll(t.getCost,ka.getInstance(),this.upgrades[n].level,ka.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.upgrades[n].level++,console.log("costs: ",i),ka.getInstance().resources.subtractResourceBatch(i),Ha.resources.reassertBalances())}},t.prototype.getGain=function(e){var t=ki.filter((function(t){var n;return!!(null===(n=t.getGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getGain){var r=C.calculate(Ha,o.getGain[e],0,i.level);n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getGainMultiplier=function(e){var t=ki.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getGainMultiplier){var r=C.calculate(Ha,o.getGainMultiplier[e],i.level,1);r&&n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getCapacity=function(e){var t=ki.filter((function(t){var n;return!!(null===(n=t.getCapacityEffect)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityEffect){var r=C.calculate(Ha,o.getCapacityEffect[e],0,i.level);n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getCapacityMult=function(e){var t=ki.filter((function(t){var n;return!!(null===(n=t.getCapacityMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var r=C.calculate(Ha,o.getCapacityMultiplier[e],i.level,1);r&&n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.process=function(e){},t.prototype.reset=function(){this.upgrades=[]},t}(R),Zi=Wi.getInstance();!function(e){e.SCIENCE="Science",e.ECONOMY="Economy",e.SOCIAL="Social"}(Mt||(Mt={})),function(e){e.EXPERIMENTAL_MEDICINE="experimental_medicine",e.WATER_FILTERING="water_filtering",e.RESEARCH_GRANTS="research_grants",e.INDUSTRIALIZATION="industrialization",e.FOREST_BEHAVOUR="forest_behavour",e.SECURITY_DOTATIONS="security_dotations",e.ARTIFICIAL_ORGANS="artificial_organs"}(_t||(_t={}));var Fi,ji,Ki,Vi,qi,Qi,Ji,zi,$i,eo,to,no,io,oo,ro,ao,co,uo,so,lo,po,Eo,go,fo,Ao,Ro,Io,No,Oo,yo,mo,Lo,To,Co,ho,vo,Bo,So,Po,Mo,_o,Uo,Go,bo,Xo,wo,Do,xo,ko,Ho,Yo,Wo,Zo,Fo,jo,Ko,Vo,qo,Qo,Jo=function(e){return Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.CRANES))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RUBBER_DETAILS))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BUILDING_PRINTING))},zo=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENERGY_SAVING))},$o=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLIGHT_TECHNOLOGY))},er=function(e){switch(e.laws.getLawSelected(_t.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.05;case 2:return 1.1}return 1},tr=function(e){switch(e.laws.getLawSelected(_t.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.5;case 2:return 2.5}return 1},nr=[{id:i.QUARRY,name:"Quarry",category:o.INDUSTRIAL,description:"Automatically collect some stone",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_QUARRYING)>0},getCost:(Ut={},Ut[a.ORE]=function(t){return{A:1,B:1+.3*Jo(t),type:e.EXPONENTIAL}},Ut[a.STONE]=function(t){return{A:2.5,B:1+.3*Jo(t),type:e.EXPONENTIAL}},Ut),getConsumption:(Gt={},Gt[a.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},Gt),getGain:(bt={},bt[a.STONE]=function(t){return{A:(.06+.03*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.QUARRY_TECH)),B:0,type:e.LINEAR}},bt),getStorage:{}},{id:i.MINE,name:"Mine",category:o.INDUSTRIAL,description:"Automatically collect some ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_MINERS)>0},getCost:(Xt={},Xt[a.ORE]=function(t){return{A:5,B:1+.3*Jo(t),type:e.EXPONENTIAL}},Xt[a.STONE]=function(t){return{A:4.5,B:1+.3*Jo(t),type:e.EXPONENTIAL}},Xt),getConsumption:(wt={},wt[a.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},wt),getGain:(Dt={},Dt[a.ORE]=function(t){return{A:(.06+.03*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MINE_TECH)),B:0,type:e.LINEAR}},Dt),getStorage:{}},{id:i.BACTERIA_INCUBATOR,category:o.INDUSTRIAL,name:"Bacteria Incubator",description:"Automatically collect some biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.COLLECT_BIOMASS)>0},getCost:(xt={},xt[a.BIOMASS]=function(t){return{A:3,B:1+.3*Jo(t),type:e.EXPONENTIAL}},xt[a.STONE]=function(t){return{A:4.5,B:1+.3*Jo(t),type:e.EXPONENTIAL}},xt),getConsumption:(kt={},kt[a.POWER]=function(t){return{A:.06*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)),B:0,type:e.LINEAR}},kt),getGain:(Ht={},Ht[a.BIOMASS]=function(t){return{A:(.04+.02*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BIO_TECH))*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLORA)),B:0,type:e.LINEAR}},Ht[a.OXYGEN]=function(t){return{A:.01*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLORA)),B:0,type:e.LINEAR}},Ht),getStorage:{}},{id:i.THERMOELECTRIC_STATION,category:o.POWER,name:"Thermoelectric Power plant",description:"Burns biomass to obtain electricity",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMBUSTION)>0},getCost:(Yt={},Yt[a.ORE]=function(t){return{A:6,B:1+.3*Jo(t),type:e.EXPONENTIAL}},Yt[a.STONE]=function(t){return{A:7,B:1+.3*Jo(t),type:e.EXPONENTIAL}},Yt),getConsumption:(Wt={},Wt[a.BIOMASS]=function(t){return{A:.03*Math.pow(.75,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMBUSTION_CAMERA)),B:0,type:e.LINEAR}},Wt[a.OXYGEN]=function(t){return{A:.006*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS),B:0,type:e.LINEAR}},Wt),getGain:(Zt={},Zt[a.POWER]=function(t){return{A:.09*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.THERMAL_TECH))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.THERMAL_TECH2))*(1+.75*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS))*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLAMMABILITY))*(1+.2*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.HEAT_INSULATING_CAMERAS)),B:0,type:e.LINEAR}},Zt),getStorage:(Ft={},Ft[a.POWER]=function(t){return{A:4*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESERVE_BATTERIES),B:0,type:e.LINEAR}},Ft)},{id:i.STORAGE,name:"Storage section",category:o.STORAGE,description:"Provides additional storage space",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(jt={},jt[a.ORE]=function(t){return{A:10,B:1+.5*Jo(t),type:e.EXPONENTIAL}},jt[a.STONE]=function(t){return{A:10,B:1+.5*Jo(t),type:e.EXPONENTIAL}},jt),getConsumption:{},getGain:{},getStorage:(Kt={},Kt[a.STONE]=function(t){return{A:10,B:0,type:e.LINEAR}},Kt[a.ORE]=function(t){return{A:10,B:0,type:e.LINEAR}},Kt[a.BIOMASS]=function(t){return{A:10,B:0,type:e.LINEAR}},Kt[a.IRON]=function(t){return{A:3,B:0,type:e.LINEAR}},Kt[a.WOOD]=function(t){return{A:10,B:0,type:e.LINEAR}},Kt)},{id:i.STORAGE_HUB,name:"Storage hub",category:o.STORAGE,description:"Provides more storage space, but consumes power",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>3},getCost:(Vt={},Vt[a.POWER]=function(t){return{A:30,B:1+.75*Jo(t)*zo(t),type:e.EXPONENTIAL}},Vt[a.ORE]=function(t){return{A:50,B:1+.75*Jo(t),type:e.EXPONENTIAL}},Vt[a.STONE]=function(t){return{A:50,B:1+.75*Jo(t),type:e.EXPONENTIAL}},Vt),getConsumption:(qt={},qt[a.POWER]=function(t){return{A:.15,B:0,type:e.LINEAR}},qt),getGain:{},getStorage:(Qt={},Qt[a.STONE]=function(t){return{A:50,B:0,type:e.LINEAR}},Qt[a.ORE]=function(t){return{A:50,B:0,type:e.LINEAR}},Qt[a.BIOMASS]=function(t){return{A:50,B:0,type:e.LINEAR}},Qt[a.IRON]=function(t){return{A:15,B:0,type:e.LINEAR}},Qt[a.WOOD]=function(t){return{A:50,B:0,type:e.LINEAR}},Qt)},{id:i.OXYGEN_COLLECTOR,name:"Oxygen compressor",category:o.STORAGE,description:"Provides more storage for oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_COMPRESSORS)>0},getCost:(Jt={},Jt[a.POWER]=function(t){return{A:50,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},Jt[a.ORE]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Jt[a.STONE]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Jt),getConsumption:(zt={},zt[a.POWER]=function(t){return{A:.4,B:0,type:e.LINEAR}},zt),getGain:{},getStorage:($t={},$t[a.OXYGEN]=function(t){return{A:20,B:0,type:e.LINEAR}},$t)},{id:i.WATER_PUMP,name:"Water pump",category:o.INDUSTRIAL,description:"Provides water supply",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},getCost:(en={},en[a.POWER]=function(t){return{A:75,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},en[a.OXYGEN]=function(t){return{A:12,B:1+.5*Jo(t),type:e.EXPONENTIAL}},en[a.STONE]=function(t){return{A:120,B:1+.5*Jo(t),type:e.EXPONENTIAL}},en[a.ORE]=function(t){return{A:85,B:1+.5*Jo(t),type:e.EXPONENTIAL}},en),getConsumption:(tn={},tn[a.POWER]=function(t){return{A:.3+(1===t.laws.getLawSelected(_t.WATER_FILTERING)?.9:0),B:0,type:e.LINEAR}},tn),getGain:(nn={},nn[a.WATER]=function(t){return{A:.03,B:0,type:e.LINEAR}},nn),getStorage:(on={},on[a.WATER]=function(t){return{A:1,B:0,type:e.LINEAR}},on)},{id:i.WATER_STORAGE,name:"Water storage",category:o.STORAGE,description:"Provides water storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},getCost:(rn={},rn[a.POWER]=function(t){return{A:70,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},rn[a.ORE]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},rn[a.STONE]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},rn),getConsumption:(an={},an[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},an),getGain:{},getStorage:(cn={},cn[a.WATER]=function(t){return{A:15,B:0,type:e.LINEAR}},cn)},{id:i.BATTERY,name:"Battery",category:o.POWER,description:"Provides power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ELECTROLITES)>0},getCost:(un={},un[a.POWER]=function(t){return{A:20,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},un[a.ORE]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},un[a.WATER]=function(t){return{A:5,B:1+.5*Jo(t),type:e.EXPONENTIAL}},un),getConsumption:{},getGain:{},getStorage:(sn={},sn[a.POWER]=function(t){return{A:80,B:0,type:e.LINEAR}},sn)},{id:i.LIVING_CABIN,name:"Living Cabin",category:o.RESIDENTAL,description:"Provides living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(ln={},ln[a.POWER]=function(t){return{A:120,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},ln[a.STONE]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},ln[a.ORE]=function(t){return{A:80,B:1+.5*Jo(t),type:e.EXPONENTIAL}},ln),getConsumption:{},getGain:{},getStorage:{},getMaxColonists:function(t){return{A:2+t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WOODEN_FURNITURE),B:0,type:e.LINEAR}}},{id:i.METEO_STATION,name:"Meteorology Station",category:o.SCIENCE,description:"Provides 25 science storage and boost science output by 2% multiplicative",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0},getCost:(pn={},pn[a.POWER]=function(t){return{A:80,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},pn[a.STONE]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},pn[a.ORE]=function(t){return{A:125,B:1+.5*Jo(t),type:e.EXPONENTIAL}},pn),getConsumption:{},getGain:{},getStorage:(En={},En[a.RESEARCH]=function(t){return{A:25,B:0,type:e.LINEAR}},En),getGainMultiplier:(dn={},dn[a.RESEARCH]=function(t){return{A:1,B:1.02,type:e.EXPONENTIAL}},dn)},{id:i.MONUMENT,name:"Monument",category:o.PUBLIC,description:"Provides some aesthetics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0},getCost:(gn={},gn[a.POWER]=function(t){return{A:50,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},gn[a.STONE]=function(t){return{A:820,B:1+.5*Jo(t),type:e.EXPONENTIAL}},gn[a.ORE]=function(t){return{A:480,B:1+.5*Jo(t),type:e.EXPONENTIAL}},gn),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(fn={},fn[y.AESTHETICS]=function(t){return{A:2,B:0,type:e.LINEAR}},fn)},{id:i.CLINIC,name:"Clinic",category:o.PUBLIC,description:"Provides basic healthcare service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(An={},An[a.POWER]=function(t){return{A:250,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},An[a.STONE]=function(t){return{A:820,B:1+.5*Jo(t),type:e.EXPONENTIAL}},An[a.ORE]=function(t){return{A:680,B:1+.5*Jo(t),type:e.EXPONENTIAL}},An),getConsumption:(Rn={},Rn[a.POWER]=function(t){return{A:.3,B:0,type:e.LINEAR}},Rn),getGain:{},getStorage:(In={},In[a.RESEARCH]=function(t){return{A:1===t.laws.getLawSelected(_t.EXPERIMENTAL_MEDICINE)?50:0,B:0,type:e.LINEAR}},In),getEffectGain:(Nn={},Nn[y.HEALTHCARE]=function(t){return{A:10*(1===t.laws.getLawSelected(_t.EXPERIMENTAL_MEDICINE)?.5:1)*Math.pow(1.05,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_DIAGNOSTICS)),B:0,type:e.LINEAR}},Nn)},{id:i.PARK,name:"Park zone",category:o.PUBLIC,description:"Parking zone provides basic possibility to relax for your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(On={},On[a.POWER]=function(t){return{A:150,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},On[a.STONE]=function(t){return{A:120,B:1+.5*Jo(t),type:e.EXPONENTIAL}},On[a.WOOD]=function(t){return{A:80,B:1+.5*Jo(t),type:e.EXPONENTIAL}},On),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(yn={},yn[y.AESTHETICS]=function(t){return{A:5,B:0,type:e.LINEAR}},yn[y.ENTERTAINMENT]=function(t){return{A:2,B:0,type:e.LINEAR}},yn)},{id:i.BIO_LAB,category:o.SCIENCE,name:"Bio laboratory",description:"Provides even more science storage and boost science output by 5% multiplicative",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(mn={},mn[a.POWER]=function(t){return{A:120,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},mn[a.STONE]=function(t){return{A:1275,B:1+.5*Jo(t),type:e.EXPONENTIAL}},mn[a.ORE]=function(t){return{A:725,B:1+.5*Jo(t),type:e.EXPONENTIAL}},mn),getConsumption:(Ln={},Ln[a.POWER]=function(t){return{A:.75*tr(t),B:0,type:e.LINEAR}},Ln[a.BIOMASS]=function(t){return{A:.4,B:0,type:e.LINEAR}},Ln),getGain:{},getStorage:(Tn={},Tn[a.RESEARCH]=function(t){return{A:50*er(t),B:0,type:e.LINEAR}},Tn),getGainMultiplier:(Cn={},Cn[a.RESEARCH]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},Cn)},{id:i.FOREST_PLANT,name:"Forest Plant",category:o.INDUSTRIAL,description:"Generates oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BROADLEAVED)>0},getCost:(hn={},hn[a.WOOD]=function(t){return{A:20,B:1+.5*Jo(t),type:e.EXPONENTIAL}},hn[a.STONE]=function(t){return{A:2.5,B:1+.5*Jo(t),type:e.EXPONENTIAL}},hn),getConsumption:(vn={},vn[a.WATER]=function(t){return{A:.01,B:0,type:e.LINEAR}},vn),getGain:(Bn={},Bn[a.OXYGEN]=function(t){return{A:.06*(0===t.laws.getLawSelected(_t.FOREST_BEHAVOUR)?1:.5),B:0,type:e.LINEAR}},Bn[a.NUTRITION]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FRUIT_TREES),B:0,type:e.LINEAR}},Bn),getGainMultiplier:(Sn={},Sn[a.BIOMASS]=function(t){return{A:t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.NATURAL_ENVIRONMENT),B:1.02,type:e.EXPONENTIAL}},Sn),getStorage:{},getEffectGain:(Pn={},Pn[y.AESTHETICS]=function(t){return{A:1===t.laws.getLawSelected(_t.FOREST_BEHAVOUR)?2:0,B:0,type:e.LINEAR}},Pn[y.ENTERTAINMENT]=function(t){return{A:2===t.laws.getLawSelected(_t.FOREST_BEHAVOUR)?2:0,B:0,type:e.LINEAR}},Pn)},{id:i.SMELTER,name:"Smelter",category:o.INDUSTRIAL,description:"Converts ore and wood into rolled metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Mn={},Mn[a.ORE]=function(t){return{A:600,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Mn[a.STONE]=function(t){return{A:1250,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Mn),getConsumption:(_n={},_n[a.WOOD]=function(t){return{A:.3,B:0,type:e.LINEAR}},_n[a.ORE]=function(t){return{A:.5,B:0,type:e.LINEAR}},_n),getGain:(Un={},Un[a.IRON]=function(t){return{A:.02,B:0,type:e.LINEAR}},Un),getStorage:{}},{id:i.EXPEDITION_CENTER,name:"Expedition Center",category:o.INDUSTRIAL,description:"Provides 5% multiplicative bonus to your expeditions outcome. Consumes some oxygen that your expeditions will take with them.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0&&e.science.scienceResearches.getResearchLevel(I.GEOGRAPHY)>0},getCost:(Gn={},Gn[a.BEAM]=function(t){return{A:2,B:1+.25*Jo(t),type:e.EXPONENTIAL}},Gn[a.BRICK]=function(t){return{A:4,B:1+.25*Jo(t),type:e.EXPONENTIAL}},Gn[a.PLATE]=function(t){return{A:1,B:1+.25*Jo(t),type:e.EXPONENTIAL}},Gn),getConsumption:(bn={},bn[a.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},bn[a.OXYGEN]=function(t){return{A:.03,B:0,type:e.LINEAR}},bn),getGain:{},getStorage:{}},{id:i.WAREHOUSE,name:"Warehouse",category:o.STORAGE,description:"Provides more raw materials storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Xn={},Xn[a.POWER]=function(t){return{A:30,B:1+.25*Jo(t)*zo(t),type:e.EXPONENTIAL}},Xn[a.BEAM]=function(t){return{A:2,B:1+.25*Jo(t),type:e.EXPONENTIAL}},Xn[a.BRICK]=function(t){return{A:4,B:1+.25*Jo(t),type:e.EXPONENTIAL}},Xn),getConsumption:(wn={},wn[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},wn),getGain:{},getStorage:(Dn={},Dn[a.STONE]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Dn[a.ORE]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Dn[a.BIOMASS]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Dn[a.IRON]=function(t){return{A:10*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Dn[a.WOOD]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Dn[a.PLATINUM]=function(t){return{A:5*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Dn)},{id:i.TANK,name:"Tank",category:o.STORAGE,description:"Provides oxygen and water storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(xn={},xn[a.POWER]=function(t){return{A:30,B:1+.25*Jo(t)*zo(t),type:e.EXPONENTIAL}},xn[a.PLATE]=function(t){return{A:2,B:1+.25*Jo(t),type:e.EXPONENTIAL}},xn[a.BRICK]=function(t){return{A:5,B:1+.25*Jo(t),type:e.EXPONENTIAL}},xn),getConsumption:{},getGain:{},getStorage:(kn={},kn[a.OXYGEN]=function(t){return{A:25,B:0,type:e.LINEAR}},kn[a.WATER]=function(t){return{A:25,B:0,type:e.LINEAR}},kn)},{id:i.COTTAGE,name:"Cottage",category:o.RESIDENTAL,description:"Provides additional living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COTTAGES)>0},getCost:(Hn={},Hn[a.POWER]=function(t){return{A:80,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},Hn[a.BRICK]=function(t){return{A:10,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Hn[a.BEAM]=function(t){return{A:8,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Hn),getConsumption:(Yn={},Yn[a.POWER]=function(t){return{A:.05,B:0,type:e.LINEAR}},Yn),getGain:{},getStorage:{},getMaxColonists:function(t){return{A:2,B:0,type:e.LINEAR}}},{id:i.CINEMA,name:"Cinema",category:o.PUBLIC,description:"Provides additional 2% boost to your colonists production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENTERTAINMENT)>0},getCost:(Wn={},Wn[a.POWER]=function(t){return{A:380,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},Wn[a.BRICK]=function(t){return{A:10,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Wn[a.BEAM]=function(t){return{A:8,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Wn[a.PLATE]=function(t){return{A:5,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Wn),getConsumption:(Zn={},Zn[a.POWER]=function(t){return{A:.5,B:0,type:e.LINEAR}},Zn),getGain:{},getStorage:{},getEffectGain:(Fn={},Fn[y.ENTERTAINMENT]=function(t){return{A:10,B:0,type:e.LINEAR}},Fn)},{id:i.SOCIAL_RESEARCH_CENTER,name:"Social research center",category:o.SCIENCE,description:"Provides additional science capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SOCIAL_RESEARCH_CENTER)>0},getCost:(jn={},jn[a.POWER]=function(t){return{A:1200,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},jn[a.BRICK]=function(t){return{A:125,B:1+.5*Jo(t),type:e.EXPONENTIAL}},jn[a.BEAM]=function(t){return{A:100,B:1+.5*Jo(t),type:e.EXPONENTIAL}},jn[a.PLATE]=function(t){return{A:25,B:1+.5*Jo(t),type:e.EXPONENTIAL}},jn),getConsumption:(Kn={},Kn[a.POWER]=function(t){return{A:1*tr(t),B:0,type:e.LINEAR}},Kn),getGain:{},getStorage:(Vn={},Vn[a.RESEARCH]=function(t){return{A:225*er(t),B:0,type:e.LINEAR}},Vn),getGainMultiplier:(qn={},qn[a.RESEARCH]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},qn)},{id:i.METALLURGY_COMPLEX,name:"Metallurgy Complex",category:o.INDUSTRIAL,description:"Provides bonus to metal output",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ADVANCED_METALLURGY)>0},getCost:(Qn={},Qn[a.PLATINUM]=function(t){return{A:20,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Qn[a.BRICK]=function(t){return{A:100,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Qn[a.BEAM]=function(t){return{A:25,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Qn[a.PLATE]=function(t){return{A:25,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Qn),getConsumption:(Jn={},Jn[a.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},Jn),getGain:{},getStorage:{},getGainMultiplier:(zn={},zn[a.IRON]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},zn)},{id:i.BUILDING_FACTORY,name:"Building materials factory",category:o.INDUSTRIAL,description:"Provides bonus to bricks, beams and plates production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ADVANCED_METALLURGY)>0},getCost:($n={},$n[a.BRICK]=function(t){return{A:30,B:1+.5*Jo(t),type:e.EXPONENTIAL}},$n[a.BEAM]=function(t){return{A:75,B:1+.5*Jo(t),type:e.EXPONENTIAL}},$n[a.PLATE]=function(t){return{A:5,B:1+.5*Jo(t),type:e.EXPONENTIAL}},$n),getConsumption:(ei={},ei[a.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},ei),getGain:{},getStorage:{},getGainMultiplier:(ti={},ti[a.BEAM]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},ti[a.BRICK]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},ti[a.PLATE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},ti[a.WIRE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},ti)},{id:i.STORAGE_CONTAINER,name:"Storage container",category:o.STORAGE,description:"Provides 5% bonus to your materials storage in warehouses",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GERMETISATION)>0},getCost:(ni={},ni[a.POWER]=function(t){return{A:5,B:1+.1*Jo(t)*zo(t),type:e.EXPONENTIAL}},ni[a.PLATE]=function(t){return{A:5,B:1+.1*Jo(t),type:e.EXPONENTIAL}},ni[a.RUBBER]=function(t){return{A:5,B:1+.1*Jo(t),type:e.EXPONENTIAL}},ni),getConsumption:{},getGain:{},getStorage:{}},{id:i.SOLAR_PANEL,category:o.POWER,name:"Solar Panel",description:"Provides power from solar radiation",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(ii={},ii[a.PLATE]=function(t){return{A:6,B:1+.3*Jo(t),type:e.EXPONENTIAL}},ii[a.WIRE]=function(t){return{A:10,B:1+.3*Jo(t),type:e.EXPONENTIAL}},ii[a.SEMICONDUCTOR]=function(t){return{A:10,B:1+.3*Jo(t),type:e.EXPONENTIAL}},ii),getConsumption:{},getGain:(oi={},oi[a.POWER]=function(t){return{A:.4*Math.pow(1.1,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_PHOTOELEMENTS)),B:0,type:e.LINEAR}},oi),getStorage:{}},{id:i.SHRINE,category:o.PUBLIC,name:"Shrine",description:"Provides some religious service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(ri={},ri[a.BEAM]=function(t){return{A:50,B:1+.3*Jo(t),type:e.EXPONENTIAL}},ri[a.STONE]=function(t){return{A:1e3,B:1+.3*Jo(t),type:e.EXPONENTIAL}},ri),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(ai={},ai[y.RELIGION]=function(t){return{A:3,B:0,type:e.LINEAR}},ai)},{id:i.DATA_CENTER,name:"Data Center",category:o.SCIENCE,description:"Provides additional science capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMPUTERS)>0},getCost:(ci={},ci[a.POWER]=function(t){return{A:1500,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},ci[a.BRICK]=function(t){return{A:125,B:1+.5*Jo(t),type:e.EXPONENTIAL}},ci[a.COMPUTER]=function(t){return{A:20,B:1+.5*Jo(t),type:e.EXPONENTIAL}},ci[a.WIRE]=function(t){return{A:75,B:1+.5*Jo(t),type:e.EXPONENTIAL}},ci),getConsumption:(ui={},ui[a.POWER]=function(t){return{A:2*tr(t),B:0,type:e.LINEAR}},ui),getGain:{},getStorage:(si={},si[a.RESEARCH]=function(t){return{A:675*er(t),B:0,type:e.LINEAR}},si),getGainMultiplier:(li={},li[a.RESEARCH]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},li)},{id:i.APARTMENT,name:"Apartment",category:o.RESIDENTAL,description:"Provides additional living space for 5 colonists",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(pi={},pi[a.POWER]=function(t){return{A:1280,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},pi[a.BRICK]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},pi[a.WIRE]=function(t){return{A:50,B:1+.5*Jo(t),type:e.EXPONENTIAL}},pi),getConsumption:(Ei={},Ei[a.POWER]=function(t){return{A:.05,B:0,type:e.LINEAR}},Ei),getGain:{},getStorage:{},getMaxColonists:function(t){return{A:5,B:0,type:e.LINEAR}}},{id:i.TEMPLE,category:o.PUBLIC,name:"Temple",description:"Great building devoted to the Gods. Significantly boosts your religion service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(di={},di[a.BRICK]=function(t){return{A:750,B:1+.5*Jo(t),type:e.EXPONENTIAL}},di[a.BEAM]=function(t){return{A:500,B:1+.5*Jo(t),type:e.EXPONENTIAL}},di[a.PLATINUM]=function(t){return{A:500,B:1+.5*Jo(t),type:e.EXPONENTIAL}},di),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(gi={},gi[y.RELIGION]=function(t){return{A:10,B:0,type:e.LINEAR}},gi)},{id:i.PANDEMIC_RESEARCH_CENTER,name:"Pandemic research center",category:o.PUBLIC,description:"Boosts knowledge about virus diseases. Each level decrease colony health consumption by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0},getCost:(fi={},fi[a.POWER]=function(t){return{A:3280,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},fi[a.BRICK]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},fi[a.PLASTICS]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},fi[a.RUBBER]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},fi),getConsumption:(Ai={},Ai[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Ai),getGain:{},getStorage:{}},{id:i.ADMINISTRATIVE_CENTER,name:"Administrative service center",category:o.PUBLIC,description:"Each level decrease public services requirements by your people by 2%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(Ri={},Ri[a.POWER]=function(t){return{A:3280,B:1+.5*Jo(t)*zo(t),type:e.EXPONENTIAL}},Ri[a.BRICK]=function(t){return{A:180,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ri[a.BEAM]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ri[a.PLASTICS]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ri),getConsumption:(Ii={},Ii[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Ii),getGain:{},getStorage:{}},{id:i.ELECTRONICS_FACTORY,name:"Electronics factory",category:o.INDUSTRIAL,description:"Provides bonus to wires, semiconductors and computers production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(Ni={},Ni[a.BRICK]=function(t){return{A:30,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ni[a.SEMICONDUCTOR]=function(t){return{A:15,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ni[a.WIRE]=function(t){return{A:5,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ni),getConsumption:(Oi={},Oi[a.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},Oi),getGain:{},getStorage:{},getGainMultiplier:(yi={},yi[a.WIRE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},yi[a.COMPUTER]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},yi[a.SEMICONDUCTOR]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},yi)},{id:i.SOLAR_SATELLITE,category:r.ORBIT,name:"Solar Panel Satellite",description:"Provides power from solar radiation. More efficient comparing to planet surface analog",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},getCost:(mi={},mi[a.ROCKET_ENGINE]=function(t){return{A:1*$o(t),B:1+.3*Jo(t),type:e.EXPONENTIAL}},mi[a.WIRE]=function(t){return{A:5,B:1+.3*Jo(t),type:e.EXPONENTIAL}},mi[a.SEMICONDUCTOR]=function(t){return{A:5,B:1+.3*Jo(t),type:e.EXPONENTIAL}},mi),getConsumption:{},getGain:(Li={},Li[a.POWER]=function(t){return{A:1.5*Math.pow(1.1,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_PHOTOELEMENTS)),B:0,type:e.LINEAR}},Li),getStorage:(Ti={},Ti[a.POWER]=function(t){return{A:25,B:0,type:e.LINEAR}},Ti)},{id:i.ORBITAL_TOURISM_CENTER,category:r.ORBIT,name:"Orbital Tourism Center",description:"Small space station that provides some entertainment and aesthetics to your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RADIATION_STUDY)>0},getCost:(Ci={},Ci[a.ROCKET_ENGINE]=function(t){return{A:5*$o(t),B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ci[a.COMPUTER]=function(t){return{A:25,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ci[a.RUBBER]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Ci),getConsumption:(hi={},hi[a.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},hi),getGain:{},getStorage:{},getEffectGain:(vi={},vi[y.AESTHETICS]=function(t){return{A:8*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FASTER_ROCKETS)),B:0,type:e.LINEAR}},vi[y.ENTERTAINMENT]=function(t){return{A:8*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FASTER_ROCKETS)),B:0,type:e.LINEAR}},vi)},{id:i.ICE_MELTING_STATION,category:r.MOON,name:"Ice Melting Station",description:"Melts ice on your cold satellite to obtain water",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Bi={},Bi[a.ROCKET_ENGINE]=function(t){return{A:15*$o(t),B:1+.5*Jo(t),type:e.EXPONENTIAL}},Bi[a.COMPUTER]=function(t){return{A:25,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Bi[a.RUBBER]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Bi[a.BRICK]=function(t){return{A:250,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Bi),getConsumption:(Si={},Si[a.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},Si),getGain:(Pi={},Pi[a.WATER]=function(t){return{A:.3,B:0,type:e.LINEAR}},Pi),getStorage:{},getEffectGain:{}},{id:i.FUEL_FACTORY,category:r.MOON,name:"Fuel Factory",description:"Move toxic fuel production outside of your planet to avoid ecology restrictions and enlarge your fuel production capabilities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Mi={},Mi[a.ROCKET_ENGINE]=function(t){return{A:25*$o(t),B:1+.5*Jo(t),type:e.EXPONENTIAL}},Mi[a.SEMICONDUCTOR]=function(t){return{A:125,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Mi[a.PLASTICS]=function(t){return{A:150,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Mi[a.PLATINUM]=function(t){return{A:250,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Mi),getConsumption:(_i={},_i[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},_i),getGain:{},getGainMultiplier:(Ui={},Ui[a.FUEL]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ui),getStorage:{},getEffectGain:{}},{id:i.NANOBOTS_FACTORY,name:"Nanobots Factory",category:r.MOON,description:"Each level provides 3% bonus to all your crafting productions",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.NANO_BOTS)>0&&e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Gi={},Gi[a.ROCKET_ENGINE]=function(t){return{A:20*$o(t),B:1+.5*Jo(t),type:e.EXPONENTIAL}},Gi[a.COMPUTER]=function(t){return{A:50,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Gi[a.PLATINUM]=function(t){return{A:225,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Gi[a.WIRE]=function(t){return{A:75,B:1+.5*Jo(t),type:e.EXPONENTIAL}},Gi),getConsumption:(bi={},bi[a.POWER]=function(t){return{A:3,B:0,type:e.LINEAR}},bi),getGain:{},getStorage:{},getGainMultiplier:{}}],ir=function(e){var t,n,i,o,r,c,u,s,l,p,E,d,g,f,A,R,I,N,O,y,m,L,T=((t={})[a.POWER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base battery",value:20}],multiplier:[]}},t[a.STONE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[a.ORE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[a.BIOMASS]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[a.OXYGEN]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.WATER]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.005*Ha.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.NUTRITION]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.1*Ha.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.RESEARCH]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.IRON]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.PLATINUM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.WOOD]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.BEAM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.BRICK]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.PLATE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.WIRE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.RUBBER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.PLASTICS]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.FUEL]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.SEMICONDUCTOR]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.COMPUTER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.ROCKET_ENGINE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.KNOWLEDGE_POINT]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t);for(var C in T)(n=T[C].income.linear).push.apply(n,Ha.landingZone.landingZoneBuildings.getResourceBeingProduced(C)),(i=T[C].income.multiplier).push.apply(i,Ha.landingZone.landingZoneBuildings.getResourceMultiplier(C)),null===(d=T[C].income.consumption)||void 0===d||d.push.apply(d,Ha.landingZone.landingZoneBuildings.getResourceBeingConsumed(C)),null===(g=T[C].max.linear)||void 0===g||g.push.apply(g,Ha.landingZone.landingZoneBuildings.getResourceBeingStored(C)),(o=T[C].income.linear).push.apply(o,Ha.landingZone.landingZoneUpgrades.getGain(C)),(r=T[C].income.multiplier).push.apply(r,Ha.landingZone.landingZoneUpgrades.getGainMultiplier(C)),null===(f=T[C].max.linear)||void 0===f||f.push.apply(f,Ha.landingZone.landingZoneUpgrades.getCapacity(C)),null===(A=T[C].max.multiplier)||void 0===A||A.push.apply(A,Ha.landingZone.landingZoneUpgrades.getCapacityMult(C)),(c=T[C].income.linear).push.apply(c,Ha.colony.colonyJobs.getResourceBeingProduced(C)),null===(R=T[C].income.consumption)||void 0===R||R.push.apply(R,Ha.colony.colonyJobs.getResourceBeingConsumed(C)),null===(I=T[C].income.multiplier)||void 0===I||I.push.apply(I,Ha.colony.colonyJobs.getResourceBeingMultiplied(C)),(u=T[C].income.linear).push.apply(u,Ha.crafting.craftingJobs.getResourceBeingProduced(C)),null===(N=T[C].income.consumption)||void 0===N||N.push.apply(N,Ha.crafting.craftingJobs.getResourceBeingConsumed(C)),(s=T[C].income.linear).push.apply(s,Ha.laws.getResourceBeingProduced(C)),(l=T[C].income.multiplier).push.apply(l,Ha.laws.getResourceMultiplier(C)),null===(O=T[C].income.consumption)||void 0===O||O.push.apply(O,Ha.laws.getResourceBeingConsumed(C)),null===(y=T[C].max.linear)||void 0===y||y.push.apply(y,Ha.laws.getResourceBeingStored(C)),(p=T[C].income.linear).push.apply(p,Ha.prestige.transmitKnowledge.getResourceBeingProduced(C)),(E=T[C].income.multiplier).push.apply(E,Ha.prestige.transmitKnowledge.getResourceMultiplier(C)),null===(m=T[C].max.linear)||void 0===m||m.push.apply(m,Ha.prestige.transmitKnowledge.getResourceBeingStored(C)),null===(L=T[C].max.multiplier)||void 0===L||L.push.apply(L,Ha.prestige.transmitKnowledge.getCapacityMult(C));return T},or=function(){return or=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},or.apply(this,arguments)},rr=function(){function e(){this.cachedBreakdown={},this.resourcesStatus=m.map((function(e){return{id:e.id,amount:0,balance:0,max:1,hasCapacityLimit:!0,potentialEfficiency:1}}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getResourceEfficiency=function(t){return t in e.lackEfficiencyResources?null==e.lackEfficiencyResources[t]?1:e.lackEfficiencyResources[t]:1},e.prototype.addResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].amount=this.resourcesStatus[n].amount+t,this.resourcesStatus[n].max>0&&(this.resourcesStatus[n].amount=Math.min(this.resourcesStatus[n].amount,this.resourcesStatus[n].max)),this.resourcesStatus[n].amount<0&&(this.resourcesStatus[n].amount=0)},e.prototype.setResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].amount=t},e.prototype.subtractResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));n<0||(this.resourcesStatus[n].amount=this.resourcesStatus[n].amount-t)},e.prototype.subtractResourceBatch=function(e){var t=this;e.forEach((function(e){t.subtractResource(e.id,e.amount)}))},e.prototype.setBalance=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].balance=t},e.prototype.setCapacity=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].max=t},e.prototype.saveBalances=function(){var e=this;Ha.colony.colonyEffects.getBreakdowns();var t=ir(),n={};m.forEach((function(i){var o,r,a,c;if(i.unlockCondition(Ha)){n[i.id]={max:{income:[],multiplier:[],consumption:[]},income:{income:[],multiplier:[],consumption:[]}};var u=t[i.id].max.linear.reduce((function(e,t){return e+t.value}),0),s=t[i.id].max.multiplier.reduce((function(e,t){return e*t.value}),1);e.setCapacity(i.id,u*s),n[i.id].max.income=t[i.id].max.linear.filter((function(e){return e.value})).map((function(e){return or(or({},e),{value:"+".concat(e.value.toPrecision(4))})})),n[i.id].max.multiplier=t[i.id].max.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return or(or({},e),{value:"x".concat(e.value.toPrecision(4))})}));var l=t[i.id].income.linear.reduce((function(e,t){return e+t.value}),0),p=t[i.id].income.multiplier.reduce((function(e,t){return e*t.value}),1),E=(null===(o=t[i.id].income.consumption)||void 0===o?void 0:o.reduce((function(e,t){return e+t.value}),0))||0;if(e.setBalance(i.id,l*p-E),null===(r=n[i.id])||void 0===r||(r.income.income=t[i.id].income.linear.filter((function(e){return e.value})).map((function(e){return or(or({},e),{value:"+".concat(e.value.toPrecision(4))})}))),null===(a=n[i.id])||void 0===a||(a.income.multiplier=t[i.id].income.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return or(or({},e),{value:"x".concat(e.value.toPrecision(4))})}))),null===(c=n[i.id])||void 0===c||(c.income.consumption=t[i.id].income.consumption.filter((function(e){return e.value})).map((function(e){return or(or({},e),{value:"-".concat(e.value.toPrecision(4))})}))),i.hasCapacityLimit){var d=t[i.id].max.linear.reduce((function(e,t){return e+t.value}),0),g=t[i.id].max.multiplier.reduce((function(e,t){return e*t.value}),1);e.setCapacity(i.id,d*g)}}})),this.cachedBreakdown=n},e.prototype.resetEfficiency=function(){e.lackEfficiencyResources={},Ha.landingZone.landingZoneBuildings.resetEfficiency(),Ha.crafting.craftingJobs.resetEfficiency()},e.prototype.assertBalances=function(t){var n;void 0===t&&(t=!1),Ha.colony.colonyEffects.getBreakdowns();var i=ir(),o={};for(var r in i){var c=i[r].income.linear.reduce((function(e,t){return e+t.value}),0),u=i[r].income.multiplier.reduce((function(e,t){return e*t.value}),1),s=(null===(n=i[r].income.consumption)||void 0===n?void 0:n.reduce((function(e,t){return e+t.value}),0))||0,l=this.getPotentialEfficiency(Math.max(0,this.getResource(r))+c*u,-s);r===a.POWER&&console.log("power: ",c*u,s,l,e.lackEfficiencyResources[r]),o[r]=l<1&&t?0:l}return o},e.prototype.shouldChangeBalances=function(e){return Object.values(e).findIndex((function(e){return e<1}))>-1},e.prototype.applyBalances=function(t){for(var n in t){var i=n;i in e.lackEfficiencyResources&&null!=e.lackEfficiencyResources[i]?e.lackEfficiencyResources[i]*=t[i]:e.lackEfficiencyResources[i]=t[i]}},e.prototype.applyEfficiencies=function(){Ha.landingZone.landingZoneBuildings.adaptEfficiency(),Ha.crafting.craftingJobs.adaptEfficiency()},e.prototype.assertAndApplyBalances=function(){var t=this.assertBalances(),n=0;for(console.log("balancesCalculated: ",t);this.shouldChangeBalances(t)&&n<15;)this.applyBalances(t),this.applyEfficiencies(),t=this.assertBalances(n>10),console.log("iter: ",n,t,e.lackEfficiencyResources[a.POWER]),n++},e.prototype.reassertBalances=function(){this.resetEfficiency(),this.assertAndApplyBalances(),this.saveBalances()},e.prototype.process=function(t){var n=this,i=!1,o="";this.resourcesStatus.forEach((function(e){e.balance<0&&e.balance<-e.amount&&(i=!0,o=e.id)})),i&&(console.log("should re-assert: ",i,o,e.lackEfficiencyResources),this.reassertBalances()),this.resourcesStatus.forEach((function(e){n.addResource(e.id,e.balance*t)}))},e.prototype.getResource=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].amount},e.prototype.getBalance=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].balance},e.prototype.getPotentialEfficiency=function(e,t){return t>=0?1:Math.min(1,-Math.max(0,e)/t)},e.prototype.getBatchObject=function(){return this.resourcesStatus.reduce((function(e,t){return e[t.id]=t.amount,e}),{})},e.prototype.getBatchBalanceObject=function(){return this.resourcesStatus.reduce((function(e,t){return e[t.id]=t.balance,e}),{})},e.prototype.getResourceBalance=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].balance},e.prototype.getResourceCap=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].max},e.prototype.assertEnought=function(e,t,n){var i=[];return e.forEach((function(e){var n="0";if(t[e.id]||(t[e.id]=0),e.amount&&e.amount>0&&t[e.id]>0){var o=100*t[e.id]/e.amount;o>100&&(o=100),n=o.toPrecision(3)}e.amount>0&&i.push({id:e.id,name:e.name,amount:v(e.amount),percentage:n,maxAmount:v(e.max),isAvailable:e.max>=1,eta:h(e.eta)})})),i},e.prototype.exportData=function(){return this.resourcesStatus.map((function(e){return{id:e.id,amount:e.amount}}))},e.prototype.importData=function(e){this.resourcesStatus=e.map((function(e){var t=m.find((function(t){return t.id===e.id}));if(!t)throw new Error("Invalid resource");return{id:e.id,amount:e.amount,balance:0,hasCapacityLimit:t.hasCapacityLimit,max:0,potentialEfficiency:1}}))},e.prototype.dataToUI=function(){var e=this;return{resources:m.map((function(t){var n,i,o=e.resourcesStatus.find((function(e){return e.id===t.id}));return{id:t.id,name:t.name,amount:v((null==o?void 0:o.amount)||0),balance:v((null==o?void 0:o.balance)||0),isUnlocked:t.unlockCondition(Ha),max:v((null==o?void 0:o.max)||0),toFullPercentage:(o&&o.max>0?o.amount/o.max:0).toPrecision(3),hasMaxLimit:t.hasCapacityLimit,breakdown:e.cachedBreakdown[t.id],toFullTime:(null==o?void 0:o.max)&&(null==o?void 0:o.balance)>0?h((o.max-o.amount)/o.balance):"",toEmptyTime:o&&(null==o?void 0:o.balance)<0?h(-(null==o?void 0:o.amount)/(null==o?void 0:o.balance)):"",isSecondary:null!==(n=t.isCraftable)&&void 0!==n&&n,isHidden:null!==(i=t.isHidden)&&void 0!==i&&i,isNegative:((null==o?void 0:o.balance)||0)<0||(e.getResourceEfficiency(t.id)||0)<1,isCapped:!!o&&o.max>0&&o.max<=o.amount+2*Ha.dT*o.balance}}))}},e.prototype.reset=function(){this.resourcesStatus=[]},e.lackEfficiencyResources={},e}(),ar=rr.getInstance(),cr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ur=function(){return ur=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ur.apply(this,arguments)},sr=function(e){function t(){var t=e.call(this)||this;return t.buildings=[],t.workDispatcher.on("[landing-zone] do build",(function(e){console.log("do upgrade",e),t.doBuild(e.id)})),t.workDispatcher.on("[landing-zone] set building amount",(function(e){console.log("set amount",e),t.setActiveAmount(e.id,e.amount)})),t}return cr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.buildings=e},t.prototype.exportData=function(){return this.buildings},t.prototype.dataToUI=function(){var e=this;return{list:nr.map((function(t){return e.processToUI(t)}))}},t.prototype.getBuildingLevel=function(e){var t;return(null===(t=this.buildings.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.getBuildingActiveLevel=function(e){var t;return(null===(t=this.buildings.find((function(t){return t.id===e})))||void 0===t?void 0:t.activeAmount)||0},t.prototype.processToUI=function(e){var t=this.buildings.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0,efficiency:1,activeAmount:0},this.buildings.push(t));var n=C.calcBatchAll(e.getCost,ka.getInstance(),t.level,ka.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300),o=n.reduce((function(e,t){return e&&t.eta<1e80}),!0),r=C.calcBatchAll(e.getConsumption,ka.getInstance(),0,ka.getInstance().resources.getBatchObject()),a=C.calcBatch(e.getGain,ka.getInstance(),0),c=e.getStorage?C.calcBatch(e.getStorage,ka.getInstance(),0):[],u=e.getGainMultiplier?C.calcBatch(e.getGainMultiplier,ka.getInstance(),1):[],s=e.getEffectConsumption?C.calcBatchAll(e.getEffectConsumption,ka.getInstance(),0,ka.getInstance().resources.getBatchObject()):[],l=e.getEffectGain?C.calcBatch(e.getEffectGain,ka.getInstance(),0):[];return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),isAvailable:i>=1,cost:ka.getInstance().resources.assertEnought(n,ka.getInstance().resources.getBatchObject(),ka.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"100",consume:r.filter((function(e){return e.amount})).map((function(e){return ur(ur({},e),{amount:v(e.amount)})})),gain:a.filter((function(e){return e.amount})).map((function(e){return ur(ur({},e),{amount:v(e.amount)})})),gainMult:u.filter((function(e){return e.amount})).map((function(e){return ur(ur({},e),{amount:"x".concat(v(e.amount))})})),consumeEffect:s.filter((function(e){return e.amount})).map((function(e){return ur(ur({},e),{amount:v(e.amount)})})),gainEffect:l.filter((function(e){return e.amount})).map((function(e){return ur(ur({},e),{amount:v(e.amount)})})),max:c.filter((function(e){return e.amount})).map((function(e){return ur(ur({},e),{amount:v(e.amount)})})),level:t.level,activeAmount:t.activeAmount,category:e.category,isBlocked:!o}},t.prototype.setActiveAmount=function(e,t){var n=this.buildings.findIndex((function(t){return t.id===e}));n<0||(this.buildings[n].activeAmount=Math.min(t,this.buildings[n].level),Ha.resources.reassertBalances())},t.prototype.doBuild=function(e){var t=nr.find((function(t){return t.id===e}));if(t){var n=this.buildings.findIndex((function(t){return t.id===e}));n<0&&(n=this.buildings.length,this.buildings.push({id:e,level:0,efficiency:1,activeAmount:0}));var i=C.calcBatchAll(t.getCost,ka.getInstance(),this.buildings[n].level,ka.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.buildings[n].level++,this.buildings[n].activeAmount++,console.log("costs: ",i),ka.getInstance().resources.subtractResourceBatch(i),Ha.resources.reassertBalances())}},t.prototype.getEffectGain=function(e){var t=nr.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectGain[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=nr.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectMultiplier[e],i.activeAmount,1)*i.efficiency;a&&n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getEffectBeingConsumed=function(e){var t=nr.filter((function(t){var n;return!!(null===(n=t.getEffectConsumption)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectConsumption[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=nr.filter((function(t){return!!t.getGain[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=C.calculate(Ha,o.getGain[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getResourceMultiplier=function(e){var t=nr.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getGainMultiplier[e],i.activeAmount,1)*i.efficiency;console.log("0--0",e,r.id,a),a&&n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingConsumed=function(e){var t=nr.filter((function(t){return!!t.getConsumption[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=C.calculate(Ha,o.getConsumption[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getResourceBeingStored=function(e){var t=nr.filter((function(t){return!!t.getStorage[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=C.calculate(Ha,o.getStorage[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getColonistsCap=function(){var e=nr.filter((function(e){return!!e.getMaxColonists})),t=[];return this.buildings.forEach((function(n){var i=e.find((function(e){return e.id===n.id}));if(i&&i.getMaxColonists){var o=C.calculate(Ha,i.getMaxColonists,0,n.activeAmount)*n.efficiency;t.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),t},t.prototype.getHappinessBonus=function(){var e=nr.filter((function(e){return!!e.getHappinessBonus})),t=[];return this.buildings.forEach((function(n){var i=e.find((function(e){return e.id===n.id}));if(i&&i.getHappinessBonus){var o=C.calculate(Ha,i.getHappinessBonus,0,n.activeAmount)*n.efficiency;t.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),t},t.prototype.preProcess=function(e){var t=this;this.buildings.forEach((function(e,n){t.buildings[n].efficiency=1}))},t.prototype.resetEfficiency=function(){var e=this;this.buildings.forEach((function(t,n){e.buildings[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=rr.lackEfficiencyResources,n=Object.keys(t);this.buildings.forEach((function(i,o){var r=nr.find((function(e){return e.id===i.id}));if(r){var a=Object.keys(r.getConsumption);n.filter((function(e){return a.includes(e)})).forEach((function(n){e.buildings[o].efficiency=Math.min(e.buildings[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){},t.prototype.reset=function(){this.buildings=[]},t}(R),lr=sr.getInstance(),pr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Er=function(e){function t(){var t=e.call(this)||this;return t.landingZoneActions=xi,t.landingZoneUpgrades=Zi,t.landingZoneBuildings=lr,t}return pr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.landingZoneActions.importData(e.actions),this.landingZoneUpgrades.importData(e.upgrades),this.landingZoneBuildings.importData(e.buildings)},t.prototype.exportData=function(){return{actions:this.landingZoneActions.exportData(),upgrades:this.landingZoneUpgrades.exportData(),buildings:this.landingZoneBuildings.exportData()}},t.prototype.dataToUI=function(){return{actions:this.landingZoneActions.dataToUI(),upgrades:this.landingZoneUpgrades.dataToUI(),buildings:this.landingZoneBuildings.dataToUI()}},t.prototype.preProcess=function(e){this.landingZoneBuildings.preProcess(e)},t.prototype.process=function(e){this.landingZoneActions.process(e),this.landingZoneBuildings.process(e)},t.prototype.reset=function(){this.landingZoneActions.reset(),this.landingZoneUpgrades.reset(),this.landingZoneBuildings.reset()},t}(R).getInstance(),dr=[],gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fr=function(e){function t(){var t=e.call(this)||this;return t.milestonesState=[],t}return gr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.milestonesState=e},t.prototype.exportData=function(){return this.milestonesState},t.prototype.dataToUI=function(){return this.milestonesState},t.prototype.milestoneUnlocked=function(e){return!!this.milestonesState.find((function(t){return t.id===e&&t.isReached}))},t.prototype.process=function(e){var t=this;dr.filter((function(e){return!t.milestonesState.find((function(t){return t.id===e.id&&t.isReached}))})).forEach((function(e){e.unlockCondition(Ha)&&t.milestonesState.push({id:e.id,isReached:!0})}))},t}(R).getInstance(),Ar=function(e){return e.colony.getColonistsHappiness()},Rr=[{id:O.MINER,unlockCondition:function(e){return!0},name:"Miner",description:"Mines ore",getGain:(Fi={},Fi[a.ORE]=function(t){return{A:.5*Ar(t),B:0,type:e.LINEAR}},Fi[a.PLATINUM]=function(t){return{A:(t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)?.01:0)*Ar(t),B:0,type:e.LINEAR}},Fi)},{id:O.QUARRYMAN,unlockCondition:function(e){return!0},name:"Quarrymen",description:"Mines stone",getGain:(ji={},ji[a.STONE]=function(t){return{A:.5*Ar(t),B:0,type:e.LINEAR}},ji)},{id:O.SCIENTIST,unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0},name:"Researcher",description:"Generates research",getGain:(Ki={},Ki[a.RESEARCH]=function(t){return{A:.04*Ar(t),B:0,type:e.LINEAR}},Ki)},{id:O.FARMER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0},name:"Farmer",description:"Generates nutrition",getGain:(Vi={},Vi[a.NUTRITION]=function(t){return{A:(.15+.05*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING))*Ar(t),B:0,type:e.LINEAR}},Vi),getConsumption:(qi={},qi[a.BIOMASS]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING),B:0,type:e.LINEAR}},qi)},{id:O.FORESTER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},name:"Forester",description:"Plants and cuts wood",getGain:(Qi={},Qi[a.WOOD]=function(t){return{A:.05*Ar(t),B:0,type:e.LINEAR}},Qi),getConsumption:(Ji={},Ji[a.BIOMASS]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING),B:0,type:e.LINEAR}},Ji)},{id:O.ARTISAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},name:"Artisan",description:"Crafts various goods",getGain:{},getConsumption:{}},{id:O.POLICEMAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},name:"Policeman",description:"Provides some security",getGain:{},getConsumption:(zi={},zi[a.NUTRITION]=function(t){return{A:1===t.laws.getLawSelected(_t.SECURITY_DOTATIONS)?.5:0,B:0,type:e.LINEAR}},zi[a.WATER]=function(t){return{A:1===t.laws.getLawSelected(_t.SECURITY_DOTATIONS)?.1:0,B:0,type:e.LINEAR}},zi),getEffectGain:($i={},$i[y.SECURITY]=function(t){return{A:4*Math.pow(1.25,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SURVEILLANCE_CAMERAS))*(1+.75*(1===t.laws.getLawSelected(_t.SECURITY_DOTATIONS)?1:0)),B:0,type:e.LINEAR}},$i)}],Ir=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nr=function(){return Nr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nr.apply(this,arguments)},Or=function(e){function t(){var t=e.call(this)||this;return t.jobs=[],t.freeWorkers=0,t.workDispatcher.on("[colony] assign colonists",(function(e){console.log("set amount",e),t.setAmount(e.id,e.amount)})),t}return Ir(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.jobs=e},t.prototype.exportData=function(){return this.jobs},t.prototype.dataToUI=function(){var e=this;return{list:Rr.map((function(t){return e.processToUI(t)})),freeWorkers:this.freeWorkers}},t.prototype.getBusyWorkers=function(){return this.jobs.reduce((function(e,t){return e+t.amount}),0)},t.prototype.getWorkersAmount=function(e){var t;return(null===(t=this.jobs.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.jobs.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0,efficiency:1},this.jobs.push(t));var n=e.getConsumption?C.calcBatchAll(e.getConsumption,ka.getInstance(),0,ka.getInstance().resources.getBatchObject()):[],i=e.getGain?C.calcBatch(e.getGain,ka.getInstance(),0):[],o=e.getMultiplier?C.calcBatch(e.getMultiplier,ka.getInstance(),0):[];return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),consume:n.filter((function(e){return e.amount})).map((function(e){return Nr(Nr({},e),{amount:v(e.amount)})})),gain:i.filter((function(e){return e.amount})).map((function(e){return Nr(Nr({},e),{amount:v(e.amount)})})),multiplier:o.filter((function(e){return e.amount})).map((function(e){return Nr(Nr({},e),{amount:"x".concat(v(e.amount))})})),amount:t.amount,isAvailable:this.freeWorkers>0,max:this.freeWorkers+t.amount}},t.prototype.setAmount=function(e,t){var n=this.jobs.findIndex((function(t){return t.id===e}));n<0&&(n=this.jobs.length,this.jobs.push({id:e,amount:0,efficiency:1})),this.jobs[n].amount=Math.min(Math.max(t,0),this.jobs[n].amount+this.freeWorkers),Ha.resources.reassertBalances()},t.prototype.getEffectGain=function(e){var t=Rr.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectGain[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=Rr.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectMultiplier[e],i.amount,1)*i.efficiency;a&&n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getEffectBeingConsumed=function(e){var t=Rr.filter((function(t){var n;return!!(null===(n=t.getEffectConsumption)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=Rr.filter((function(t){return t.getGain&&!!t.getGain[e]})),n=[],i=Ha.colony.getColonistsHappiness();return console.log("happ: ",i),this.jobs.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var c=C.calculate(Ha,a.getGain[e],0,o.amount)*o.efficiency*i;n.push({label:"Job: ".concat(a.name),value:c,id:"job-".concat(a.id)})}}),0),n},t.prototype.getResourceBeingConsumed=function(e){var t=Rr.filter((function(t){return t.getConsumption&&!!t.getConsumption[e]})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingMultiplied=function(e){var t=Rr.filter((function(t){return t.getMultiplier&&!!t.getMultiplier[e]})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getMultiplier)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getMultiplier[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.resetEfficiency=function(){var e=this;this.jobs.forEach((function(t,n){e.jobs[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=rr.lackEfficiencyResources,n=Object.keys(t);this.jobs.forEach((function(i,o){var r=Rr.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var a=Object.keys(r.getConsumption);n.filter((function(e){return a.includes(e)})).forEach((function(n){e.jobs[o].efficiency=Math.min(e.jobs[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){var t=Ha.colony.colonists-this.getBusyWorkers();if(t<0){for(var n=this.jobs.length-1;n>=0;n--){var i=Math.min(this.jobs[n].amount,-t);if(this.jobs[n].amount-=i,(t+=i)>=0)break}Ha.resources.reassertBalances()}this.freeWorkers=t},t.prototype.reset=function(){this.jobs=[]},t}(R),yr=Or.getInstance(),mr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Lr=function(){return Lr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lr.apply(this,arguments)},Tr=function(e){function t(){var t=e.call(this)||this;return t.happinessEffects={},t.happinessBreakdowns={},t}return mr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){},t.prototype.exportData=function(){return[]},t.prototype.dataToUI=function(){var e=this;return{effects:L.map((function(t){return e.processToUI(t)})),happiness:this.assertHappiness()}},t.prototype.assertHappiness=function(){return Math.pow(Object.values(this.happinessEffects).reduce((function(e,t){return e*(t/100)}),1),.33)},t.prototype.assertConsumptionMitigation=function(){return Math.pow(.98,Ha.landingZone.landingZoneBuildings.getBuildingLevel(i.ADMINISTRATIVE_CENTER))},t.prototype.getEffectBeingConsumed=function(e){var t=[],n=L.find((function(t){return t.id===e}));if(null==n?void 0:n.getConsumption){var i=n.getConsumption(Ha)*this.assertConsumptionMitigation();t.push({label:"Population",value:i,id:"population"})}return t},t.prototype.getBreakdowns=function(){var e=this,t=function(e){var t,n,i,o,r,a,c,u,s,l,p,E=((t={})[y.SECURITY]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[y.AESTHETICS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[y.ENTERTAINMENT]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[y.HEALTHCARE]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[y.RELIGION]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[y.WORK_CONDITIONS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t);for(var d in E)(n=E[d].linear).push.apply(n,Ha.landingZone.landingZoneBuildings.getEffectGain(d)),(i=E[d].multiplier).push.apply(i,Ha.landingZone.landingZoneBuildings.getEffectMultiplier(d)),null===(u=E[d].consumption)||void 0===u||u.push.apply(u,Ha.landingZone.landingZoneBuildings.getEffectBeingConsumed(d)),(o=E[d].linear).push.apply(o,Ha.colony.colonyJobs.getEffectGain(d)),(r=E[d].multiplier).push.apply(r,Ha.colony.colonyJobs.getEffectMultiplier(d)),null===(s=E[d].consumption)||void 0===s||s.push.apply(s,Ha.colony.colonyJobs.getEffectBeingConsumed(d)),null===(l=E[d].consumption)||void 0===l||l.push.apply(l,Ha.colony.colonyEffects.getEffectBeingConsumed(d)),(a=E[d].linear).push.apply(a,Ha.laws.getEffectGain(d)),(c=E[d].multiplier).push.apply(c,Ha.laws.getEffectMultiplier(d)),null===(p=E[d].consumption)||void 0===p||p.push.apply(p,Ha.laws.getEffectBeingConsumed(d));return E}(),n={};L.forEach((function(i){var o,r,a;if(i.unlockCondition(Ha)){n[i.id]={income:[],multiplier:[],consumption:[]};var c=null===(o=t[i.id].linear)||void 0===o?void 0:o.reduce((function(e,t){return e+t.value}),0),u=null===(r=t[i.id].multiplier)||void 0===r?void 0:r.reduce((function(e,t){return e*t.value}),1),s=(null===(a=t[i.id].consumption)||void 0===a?void 0:a.reduce((function(e,t){return e+t.value}),0))||0;e.happinessEffects[i.id]=Math.min(i.maximum,Math.max(i.minimum,c*u-s)),n[i.id].income=t[i.id].linear.filter((function(e){return e.value})).map((function(e){return Lr(Lr({},e),{value:"+".concat(e.value.toPrecision(4))})})),n[i.id].multiplier=t[i.id].multiplier.filter((function(e){return 1!==e.value})).map((function(e){return Lr(Lr({},e),{value:"x".concat(e.value.toPrecision(4))})})),n[i.id].consumption=t[i.id].consumption.filter((function(e){return e.value})).map((function(e){return Lr(Lr({},e),{value:"-".concat(e.value.toPrecision(4))})}))}})),this.happinessBreakdowns=n},t.prototype.processToUI=function(e){var t,n;return e.getConsumption&&e.getConsumption(Ha),{id:e.id,name:e.name,isUnlocked:e.unlockCondition(Ha),amount:v(null!==(t=this.happinessEffects[e.id])&&void 0!==t?t:0),breakdown:null!==(n=this.happinessBreakdowns[e.id])&&void 0!==n?n:{income:[],multiplier:[],consumption:[]}}},t.prototype.process=function(e){this.getBreakdowns()},t.prototype.reset=function(){this.happinessBreakdowns={},this.happinessEffects={}},t}(R),Cr=Tr.getInstance(),hr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vr=function(e){function t(){var t=e.call(this)||this;return t.colonists=0,t.maxColonists=0,t.colonyJobs=yr,t.colonyEffects=Cr,t}return hr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.colonists=e.colonists||0,this.colonyJobs.importData(e.jobs)},t.prototype.exportData=function(){return{jobs:this.colonyJobs.exportData(),colonists:this.colonists}},t.prototype.dataToUI=function(){return{colonists:this.colonists||0,maxColonists:this.maxColonists,isUnlocked:Ha.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0,jobs:this.colonyJobs.dataToUI(),effects:this.colonyEffects.dataToUI()}},t.prototype.getMaxColonists=function(){return Math.round(Ha.landingZone.landingZoneBuildings.getColonistsCap().reduce((function(e,t){return e+t.value}),0))},t.prototype.getColonistsHappiness=function(){return this.colonyEffects.assertHappiness()},t.prototype.missingSupply=function(){return!!this.colonists&&(null!=rr.lackEfficiencyResources[a.NUTRITION]&&(rr.lackEfficiencyResources[a.NUTRITION]||0)<1||null!=rr.lackEfficiencyResources[a.WATER]&&(rr.lackEfficiencyResources[a.WATER]||0)<1)},t.prototype.process=function(e){this.maxColonists=this.getMaxColonists(),(this.missingSupply()||this.colonists>this.maxColonists)&&(console.log("missing supply. Colonist is leaving"),this.colonists--,Ha.resources.reassertBalances()),this.colonists<this.maxColonists&&Math.random()<.02&&(this.colonists++,Ha.resources.reassertBalances()),this.colonyEffects.process(e),this.colonyJobs.process(e)},t.prototype.reset=function(){this.colonists=0,this.maxColonists=0,this.colonyJobs.reset(),this.colonyEffects.reset()},t}(R).getInstance(),Br=[{id:I.EXOFARMING,name:"Exo farming",description:"Learn how to work with soil on a foreign planet. Allows you hiring farmers",getCost:(eo={},eo[a.RESEARCH]=function(t){return{A:25,B:0,type:e.LINEAR}},eo),unlockCondition:function(e){return!0}},{id:I.METEOROLOGY,name:"Meteorology",description:"Learn your atmosphere closer. Unlocks new upgrades and buildings",getCost:(to={},to[a.RESEARCH]=function(t){return{A:75,B:0,type:e.LINEAR}},to),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.MINERALOGY,name:"Mineralogy",description:"Learn more about minerals available at your new home",getCost:(no={},no[a.RESEARCH]=function(t){return{A:125,B:0,type:e.LINEAR}},no),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.CIVIL_SERVICE,name:"Service Industry",description:"Unlock providing some services to your groving colony",getCost:(io={},io[a.RESEARCH]=function(t){return{A:225,B:0,type:e.LINEAR}},io),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.ENGINEERING,name:"Engineering",description:"Learn engineering specific in high gravity conditions",getCost:(oo={},oo[a.RESEARCH]=function(t){return{A:200,B:0,type:e.LINEAR}},oo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0}},{id:I.EXOBIOLOGY,name:"Exo biology",description:"Learn more about local organisms",getCost:(ro={},ro[a.RESEARCH]=function(t){return{A:225,B:0,type:e.LINEAR}},ro),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0}},{id:I.METALLURGY,name:"Metallurgy",description:"Learn how to work with exotic ores. Unlocks crafting ",getCost:(ao={},ao[a.RESEARCH]=function(t){return{A:420,B:0,type:e.LINEAR}},ao),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0}},{id:I.EXOFORESTRY,name:"Exo-forestry",description:"Lets learn how to plant something bigger in this empty grounds",getCost:(co={},co[a.RESEARCH]=function(t){return{A:375,B:0,type:e.LINEAR}},co),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0}},{id:I.FLORA_RESEARCH,name:"Exo-flora",description:"Advanced flora researches unlocks new tools for you to boost agriculture",getCost:(uo={},uo[a.RESEARCH]=function(t){return{A:425,B:0,type:e.LINEAR}},uo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0}},{id:I.CHEMISTRY,name:"Chemistry",description:"Unlocks new materials and upgrades",getCost:(so={},so[a.RESEARCH]=function(t){return{A:575,B:0,type:e.LINEAR}},so),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0}},{id:I.GEOLOGY,name:"Geology",description:"Further research precious minerals at your new habitat",getCost:(lo={},lo[a.RESEARCH]=function(t){return{A:550,B:0,type:e.LINEAR}},lo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.METALLURGY)>0}},{id:I.GEOGRAPHY,name:"Geography",description:"Geography knowledge unlocks expeditions",getCost:(po={},po[a.RESEARCH]=function(t){return{A:500,B:0,type:e.LINEAR}},po),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0}},{id:I.SOCIOLOGY,name:"Sociology",description:"Unlocks new ways to make your little society happier and more efficient",getCost:(Eo={},Eo[a.RESEARCH]=function(t){return{A:550,B:0,type:e.LINEAR}},Eo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0}},{id:I.MATERIAL_KNOWLEDGE,name:"Material Knowledge",description:"Further advances crafting and metal processing",getCost:(go={},go[a.RESEARCH]=function(t){return{A:825,B:0,type:e.LINEAR}},go),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0}},{id:I.CODEX_OF_LAW,name:"Law",description:"Unlocks new aspects of your civilization development",getCost:(fo={},fo[a.RESEARCH]=function(t){return{A:1050,B:0,type:e.LINEAR}},fo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0}},{id:I.ELECTRICITY_STUDY,name:"Electricity Study",description:"Improves knowledge about conductivity of various materials",getCost:(Ao={},Ao[a.RESEARCH]=function(t){return{A:1375,B:0,type:e.LINEAR}},Ao),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0}},{id:I.ORGANIC_CHEMISTRY,name:"Organic Chemistry",description:"Learn about new use of your biomass",getCost:(Ro={},Ro[a.RESEARCH]=function(t){return{A:1025,B:0,type:e.LINEAR}},Ro),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0}},{id:I.ELECTRONICS,name:"Electronics",description:"Unlock electronics production",getCost:(Io={},Io[a.RESEARCH]=function(t){return{A:2e3,B:0,type:e.LINEAR}},Io),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0}},{id:I.PUBLIC_SERVICE,name:"Civil Service",description:"Unlock new civil service jobs",getCost:(No={},No[a.RESEARCH]=function(t){return{A:2e3,B:0,type:e.LINEAR}},No),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0}},{id:I.PRINTING_3D,name:"3D Printing",description:"Unlock new powerful tools to boost your civilization development",getCost:(Oo={},Oo[a.RESEARCH]=function(t){return{A:4e3,B:0,type:e.LINEAR}},Oo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0}},{id:I.HIGH_GRAVITY_PHYSICS,name:"Advanced Physics",description:"Learn more about surviving and creating in high gravity conditions",getCost:(yo={},yo[a.RESEARCH]=function(t){return{A:4e3,B:0,type:e.LINEAR}},yo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0}},{id:I.ADVANCED_ANATOMY,name:"Advanced anatomy",description:"Further research human body can make maintaining larger colony much easier",getCost:(mo={},mo[a.RESEARCH]=function(t){return{A:2600,B:0,type:e.LINEAR}},mo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0}},{id:I.ROCKET_SCIENCE,name:"Rocket science",description:"Its too little space on our planet, isn't?",getCost:(Lo={},Lo[a.RESEARCH]=function(t){return{A:5600,B:0,type:e.LINEAR}},Lo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0&&Ha.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0}},{id:I.ADVANCED_BIOLOGY,name:"Advanced Biology",description:"Further advance biology knowledge",getCost:(To={},To[a.RESEARCH]=function(t){return{A:4250,B:0,type:e.LINEAR}},To),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0}},{id:I.RADIATION_STUDY,name:"Radiation Study",description:"Learn more about impact of radiation on living organisms. Unlocks piloted missions",getCost:(Co={},Co[a.RESEARCH]=function(t){return{A:5900,B:0,type:e.LINEAR}},Co),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0}},{id:I.QUANTUM_PHYSICS,name:"Quantum Physics",description:"Better understanding of quantum physics can significantly boost your civilization",getCost:(ho={},ho[a.RESEARCH]=function(t){return{A:6215,B:0,type:e.LINEAR}},ho),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0}},{id:I.GRAVITY_THEORY,name:"Gravity Theory",description:"Allows you to send missions to other planets",getCost:(vo={},vo[a.RESEARCH]=function(t){return{A:8750,B:0,type:e.LINEAR}},vo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.NANO_PHYSICS,name:"Nano-physics",description:"Further nanotechnologies investigation can further boost your civilization development",getCost:(Bo={},Bo[a.RESEARCH]=function(t){return{A:8750,B:0,type:e.LINEAR}},Bo),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.ASTROPHYSICS,name:"Astrophysics",description:"Allows further advance of your science",getCost:(So={},So[a.RESEARCH]=function(t){return{A:9500,B:0,type:e.LINEAR}},So),unlockCondition:function(e){return Ha.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0}}],Sr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pr=function(e){function t(){var t=e.call(this)||this;return t.researches=[],t.freeWorkers=0,t.workDispatcher.on("[science] do research",(function(e){console.log("research",e),t.doResearch(e.id)})),t}return Sr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.researches=e},t.prototype.exportData=function(){return this.researches},t.prototype.dataToUI=function(){var e=this;return{list:Br.map((function(t){return e.processToUI(t)}))}},t.prototype.getResearchLevel=function(e){var t;return(null===(t=this.researches.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.researches.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0},this.researches.push(t));var n=C.calcBatchAll(e.getCost,ka.getInstance(),t.amount,ka.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300),o=n.reduce((function(e,t){return e&&t.eta<1e80}),!0);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),isAvailable:i>=1,cost:ka.getInstance().resources.assertEnought(n,ka.getInstance().resources.getBatchObject(),ka.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"100",isResearched:t.amount>0,isBlocked:!o}},t.prototype.doResearch=function(e){var t=this.researches.findIndex((function(t){return t.id===e}));t<0&&(t=this.researches.length,this.researches.push({id:e,amount:0}));var n=Br.find((function(t){return t.id===e}));if(n){var i=C.calcBatchAll(n.getCost,ka.getInstance(),this.researches[t].amount,ka.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(ka.getInstance().resources.subtractResourceBatch(i),this.researches[t].amount++,Ha.resources.reassertBalances())}},t.prototype.process=function(e){},t.prototype.reset=function(){this.researches=[]},t}(R),Mr=Pr.getInstance(),_r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ur=function(e){function t(){var t=e.call(this)||this;return t.scienceResearches=Mr,t}return _r(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.scienceResearches.importData(e.research)},t.prototype.exportData=function(){return{research:this.scienceResearches.exportData()}},t.prototype.dataToUI=function(){return{research:this.scienceResearches.dataToUI(),isUnlocked:Ha.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0}},t.prototype.process=function(e){this.scienceResearches.process(e)},t.prototype.reset=function(){this.scienceResearches.reset()},t}(R).getInstance(),Gr=[{id:a.BEAM,complexity:100,getConsumption:(Po={},Po[a.WOOD]=function(t){return{A:.25,B:0,type:e.LINEAR}},Po),getGain:(Mo={},Mo[a.BEAM]=function(t){return{A:.01,B:0,type:e.LINEAR}},Mo)},{id:a.BRICK,complexity:100,getConsumption:(_o={},_o[a.STONE]=function(t){return{A:.75,B:0,type:e.LINEAR}},_o),getGain:(Uo={},Uo[a.BRICK]=function(t){return{A:.01,B:0,type:e.LINEAR}},Uo)},{id:a.PLATE,complexity:100,getConsumption:(Go={},Go[a.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},Go),getGain:(bo={},bo[a.PLATE]=function(t){return{A:.002,B:0,type:e.LINEAR}},bo)},{id:a.WIRE,complexity:100,getConsumption:(Xo={},Xo[a.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},Xo),getGain:(wo={},wo[a.WIRE]=function(t){return{A:.002,B:0,type:e.LINEAR}},wo)},{id:a.FUEL,complexity:250,getConsumption:(Do={},Do[a.BIOMASS]=function(t){return{A:.5,B:0,type:e.LINEAR}},Do[a.WATER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Do),getGain:(xo={},xo[a.FUEL]=function(t){return{A:.002,B:0,type:e.LINEAR}},xo)},{id:a.RUBBER,complexity:100,getConsumption:(ko={},ko[a.BIOMASS]=function(t){return{A:1,B:0,type:e.LINEAR}},ko[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},ko),getGain:(Ho={},Ho[a.RUBBER]=function(t){return{A:.008,B:0,type:e.LINEAR}},Ho)},{id:a.PLASTICS,complexity:100,getConsumption:(Yo={},Yo[a.BIOMASS]=function(t){return{A:1,B:0,type:e.LINEAR}},Yo[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Yo),getGain:(Wo={},Wo[a.PLASTICS]=function(t){return{A:.008,B:0,type:e.LINEAR}},Wo)},{id:a.SEMICONDUCTOR,complexity:100,getConsumption:(Zo={},Zo[a.IRON]=function(t){return{A:.02,B:0,type:e.LINEAR}},Zo[a.STONE]=function(t){return{A:1,B:0,type:e.LINEAR}},Zo),getGain:(Fo={},Fo[a.SEMICONDUCTOR]=function(t){return{A:.004,B:0,type:e.LINEAR}},Fo)},{id:a.COMPUTER,complexity:250,getConsumption:(jo={},jo[a.SEMICONDUCTOR]=function(t){return{A:.1,B:0,type:e.LINEAR}},jo[a.PLASTICS]=function(t){return{A:.1,B:0,type:e.LINEAR}},jo),getGain:(Ko={},Ko[a.COMPUTER]=function(t){return{A:.004,B:0,type:e.LINEAR}},Ko)},{id:a.ROCKET_ENGINE,complexity:750,getConsumption:(Vo={},Vo[a.PLATE]=function(t){return{A:.1,B:0,type:e.LINEAR}},Vo[a.FUEL]=function(t){return{A:.1,B:0,type:e.LINEAR}},Vo),getGain:(qo={},qo[a.ROCKET_ENGINE]=function(t){return{A:.002,B:0,type:e.LINEAR}},qo)}],br=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xr=function(){return Xr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xr.apply(this,arguments)},wr=function(e){function t(){var t=e.call(this)||this;return t.crafters=[],t.craftingSlots=0,t.workDispatcher.on("[crafting] assign crafter",(function(e){console.log("set amount",e),t.setAmount(e.id,e.amount)})),t}return br(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.crafters=e},t.prototype.exportData=function(){return this.crafters},t.prototype.dataToUI=function(){var e=this;return{list:Gr.map((function(t){return e.processToUI(t)})),craftingSlots:this.craftingSlots}},t.prototype.getTotalCraftingBonus=function(){return Math.pow(1.05,Ha.landingZone.landingZoneUpgrades.getUpgradeLevel(n.INDUSTRY_AUTOMATION))*Math.pow(1.03,Ha.landingZone.landingZoneBuildings.getBuildingLevel(i.NANOBOTS_FACTORY))},t.prototype.getBusyWorkers=function(){return this.crafters.reduce((function(e,t){return e+t.amount}),0)},t.prototype.getWorkersAmount=function(e){var t;return(null===(t=this.crafters.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.crafters.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0,efficiency:1},this.crafters.push(t));var n=m.find((function(t){return t.id===e.id}));if(!n)throw new Error("Invalid recipe: ".concat(e.id));var i=e.getConsumption?C.calcBatchAll(e.getConsumption,ka.getInstance(),0,ka.getInstance().resources.getBatchObject()):[],o=e.getGain?C.calcBatch(e.getGain,ka.getInstance(),0):[];return{id:e.id,name:n.name,isUnlocked:n.unlockCondition(Ha),consume:i.filter((function(e){return e.amount})).map((function(e){return Xr(Xr({},e),{amount:v(e.amount)})})),gain:o.filter((function(e){return e.amount})).map((function(e){return Xr(Xr({},e),{amount:v(e.amount)})})),amount:t.amount,isAvailable:this.craftingSlots>0,max:this.craftingSlots+t.amount}},t.prototype.setAmount=function(e,t){var n=this.crafters.findIndex((function(t){return t.id===e}));n<0&&(n=this.crafters.length,this.crafters.push({id:e,amount:0,efficiency:1})),this.crafters[n].amount=Math.min(Math.max(t,0),this.crafters[n].amount+this.craftingSlots),Ha.resources.reassertBalances()},t.prototype.getResourceBeingProduced=function(e){var t=this,n=Gr.filter((function(t){return t.getGain&&!!t.getGain[e]})),i=[];return this.crafters.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var c=C.calculate(Ha,a.getGain[e],0,o.amount)*o.efficiency*t.getTotalCraftingBonus();i.push({label:"Crafting",value:c,id:"job-".concat(a.id)})}}),0),i},t.prototype.getResourceBeingConsumed=function(e){if(!m.find((function(t){return t.id===e})))throw new Error("Invalid resource");var t=Gr.filter((function(t){return t.getConsumption&&!!t.getConsumption[e]})),n=[];return this.crafters.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Crafting: ".concat(T(r.id)),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.resetEfficiency=function(){var e=this;this.crafters.forEach((function(t,n){e.crafters[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=rr.lackEfficiencyResources,n=Object.keys(t);this.crafters.forEach((function(i,o){var r=Gr.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var a=Object.keys(r.getConsumption);n.filter((function(e){return a.includes(e)})).forEach((function(n){e.crafters[o].efficiency=Math.min(e.crafters[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){var t=Ha.crafting.slots-this.getBusyWorkers();if(t<0){for(var n=this.crafters.length-1;n>=0;n--){var i=Math.min(this.crafters[n].amount,-t);if(this.crafters[n].amount-=i,(t+=i)>=0)break}Ha.resources.reassertBalances()}this.craftingSlots=t},t.prototype.reset=function(){this.craftingSlots=0,this.crafters=[]},t}(R),Dr=wr.getInstance(),xr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kr=function(e){function t(){var t=e.call(this)||this;return t.slots=-1,t.craftingJobs=Dr,t}return xr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.craftingJobs.importData(e.craftmen)},t.prototype.exportData=function(){return{craftmen:this.craftingJobs.exportData()}},t.prototype.dataToUI=function(){return{maxSlots:this.slots||0,isUnlocked:Ha.science.scienceResearches.getResearchLevel(I.METALLURGY)>0,jobs:this.craftingJobs.dataToUI()}},t.prototype.getCraftingSlots=function(){var e;return 0+((null===(e=Ha.colony.colonyJobs.jobs.find((function(e){return e.id===O.ARTISAN})))||void 0===e?void 0:e.amount)||0)},t.prototype.process=function(e){this.slots=this.getCraftingSlots(),this.craftingJobs.process(e)},t.prototype.reset=function(){this.slots=-1,this.craftingJobs.reset()},t}(R),Hr=kr.getInstance();!function(e){e.RESOURCE="resource",e.UPGRADE="upgrade",e.BUILDING="building",e.RESEARCH="research",e.POPULATION="population"}(Qo||(Qo={}));var Yr,Wr,Zr,Fr,jr,Kr,Vr,qr,Qr,Jr,zr,$r,ea,ta,na,ia,oa,ra,aa,ca,ua,sa,la,pa,Ea,da,ga,fa,Aa,Ra,Ia,Na=[{id:"start",description:"Power up",requirements:[{type:Qo.RESOURCE,target:a.POWER,amount:10}]},{id:"start2",description:"Drill some stone",requirements:[{type:Qo.RESOURCE,target:a.STONE,amount:1}]},{id:"repairFacilities",description:"Repair facilities",requirements:[{type:Qo.UPGRADE,target:n.REPAIR_DRILL,amount:4}]},{id:"drillOre",description:"Drill ore",requirements:[{type:Qo.RESOURCE,target:a.ORE,amount:1}]},{id:"furtherRepair",description:"Further facilities repair",requirements:[{type:Qo.UPGRADE,target:n.REPAIR_DRILL,amount:5},{type:Qo.UPGRADE,target:n.REPAIR_CABLE,amount:5}]},{id:"biomass",description:"Collect some organics",requirements:[{type:Qo.UPGRADE,target:n.REPAIR_MANIPULATORS,amount:3},{type:Qo.RESOURCE,target:a.BIOMASS,amount:6}]},{id:"autonomousPowerSupply",description:"Autonomous power supply",requirements:[{type:Qo.UPGRADE,target:n.COMBUSTION,amount:1},{type:Qo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:1},{type:Qo.BUILDING,target:i.BACTERIA_INCUBATOR,amount:1}]},{id:"storage",description:"Storage facilities",requirements:[{type:Qo.UPGRADE,target:n.REPAIR_STORAGE_MODULE,amount:1},{type:Qo.BUILDING,target:i.STORAGE,amount:1}]},{id:"powerUp2",description:"Boost power supply",requirements:[{type:Qo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:3},{type:Qo.BUILDING,target:i.BACTERIA_INCUBATOR,amount:2}]},{id:"stoneProduction",description:"Stone production",requirements:[{type:Qo.UPGRADE,target:n.AUTO_QUARRYING,amount:1},{type:Qo.BUILDING,target:i.QUARRY,amount:1}]},{id:"oreProduction",description:"Ore production",requirements:[{type:Qo.UPGRADE,target:n.REPAIR_MACHINERY,amount:1},{type:Qo.UPGRADE,target:n.AUTO_MINERS,amount:1},{type:Qo.BUILDING,target:i.MINE,amount:1}]},{id:"powerCaps",description:"Power capacity",requirements:[{type:Qo.UPGRADE,target:n.REPAIR_MANIPULATORS,amount:5},{type:Qo.UPGRADE,target:n.REPAIR_BATTERY,amount:2}]},{id:"organicsUtilization",description:"Organics utilization",requirements:[{type:Qo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:5},{type:Qo.BUILDING,target:i.BACTERIA_INCUBATOR,amount:5}]},{id:"economyBoost",description:"Economy Boost",requirements:[{type:Qo.BUILDING,target:i.QUARRY,amount:5},{type:Qo.BUILDING,target:i.MINE,amount:5}]},{id:"moreStorage",description:"More Storage",requirements:[{type:Qo.BUILDING,target:i.STORAGE,amount:4}]},{id:"breath-in",description:"Breath In",requirements:[{type:Qo.BUILDING,target:i.THERMOELECTRIC_STATION,amount:10},{type:Qo.UPGRADE,target:n.BIO_TECH,amount:1},{type:Qo.UPGRADE,target:n.BACTERIA_SELECTION,amount:1}]},{id:"basicNeeds",description:"Basic habitability requirements",requirements:[{type:Qo.BUILDING,target:i.OXYGEN_COLLECTOR,amount:1},{type:Qo.BUILDING,target:i.WATER_PUMP,amount:1},{type:Qo.BUILDING,target:i.WATER_STORAGE,amount:1}]},{id:"finalPreparation",description:"Final preparation",requirements:[{type:Qo.UPGRADE,target:n.ELECTROLITES,amount:1},{type:Qo.UPGRADE,target:n.SUPPLY_MODULE,amount:1}]},{id:"firstColonists",description:"First colonists",requirements:[{type:Qo.UPGRADE,target:n.DOCKING_MODULE,amount:1},{type:Qo.BUILDING,target:i.LIVING_CABIN,amount:1}]},{id:"research",description:"Scientific basics",requirements:[{type:Qo.UPGRADE,target:n.RESEARCH_MODULE,amount:1},{type:Qo.RESEARCH,target:I.EXOFARMING,amount:1}]},{id:"population",description:"Population",requirements:[{type:Qo.POPULATION,target:I.METEOROLOGY,amount:10}]},{id:"healthcare",description:"Healthcare",requirements:[{type:Qo.RESEARCH,target:I.CIVIL_SERVICE,amount:1},{type:Qo.RESEARCH,target:I.EXOBIOLOGY,amount:1},{type:Qo.BUILDING,target:i.CLINIC,amount:1}]},{id:"crafting",description:"Crafting",requirements:[{type:Qo.RESEARCH,target:I.METALLURGY,amount:1},{type:Qo.RESOURCE,target:a.BEAM,amount:20},{type:Qo.RESOURCE,target:a.BRICK,amount:20}]},{id:"civilized",description:"Civilized life",requirements:[{type:Qo.RESEARCH,target:I.SOCIOLOGY,amount:1},{type:Qo.RESEARCH,target:I.CODEX_OF_LAW,amount:1}]},{id:"population",description:"Population",requirements:[{type:Qo.POPULATION,target:I.METEOROLOGY,amount:70}]},{id:"advanced",description:"Advanced Science",requirements:[{type:Qo.RESEARCH,target:I.ELECTRICITY_STUDY,amount:1},{type:Qo.RESEARCH,target:I.HIGH_GRAVITY_PHYSICS,amount:1}]},{id:"infoera",description:"Knowledge",requirements:[{type:Qo.RESEARCH,target:I.QUANTUM_PHYSICS,amount:1},{type:Qo.UPGRADE,target:n.GREAT_RADIO_TRANSMITTER,amount:1}]}],Oa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ya=function(e){function t(){var t=e.call(this)||this;return t.currentGoalIdx=0,t.goalsState=[],t}return Oa(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.currentGoalIdx=e.currentGoalIdx||0},t.prototype.exportData=function(){return{currentGoalIdx:this.currentGoalIdx}},t.prototype.dataToUI=function(){return{index:this.currentGoalIdx,current:this.currentGoalToUI()}},t.prototype.getCurrentGoalDB=function(){var e;return null!==(e=Na[this.currentGoalIdx])&&void 0!==e?e:{id:"complete",description:"Complete",requirements:[]}},t.prototype.getRequirementText=function(e){var t,n,i,o,r="";switch(e.type){case Qo.RESOURCE:r="Resource: "+(null===(t=m.find((function(t){return t.id===e.target})))||void 0===t?void 0:t.name);break;case Qo.UPGRADE:r="Upgrade: "+(null===(n=ki.find((function(t){return t.id===e.target})))||void 0===n?void 0:n.name);break;case Qo.RESEARCH:r="Research: "+(null===(i=Br.find((function(t){return t.id===e.target})))||void 0===i?void 0:i.name);break;case Qo.BUILDING:r="Building: "+(null===(o=nr.find((function(t){return t.id===e.target})))||void 0===o?void 0:o.name);break;case Qo.POPULATION:r="Population"}return r},t.prototype.getRequirementAmount=function(e){var t=0;switch(e.type){case Qo.RESOURCE:t=Ha.resources.getResource(e.target);break;case Qo.UPGRADE:t=Ha.landingZone.landingZoneUpgrades.getUpgradeLevel(e.target);break;case Qo.RESEARCH:t=Ha.science.scienceResearches.getResearchLevel(e.target);break;case Qo.BUILDING:t=Ha.landingZone.landingZoneBuildings.getBuildingLevel(e.target);break;case Qo.POPULATION:t=Ha.colony.colonists}return t},t.prototype.checkGoalStatus=function(){var e=this,t=this.getCurrentGoalDB(),n=!0;t.requirements.forEach((function(t){e.getRequirementAmount(t)<t.amount&&(n=!1)})),n&&this.currentGoalIdx<Na.length&&this.currentGoalIdx++},t.prototype.currentGoalToUI=function(){var e=this,t=this.getCurrentGoalDB();return{id:t.id,name:t.description,requirements:t.requirements.map((function(t){var n=e.getRequirementAmount(t),i=n>=t.amount;return{actual:n,target:t.amount,isComplete:i,text:e.getRequirementText(t)}}))}},t.prototype.process=function(e){this.checkGoalStatus()},t}(R),ma=ya.getInstance(),La=[{id:_t.EXPERIMENTAL_MEDICINE,name:"Experimental medicine",description:"",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Mt.SOCIAL,options:[{name:"Forbid",description:"Clinics are working in regular way, providing service using only reliable traditional medicine methods"},{name:"Allow",description:"Using experimental medicine reduces healthcare efficiency of clinics, but they now provide some max research boost"}]},{id:_t.WATER_FILTERING,name:"Water Filtering Control",description:"",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Mt.SOCIAL,options:[{name:"Off",description:"Waterpumps working in regular way"},{name:"On",description:"Waterpumps consume 4 times more power. Increase healthcare by 10.",getEffectGain:(Yr={},Yr[y.HEALTHCARE]=function(e){return 10},Yr)}]},{id:_t.RESEARCH_GRANTS,name:"Research grants",description:"Setting research as priority of your civilization can boost your development, but it won't be free.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Mt.SCIENCE,options:[{name:"No grants",description:"Science buildings operate as normally"},{name:"Small grants",description:"Science buildings consume 50% more electricity but provide 5% more science capacity"},{name:"Bigger grants",description:"Science buildings consume 150% more electricity but provide 10% more science capacity"}]},{id:_t.FOREST_BEHAVOUR,name:"Rules of behavior in the forest",description:"Your forest plants can be used in different modes, providing various advantages to you.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},category:Mt.SOCIAL,options:[{name:"Normal",description:"Forest plants operating as normal"},{name:"Nature Reserve",description:'Forest plants produce 50% of oxygen only, but provide small bonus to "Aesthetics"'},{name:"Picnic zones",description:'Forest plants produce 50% of oxygen only, but provide small bonus to "Entertainment"'}]},{id:_t.SECURITY_DOTATIONS,name:"Security dotations",description:"Your police starts consuming more resources but provide better service.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},category:Mt.SOCIAL,options:[{name:"Off",description:"Policemen does not consume additional resources"},{name:"On",description:"Policemen consume 0.5 Nutrition and 0.2 water each but provides better service"}]},{id:_t.ARTIFICIAL_ORGANS,name:"Artificial organs",description:"Using 3D printers in creating or healing organs can significantly boost healthcare but religious people can suffer",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ORGANISM_PRINTING)>0},category:Mt.SOCIAL,options:[{name:"Forbid",description:"No effect"},{name:"Allow",description:"Increase healthcare service but decrease religious",getEffectGain:(Wr={},Wr[y.HEALTHCARE]=function(e){return 20},Wr),getEffectConsumption:(Zr={},Zr[y.RELIGION]=function(e){return 20},Zr)}]}],Ta=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ca=function(){return Ca=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ca.apply(this,arguments)},ha=function(e){function t(){var t=e.call(this)||this;return t.lawsStatuses=[],t.workDispatcher.on("[laws] set option",(function(e){console.log("change law",e),t.selectLawOption(e.id,e.optionId)})),t}return Ta(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.lawsStatuses=(null==e?void 0:e.laws)||[]},t.prototype.exportData=function(){return{laws:this.lawsStatuses}},t.prototype.dataToUI=function(){var e=this;return{laws:La.map((function(t){return e.processToUI(t)})),isUnlocked:Ha.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0}},t.prototype.getLawSelected=function(e){var t;return(null===(t=this.lawsStatuses.find((function(t){return t.id===e})))||void 0===t?void 0:t.selectedOptionId)||0},t.prototype.processToUI=function(e){var t=this.lawsStatuses.find((function(t){return t.id===e.id}));t||(t={id:e.id,selectedOptionId:0},this.lawsStatuses.push(t));var n=[];return e.options.forEach((function(e,i){var o={name:e.name,description:e.description,gain:e.getGain?C.getValue(e.getGain,ka.getInstance()).filter((function(e){return e.amount})).map((function(e){return Ca(Ca({},e),{amount:v(e.amount)})})):[],max:e.getStorage?C.getValue(e.getStorage,ka.getInstance()).filter((function(e){return e.amount})).map((function(e){return Ca(Ca({},e),{amount:v(e.amount)})})):[],consume:e.getConsumption?C.getValue(e.getConsumption,ka.getInstance()).filter((function(e){return e.amount})).map((function(e){return Ca(Ca({},e),{amount:v(e.amount)})})):[],consumeEffect:e.getEffectConsumption?C.getValue(e.getEffectConsumption,ka.getInstance()).filter((function(e){return e.amount})).map((function(e){return Ca(Ca({},e),{amount:v(e.amount)})})):[],gainEffect:e.getEffectGain?C.getValue(e.getEffectGain,ka.getInstance()).filter((function(e){return e.amount})).map((function(e){return Ca(Ca({},e),{amount:v(e.amount)})})):[],gainMult:e.getGainMultiplier?C.getValue(e.getGainMultiplier,ka.getInstance()).filter((function(e){return e.amount})).map((function(e){return Ca(Ca({},e),{amount:v(e.amount)})})):[],isSelected:(null==t?void 0:t.selectedOptionId)===i};n.push(o)})),{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),isAvailable:!0,options:n,category:e.category}},t.prototype.getEffectGain=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectGain)||void 0===r?void 0:r[e])){var u=c.getEffectGain[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getEffectMultiplier=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectMultiplier)||void 0===r?void 0:r[e])){var u=c.getEffectMultiplier[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getEffectBeingConsumed=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectConsumption)||void 0===r?void 0:r[e])){var u=c.getEffectConsumption[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceBeingProduced=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getGain)||void 0===r?void 0:r[e])){var u=c.getGain[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceMultiplier=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getGainMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getGainMultiplier)||void 0===r?void 0:r[e])){var u=c.getGainMultiplier[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceBeingConsumed=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getConsumption)||void 0===r?void 0:r[e])){var u=c.getConsumption[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceBeingStored=function(e){var t=this,n=La.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getStorage)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getStorage)||void 0===r?void 0:r[e])){var u=c.getStorage[e](ka.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getColonistsCap=function(){var e=this,t=La.filter((function(t){return!!t.options[e.getLawSelected(t.id)].getMaxColonists})),n=[];return this.lawsStatuses.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=o.options[e.getLawSelected(o.id)];if(o&&r.getMaxColonists){var a=r.getMaxColonists(ka.getInstance());n.push({label:"Law ".concat(o.name,": ").concat(r.name),value:a,id:"law-".concat(o.id)})}}}),0),n},t.prototype.selectLawOption=function(e,t){var n=this.lawsStatuses.findIndex((function(t){return t.id===e}));n<0?this.lawsStatuses.push({id:e,selectedOptionId:t}):this.lawsStatuses[n].selectedOptionId=t,ka.getInstance().resources.reassertBalances()},t.prototype.process=function(e){},t.prototype.reset=function(){this.lawsStatuses=[]},t}(R),va=ha.getInstance(),Ba=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sa=function(e){function t(){return e.call(this)||this}return Ba(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){},t.prototype.exportData=function(){return{}},t.prototype.dataToUI=function(){return{isUnlocked:Ha.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0}},t}(R).getInstance(),Pa=[{id:c.DRONE_MASTERITY,name:"Drone masterity",description:"Every point increase drone actions output by 10%",unlockCondition:function(e){return!0},getCost:(Fr={},Fr[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Fr),category:u.START,maxLevel:10},{id:c.REPAIRED_SOLAR_PANEL,name:"Drone Solar Panel",description:"Your solar panel on drone grants small power generation",unlockCondition:function(e){return!0},getCost:(jr={},jr[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},jr),getGain:(Kr={},Kr[a.POWER]=function(t){return{A:.03,B:0,type:e.LINEAR}},Kr),category:u.START,maxLevel:10},{id:c.POWER_MASTERITY,name:"Power Mastery",description:"Every point boost power production by 4%",unlockCondition:function(e){return!0},getCost:(Vr={},Vr[a.KNOWLEDGE_POINT]=function(t){return{A:3,B:1.1,type:e.EXPONENTIAL}},Vr),getGainMultiplier:(qr={},qr[a.POWER]=function(t){return{A:.04,B:1,type:e.LINEAR}},qr),category:u.MASTERITIES,maxLevel:0},{id:c.MINING_MASTERITY,name:"Mining Mastery",description:"Every point boost stone, ore and platinum production by 4%",unlockCondition:function(e){return!0},getCost:(Qr={},Qr[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Qr),getGainMultiplier:(Jr={},Jr[a.STONE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Jr[a.ORE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Jr[a.IRON]=function(t){return{A:.04,B:1,type:e.LINEAR}},Jr[a.PLATINUM]=function(t){return{A:.04,B:1,type:e.LINEAR}},Jr),category:u.MASTERITIES,maxLevel:0},{id:c.NATURE_MASTERITY,name:"Nature Mastery",description:"Every point boost biomass, wood and nutrition production by 4%",unlockCondition:function(e){return!0},getCost:(zr={},zr[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},zr),getGainMultiplier:($r={},$r[a.NUTRITION]=function(t){return{A:.04,B:1,type:e.LINEAR}},$r[a.BIOMASS]=function(t){return{A:.04,B:1,type:e.LINEAR}},$r[a.WOOD]=function(t){return{A:.04,B:1,type:e.LINEAR}},$r),category:u.MASTERITIES,maxLevel:0},{id:c.GAS_MASTERITY,name:"Gas & Liquid Mastery",description:"Every point boost oxygen and water production 4%",unlockCondition:function(e){return!0},getCost:(ea={},ea[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ea),getGainMultiplier:(ta={},ta[a.OXYGEN]=function(t){return{A:.04,B:1,type:e.LINEAR}},ta[a.WATER]=function(t){return{A:.04,B:1,type:e.LINEAR}},ta),category:u.MASTERITIES,maxLevel:0},{id:c.BUILDING_MASTERITY,name:"Materials Mastery",description:"Every point boost beam, brick and plate production by 4%",unlockCondition:function(e){return!0},getCost:(na={},na[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},na),getGainMultiplier:(ia={},ia[a.BEAM]=function(t){return{A:.04,B:1,type:e.LINEAR}},ia[a.BRICK]=function(t){return{A:.04,B:1,type:e.LINEAR}},ia[a.PLATE]=function(t){return{A:.04,B:1,type:e.LINEAR}},ia),category:u.MASTERITIES,maxLevel:0},{id:c.ELECTRONICS_MASTERITY,name:"Electronics Mastery",description:"Every point boost electronics (wire, semiconductor, computer, etc) production 4%",unlockCondition:function(e){return!0},getCost:(oa={},oa[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},oa),getGainMultiplier:(ra={},ra[a.WIRE]=function(t){return{A:.04,B:1,type:e.LINEAR}},ra[a.COMPUTER]=function(t){return{A:.04,B:1,type:e.LINEAR}},ra[a.SEMICONDUCTOR]=function(t){return{A:.04,B:1,type:e.LINEAR}},ra),category:u.MASTERITIES,maxLevel:0},{id:c.ROCKET_MASTERITY,name:"Rocket Mastery",description:"Every point boost fuel and rockets production by 4%",unlockCondition:function(e){return!0},getCost:(aa={},aa[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},aa),getGainMultiplier:(ca={},ca[a.FUEL]=function(t){return{A:.04,B:1,type:e.LINEAR}},ca[a.ROCKET_ENGINE]=function(t){return{A:.04,B:1,type:e.LINEAR}},ca),category:u.MASTERITIES,maxLevel:0},{id:c.MATERIALS_CAPACITY,name:"Materials Capacity",description:"Every point boost all solid materials capacity 4%",unlockCondition:function(e){return!0},getCost:(ua={},ua[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ua),getCapacityMultiplier:(sa={},sa[a.STONE]=function(t){return{A:.04,B:1,type:e.LINEAR}},sa[a.IRON]=function(t){return{A:.04,B:1,type:e.LINEAR}},sa[a.WOOD]=function(t){return{A:.04,B:1,type:e.LINEAR}},sa[a.ORE]=function(t){return{A:.04,B:1,type:e.LINEAR}},sa[a.PLATINUM]=function(t){return{A:.04,B:1,type:e.LINEAR}},sa[a.BIOMASS]=function(t){return{A:.04,B:1,type:e.LINEAR}},sa),category:u.CAPACITY,maxLevel:0},{id:c.LIQUIDS_CAPACITY,name:"Liquid & Gas Capacity",description:"Every point boost oxygen and water capacity 4%",unlockCondition:function(e){return!0},getCost:(la={},la[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},la),getCapacityMultiplier:(pa={},pa[a.OXYGEN]=function(t){return{A:.04,B:1,type:e.LINEAR}},pa[a.WATER]=function(t){return{A:.04,B:1,type:e.LINEAR}},pa),category:u.CAPACITY,maxLevel:0},{id:c.RESEARCH_CAPACITY,name:"Research Capacity",description:"Every point science capacity 4%",unlockCondition:function(e){return!0},getCost:(Ea={},Ea[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ea),getCapacityMultiplier:(da={},da[a.RESEARCH]=function(t){return{A:.04,B:1,type:e.LINEAR}},da),category:u.CAPACITY,maxLevel:0},{id:c.AESTHETICS_CONSUMPTION,name:"Aesthetics Consumption",description:"Every point decrease aesthetics consumption by 4%",unlockCondition:function(e){return!0},getCost:(ga={},ga[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ga),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.ENTERTAINMENT_CONSUMPTION,name:"Entertainment Consumption",description:"Every point decrease entertainment consumption by 4%",unlockCondition:function(e){return!0},getCost:(fa={},fa[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},fa),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.RELIGION_CONSUMPTION,name:"Religion Consumption",description:"Every point decrease religion consumption by 4%",unlockCondition:function(e){return!0},getCost:(Aa={},Aa[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Aa),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.SECURITY_CONSUMPTION,name:"Security Consumption",description:"Every point decrease security consumption by 4%",unlockCondition:function(e){return!0},getCost:(Ra={},Ra[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ra),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.SECURITY_CONSUMPTION,name:"Healthcare Consumption",description:"Every point decrease healthcare consumption by 4%",unlockCondition:function(e){return!0},getCost:(Ia={},Ia[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ia),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0}],Ma=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_a=function(e){function t(){var t=e.call(this)||this;return t.upgrades=[],t.numPrestiged=0,t.workDispatcher.on("[transmit-knowledge] do prestige",(function(e){console.log("do prestige",e),t.doPrestige()})),t.workDispatcher.on("[transmit-knowledge] do upgrade",(function(e){console.log("do prestige",e),t.doUpgrade(e.id)})),t}return Ma(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.upgrades=e.upgrades,this.numPrestiged=e.numPrestiged},t.prototype.exportData=function(){return{upgrades:this.upgrades,numPrestiged:this.numPrestiged}},t.prototype.dataToUI=function(){var e=this;return{upgrades:Pa.map((function(t){return e.processToUI(t)})),isUnlocked:this.numPrestiged>0||this.isPrestigeAvailable(),kp:v(Ha.resources.getResource(a.KNOWLEDGE_POINT)),prestige:{isAvailable:this.isPrestigeAvailable(),description:"",potentialGain:v(this.getPrestigeGain())}}},t.prototype.getUpgradeLevel=function(e){var t;return(null===(t=this.upgrades.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.upgrades.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0},this.upgrades.push(t));var n=C.calcBatchAll(e.getCost,ka.getInstance(),t.level,ka.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Ha),isAvailable:i>=1,cost:ka.getInstance().resources.assertEnought(n,ka.getInstance().resources.getBatchObject(),ka.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"100",isMaxedOut:!!e.maxLevel&&e.maxLevel<=t.level,maxLevel:e.maxLevel,level:t.level,category:e.category}},t.prototype.getEffectGain=function(e){var t=Pa.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectGain[e],0,i.level);n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=Pa.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getEffectMultiplier[e],i.level,1);a&&n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=Pa.filter((function(t){var n;return!!(null===(n=t.getGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGain)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getGain[e],0,i.level);n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceMultiplier=function(e){var t=Pa.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var a=C.calculate(Ha,r.getGainMultiplier[e],0,i.level);console.log("thisProd: ",a,e,i.level),a&&n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingStored=function(e){var t=Pa.filter((function(t){var n;return!!(null===(n=t.getCapacityEffect)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r,a=t.find((function(e){return e.id===i.id}));if(a&&(null===(o=a.getCapacityEffect)||void 0===o?void 0:o[e])){var c=C.calculate(Ha,null===(r=a.getCapacityEffect)||void 0===r?void 0:r[e],0,i.level);n.push({label:"Knowledge: ".concat(a.name),value:c,id:"knowledge-".concat(a.id)})}}),0),n},t.prototype.getCapacityMult=function(e){var t=Pa.filter((function(t){var n;return!!(null===(n=t.getCapacityMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var r=C.calculate(Ha,o.getCapacityMultiplier[e],0,i.level);r&&n.push({label:"Knowledge: ".concat(o.name),value:r,id:"knowledge-".concat(o.id)})}}),0),n},t.prototype.doUpgrade=function(e){var t=Pa.find((function(t){return t.id===e}));if(t){var n=this.upgrades.findIndex((function(t){return t.id===e}));if(n<0)n=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(t.maxLevel&&this.upgrades[n].level>=t.maxLevel)return;var i=C.calcBatchAll(t.getCost,ka.getInstance(),this.upgrades[n].level,ka.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.upgrades[n].level++,console.log("costs: ",i),ka.getInstance().resources.subtractResourceBatch(i),Ha.resources.reassertBalances())}},t.prototype.isPrestigeAvailable=function(){return Ha.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GREAT_RADIO_TRANSMITTER)>0&&Ha.colony.colonists>50},t.prototype.getPrestigeGain=function(){return Ha.colony.colonists-50},t.prototype.doPrestige=function(){if(this.isPrestigeAvailable()){var e=this.getPrestigeGain();Ha.landingZone.reset(),Ha.colony.reset(),Ha.crafting.reset(),Ha.science.reset(),Ha.laws.reset(),Ha.resources.reset(),Ha.resources.addResource(a.KNOWLEDGE_POINT,e),this.numPrestiged++,Ha.resources.reassertBalances()}},t.prototype.process=function(e){},t}(R),Ua=_a.getInstance(),Ga=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ba=function(e){function t(){var t=e.call(this)||this;return t.transmitKnowledge=Ua,t}return Ga(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.transmitKnowledge.importData(e.transmitKnowledge)},t.prototype.exportData=function(){return{transmitKnowledge:this.transmitKnowledge.exportData()}},t.prototype.dataToUI=function(){return{transmitKnowledge:this.transmitKnowledge.dataToUI(),isUnlocked:this.transmitKnowledge.isPrestigeAvailable()||this.transmitKnowledge.numPrestiged>0}},t.prototype.preProcess=function(e){},t.prototype.process=function(e){this.transmitKnowledge.process(e)},t}(R).getInstance(),Xa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),wa=function(e){function t(){var t=e.call(this)||this;return t.expeditionsState={isInProgress:!1,progress:0,lastLooted:{},numExpeditions:0},t.expeditionsState={isInProgress:!1,progress:0,lastLooted:{},numExpeditions:0},t.workDispatcher.on("[expedition] send",(function(e){console.log("do expedition",e),t.startExpedition()})),t}return Xa(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.expeditionsState=e||{isInProgress:!1,progress:0,lastLooted:{},numExpeditions:0}},t.prototype.exportData=function(){return this.expeditionsState},t.prototype.dataToUI=function(){return{numExpeditions:this.expeditionsState.numExpeditions,progress:this.expeditionsState.progress,lastLooted:Object.entries(this.expeditionsState.lastLooted).map((function(e){var t=e[0];return{id:t,amount:v(e[1]),name:T(t)}})),isUnlocked:this.isExpeditionUnlocked(),isInProgress:this.expeditionsState.isInProgress,eta:h(this.getExpeditionDuration()-this.expeditionsState.progress),percentage:100*this.expeditionsState.progress/this.getExpeditionDuration(),multiplier:v(this.getLootMultiplier())}},t.prototype.isExpeditionUnlocked=function(){return Ha.science.scienceResearches.getResearchLevel(I.GEOGRAPHY)>0},t.prototype.startExpedition=function(){!this.expeditionsState.isInProgress&&this.isExpeditionUnlocked()&&(this.expeditionsState.isInProgress=!0,this.expeditionsState.progress=0,this.expeditionsState.numExpeditions++)},t.prototype.getLoot=function(){for(var e=this.getLootMultiplier(),t=m.filter((function(e){return e.unlockCondition(Ha)&&e.valuability<1e6})),n={},i=0;i<2;i++){var o=t.splice(Math.floor(Math.random()*(t.length-1e-5)),1)[0];n[o.id]=50*(Math.random()+.5)*e/o.valuability}return n},t.prototype.getLootMultiplier=function(){return Math.pow(1.05,Ha.landingZone.landingZoneBuildings.getBuildingActiveLevel(i.EXPEDITION_CENTER))*Math.pow(1.3,Ha.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENERGY_SAVING_EXPEDITION_DRONES))},t.prototype.endExpedition=function(){this.expeditionsState.isInProgress=!1,this.expeditionsState.progress=0;var e=this.getLoot();for(var t in this.expeditionsState.lastLooted=e,e)Ha.resources.addResource(t,e[t]||0)},t.prototype.getExpeditionDuration=function(){return 100},t.prototype.process=function(e){this.expeditionsState.isInProgress&&(this.expeditionsState.progress+=e,this.expeditionsState.progress>=this.getExpeditionDuration()&&this.endExpedition())},t.prototype.reset=function(){this.expeditionsState.isInProgress=!1,this.expeditionsState.progress=0,this.expeditionsState.lastLooted={}},t}(R),Da=wa.getInstance(),xa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ka=function(e){function t(){var t=e.call(this)||this;return t.dT=0,t.timeInGame=0,t.timeInPrestige=0,t.isFirstIter=!1,t.workDispatcher.on("initialize",(function(e){console.log("Received payload",e)})),t.workDispatcher.on("[game] load",(function(e){console.log("Received load",e),t.importData(e)})),t.workDispatcher.on("[game] export text",(function(e){console.log("Received export text",e),t.workDispatcher.output("[game] export to string",t.exportData())})),t.workDispatcher.on("[game] export file",(function(e){console.log("Received export to file",e),t.workDispatcher.output("[game] export to file",t.exportData())})),t.workDispatcher.on("[game] purchase max",(function(e){console.log("Received purchase max",e),t.purchaseMax()})),t.workDispatcher.on("[game] trigger save",(function(e){t.workDispatcher.output("[game] save",t.exportData())})),t.resources=ar,t.milestones=fr,t.landingZone=Er,t.colony=vr,t.science=Ur,t.crafting=Hr,t.goals=ma,t.laws=va,t.space=Sa,t.expedition=Da,t.prestige=ba,setInterval((function(){t.process(.1)}),100),setInterval((function(){t.workDispatcher.output("[game] update ui",t.dataToUI())}),200),setInterval((function(){t.workDispatcher.output("[game] save",t.exportData())}),1e4),t}return xa(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.process=function(e){this.dT=1*e,this.landingZone.preProcess(1*e),this.milestones.process(1*e),this.landingZone.process(1*e),this.colony.process(1*e),this.resources.process(1*e),this.colony.process(1*e),this.science.process(1*e),this.crafting.process(1*e),this.goals.process(1*e),this.space.process(1*e),this.expedition.process(1*e),this.prestige.process(1*e),this.timeInPrestige+=1*e,this.timeInGame+=1*e,this.isFirstIter&&(this.isFirstIter=!1,this.resources.reassertBalances())},t.prototype.importData=function(e){this.resources.importData(e.resources),this.milestones.importData(e.milestones||[]),this.landingZone.importData(e.landingZone),this.colony.importData(e.colony),this.science.importData(e.science),this.crafting.importData(e.crafting),this.goals.importData(e.goals),this.laws.importData(e.laws),this.expedition.importData(e.expedition),this.prestige.importData(e.prestige),this.resources.reassertBalances(),this.timeInGame=e.timeInGame,this.timeInPrestige=e.timeInPrestige,this.isFirstIter=!0},t.prototype.exportData=function(){return{landingZone:this.landingZone.exportData(),colony:this.colony.exportData(),resources:this.resources.exportData(),milestones:this.milestones.exportData(),science:this.science.exportData(),crafting:this.crafting.exportData(),goals:this.goals.exportData(),laws:this.laws.exportData(),expedition:this.expedition.exportData(),prestige:this.prestige.exportData(),timeInPrestige:this.timeInPrestige,timeInGame:this.timeInGame}},t.prototype.dataToUI=function(){return{landingZone:this.landingZone.dataToUI(),colony:this.colony.dataToUI(),science:this.science.dataToUI(),crafting:this.crafting.dataToUI(),resources:this.resources.dataToUI(),laws:this.laws.dataToUI(),goals:this.goals.dataToUI(),space:this.space.dataToUI(),expeditions:this.expedition.dataToUI(),prestige:this.prestige.dataToUI(),timeInPrestige:h(this.timeInPrestige),timeInGame:h(this.timeInGame)}},t.prototype.purchaseMax=function(){},t}(R),Ha=ka.getInstance();self.addEventListener("message",(function(e){var t=e.data;console.log("send to worker: ",t),Ha.workDispatcher.handleInput(t.type,t.payload)}))})();