(()=>{"use strict";var e,t,n,i,o,r,a,c,u,s,l,p,E,d,g,f,A=function(){function e(){this.events=[],this.events=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.on=function(e,t){this.events.push({action:e,callback:t})},e.prototype.handleInput=function(e,t){var n=this.events.find((function(t){return t.action===e}));n?n.callback(t):console.error("Unknown event: ",e)},e.prototype.output=function(e,t){postMessage({type:e,payload:t})},e}().getInstance(),R=function(){function e(){this.workDispatcher=A}return e.prototype.importData=function(e){},e.prototype.exportData=function(){return{}},e.prototype.dataToUI=function(){return{}},e.prototype.process=function(e){},e}();!function(e){e[e.POLYNOMIAL=0]="POLYNOMIAL",e[e.EXPONENTIAL=1]="EXPONENTIAL",e[e.LINEAR=2]="LINEAR"}(e||(e={})),function(e){e.CHARGE="charge",e.DRILL_ROCK="drillRock",e.DRILL_ORE="drillOre",e.COLLECT_BIOMASS="collectBiomass"}(t||(t={})),function(e){e.REPAIR_DRILL="repair-drill",e.REPAIR_CABLE="repair-cable",e.REPAIR_MANIPULATORS="repair-manipulators",e.REPAIR_MACHINERY="repair-machinery",e.AUTO_QUARRYING="autoquarrying",e.AUTO_MINERS="autominers",e.COMBUSTION="combustion",e.REPAIR_STORAGE_MODULE="storage-module",e.REPAIR_BATTERY="repair-battery",e.COMBUSTION_CAMERA="combuscion-camera",e.THERMAL_TECH="thermal-tech",e.MINE_TECH="mine-tech",e.QUARRY_TECH="quarry-tech",e.BIO_TECH="bio-tech",e.STORAGE_TECH="storage-tech",e.BACTERIA_SELECTION="bacteria-selection",e.THERMAL_TECH2="thermal-tech2",e.OXYGEN_CAMERAS="oxygen-cameras",e.RESERVE_BATTERIES="reserve-batteries",e.OXYGEN_COMPRESSORS="oxygen-compressors",e.WATER_PUMPING="water-pumping",e.ELECTROLITES="electrolites",e.SUPPLY_MODULE="supply-module",e.DOCKING_MODULE="docking-module",e.RESEARCH_MODULE="research-module",e.CARGO_SORTING="cargo-sorting",e.FARMING_TOOLS="farming-tools",e.DEEP_MINING="deep-mining",e.UNDERGROUND_VAULTS="underground-vaults",e.WATER_DRILLING="water-drill",e.FERTILIZING="fertilizing",e.FLORA="flora",e.FLAMMABILITY="flammability",e.CRANES="cranes",e.CARGO_CRANES="cargo-cranes",e.FORESTER_TOOLS="forester-tools",e.BROADLEAVED="broad-leaved",e.WOODEN_FURNITURE="furniture",e.IRON_TOOLS="iron-tools",e.IRON_PARTS="iron-parts",e.IRON_CONTAINERS="iron-containers",e.IMPROVED_WIRES="improved wires",e.REFRACTORY_MATERIALS="refractory-materials",e.METAL_WORKING="metal-working",e.CEMENT="cement",e.TREE_CARE="tree-care",e.NATURAL_ENVIRONMENT="natural-environment",e.FRUIT_TREES="fruit-trees",e.WATER_FILTERING="water-filtering",e.CHEMICAL_ANALYSIS="chemical-analysis",e.BETTER_ELECTROLITES="better-electrolites",e.HIGH_TEMPERATURE_ENGINE="high-temperature-engine",e.PLATINUM_MINING="platinum-mining",e.PLATINUM_DRILLS="platinum-drills",e.PLATINUM_TOOLS="platinum-tools",e.SOCIAL_RESEARCH_CENTER="social-research-center",e.COTTAGES="cottages",e.ENTERTAINMENT="entertainment",e.ADVANCED_METALLURGY="advanced_metallurgy",e.COMPOSITE_METALS="composite_metals",e.HEAT_INSULATING_CAMERAS="heat_insulating_cameras",e.GERMETISATION="germetisation",e.RUBBER_DETAILS="rubber_details",e.IMPROVED_WIRING="improved_wiring",e.ENERGY_SAVING="energy_saving",e.ENERGY_SAVING_EXPEDITION_DRONES="energy-saving-expedition-drones",e.SURVEILLANCE_CAMERAS="surveillance_cameras",e.COMPUTERS="computers",e.INDUSTRY_AUTOMATION="idustrial_automation",e.BUILDING_PRINTING="building_printer",e.ORGANISM_PRINTING="organs_printing",e.BETTER_DIAGNOSTICS="better-diagnostics",e.MULTISTORE_WAREHOUSES="multistore_warehouses",e.GMO="GMO",e.LASER_CUTTING="laser-cutting",e.IMPROVED_LITHOGRAPHY="improved-lithography",e.BETTER_PHOTOELEMENTS="better-photo-elements",e.GREAT_RADIO_TRANSMITTER="great_radio_transmitter",e.FLIGHT_TECHNOLOGY="flight-technology",e.FASTER_ROCKETS="faster-rockets",e.CONDUCTIVE_NANOPARTICLES="conductive-nanoparticles",e.NANO_BOTS="nano_bots",e.TELESCOPE="telescope",e.GENES_MODIFICATION="genes_modification",e.GRAVITATIONAL_LENSING="gravitational_lensing",e.RADIATIVE_DISSOCIATION="radiative_dissociation",e.FUEL_PROCESSING_CATALYSATION="fuel_processing_catalysation",e.IMPULSE_ENGINE="impulse_engine",e.PLASMA_KNIFE="plasma_knife",e.NANO_TRANSISTORS="nano_transistors"}(n||(n={})),function(e){e.QUARRY="quarry",e.MINE="mine",e.BACTERIA_INCUBATOR="bacteria-incubator",e.THERMOELECTRIC_STATION="thermo-electric-station",e.STORAGE="storage-section",e.STORAGE_HUB="storage-hub",e.OXYGEN_COLLECTOR="oxygen-collector",e.WATER_PUMP="water-pump",e.WATER_STORAGE="water-storage",e.BATTERY="battery",e.LIVING_CABIN="living-cabin",e.METEO_STATION="meteo-station",e.MONUMENT="monument",e.CLINIC="clinic",e.PARK="park",e.BIO_LAB="bio-lab",e.FOREST_PLANT="forest-plant",e.SMELTER="smelter",e.EXPEDITION_CENTER="expedition_center",e.WAREHOUSE="warehouse",e.TANK="tank",e.COTTAGE="cottage",e.CINEMA="cinema",e.SOCIAL_RESEARCH_CENTER="social_research_center",e.METALLURGY_COMPLEX="metallurgy_complex",e.BUILDING_FACTORY="building_factory",e.STORAGE_CONTAINER="storage_container",e.SOLAR_PANEL="solar-panel",e.SHRINE="shrine",e.DATA_CENTER="data-center",e.APARTMENT="apartment",e.PANDEMIC_RESEARCH_CENTER="pandemic-research-center",e.ELECTRONICS_FACTORY="electronics-factory",e.TEMPLE="temple",e.ADMINISTRATIVE_CENTER="administrative_center",e.SOLAR_SATELLITE="solar-satellite",e.ORBITAL_TOURISM_CENTER="orbital-tourism-center",e.ICE_MELTING_STATION="ice-melting-station",e.FUEL_FACTORY="fuel-factory",e.NANOBOTS_FACTORY="nanobots-factory",e.SPACE_TELESCOPE="space-telescope",e.ZOO="zoo",e.SPACE_STORAGE_HUB="space_storage_hub",e.SMELTING_FACTORY="smelting_factory",e.PLUTO_MONUMENT="pluto_monument",e.FLORA_PLANT="flora_plant",e.TROPIC_FOREST_PLANT="tropic_forest_plant"}(i||(i={})),function(e){e.POWER="Power",e.INDUSTRIAL="Industrial",e.STORAGE="Storage",e.SCIENCE="Science",e.MILITARY="Military",e.PUBLIC="Public",e.RESIDENTAL="Residental"}(o||(o={})),function(e){e.ORBIT="Orbit",e.MOON="Moon",e.AID="Aid",e.VENUS="Venus"}(r||(r={})),function(e){e.STONE="stone",e.POWER="power",e.ORE="ore",e.BIOMASS="biomass",e.OXYGEN="oxygen",e.NUTRITION="nutrition",e.WATER="water",e.RESEARCH="research",e.WOOD="wood",e.IRON="iron",e.PLATINUM="platinum",e.BEAM="beam",e.BRICK="brick",e.PLATE="plate",e.WIRE="wire",e.FUEL="fuel",e.RUBBER="rubber",e.PLASTICS="plastics",e.SEMICONDUCTOR="semiconductor",e.COMPUTER="computer",e.ROCKET_ENGINE="rocket-engine",e.KNOWLEDGE_POINT="knowledge-point"}(a||(a={})),function(e){e.DRONE_MASTERITY="Drone Masterity",e.REPAIRED_SOLAR_PANEL="Drone Solar Panel",e.POWER_MASTERITY="Power Masterity",e.MINING_MASTERITY="Mining Masterity",e.NATURE_MASTERITY="Nature Masterity",e.GAS_MASTERITY="Gas And Liquids",e.BUILDING_MASTERITY="Building Masterity",e.ELECTRONICS_MASTERITY="Electronics Masterity",e.ROCKET_MASTERITY="Rocket Masterity",e.SCIENCE_MASTERITY="Science Masterity",e.POWER_CAPACITY="Power Capacity",e.MATERIALS_CAPACITY="Materials Capacity",e.LIQUIDS_CAPACITY="Liquids Capacity",e.RESEARCH_CAPACITY="Research Capacity",e.AESTHETICS_CONSUMPTION="Aesthetics Consumption",e.HEALTH_CONSUMPTION="Health Consumption",e.ENTERTAINMENT_CONSUMPTION="Entertainment Consumption",e.RELIGION_CONSUMPTION="Religion Consumption",e.SECURITY_CONSUMPTION="Security Consumption"}(c||(c={})),function(e){e.START="Start",e.MASTERITIES="Production",e.CAPACITY="Capacity",e.COLONY="Colony"}(u||(u={}));var I,N=[{id:t.CHARGE,name:"Charge",description:"Recover your power",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:{},getGain:(s={},s[a.POWER]=function(t){return{A:(1+.6*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_CABLE))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},s)},{id:t.DRILL_ROCK,name:"Drill Rock",description:"Spend power to drill some rocks for stone",unlockCondition:function(e){return!0},availableCondition:function(e){return!0},getCost:(l={},l[a.POWER]=function(t){return{A:1,B:1,type:e.EXPONENTIAL}},l),getGain:(p={},p[a.STONE]=function(t){return{A:(.25+.125*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},p)},{id:t.DRILL_ORE,name:"Drill Ore",description:"Spend power to mine some ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL)>3},availableCondition:function(e){return!0},getCost:(E={},E[a.POWER]=function(t){return{A:2,B:1,type:e.EXPONENTIAL}},E),getGain:(d={},d[a.ORE]=function(t){return{A:(.2+.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},d)},{id:t.COLLECT_BIOMASS,name:"Collect Biomass",description:"Dig the soil for organic matter to gather some biomass",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>0},availableCondition:function(e){return!0},getCost:(g={},g[a.POWER]=function(t){return{A:4,B:1,type:e.EXPONENTIAL}},g),getGain:(f={},f[a.BIOMASS]=function(t){return{A:(.2+.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS))*(1+.2*t.prestige.transmitKnowledge.getUpgradeLevel(c.DRONE_MASTERITY)),B:1,type:e.EXPONENTIAL}},f)}];!function(e){e.EXOFARMING="exofarming",e.METEOROLOGY="meteorology",e.MINERALOGY="mineralogy",e.CIVIL_SERVICE="civilservice",e.ENGINEERING="engineering",e.EXOBIOLOGY="exobiology",e.METALLURGY="metallurgy",e.EXOFORESTRY="exo-forestry",e.FLORA_RESEARCH="flora-research",e.CHEMISTRY="chemistry",e.SOCIOLOGY="sociology",e.GEOLOGY="geology",e.GEOGRAPHY="geography",e.MATERIAL_KNOWLEDGE="material_knowledge",e.ORGANIC_CHEMISTRY="organic_chemistry",e.CODEX_OF_LAW="codex_of_law",e.ELECTRICITY_STUDY="electricity_study",e.ELECTRONICS="electronics",e.PUBLIC_SERVICE="public_service",e.PRINTING_3D="printing_3d",e.GENETICS="genetics",e.HIGH_GRAVITY_PHYSICS="high_gravity_physics",e.ADVANCED_ANATOMY="advanced_anatomy",e.ROCKET_SCIENCE="rocket-science",e.GRAVITY_THEORY="gravity-theory",e.ADVANCED_BIOLOGY="advanced-biology",e.RADIATION_STUDY="radiation-study",e.QUANTUM_PHYSICS="quantum-physics",e.NANO_PHYSICS="nano-physics",e.ASTROPHYSICS="astrophysics",e.RELATIVITY_PHYSICS="relativity_physics",e.ADVANCED_GENETICS="genetics",e.PHOTOCHEMISTRY="photochemistry",e.BRAIN_STUDY="brain study",e.HIGH_ENERGY_PHYSICS="high energy physics",e.PHOTO_LITHOGRAPHY="photo_lithography"}(I||(I={}));var y,O,m=[{id:a.POWER,name:"Power",unlockCondition:function(e){return!0},hasCapacityLimit:!0,valuability:4},{id:a.WATER,name:"Water",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},hasCapacityLimit:!0,valuability:8},{id:a.NUTRITION,name:"Nutrition",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SUPPLY_MODULE)>0},hasCapacityLimit:!0,valuability:4},{id:a.OXYGEN,name:"Oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},hasCapacityLimit:!0,valuability:8},{id:a.WOOD,name:"Wood",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},hasCapacityLimit:!0,valuability:4},{id:a.STONE,name:"Stone",unlockCondition:function(e){return!0},hasCapacityLimit:!0,valuability:1},{id:a.ORE,name:"Ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_DRILL)>3},hasCapacityLimit:!0,valuability:1},{id:a.IRON,name:"Metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!0,valuability:4},{id:a.PLATINUM,name:"Platinum",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GEOLOGY)>0},hasCapacityLimit:!0,valuability:16},{id:a.BIOMASS,name:"Biomass",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>0},hasCapacityLimit:!0,valuability:2},{id:a.RESEARCH,name:"Research",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0},hasCapacityLimit:!0,valuability:4},{id:a.BEAM,name:"Beam",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:64},{id:a.BRICK,name:"Brick",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:64},{id:a.PLATE,name:"Plate",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.FUEL,name:"Fuel",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:256},{id:a.RUBBER,name:"Rubber",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.PLASTICS,name:"Plastic",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.WIRE,name:"Wire",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:128},{id:a.SEMICONDUCTOR,name:"Semiconductor",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:256},{id:a.COMPUTER,name:"Computer",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMPUTERS)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:512},{id:a.ROCKET_ENGINE,name:"Rocket",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},hasCapacityLimit:!1,isCraftable:!0,valuability:1024},{id:a.KNOWLEDGE_POINT,name:"Knowledge Point",unlockCondition:function(e){return!0},hasCapacityLimit:!1,isHidden:!0,valuability:1096428}];!function(e){e.QUARRYMAN="quarryman",e.MINER="miner",e.SCIENTIST="scientist",e.FARMER="farmer",e.FORESTER="forester",e.ARTISAN="artisan",e.POLICEMAN="policeman"}(y||(y={})),function(e){e.AESTHETICS="AESTHETICS",e.ENTERTAINMENT="ENTERTAINMENT",e.SECURITY="SECURITY",e.HEALTHCARE="HEALTHCARE",e.RELIGION="RELIGION",e.WORK_CONDITIONS="WORK_CONDITIONS"}(O||(O={}));var L=[{id:O.ENTERTAINMENT,name:"Entertainment",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max(2*(e.colony.colonists-10)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.ENTERTAINMENT_CONSUMPTION),0)}},{id:O.HEALTHCARE,name:"Healthcare",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=10},getConsumption:function(e){return Math.max((2*(e.colony.colonists-10)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.HEALTH_CONSUMPTION))*Math.pow(.95,e.landingZone.landingZoneBuildings.getBuildingActiveLevel(i.PANDEMIC_RESEARCH_CENTER)),0)}},{id:O.AESTHETICS,name:"Aesthetics",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>0},getConsumption:function(e){return Math.max(2*e.colony.colonists-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.AESTHETICS_CONSUMPTION),0)}},{id:O.SECURITY,name:"Security",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40||e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.SECURITY_CONSUMPTION),0)}},{id:O.RELIGION,name:"Religion",minimum:20,maximum:150,unlockCondition:function(e){return e.colony.maxColonists>=40},getConsumption:function(e){return Math.max(2*(e.colony.colonists-40)-4*e.prestige.transmitKnowledge.getUpgradeLevel(c.RELIGION_CONSUMPTION),0)}}],T=function(e){var t=m.find((function(t){return t.id===e}))||L.find((function(t){return t.id===e}));return t?t.unlockCondition(Gc)?t.name:"???":e},h=function(){function t(){}return t.calculate=function(e,n,i,o){void 0===o&&(o=1);var r=n(e);return t.calculateFormulaBatch(r,i,o)},t.calculateFormula=function(n,i){switch(n.type){case e.EXPONENTIAL:return t.calculateExponential(n,i);case e.POLYNOMIAL:return t.calculatePolynomial(n,i);case e.LINEAR:return t.calculateLinear(n,i);default:return 0}},t.calculateExponential=function(e,t){return e.A*Math.pow(e.B,t)},t.calculatePolynomial=function(e,t){return e.A*Math.pow(t,e.B)},t.calculateLinear=function(e,t){return e.A*t+e.B},t.calculateFormulaBatch=function(n,i,o){switch(n.type){case e.EXPONENTIAL:return t.calculateExponentialBatch(n,i,o);case e.POLYNOMIAL:return t.calculatePolynomialBatch(n,i,o);case e.LINEAR:return t.calculateLinearBatch(n,i,o);default:return 0}},t.calculateExponentialBatch=function(e,t,n){return 1===e.B?e.A*n:e.A*Math.pow(e.B,t)*(Math.pow(e.B,n)-1)/(e.B-1)},t.calculatePolynomialBatch=function(e,t,n){return console.error("Polynomial batch is not implemented"),0},t.calculateLinearBatch=function(e,t,n){return e.A*n+e.B},t.calculateDX=function(e,n,i,o){var r=n(e);return t.calculateDXByFormula(r,i,o)},t.calculateDXByFormula=function(n,i,o){switch(n.type){case e.EXPONENTIAL:return t.calculateDXExponential(n,i,o);case e.POLYNOMIAL:return t.calculateDXPolynomial(n,i,o);case e.LINEAR:return t.calculateDXLinear(n,i,o);default:return 0}},t.calculateDXExponential=function(e,t,n){return 0===e.A?1e300:1===e.B?n/e.A:n?Math.log(n*(e.B-1)/(e.A*Math.pow(e.B,t))+1)/Math.log(e.B):0},t.calculateDXPolynomial=function(e,t,n){return console.error("Polynomial dX is not implemented"),0},t.calculateDXLinear=function(e,t,n){return(n-e.B)/e.A},t.calcBatch=function(e,n,i,o){void 0===o&&(o=1);var r=[];return Object.entries(e).forEach((function(e){var a=e[0],c=e[1];r.push({id:a,name:T(a),amount:t.calculate(n,c,i,o)})})),r},t.calcDXBatch=function(e,n,i,o){var r={};return Object.entries(e).forEach((function(e){var a=e[0],c=e[1];r[a]=t.calculateDX(n,c,i,o[a])})),r},t.calcBatchAll=function(e,n,i,o,r){void 0===r&&(r=1);var a=[];return Object.entries(e).forEach((function(e){var c=e[0],u=e[1],s=t.calculateDX(n,u,i,o[c]),l=t.calculate(n,u,i,r),p=0,E=!1;if(s<1){var d=n.resources.getResourceCap(c);d&&d<l&&(E=!0),p=d&&d<l||n.resources.getResourceBalance(c)<0&&l-(o[c]||0)>0?1e300:(l-(o[c]||0))/(n.resources.getResourceBalance(c)||1e-300)}a.push({id:c,name:T(c),amount:l,max:s,eta:p,isBlocked:E})})),a},t.getValue=function(e,t){var n=[];return Object.entries(e).forEach((function(e){var i=e[0],o=e[1];n.push({id:i,name:T(i),amount:o(t)})})),n},t}();function C(e){if(e>1e12)return"Never";if(!e||e<0)return"00:00:00";e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(t>9?"".concat(t,":"):"0".concat(t,":"))+(n>9?"".concat(n,":"):"0".concat(n,":"))+(i>9?"".concat(i):"0".concat(i))}function v(e,t,n){if(void 0===t&&(t=3),void 0===n&&(n=12),Math.abs(e)>Math.pow(10,n))return e.toExponential(t);if(Math.abs(e)<1e-4)return"0.00";if(Math.abs(e)<1)return e.toFixed(t);var i=Math.abs(e),o=Math.log10(i),r=Math.floor(o/3),a=i/Math.pow(10,3*r),c="";switch(r){case 1:c="K";break;case 1:c="M";break;case 1:c="B";break;case 1:c="T";break;default:c=""}return"".concat((Math.sign(e)*a).toPrecision(t)).concat(c)}var S,B,P,M,_,U,G,b,w,X,x,D,k,H,Y,W,Z,F,j,K,V,q,J,Q,z,$,ee,te,ne,ie,oe,re,ae,ce,ue,se,le,pe,Ee,de,ge,fe,Ae,Re,Ie,Ne,ye,Oe,me,Le,Te,he,Ce,ve,Se,Be,Pe,Me,_e,Ue,Ge,be,we,Xe,xe,De,ke,He,Ye,We,Ze,Fe,je,Ke,Ve,qe,Je,Qe,ze,$e,et,tt,nt,it,ot,rt,at,ct,ut,st,lt,pt,Et,dt,gt,ft,At,Rt,It,Nt,yt,Ot,mt,Lt,Tt,ht,Ct,vt,St,Bt,Pt,Mt,_t,Ut,Gt,bt,wt,Xt,xt,Dt,kt,Ht,Yt,Wt,Zt,Ft,jt,Kt,Vt,qt,Jt,Qt,zt,$t,en,tn,nn,on,rn,an,cn,un,sn,ln,pn,En,dn,gn,fn,An,Rn,In,Nn,yn,On,mn,Ln,Tn,hn,Cn,vn,Sn,Bn,Pn,Mn,_n,Un,Gn,bn,wn,Xn,xn,Dn,kn,Hn,Yn,Wn,Zn,Fn,jn,Kn,Vn,qn,Jn,Qn,zn,$n,ei,ti,ni,ii,oi,ri,ai,ci,ui,si,li,pi,Ei,di,gi,fi,Ai,Ri,Ii,Ni,yi,Oi,mi,Li,Ti,hi,Ci,vi,Si,Bi,Pi,Mi,_i,Ui,Gi,bi,wi,Xi,xi,Di,ki,Hi,Yi,Wi,Zi,Fi,ji,Ki,Vi,qi,Ji,Qi,zi,$i,eo,to,no,io,oo,ro,ao,co,uo,so,lo,po,Eo,go=(S=function(e,t){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},S(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fo=function(){return fo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fo.apply(this,arguments)},Ao=function(e){function t(){var t=e.call(this)||this;return t.actions=[],t.workDispatcher.on("[landing-zone] do action",(function(e){console.log("do action",e),t.doAction(e.id)})),t}return go(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.actions=e},t.prototype.exportData=function(){return this.actions},t.prototype.dataToUI=function(){var e=this;return{list:N.map((function(t){return e.processToUI(t)}))}},t.prototype.processToUI=function(e){var t=this.actions.find((function(t){return t.id===e.id}));t||(t={id:e.id,cooldown:0,progress:0,performed:0},this.actions.push(t));var n=h.calcBatchAll(e.getCost,Uc.getInstance(),0,Uc.getInstance().resources.getBatchObject()),i=h.calcBatch(e.getGain,Uc.getInstance(),0),o=n.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300),r=n.reduce((function(e,t){return e&&!t.isBlocked}),!0),a=n.reduce((function(e,t){return Math.max(e,t.eta)}),0),c=e.unlockCondition(Gc);return c&&Gc.newNotifications.registerNotification("planet:landing-zone:actions:".concat(e.id)),{id:e.id,name:e.name,description:e.description,isUnlocked:c,isAvailable:e.availableCondition(Gc)&&o>=1,cost:Uc.getInstance().resources.assertEnought(n,Uc.getInstance().resources.getBatchObject(),Uc.getInstance().resources.getBatchBalanceObject()),gain:i.map((function(e){return fo(fo({},e),{amount:v(e.amount)})})),progress:(t.cooldown?100*t.progress/t.cooldown:100).toPrecision(3),isBlocked:!r,etaNum:a}},t.prototype.doAction=function(e){var t=N.find((function(t){return t.id===e}));if(t){var n=this.actions.findIndex((function(t){return t.id===e}));if(n<0)n=this.actions.length,this.actions.push({id:e,cooldown:0,progress:0,performed:0});else if(this.actions[n].cooldown>0)return;var i=h.calcBatchAll(t.getCost,Uc.getInstance(),0,Uc.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.actions[n].cooldown=1.5,this.actions[n].performed++,console.log("costs: ",i),Uc.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.getActionPerformed=function(e){var t;return(null===(t=this.actions.find((function(t){return t.id===e})))||void 0===t?void 0:t.performed)||0},t.prototype.process=function(e){this.actions.forEach((function(t,n){if(t.cooldown&&(t.progress+=e,t.progress>=t.cooldown)){t.cooldown=0,t.progress=0;var i=N.find((function(e){return t.id===e.id}));if(!i)return;var o=h.calcBatch(i.getGain,Uc.getInstance(),0);console.log("gain: ",o,Gc.resources.resourcesStatus),o.forEach((function(e){Gc.resources.addResource(e.id,e.amount)})),Gc.resources.reassertBalances()}}))},t.prototype.reset=function(){this.actions=[]},t}(R),Ro=Ao.getInstance(),Io=[{id:n.REPAIR_DRILL,name:"Repair Drill",description:"Allows drilling harder materials. Also improves stone output",unlockCondition:function(e){return!0},getCost:(B={},B[a.POWER]=function(t){return{A:2,B:1.3,type:e.EXPONENTIAL}},B[a.STONE]=function(t){return{A:.5,B:1.3,type:e.EXPONENTIAL}},B),maxLevel:8},{id:n.REPAIR_CABLE,name:"Repair Charging Cable",description:"Improves power output",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(P={},P[a.POWER]=function(t){return{A:3,B:1.3,type:e.EXPONENTIAL}},P[a.ORE]=function(t){return{A:1,B:1.3,type:e.EXPONENTIAL}},P),maxLevel:5},{id:n.REPAIR_MANIPULATORS,name:"Repair Manipulators",description:"Allows digging and picking more materials",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(M={},M[a.POWER]=function(t){return{A:5,B:1.3,type:e.EXPONENTIAL}},M[a.ORE]=function(t){return{A:2,B:1.3,type:e.EXPONENTIAL}},M),maxLevel:5},{id:n.AUTO_QUARRYING,name:"Auto-quarrying",description:"Allows building quarries that gather stone automatically",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.DRILL_ORE)>0},getCost:(_={},_[a.POWER]=function(t){return{A:8,B:1.3,type:e.EXPONENTIAL}},_[a.ORE]=function(t){return{A:4,B:1.3,type:e.EXPONENTIAL}},_),maxLevel:1},{id:n.REPAIR_MACHINERY,name:"Repair machinery",description:"Repair mining machinery. Improves your automatic quarries and mines by 50%",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_QUARRYING)>0},getCost:(U={},U[a.POWER]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},U[a.ORE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},U),maxLevel:4},{id:n.AUTO_MINERS,name:"Auto-miners",description:"Allows building mines that gather ore automatically",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY)>0},getCost:(G={},G[a.POWER]=function(t){return{A:8,B:1.3,type:e.EXPONENTIAL}},G[a.ORE]=function(t){return{A:4,B:1.3,type:e.EXPONENTIAL}},G),maxLevel:1},{id:n.COMBUSTION,name:"Combustion",description:"Allows producing electrical power by burning biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.COLLECT_BIOMASS)>0},getCost:(b={},b[a.POWER]=function(t){return{A:12,B:1.3,type:e.EXPONENTIAL}},b[a.BIOMASS]=function(t){return{A:6,B:1.3,type:e.EXPONENTIAL}},b),maxLevel:1},{id:n.REPAIR_STORAGE_MODULE,name:"Repair Storage Module",description:"Repair the storage module. Allows building storage sections",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>2},getCost:(w={},w[a.POWER]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},w[a.ORE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},w),maxLevel:1},{id:n.REPAIR_BATTERY,name:"Repair Battery",description:"Improves power storage by +20",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MANIPULATORS)>4&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(X={},X[a.POWER]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},X[a.ORE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},X),getCapacityEffect:(x={},x[a.POWER]=function(t){return{A:20,B:0,type:e.LINEAR}},x),maxLevel:3},{id:n.COMBUSTION_CAMERA,name:"Combustion Chambers",description:"Extra combustion chambers decrease biomass consumption of thermoelectric power plants by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(D={},D[a.POWER]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},D[a.STONE]=function(t){return{A:18,B:1.5,type:e.EXPONENTIAL}},D),maxLevel:1},{id:n.QUARRY_TECH,name:"Improved Quarry",description:"Modify conveyor belts of your quarries to increases their output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.QUARRY)>4},getCost:(k={},k[a.STONE]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},k[a.ORE]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},k),maxLevel:1},{id:n.MINE_TECH,name:"Improved Mine",description:"Modify conveyor belts of your mines to increases their output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.MINE)>4},getCost:(H={},H[a.ORE]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},H[a.POWER]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},H),maxLevel:1},{id:n.THERMAL_TECH,name:"Improved Combustion",description:"Regulate the flow of raw materials to stabilize the combustion process. Increases thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>4},getCost:(Y={},Y[a.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Y[a.BIOMASS]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},Y),maxLevel:1},{id:n.BIO_TECH,name:"Improved Bio Technology",description:"Create a better environment for biological growth. Increases incubators output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.BACTERIA_INCUBATOR)>4},getCost:(W={},W[a.BIOMASS]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},W[a.STONE]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},W),maxLevel:1},{id:n.STORAGE_TECH,name:"Improved Storage",description:"Increases stone, ore and biomass storage from storage sections and hubs by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>4},getCost:(Z={},Z[a.STONE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z[a.ORE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Z),getCapacityMultiplier:(F={},F[a.STONE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},F[a.ORE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},F[a.BIOMASS]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},F),maxLevel:1},{id:n.BACTERIA_SELECTION,name:"Bacteria Selection",description:"Create and cultivate a more complex bio-form. Increases electricity consumption by incubators, but incubators start producing oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BIO_TECH)>0},getCost:(j={},j[a.POWER]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},j[a.BIOMASS]=function(t){return{A:90,B:1.5,type:e.EXPONENTIAL}},j),maxLevel:1},{id:n.THERMAL_TECH2,name:"Improved Thermal Plants",description:"Modify the delivery mechanism to work at higher speeds. Increases thermal plant output by 25%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.THERMOELECTRIC_STATION)>9},getCost:(K={},K[a.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},K[a.BIOMASS]=function(t){return{A:12,B:1.5,type:e.EXPONENTIAL}},K),maxLevel:1},{id:n.OXYGEN_CAMERAS,name:"Oxidize Combustion Cameras",description:"Add oxygen to maintain a stronger pressure. Thermal plants are 50% more efficient, but now require oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},getCost:(V={},V[a.POWER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},V[a.OXYGEN]=function(t){return{A:8,B:1.5,type:e.EXPONENTIAL}},V),maxLevel:1},{id:n.OXYGEN_COMPRESSORS,name:"Oxygen Compressors",description:"Allows building oxygen compressors to store more oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)>0},getCost:(q={},q[a.POWER]=function(t){return{A:65,B:1.5,type:e.EXPONENTIAL}},q[a.ORE]=function(t){return{A:165,B:1.5,type:e.EXPONENTIAL}},q[a.OXYGEN]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},q),maxLevel:1},{id:n.RESERVE_BATTERIES,name:"Reserve Batteries",description:"Thermoelectric plants now also provide small power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS)>0},getCost:(J={},J[a.POWER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},J[a.OXYGEN]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},J[a.ORE]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},J),maxLevel:1},{id:n.WATER_PUMPING,name:"Water Pumping",description:"Perform a geological survey to find deposits of underground water. Allows building water pumps",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS)>0},getCost:(Q={},Q[a.POWER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Q[a.STONE]=function(t){return{A:165,B:1.5,type:e.EXPONENTIAL}},Q[a.ORE]=function(t){return{A:175,B:1.5,type:e.EXPONENTIAL}},Q),maxLevel:1},{id:n.ELECTROLITES,name:"Electrolytes",description:"Allows building extra batteries to store power. Also, improves power output by 20%",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0},getCost:(z={},z[a.POWER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},z[a.WATER]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},z[a.ORE]=function(t){return{A:225,B:1.5,type:e.EXPONENTIAL}},z),getGain:{},getGainMultiplier:($={},$[a.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},$),getCapacityEffect:(ee={},ee[a.NUTRITION]=function(t){return{A:40,B:0,type:e.LINEAR}},ee),maxLevel:1},{id:n.SUPPLY_MODULE,name:"Repair Supply Module",description:"Repair the supply module to start generating a trace amount of nutrition",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.WATER_PUMP)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ELECTROLITES)>0},getCost:(te={},te[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},te[a.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},te[a.ORE]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},te),getGain:(ne={},ne[a.NUTRITION]=function(t){return{A:.2,B:0,type:e.LINEAR}},ne),getCapacityEffect:(ie={},ie[a.NUTRITION]=function(t){return{A:40,B:0,type:e.LINEAR}},ie),maxLevel:1},{id:n.DOCKING_MODULE,name:"Repair Docking Module",description:"Enables colonists arrival",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SUPPLY_MODULE)>0},getCost:(oe={},oe[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},oe[a.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},oe[a.ORE]=function(t){return{A:360,B:1.5,type:e.EXPONENTIAL}},oe),getGain:{},getCapacityEffect:{},maxLevel:1},{id:n.RESEARCH_MODULE,name:"Repair Research Module",description:"Repair the research module to allow colonists to work as researchers and produce research",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(re={},re[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},re[a.WATER]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},re[a.OXYGEN]=function(t){return{A:40,B:1.5,type:e.EXPONENTIAL}},re),getGain:{},getCapacityEffect:(ae={},ae[a.RESEARCH]=function(t){return{A:100,B:0,type:e.LINEAR}},ae),maxLevel:1},{id:n.CARGO_SORTING,name:"Cargo Sorting",description:"Repairs sorting machinery. Gives 75% bonus to stone, ore and biomass storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(ce={},ce[a.POWER]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},ce[a.STONE]=function(t){return{A:340,B:1.5,type:e.EXPONENTIAL}},ce[a.ORE]=function(t){return{A:340,B:1.5,type:e.EXPONENTIAL}},ce),getGain:{},getCapacityMultiplier:(ue={},ue[a.STONE]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue[a.ORE]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue[a.BIOMASS]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},ue),maxLevel:1},{id:n.FARMING_TOOLS,name:"Farming Tools",description:"Provide some basic tools to your farmers. Improves farming output by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0},getCost:(se={},se[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},se[a.RESEARCH]=function(t){return{A:35,B:1.5,type:e.EXPONENTIAL}},se[a.ORE]=function(t){return{A:400,B:1.5,type:e.EXPONENTIAL}},se),getGain:{},getGainMultiplier:(le={},le[a.NUTRITION]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},le),maxLevel:3},{id:n.DEEP_MINING,name:"Deep Mining",description:"Expand your mining shaft network. Improves stone and ore output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(pe={},pe[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},pe[a.RESEARCH]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},pe[a.ORE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},pe),getGain:{},getGainMultiplier:(Ee={},Ee[a.ORE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ee[a.STONE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ee),maxLevel:3},{id:n.UNDERGROUND_VAULTS,name:"Underground Vaults",description:"Dig an underground storage for your basic materials, which increases storage facilities by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(de={},de[a.POWER]=function(t){return{A:250,B:1.75,type:e.EXPONENTIAL}},de[a.RESEARCH]=function(t){return{A:25,B:1.75,type:e.EXPONENTIAL}},de[a.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},de),getGain:{},getCapacityMultiplier:(ge={},ge[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.BIOMASS]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.IRON]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge[a.PLATINUM]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},ge),maxLevel:3},{id:n.CARGO_CRANES,name:"Cargo Cranes",description:"Add cargo cranes to help with sorting. Further improves your storage facilities by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ENGINEERING)>0},getCost:(fe={},fe[a.POWER]=function(t){return{A:250,B:1.75,type:e.EXPONENTIAL}},fe[a.RESEARCH]=function(t){return{A:35,B:1.75,type:e.EXPONENTIAL}},fe[a.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},fe),getGain:{},getCapacityMultiplier:(Ae={},Ae[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ae[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Ae),maxLevel:1},{id:n.CRANES,name:"Building Cranes",description:"Assemble giant cranes to help constructing new buildings. Decreases price scaling of buildings by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ENGINEERING)>0},getCost:(Re={},Re[a.POWER]=function(t){return{A:350,B:1.75,type:e.EXPONENTIAL}},Re[a.RESEARCH]=function(t){return{A:35,B:1.75,type:e.EXPONENTIAL}},Re[a.ORE]=function(t){return{A:550,B:1.75,type:e.EXPONENTIAL}},Re),getGain:{},getCapacityMultiplier:{},maxLevel:1},{id:n.WATER_DRILLING,name:"Water Deposits",description:"Survey deeper layers to find underground water deposits. Improves water production by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0},getCost:(Ie={},Ie[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ie[a.RESEARCH]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Ie[a.ORE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Ie),getGain:{},getGainMultiplier:(Ne={},Ne[a.WATER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Ne),maxLevel:3},{id:n.FLAMMABILITY,name:"Flammable Biomass",description:"Cultivate a special flammable biomass that produces more heat when burnt, increasing power generation from your thermal plants by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(ye={},ye[a.POWER]=function(t){return{A:370,B:1.5,type:e.EXPONENTIAL}},ye[a.RESEARCH]=function(t){return{A:95,B:1.5,type:e.EXPONENTIAL}},ye[a.BIOMASS]=function(t){return{A:325,B:1.5,type:e.EXPONENTIAL}},ye),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FLORA,name:"Nutritious Flora",description:"Plant some special flora in your incubators that increases bacterial growth when decomposing. Makes incubators 50% more productive",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(Oe={},Oe[a.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},Oe[a.RESEARCH]=function(t){return{A:195,B:1.5,type:e.EXPONENTIAL}},Oe[a.BIOMASS]=function(t){return{A:525,B:1.5,type:e.EXPONENTIAL}},Oe),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FERTILIZING,name:"Fertilizing",description:"Start adding fertilizers to the soil. Your farmers will start using 0.1 biomass each, but it will increase their nutrition output by 30%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(me={},me[a.POWER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},me[a.RESEARCH]=function(t){return{A:245,B:1.5,type:e.EXPONENTIAL}},me[a.BIOMASS]=function(t){return{A:1225,B:1.5,type:e.EXPONENTIAL}},me),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.FORESTER_TOOLS,name:"Forester Tools",description:"Create new tools for your foresters to increases wood output by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Le={},Le[a.POWER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},Le[a.RESEARCH]=function(t){return{A:200,B:1.5,type:e.EXPONENTIAL}},Le[a.WOOD]=function(t){return{A:30,B:1.5,type:e.EXPONENTIAL}},Le),getGain:{},getGainMultiplier:(Te={},Te[a.WOOD]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Te),maxLevel:1},{id:n.BROADLEAVED,name:"Broad-Leaved Forests",description:"Start planting trees with broad leaves. Forests plants generate oxygen",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(he={},he[a.POWER]=function(t){return{A:880,B:1.5,type:e.EXPONENTIAL}},he[a.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},he[a.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},he),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.WOODEN_FURNITURE,name:"Wooden Furniture",description:"Using wooden furniture allows housing an extra colonist in every cabin",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Ce={},Ce[a.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ce[a.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},Ce[a.WOOD]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},Ce),getGain:{},getGainMultiplier:{},maxLevel:1},{id:n.IRON_TOOLS,name:"Metal Tools",description:"Create metal tools to improve wood output of foresters by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0&&e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(ve={},ve[a.IRON]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},ve[a.RESEARCH]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ve[a.WOOD]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},ve),getGain:{},getGainMultiplier:(Se={},Se[a.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Se),maxLevel:1},{id:n.IRON_PARTS,name:"Metal Machine Parts",description:"Replace old parts with metal, which improves stone and ore output by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Be={},Be[a.IRON]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Be[a.RESEARCH]=function(t){return{A:275,B:1.5,type:e.EXPONENTIAL}},Be[a.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Be),getGain:{},getGainMultiplier:(Pe={},Pe[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Pe[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},Pe),maxLevel:1},{id:n.IRON_CONTAINERS,name:"Metal containers",description:"Use local-sourced metal to improve storage containers. Improves all resources storages by 50%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Me={},Me[a.IRON]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},Me[a.RESEARCH]=function(t){return{A:175,B:1.5,type:e.EXPONENTIAL}},Me[a.WOOD]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Me),getGain:{},getCapacityMultiplier:(_e={},_e[a.STONE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.ORE]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.BIOMASS]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.WOOD]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.IRON]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.WATER]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.OXYGEN]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e[a.PLATINUM]=function(t){return{A:1,B:1.5,type:e.EXPONENTIAL}},_e),maxLevel:1},{id:n.IMPROVED_WIRES,name:"Better cables",description:"Use more conductive materials in your wiring. Improves power capacity by 75% and output by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Ue={},Ue[a.IRON]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ue[a.RESEARCH]=function(t){return{A:375,B:1.5,type:e.EXPONENTIAL}},Ue[a.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ue),getGain:{},getGainMultiplier:(Ge={},Ge[a.POWER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Ge),getCapacityMultiplier:(be={},be[a.POWER]=function(t){return{A:1,B:1.75,type:e.EXPONENTIAL}},be),maxLevel:1},{id:n.TREE_CARE,name:"Rangers",description:"Teach your foresters better conservation methods. Improves foresters output by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(we={},we[a.WATER]=function(t){return{A:150,B:1.5,type:e.EXPONENTIAL}},we[a.RESEARCH]=function(t){return{A:375,B:1.5,type:e.EXPONENTIAL}},we[a.POWER]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},we),getGain:{},getGainMultiplier:(Xe={},Xe[a.WOOD]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Xe),getCapacityMultiplier:{},maxLevel:3},{id:n.FRUIT_TREES,name:"Fruit Trees",description:"Plant fruit trees in your forests. Forest plants now also provide nutrition",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(xe={},xe[a.WATER]=function(t){return{A:150,B:1.5,type:e.EXPONENTIAL}},xe[a.RESEARCH]=function(t){return{A:325,B:1.5,type:e.EXPONENTIAL}},xe[a.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},xe),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.NATURAL_ENVIRONMENT,name:"Natural Environment",description:"Forest ecosystem is favourable for plant growth. Forest plants now boost biomass production by 2% each",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0},getCost:(De={},De[a.WATER]=function(t){return{A:250,B:1.5,type:e.EXPONENTIAL}},De[a.RESEARCH]=function(t){return{A:475,B:1.5,type:e.EXPONENTIAL}},De[a.BIOMASS]=function(t){return{A:2500,B:1.5,type:e.EXPONENTIAL}},De),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.WATER_FILTERING,name:"Advanced Water Filtering",description:"Better filtration methods allow reusing more water. Improves water output by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(ke={},ke[a.OXYGEN]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},ke[a.RESEARCH]=function(t){return{A:225,B:1.5,type:e.EXPONENTIAL}},ke[a.POWER]=function(t){return{A:900,B:1.5,type:e.EXPONENTIAL}},ke),getGain:{},getGainMultiplier:(He={},He[a.WATER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},He),getCapacityMultiplier:{},maxLevel:3},{id:n.CHEMICAL_ANALYSIS,name:"Chemical Analysis",description:"Study chemical reactions. Improves science output by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(Ye={},Ye[a.WATER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Ye[a.RESEARCH]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ye[a.POWER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},Ye),getGain:{},getGainMultiplier:(We={},We[a.RESEARCH]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},We),getCapacityMultiplier:{},maxLevel:3},{id:n.BETTER_ELECTROLITES,name:"Improved Electrolytes",description:"Create new electrolyte solution to improve power capacity by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0},getCost:(Ze={},Ze[a.WATER]=function(t){return{A:125,B:1.5,type:e.EXPONENTIAL}},Ze[a.RESEARCH]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Ze[a.OXYGEN]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},Ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:(Fe={},Fe[a.POWER]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},Fe),maxLevel:5},{id:n.PLATINUM_MINING,name:"Platinum Mining",description:"Allows colonist miners to extract platinum",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GEOLOGY)>0},getCost:(je={},je[a.IRON]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},je[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},je[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},je),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.PLATINUM_DRILLS,name:"Platinum Drills",description:"Replace drill heads with platinum. Improves stone and ore output by 40%",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)>0},getCost:(Ke={},Ke[a.PLATINUM]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},Ke[a.RESEARCH]=function(t){return{A:420,B:1.5,type:e.EXPONENTIAL}},Ke[a.POWER]=function(t){return{A:775,B:1.5,type:e.EXPONENTIAL}},Ke),getGain:{},getGainMultiplier:(Ve={},Ve[a.STONE]=function(t){return{A:1,B:1.4,type:e.EXPONENTIAL}},Ve[a.ORE]=function(t){return{A:1,B:1.4,type:e.EXPONENTIAL}},Ve),getCapacityMultiplier:{},maxLevel:1},{id:n.PLATINUM_TOOLS,name:"Platinum Tools",description:"Create platinum tools to provide additional production boost. Increases wood production and beam, brick and plate crafting by 10%",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)>0},getCost:(qe={},qe[a.PLATINUM]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},qe[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},qe[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},qe),getGain:{},getGainMultiplier:(Je={},Je[a.WOOD]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Je[a.BEAM]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Je[a.BRICK]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Je[a.PLATE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Je),getCapacityMultiplier:{},maxLevel:5},{id:n.COTTAGES,name:"Cottages",description:"Create plans for a new housing unit",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:(Qe={},Qe[a.BRICK]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Qe[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Qe[a.POWER]=function(t){return{A:300,B:1.5,type:e.EXPONENTIAL}},Qe),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ENTERTAINMENT,name:"Entertainment",description:"Society research allows better understanding of human needs. Unlocks new ways to boost population happiness",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:(ze={},ze[a.RESEARCH]=function(t){return{A:420,B:1.5,type:e.EXPONENTIAL}},ze[a.POWER]=function(t){return{A:775,B:1.5,type:e.EXPONENTIAL}},ze),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.SOCIAL_RESEARCH_CENTER,name:"Social Research Center",description:"Unlocks new scientific building for studying sociology",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0},getCost:($e={},$e[a.PLATE]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},$e[a.RESEARCH]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},$e[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},$e),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ADVANCED_METALLURGY,name:"Advanced Metallurgy",description:"Improved smelting technique increases smelter output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(et={},et[a.IRON]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},et[a.RESEARCH]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},et[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},et),getGain:{},getGainMultiplier:(tt={},tt[a.IRON]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},tt),getCapacityMultiplier:{},maxLevel:10},{id:n.HEAT_INSULATING_CAMERAS,name:"Heat Insulating Chambers",description:"Create insulation for combustion chambers. Improves thermal plant efficiency by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(nt={},nt[a.ORE]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},nt[a.STONE]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},nt[a.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},nt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.COMPOSITE_METALS,name:"Composite Metals",description:"Using composite metals allows to increase crafting output for plates and wires by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0},getCost:(it={},it[a.IRON]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},it[a.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},it[a.POWER]=function(t){return{A:845,B:1.5,type:e.EXPONENTIAL}},it),getGain:{},getGainMultiplier:(ot={},ot[a.PLATE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},ot[a.WIRE]=function(t){return{A:1,B:1.25,type:e.EXPONENTIAL}},ot),getCapacityMultiplier:{},maxLevel:3},{id:n.IMPROVED_WIRING,name:"Upgrade Wiring",description:"Lay new wires to further increase power supply by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(rt={},rt[a.PLATINUM]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},rt[a.RESEARCH]=function(t){return{A:750,B:1.5,type:e.EXPONENTIAL}},rt[a.WIRE]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},rt),getGain:{},getGainMultiplier:(at={},at[a.POWER]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},at),getCapacityMultiplier:{},maxLevel:10},{id:n.ENERGY_SAVING,name:"Energy Saving",description:"Implement energy saving mode for downtime to significantly save on power. Reduces building power cost by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(ct={},ct[a.PLATINUM]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},ct[a.RESEARCH]=function(t){return{A:1250,B:1.5,type:e.EXPONENTIAL}},ct[a.WIRE]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},ct),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ENERGY_SAVING_EXPEDITION_DRONES,name:"Saving Expedition Drones",description:"Rerout extra energy toward terrain scanners of your expedition drones. Increases expedition loot by 30%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0&&e.science.scienceResearches.getResearchLevel(I.GEOGRAPHY)>0},getCost:(ut={},ut[a.PLATINUM]=function(t){return{A:85,B:1.5,type:e.EXPONENTIAL}},ut[a.RESEARCH]=function(t){return{A:1250,B:1.5,type:e.EXPONENTIAL}},ut[a.WIRE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},ut),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.GERMETISATION,name:"Vacuum Sealing",description:"Allows building air-tight containers, increasing storage capacity",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},getCost:(st={},st[a.RUBBER]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},st[a.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},st[a.POWER]=function(t){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},st),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.RUBBER_DETAILS,name:"Rubber Padding",description:"Add rubber padding to your buildings to further descrease building cost scaling by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0},getCost:(lt={},lt[a.RUBBER]=function(t){return{A:10,B:1.5,type:e.EXPONENTIAL}},lt[a.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},lt[a.POWER]=function(t){return{A:1e3,B:1.5,type:e.EXPONENTIAL}},lt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.SURVEILLANCE_CAMERAS,name:"Surveillance Cameras",description:"Install surveillance cameras around your colony. Improves policemen efficiency by 25%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0&&e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(pt={},pt[a.PLASTICS]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},pt[a.RESEARCH]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},pt[a.SEMICONDUCTOR]=function(t){return{A:20,B:1.5,type:e.EXPONENTIAL}},pt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:3},{id:n.COMPUTERS,name:"Computers",description:"Unlocks computers crafting and building data-centers",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(Et={},Et[a.PLASTICS]=function(t){return{A:45,B:1.5,type:e.EXPONENTIAL}},Et[a.RESEARCH]=function(t){return{A:1500,B:1.5,type:e.EXPONENTIAL}},Et[a.SEMICONDUCTOR]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},Et),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.INDUSTRY_AUTOMATION,name:"Industry Automation",description:"Automate some mundane tasks of your artisans. Gain 5% bonus to all crafting",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(dt={},dt[a.WIRE]=function(t){return{A:145,B:1.5,type:e.EXPONENTIAL}},dt[a.RESEARCH]=function(t){return{A:1600,B:1.5,type:e.EXPONENTIAL}},dt[a.SEMICONDUCTOR]=function(t){return{A:80,B:1.5,type:e.EXPONENTIAL}},dt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:5},{id:n.BUILDING_PRINTING,name:"3D Printers Construction",description:"Create prefabricated sections on your 3D printers. Further decreases building cost by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PRINTING_3D)>0},getCost:(gt={},gt[a.COMPUTER]=function(t){return{A:65,B:1.5,type:e.EXPONENTIAL}},gt[a.RESEARCH]=function(t){return{A:4600,B:1.5,type:e.EXPONENTIAL}},gt[a.RUBBER]=function(t){return{A:280,B:1.5,type:e.EXPONENTIAL}},gt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.ORGANISM_PRINTING,name:"Organs Printing",description:"New synthetic organs allow for a better treatment of your colonists. Unlocks a new social law",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PRINTING_3D)>0},getCost:(ft={},ft[a.COMPUTER]=function(t){return{A:75,B:1.5,type:e.EXPONENTIAL}},ft[a.RESEARCH]=function(t){return{A:4600,B:1.5,type:e.EXPONENTIAL}},ft[a.WIRE]=function(t){return{A:280,B:1.5,type:e.EXPONENTIAL}},ft),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.BETTER_DIAGNOSTICS,name:"Improve Health Diagnostics",description:"Using computers for diagnostics can significantly improve healthcare services. Each level increases healthcare from clinics by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0&&e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(At={},At[a.RESEARCH]=function(t){return{A:1300,B:1.5,type:e.EXPONENTIAL}},At[a.COMPUTER]=function(t){return{A:5,B:1.5,type:e.EXPONENTIAL}},At),getGainMultiplier:{},maxLevel:5},{id:n.MULTISTORE_WAREHOUSES,name:"Multistore Warehouses",description:"Create a scalable solution for your storage. Your warehouses can now store twice as much goods",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(Rt={},Rt[a.PLATE]=function(t){return{A:400,B:1.5,type:e.EXPONENTIAL}},Rt[a.RESEARCH]=function(t){return{A:7025,B:1.5,type:e.EXPONENTIAL}},Rt[a.WIRE]=function(t){return{A:450,B:1.5,type:e.EXPONENTIAL}},Rt),getGain:{},getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.GMO,name:"GMO",description:"Genetic modification of organisms can help boost nutrition production by 5% and biomass production by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0},getCost:(It={},It[a.RESEARCH]=function(t){return{A:2500,B:1.5,type:e.EXPONENTIAL}},It[a.BIOMASS]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},It),getGainMultiplier:(Nt={},Nt[a.BIOMASS]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Nt[a.NUTRITION]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},Nt),maxLevel:5},{id:n.LASER_CUTTING,name:"Laser Cutting",description:"Using lasers to cut out metal parts significantly simplifies plates and wires production. Increased plate and wire production by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(yt={},yt[a.RESEARCH]=function(t){return{A:4500,B:1.5,type:e.EXPONENTIAL}},yt[a.POWER]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},yt),getGainMultiplier:(Ot={},Ot[a.PLATE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ot[a.WIRE]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ot),maxLevel:3},{id:n.BETTER_PHOTOELEMENTS,name:"Better Photo-Elements",description:"Improved photo-element technology allows you to boost solar satellites and solar panels output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(mt={},mt[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},mt[a.POWER]=function(t){return{A:4e3,B:1.5,type:e.EXPONENTIAL}},mt),getGainMultiplier:{},maxLevel:1},{id:n.IMPROVED_LITHOGRAPHY,name:"Improved Lithography",description:"New methods of lithography improve assembling processes. Boosts computers production by 10%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(Lt={},Lt[a.RESEARCH]=function(t){return{A:4500,B:1.5,type:e.EXPONENTIAL}},Lt[a.SEMICONDUCTOR]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},Lt),getGainMultiplier:(Tt={},Tt[a.COMPUTER]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Tt),maxLevel:3},{id:n.GREAT_RADIO_TRANSMITTER,name:"Great Radio Transmitter",description:"Create a signal transmitter with a much stronger output. Allows you to send signals to other civilizations. Unlocks first prestige level",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0},getCost:(ht={},ht[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},ht[a.COMPUTER]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},ht[a.PLATINUM]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},ht),getGainMultiplier:{},maxLevel:1},{id:n.FLIGHT_TECHNOLOGY,name:"Fuel Conservation",description:"Improved fuel combustion cycle allows to install less rockets to achieve the same thrust. Reduces rocket consumption by 20% for all space structures and ships",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Ct={},Ct[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},Ct[a.ROCKET_ENGINE]=function(t){return{A:20,B:1.5,type:e.EXPONENTIAL}},Ct[a.FUEL]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Ct),getGainMultiplier:{},maxLevel:1},{id:n.FASTER_ROCKETS,name:"Faster Rockets",description:"Using improved flight path calculation reduces total flight time. Space tourism is now 50% more efficient",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(vt={},vt[a.RESEARCH]=function(t){return{A:7500,B:1.5,type:e.EXPONENTIAL}},vt[a.ROCKET_ENGINE]=function(t){return{A:15,B:1.5,type:e.EXPONENTIAL}},vt[a.COMPUTER]=function(t){return{A:25,B:1.5,type:e.EXPONENTIAL}},vt),getGainMultiplier:{},maxLevel:1},{id:n.CONDUCTIVE_NANOPARTICLES,name:"Conductive Nano-Particles",description:"Using new conductive particles improves the capacity of your batteries and accumulators by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0},getCost:(St={},St[a.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},St[a.WATER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},St[a.WIRE]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},St),getGainMultiplier:{},getCapacityMultiplier:(Bt={},Bt[a.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Bt),maxLevel:3},{id:n.NANO_BOTS,name:"Nanobots",description:"Unlocks nanobots factory building on your satellite that provides bonus to all crafting",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0},getCost:(Pt={},Pt[a.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},Pt[a.COMPUTER]=function(t){return{A:60,B:1.5,type:e.EXPONENTIAL}},Pt[a.WIRE]=function(t){return{A:500,B:1.5,type:e.EXPONENTIAL}},Pt),getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.GENES_MODIFICATION,name:"Animal Gene Modification",description:"Learn how to artificially change animals through gene modification. Unlocks Zoo",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_GENETICS)>0},getCost:(Mt={},Mt[a.RESEARCH]=function(t){return{A:6e3,B:1.5,type:e.EXPONENTIAL}},Mt[a.PLASTICS]=function(t){return{A:60,B:1.5,type:e.EXPONENTIAL}},Mt[a.BIOMASS]=function(t){return{A:15e3,B:1.5,type:e.EXPONENTIAL}},Mt),getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.GRAVITATIONAL_LENSING,name:"Gravitational Lensing Study",description:"Learn more about the powerful physical effect from massive celestial bodies that causes the curvature of spacetime. Provides more knowledge about the universe and surrounding stars and boosts space telescope effect by 40%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RELATIVITY_PHYSICS)>0},getCost:(_t={},_t[a.RESEARCH]=function(t){return{A:1e4,B:1.5,type:e.EXPONENTIAL}},_t[a.COMPUTER]=function(t){return{A:60,B:1.5,type:e.EXPONENTIAL}},_t[a.FUEL]=function(t){return{A:100,B:1.5,type:e.EXPONENTIAL}},_t),getGainMultiplier:{},getCapacityMultiplier:{},maxLevel:1},{id:n.RADIATIVE_DISSOCIATION,name:"Radiative Dissociation",description:"Using radiation can improve dissociation process, improving your electrolytes efficiency.  Improves your power storage facilities by 20%.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PHOTOCHEMISTRY)>0},getCost:(Ut={},Ut[a.RESEARCH]=function(t){return{A:8e3,B:1.5,type:e.EXPONENTIAL}},Ut[a.WATER]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},Ut[a.SEMICONDUCTOR]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},Ut),getGainMultiplier:{},getCapacityMultiplier:(Gt={},Gt[a.POWER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Gt),maxLevel:5},{id:n.FUEL_PROCESSING_CATALYSATION,name:"Radiative Catalyzation",description:"Use radiation in chemical reactions to boost your fuel output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PHOTOCHEMISTRY)>0},getCost:(bt={},bt[a.RESEARCH]=function(t){return{A:8e3,B:1.5,type:e.EXPONENTIAL}},bt[a.WATER]=function(t){return{A:800,B:1.5,type:e.EXPONENTIAL}},bt[a.SEMICONDUCTOR]=function(t){return{A:50,B:1.5,type:e.EXPONENTIAL}},bt),getGainMultiplier:(wt={},wt[a.FUEL]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},wt),getCapacityMultiplier:{},maxLevel:5},{id:n.PLASMA_KNIFE,name:"Plasma Knife",description:"Use hot ionized gas to cut metal. Improves plates, wires and rockets output by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_ENERGY_PHYSICS)>0},getCost:(Xt={},Xt[a.RESEARCH]=function(t){return{A:12e3,B:1.5,type:e.EXPONENTIAL}},Xt[a.FUEL]=function(t){return{A:1200,B:1.5,type:e.EXPONENTIAL}},Xt[a.POWER]=function(t){return{A:1e4,B:1.5,type:e.EXPONENTIAL}},Xt),getGainMultiplier:(xt={},xt[a.PLATE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},xt[a.WIRE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},xt[a.ROCKET_ENGINE]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},xt),getCapacityMultiplier:{},maxLevel:5},{id:n.IMPULSE_ENGINE,name:"Impulse Engine",description:"Replace traditional fuel burning with modern approach, based on ionized plasma stream accelerated by powerful magnetic field. Further reduces rocket consumption by 20% for all space structures and ships",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_ENERGY_PHYSICS)>0},getCost:(Dt={},Dt[a.RESEARCH]=function(t){return{A:18500,B:1.5,type:e.EXPONENTIAL}},Dt[a.ROCKET_ENGINE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},Dt),getGainMultiplier:{},maxLevel:1},{id:n.IMPULSE_ENGINE,name:"Impulse Engine",description:"Replace traditional fuel burning with modern approach, based on ionized plasma stream accelerated by powerful magnetic field. Further reduces rocket consumption by 20% for all space structures and ships",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(kt={},kt[a.RESEARCH]=function(t){return{A:17500,B:1.5,type:e.EXPONENTIAL}},kt[a.ROCKET_ENGINE]=function(t){return{A:120,B:1.5,type:e.EXPONENTIAL}},kt),getGainMultiplier:{},maxLevel:1},{id:n.NANO_TRANSISTORS,name:"Transistor Photo-Printing",description:"Use photolithography to boost your computers production by 20%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PHOTO_LITHOGRAPHY)>0},getCost:(Ht={},Ht[a.RESEARCH]=function(t){return{A:16500,B:1.5,type:e.EXPONENTIAL}},Ht[a.SEMICONDUCTOR]=function(t){return{A:600,B:1.5,type:e.EXPONENTIAL}},Ht),getGainMultiplier:(Yt={},Yt[a.COMPUTER]=function(t){return{A:1,B:1.2,type:e.EXPONENTIAL}},Yt),maxLevel:1}],No=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),yo=function(){return yo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yo.apply(this,arguments)},Oo=function(e){function t(){var t=e.call(this)||this;return t.upgrades=[],t.workDispatcher.on("[landing-zone] do upgrade",(function(e){console.log("do upgrade",e),t.doUpgrade(e.id)})),t}return No(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.upgrades=e},t.prototype.exportData=function(){return this.upgrades},t.prototype.dataToUI=function(){var e=this;return{list:Io.map((function(t){return e.processToUI(t)}))}},t.prototype.getUpgradeLevel=function(e){var t;return(null===(t=this.upgrades.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.upgrades.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0},this.upgrades.push(t));var n=h.calcBatchAll(e.getCost,Uc.getInstance(),t.level,Uc.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return e&&!t.isBlocked}),!0),o=n.reduce((function(e,t){return Math.max(e,t.eta)}),0),r=e.getCapacityEffect?h.calcBatch(e.getCapacityEffect,Uc.getInstance(),0):[],a=e.getCapacityMultiplier?h.calcBatch(e.getCapacityMultiplier,Uc.getInstance(),t.level+1):[],c=e.getGain?h.calcBatch(e.getGain,Uc.getInstance(),0):[],u=e.getGainMultiplier?h.calcBatch(e.getGainMultiplier,Uc.getInstance(),t.level+1):[],s=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300),l=e.unlockCondition(Gc);return l&&t.level<=0&&Gc.newNotifications.registerNotification("planet:landing-zone:upgrades:".concat(e.id)),{id:e.id,name:e.name,description:e.description,isUnlocked:l,isAvailable:s>=1,cost:Uc.getInstance().resources.assertEnought(n,Uc.getInstance().resources.getBatchObject(),Uc.getInstance().resources.getBatchBalanceObject()),max:r.map((function(e){return yo(yo({},e),{amount:v(e.amount)})})),maxMult:a.map((function(e){return yo(yo({},e),{amount:"x".concat(v(e.amount))})})),consume:[],gain:c.map((function(e){return yo(yo({},e),{amount:v(e.amount)})})),gainMult:u.map((function(e){return yo(yo({},e),{amount:"x".concat(v(e.amount))})})),progress:s<1?(100*s).toPrecision(3):"100",isMaxedOut:!!e.maxLevel&&e.maxLevel<=t.level,maxLevel:e.maxLevel,level:t.level,isBlocked:!i,etaNum:o}},t.prototype.doUpgrade=function(e){var t=Io.find((function(t){return t.id===e}));if(t){var n=this.upgrades.findIndex((function(t){return t.id===e}));if(n<0)n=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(t.maxLevel&&this.upgrades[n].level>=t.maxLevel)return;var i=h.calcBatchAll(t.getCost,Uc.getInstance(),this.upgrades[n].level,Uc.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.upgrades[n].level++,console.log("costs: ",i),Uc.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.getGain=function(e){var t=Io.filter((function(t){var n;return!!(null===(n=t.getGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getGain){var r=h.calculate(Gc,o.getGain[e],0,i.level);n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getGainMultiplier=function(e){var t=Io.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getGainMultiplier){var r=h.calculate(Gc,o.getGainMultiplier[e],i.level,1);r&&n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getCapacity=function(e){var t=Io.filter((function(t){var n;return!!(null===(n=t.getCapacityEffect)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityEffect){var r=h.calculate(Gc,o.getCapacityEffect[e],0,i.level);n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.getCapacityMult=function(e){var t=Io.filter((function(t){var n;return!!(null===(n=t.getCapacityMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var r=h.calculate(Gc,o.getCapacityMultiplier[e],i.level,1);r&&n.push({label:"Upgrade: ".concat(o.name),value:r,id:"upgrade-".concat(o.id)})}}),0),n},t.prototype.process=function(e){},t.prototype.reset=function(){this.upgrades=[]},t}(R),mo=Oo.getInstance();!function(e){e.SCIENCE="Science",e.ECONOMY="Economy",e.SOCIAL="Social"}(Wt||(Wt={})),function(e){e.EXPERIMENTAL_MEDICINE="experimental_medicine",e.WATER_FILTERING="water_filtering",e.RESEARCH_GRANTS="research_grants",e.INDUSTRIALIZATION="industrialization",e.FOREST_BEHAVOUR="forest_behavour",e.SECURITY_DOTATIONS="security_dotations",e.ARTIFICIAL_ORGANS="artificial_organs",e.COAL_BURNING="coal_burning",e.CLEAR_CUTTING="clear_cutting",e.FOOD_CHEMICAL_PROCESSING="food_chemical_processing",e.ELECTROTHERMAL_SMELTING="electrothermal_smelting"}(Zt||(Zt={}));var Lo,To,ho,Co,vo,So,Bo,Po,Mo,_o,Uo,Go,bo,wo,Xo,xo,Do,ko,Ho,Yo,Wo,Zo,Fo,jo,Ko,Vo,qo,Jo,Qo,zo,$o,er,tr,nr,ir,or,rr,ar,cr,ur,sr,lr,pr,Er,dr,gr,fr,Ar,Rr,Ir,Nr,yr,Or,mr,Lr,Tr,hr,Cr,vr,Sr,Br,Pr,Mr,_r,Ur,Gr,br=function(e){return Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.CRANES))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RUBBER_DETAILS))*Math.pow(.9,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BUILDING_PRINTING))},wr=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENERGY_SAVING))},Xr=function(e){return Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLIGHT_TECHNOLOGY))*Math.pow(.8,e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.IMPULSE_ENGINE))},xr=function(e){switch(e.laws.getLawSelected(Zt.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.05;case 2:return 1.1}return 1},Dr=function(e){switch(e.laws.getLawSelected(Zt.RESEARCH_GRANTS)){case 0:return 1;case 1:return 1.25;case 2:return 1.75}return 1},kr=function(e){switch(e.laws.getLawSelected(Zt.COAL_BURNING)){case 0:return 1;case 1:return 1.1;case 2:return 1.25}return 1},Hr=function(e){switch(e.laws.getLawSelected(Zt.COAL_BURNING)){case 0:return 0;case 1:return.01;case 2:return.03}return 0},Yr=[{id:i.QUARRY,name:"Quarry",category:o.INDUSTRIAL,description:"Automatically collects stone",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_QUARRYING)>0},getCost:(Ft={},Ft[a.ORE]=function(t){return{A:1,B:1+.3*br(t),type:e.EXPONENTIAL}},Ft[a.STONE]=function(t){return{A:2.5,B:1+.3*br(t),type:e.EXPONENTIAL}},Ft),getConsumption:(jt={},jt[a.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},jt),getGain:(Kt={},Kt[a.STONE]=function(t){return{A:(.06+.03*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.QUARRY_TECH)),B:0,type:e.LINEAR}},Kt),getStorage:{}},{id:i.MINE,name:"Mine",category:o.INDUSTRIAL,description:"Automatically collects ore",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.AUTO_MINERS)>0},getCost:(Vt={},Vt[a.ORE]=function(t){return{A:5,B:1+.3*br(t),type:e.EXPONENTIAL}},Vt[a.STONE]=function(t){return{A:4.5,B:1+.3*br(t),type:e.EXPONENTIAL}},Vt),getConsumption:(qt={},qt[a.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},qt),getGain:(Jt={},Jt[a.ORE]=function(t){return{A:(.06+.03*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MINE_TECH)),B:0,type:e.LINEAR}},Jt),getStorage:{}},{id:i.BACTERIA_INCUBATOR,category:o.INDUSTRIAL,name:"Bacteria Incubator",description:"Automatically produces biomass",unlockCondition:function(e){return e.landingZone.landingZoneActions.getActionPerformed(t.COLLECT_BIOMASS)>0},getCost:(Qt={},Qt[a.BIOMASS]=function(t){return{A:3,B:1+.3*br(t),type:e.EXPONENTIAL}},Qt[a.STONE]=function(t){return{A:4.5,B:1+.3*br(t),type:e.EXPONENTIAL}},Qt),getConsumption:(zt={},zt[a.POWER]=function(t){return{A:.06*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)),B:0,type:e.LINEAR}},zt),getGain:($t={},$t[a.BIOMASS]=function(t){return{A:(.04+.02*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_MACHINERY))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BIO_TECH))*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLORA)),B:0,type:e.LINEAR}},$t[a.OXYGEN]=function(t){return{A:.01*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BACTERIA_SELECTION)*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLORA)),B:0,type:e.LINEAR}},$t),getStorage:{}},{id:i.THERMOELECTRIC_STATION,category:o.POWER,name:"Thermoelectric Power plant",description:"Burns biomass to generate power",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMBUSTION)>0},getCost:(en={},en[a.ORE]=function(t){return{A:6,B:1+.3*br(t),type:e.EXPONENTIAL}},en[a.STONE]=function(t){return{A:7,B:1+.3*br(t),type:e.EXPONENTIAL}},en),getConsumption:(tn={},tn[a.BIOMASS]=function(t){return{A:.03*Math.pow(.75,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMBUSTION_CAMERA)),B:0,type:e.LINEAR}},tn[a.OXYGEN]=function(t){return{A:.006*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS),B:0,type:e.LINEAR}},tn[a.WOOD]=function(t){return{A:Hr(t),B:0,type:e.LINEAR}},tn),getGain:(nn={},nn[a.POWER]=function(t){return{A:.09*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.THERMAL_TECH))*(1+.25*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.THERMAL_TECH2))*(1+.75*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_CAMERAS))*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FLAMMABILITY))*(1+.2*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.HEAT_INSULATING_CAMERAS))*kr(t),B:0,type:e.LINEAR}},nn),getStorage:(on={},on[a.POWER]=function(t){return{A:4*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESERVE_BATTERIES),B:0,type:e.LINEAR}},on)},{id:i.STORAGE,name:"Storage Section",category:o.STORAGE,description:"Provides additional storage space",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.REPAIR_STORAGE_MODULE)>0},getCost:(rn={},rn[a.ORE]=function(t){return{A:10,B:1+.5*br(t),type:e.EXPONENTIAL}},rn[a.STONE]=function(t){return{A:10,B:1+.5*br(t),type:e.EXPONENTIAL}},rn),getConsumption:{},getGain:{},getStorage:(an={},an[a.STONE]=function(t){return{A:10,B:0,type:e.LINEAR}},an[a.ORE]=function(t){return{A:10,B:0,type:e.LINEAR}},an[a.BIOMASS]=function(t){return{A:10,B:0,type:e.LINEAR}},an[a.IRON]=function(t){return{A:3,B:0,type:e.LINEAR}},an[a.WOOD]=function(t){return{A:10,B:0,type:e.LINEAR}},an)},{id:i.STORAGE_HUB,name:"Storage Hub",category:o.STORAGE,description:"Provides more storage space, but consumes power",unlockCondition:function(e){return e.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE)>3},getCost:(cn={},cn[a.POWER]=function(t){return{A:30,B:1+.75*br(t)*wr(t),type:e.EXPONENTIAL}},cn[a.ORE]=function(t){return{A:50,B:1+.75*br(t),type:e.EXPONENTIAL}},cn[a.STONE]=function(t){return{A:50,B:1+.75*br(t),type:e.EXPONENTIAL}},cn),getConsumption:(un={},un[a.POWER]=function(t){return{A:.15,B:0,type:e.LINEAR}},un),getGain:{},getStorage:(sn={},sn[a.STONE]=function(t){return{A:50,B:0,type:e.LINEAR}},sn[a.ORE]=function(t){return{A:50,B:0,type:e.LINEAR}},sn[a.BIOMASS]=function(t){return{A:50,B:0,type:e.LINEAR}},sn[a.IRON]=function(t){return{A:15,B:0,type:e.LINEAR}},sn[a.WOOD]=function(t){return{A:50,B:0,type:e.LINEAR}},sn)},{id:i.OXYGEN_COLLECTOR,name:"Oxygen Compressor",category:o.STORAGE,description:"Compresses oxygen for easier storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.OXYGEN_COMPRESSORS)>0},getCost:(ln={},ln[a.POWER]=function(t){return{A:50,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},ln[a.ORE]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},ln[a.STONE]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},ln),getConsumption:(pn={},pn[a.POWER]=function(t){return{A:.4,B:0,type:e.LINEAR}},pn),getGain:{},getStorage:(En={},En[a.OXYGEN]=function(t){return{A:20,B:0,type:e.LINEAR}},En)},{id:i.WATER_PUMP,name:"Water Pump",category:o.INDUSTRIAL,description:"Pumps water from underground to provide a steady supply",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},getCost:(dn={},dn[a.POWER]=function(t){return{A:75,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},dn[a.OXYGEN]=function(t){return{A:12,B:1+.5*br(t),type:e.EXPONENTIAL}},dn[a.STONE]=function(t){return{A:120,B:1+.5*br(t),type:e.EXPONENTIAL}},dn[a.ORE]=function(t){return{A:85,B:1+.5*br(t),type:e.EXPONENTIAL}},dn),getConsumption:(gn={},gn[a.POWER]=function(t){return{A:.3+(1===t.laws.getLawSelected(Zt.WATER_FILTERING)?.3:0),B:0,type:e.LINEAR}},gn),getGain:(fn={},fn[a.WATER]=function(t){return{A:.03,B:0,type:e.LINEAR}},fn),getStorage:(An={},An[a.WATER]=function(t){return{A:1,B:0,type:e.LINEAR}},An),getEffectGain:(Rn={},Rn[O.HEALTHCARE]=function(t){return{A:1===t.laws.getLawSelected(Zt.WATER_FILTERING)?3:0,B:0,type:e.LINEAR}},Rn)},{id:i.WATER_STORAGE,name:"Water Storage",category:o.STORAGE,description:"Provides water storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WATER_PUMPING)>0},getCost:(In={},In[a.POWER]=function(t){return{A:70,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},In[a.ORE]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},In[a.STONE]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},In),getConsumption:(Nn={},Nn[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Nn),getGain:{},getStorage:(yn={},yn[a.WATER]=function(t){return{A:15,B:0,type:e.LINEAR}},yn)},{id:i.BATTERY,name:"Battery",category:o.POWER,description:"Provides power storage",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ELECTROLITES)>0},getCost:(On={},On[a.POWER]=function(t){return{A:20,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},On[a.ORE]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},On[a.WATER]=function(t){return{A:5,B:1+.5*br(t),type:e.EXPONENTIAL}},On),getConsumption:{},getGain:{},getStorage:(mn={},mn[a.POWER]=function(t){return{A:80,B:0,type:e.LINEAR}},mn)},{id:i.LIVING_CABIN,name:"Residential Module",category:o.RESIDENTAL,description:"Provides living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0},getCost:(Ln={},Ln[a.POWER]=function(t){return{A:120,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Ln[a.STONE]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},Ln[a.ORE]=function(t){return{A:80,B:1+.5*br(t),type:e.EXPONENTIAL}},Ln),getConsumption:{},getGain:{},getStorage:{},getMaxColonists:function(t){return{A:2+t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.WOODEN_FURNITURE),B:0,type:e.LINEAR}}},{id:i.METEO_STATION,name:"Meteorology Station",category:o.SCIENCE,description:"Provides 25 research storage and boosts science output by 2% multiplicatively",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0},getCost:(Tn={},Tn[a.POWER]=function(t){return{A:80,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Tn[a.STONE]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},Tn[a.ORE]=function(t){return{A:125,B:1+.5*br(t),type:e.EXPONENTIAL}},Tn),getConsumption:{},getGain:{},getStorage:(hn={},hn[a.RESEARCH]=function(t){return{A:25,B:0,type:e.LINEAR}},hn),getGainMultiplier:(Cn={},Cn[a.RESEARCH]=function(t){return{A:1,B:1.02,type:e.EXPONENTIAL}},Cn)},{id:i.MONUMENT,name:"Monument",category:o.PUBLIC,description:"Provides some aesthetics",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0},getCost:(vn={},vn[a.STONE]=function(t){return{A:820,B:1+.4*br(t),type:e.EXPONENTIAL}},vn[a.ORE]=function(t){return{A:480,B:1+.4*br(t),type:e.EXPONENTIAL}},vn),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(Sn={},Sn[O.AESTHETICS]=function(t){return{A:2,B:0,type:e.LINEAR}},Sn)},{id:i.CLINIC,name:"Clinic",category:o.PUBLIC,description:"Provides basic healthcare service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(Bn={},Bn[a.POWER]=function(t){return{A:250,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Bn[a.STONE]=function(t){return{A:820,B:1+.5*br(t),type:e.EXPONENTIAL}},Bn[a.ORE]=function(t){return{A:680,B:1+.5*br(t),type:e.EXPONENTIAL}},Bn),getConsumption:(Pn={},Pn[a.POWER]=function(t){return{A:.3,B:0,type:e.LINEAR}},Pn),getGain:{},getStorage:(Mn={},Mn[a.RESEARCH]=function(t){return{A:1===t.laws.getLawSelected(Zt.EXPERIMENTAL_MEDICINE)?50:0,B:0,type:e.LINEAR}},Mn),getEffectGain:(_n={},_n[O.HEALTHCARE]=function(t){return{A:10*(1===t.laws.getLawSelected(Zt.EXPERIMENTAL_MEDICINE)?.5:1)*Math.pow(1.05,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_DIAGNOSTICS)),B:0,type:e.LINEAR}},_n)},{id:i.PARK,name:"Park Zone",category:o.PUBLIC,description:"A zone with rich greenery provides a way to relax for your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},getCost:(Un={},Un[a.POWER]=function(t){return{A:150,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Un[a.STONE]=function(t){return{A:120,B:1+.5*br(t),type:e.EXPONENTIAL}},Un[a.WOOD]=function(t){return{A:80,B:1+.5*br(t),type:e.EXPONENTIAL}},Un),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(Gn={},Gn[O.AESTHETICS]=function(t){return{A:5,B:0,type:e.LINEAR}},Gn[O.ENTERTAINMENT]=function(t){return{A:2,B:0,type:e.LINEAR}},Gn)},{id:i.BIO_LAB,category:o.SCIENCE,name:"Bio Laboratory",description:"Provides even more research storage and boost research output by 5% multiplicatively",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0},getCost:(bn={},bn[a.POWER]=function(t){return{A:120,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},bn[a.STONE]=function(t){return{A:1275,B:1+.5*br(t),type:e.EXPONENTIAL}},bn[a.ORE]=function(t){return{A:725,B:1+.5*br(t),type:e.EXPONENTIAL}},bn),getConsumption:(wn={},wn[a.POWER]=function(t){return{A:.75*Dr(t),B:0,type:e.LINEAR}},wn[a.BIOMASS]=function(t){return{A:.4,B:0,type:e.LINEAR}},wn),getGain:{},getStorage:(Xn={},Xn[a.RESEARCH]=function(t){return{A:50*xr(t),B:0,type:e.LINEAR}},Xn),getGainMultiplier:(xn={},xn[a.RESEARCH]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},xn)},{id:i.FOREST_PLANT,name:"Forest Plant",category:o.INDUSTRIAL,description:"Rich forest area that generates oxygen",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BROADLEAVED)>0},getCost:(Dn={},Dn[a.WOOD]=function(t){return{A:20,B:1+.5*br(t),type:e.EXPONENTIAL}},Dn[a.STONE]=function(t){return{A:2.5,B:1+.5*br(t),type:e.EXPONENTIAL}},Dn),getConsumption:(kn={},kn[a.WATER]=function(t){return{A:.01,B:0,type:e.LINEAR}},kn),getGain:(Hn={},Hn[a.OXYGEN]=function(t){return{A:.06*(0===t.laws.getLawSelected(Zt.FOREST_BEHAVOUR)?1:.5),B:0,type:e.LINEAR}},Hn[a.NUTRITION]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FRUIT_TREES),B:0,type:e.LINEAR}},Hn),getGainMultiplier:(Yn={},Yn[a.BIOMASS]=function(t){return{A:t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.NATURAL_ENVIRONMENT),B:1.02,type:e.EXPONENTIAL}},Yn),getStorage:{},getEffectGain:(Wn={},Wn[O.AESTHETICS]=function(t){return{A:1===t.laws.getLawSelected(Zt.FOREST_BEHAVOUR)?2:0,B:0,type:e.LINEAR}},Wn[O.ENTERTAINMENT]=function(t){return{A:2===t.laws.getLawSelected(Zt.FOREST_BEHAVOUR)?2:0,B:0,type:e.LINEAR}},Wn)},{id:i.SMELTER,name:"Smelter",category:o.INDUSTRIAL,description:"Burns wood to smelt ore into metal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Zn={},Zn[a.ORE]=function(t){return{A:600,B:1+.4*br(t),type:e.EXPONENTIAL}},Zn[a.STONE]=function(t){return{A:1250,B:1+.4*br(t),type:e.EXPONENTIAL}},Zn),getConsumption:(Fn={},Fn[a.WOOD]=function(t){return{A:.3,B:0,type:e.LINEAR}},Fn[a.ORE]=function(t){return{A:.8,B:0,type:e.LINEAR}},Fn[a.POWER]=function(t){return{A:1===t.laws.getLawSelected(Zt.ELECTROTHERMAL_SMELTING)?.3:0,B:0,type:e.LINEAR}},Fn),getGain:(jn={},jn[a.IRON]=function(t){return{A:.02*(1===t.laws.getLawSelected(Zt.ELECTROTHERMAL_SMELTING)?1.3:1),B:0,type:e.LINEAR}},jn),getStorage:{}},{id:i.EXPEDITION_CENTER,name:"Expedition Center",category:o.INDUSTRIAL,description:"Dedicated center of exploration provides a 5% multiplicative bonus to your expeditions outcome. Requires power and oxygen",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0&&e.science.scienceResearches.getResearchLevel(I.GEOGRAPHY)>0},getCost:(Kn={},Kn[a.BEAM]=function(t){return{A:2,B:1+.25*br(t),type:e.EXPONENTIAL}},Kn[a.BRICK]=function(t){return{A:4,B:1+.25*br(t),type:e.EXPONENTIAL}},Kn[a.PLATE]=function(t){return{A:1,B:1+.25*br(t),type:e.EXPONENTIAL}},Kn),getConsumption:(Vn={},Vn[a.POWER]=function(t){return{A:.06,B:0,type:e.LINEAR}},Vn[a.OXYGEN]=function(t){return{A:.03,B:0,type:e.LINEAR}},Vn),getGain:{},getStorage:{}},{id:i.WAREHOUSE,name:"Warehouse",category:o.STORAGE,description:"Provides more raw materials storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(qn={},qn[a.BEAM]=function(t){return{A:2,B:1+.25*br(t),type:e.EXPONENTIAL}},qn[a.BRICK]=function(t){return{A:4,B:1+.25*br(t),type:e.EXPONENTIAL}},qn),getConsumption:{},getGain:{},getStorage:(Jn={},Jn[a.STONE]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn[a.ORE]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn[a.BIOMASS]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn[a.IRON]=function(t){return{A:10*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn[a.WOOD]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn[a.PLATINUM]=function(t){return{A:5*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn[a.NUTRITION]=function(t){return{A:3*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},Jn)},{id:i.TANK,name:"Cistern",category:o.STORAGE,description:"Provides oxygen and water storage",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},getCost:(Qn={},Qn[a.POWER]=function(t){return{A:30,B:1+.25*br(t)*wr(t),type:e.EXPONENTIAL}},Qn[a.PLATE]=function(t){return{A:2,B:1+.25*br(t),type:e.EXPONENTIAL}},Qn[a.BRICK]=function(t){return{A:5,B:1+.25*br(t),type:e.EXPONENTIAL}},Qn),getConsumption:{},getGain:{},getStorage:(zn={},zn[a.OXYGEN]=function(t){return{A:25,B:0,type:e.LINEAR}},zn[a.WATER]=function(t){return{A:25,B:0,type:e.LINEAR}},zn)},{id:i.COTTAGE,name:"Cottage",category:o.RESIDENTAL,description:"Provides additional living space for 2 colonists",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COTTAGES)>0},getCost:($n={},$n[a.POWER]=function(t){return{A:80,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},$n[a.BRICK]=function(t){return{A:10,B:1+.5*br(t),type:e.EXPONENTIAL}},$n[a.BEAM]=function(t){return{A:8,B:1+.5*br(t),type:e.EXPONENTIAL}},$n),getConsumption:(ei={},ei[a.POWER]=function(t){return{A:.05,B:0,type:e.LINEAR}},ei),getGain:{},getStorage:{},getMaxColonists:function(t){return{A:2,B:0,type:e.LINEAR}}},{id:i.CINEMA,name:"Cinema",category:o.PUBLIC,description:"Provides additional entertainment for your people",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENTERTAINMENT)>0},getCost:(ti={},ti[a.POWER]=function(t){return{A:380,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},ti[a.BRICK]=function(t){return{A:10,B:1+.5*br(t),type:e.EXPONENTIAL}},ti[a.BEAM]=function(t){return{A:8,B:1+.5*br(t),type:e.EXPONENTIAL}},ti[a.PLATE]=function(t){return{A:5,B:1+.5*br(t),type:e.EXPONENTIAL}},ti),getConsumption:(ni={},ni[a.POWER]=function(t){return{A:.5,B:0,type:e.LINEAR}},ni),getGain:{},getStorage:{},getEffectGain:(ii={},ii[O.ENTERTAINMENT]=function(t){return{A:10,B:0,type:e.LINEAR}},ii)},{id:i.SOCIAL_RESEARCH_CENTER,name:"Social Research Center",category:o.SCIENCE,description:"Provides additional research capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SOCIAL_RESEARCH_CENTER)>0},getCost:(oi={},oi[a.POWER]=function(t){return{A:1200,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},oi[a.BRICK]=function(t){return{A:125,B:1+.5*br(t),type:e.EXPONENTIAL}},oi[a.BEAM]=function(t){return{A:100,B:1+.5*br(t),type:e.EXPONENTIAL}},oi[a.PLATE]=function(t){return{A:25,B:1+.5*br(t),type:e.EXPONENTIAL}},oi),getConsumption:(ri={},ri[a.POWER]=function(t){return{A:1*Dr(t),B:0,type:e.LINEAR}},ri),getGain:{},getStorage:(ai={},ai[a.RESEARCH]=function(t){return{A:225*xr(t),B:0,type:e.LINEAR}},ai),getGainMultiplier:(ci={},ci[a.RESEARCH]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ci)},{id:i.METALLURGY_COMPLEX,name:"Metallurgy Complex",category:o.INDUSTRIAL,description:"Provides bonus to metal output",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ADVANCED_METALLURGY)>0},getCost:(ui={},ui[a.PLATINUM]=function(t){return{A:20,B:1+.5*br(t),type:e.EXPONENTIAL}},ui[a.BRICK]=function(t){return{A:100,B:1+.5*br(t),type:e.EXPONENTIAL}},ui[a.BEAM]=function(t){return{A:25,B:1+.5*br(t),type:e.EXPONENTIAL}},ui[a.PLATE]=function(t){return{A:25,B:1+.5*br(t),type:e.EXPONENTIAL}},ui),getConsumption:(si={},si[a.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},si),getGain:{},getStorage:{},getGainMultiplier:(li={},li[a.IRON]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},li)},{id:i.BUILDING_FACTORY,name:"Building Materials Factory",category:o.INDUSTRIAL,description:"Provides bonus to bricks, beams and plates production",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ADVANCED_METALLURGY)>0},getCost:(pi={},pi[a.BRICK]=function(t){return{A:30,B:1+.5*br(t),type:e.EXPONENTIAL}},pi[a.BEAM]=function(t){return{A:75,B:1+.5*br(t),type:e.EXPONENTIAL}},pi[a.PLATE]=function(t){return{A:5,B:1+.5*br(t),type:e.EXPONENTIAL}},pi),getConsumption:(Ei={},Ei[a.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},Ei),getGain:{},getStorage:{},getGainMultiplier:(di={},di[a.BEAM]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},di[a.BRICK]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},di[a.PLATE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},di[a.WIRE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},di)},{id:i.STORAGE_CONTAINER,name:"Storage Container",category:o.STORAGE,description:"Provides 5% bonus to your materials storage in warehouses",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GERMETISATION)>0},getCost:(gi={},gi[a.POWER]=function(t){return{A:5,B:1+.1*br(t)*wr(t),type:e.EXPONENTIAL}},gi[a.PLATE]=function(t){return{A:5,B:1+.1*br(t),type:e.EXPONENTIAL}},gi[a.RUBBER]=function(t){return{A:5,B:1+.1*br(t),type:e.EXPONENTIAL}},gi),getConsumption:{},getGain:{},getStorage:{}},{id:i.SOLAR_PANEL,category:o.POWER,name:"Solar Panel",description:"Provides power from solar radiation",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},getCost:(fi={},fi[a.PLATE]=function(t){return{A:6,B:1+.3*br(t),type:e.EXPONENTIAL}},fi[a.WIRE]=function(t){return{A:10,B:1+.3*br(t),type:e.EXPONENTIAL}},fi[a.SEMICONDUCTOR]=function(t){return{A:10,B:1+.3*br(t),type:e.EXPONENTIAL}},fi),getConsumption:{},getGain:(Ai={},Ai[a.POWER]=function(t){return{A:.4*Math.pow(1.1,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_PHOTOELEMENTS)),B:0,type:e.LINEAR}},Ai),getStorage:{}},{id:i.SHRINE,category:o.PUBLIC,name:"Shrine",description:"Provides some religious service",unlockCondition:function(e){var t;return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0&&((null===(t=L.find((function(e){return e.id===O.RELIGION})))||void 0===t?void 0:t.unlockCondition(e))||!1)},getCost:(Ri={},Ri[a.BEAM]=function(t){return{A:50,B:1+.3*br(t),type:e.EXPONENTIAL}},Ri[a.STONE]=function(t){return{A:1e3,B:1+.3*br(t),type:e.EXPONENTIAL}},Ri),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(Ii={},Ii[O.RELIGION]=function(t){return{A:3,B:0,type:e.LINEAR}},Ii)},{id:i.DATA_CENTER,name:"Data Center",category:o.SCIENCE,description:"Provides additional research capacity and generation",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.COMPUTERS)>0},getCost:(Ni={},Ni[a.POWER]=function(t){return{A:1500,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Ni[a.BRICK]=function(t){return{A:125,B:1+.5*br(t),type:e.EXPONENTIAL}},Ni[a.COMPUTER]=function(t){return{A:20,B:1+.5*br(t),type:e.EXPONENTIAL}},Ni[a.WIRE]=function(t){return{A:75,B:1+.5*br(t),type:e.EXPONENTIAL}},Ni),getConsumption:(yi={},yi[a.POWER]=function(t){return{A:2*Dr(t),B:0,type:e.LINEAR}},yi),getGain:{},getStorage:(Oi={},Oi[a.RESEARCH]=function(t){return{A:675*xr(t),B:0,type:e.LINEAR}},Oi),getGainMultiplier:(mi={},mi[a.RESEARCH]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},mi)},{id:i.APARTMENT,name:"Apartment",category:o.RESIDENTAL,description:"Provides additional living space for 5 colonists",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(Li={},Li[a.POWER]=function(t){return{A:1280,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Li[a.BRICK]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},Li[a.WIRE]=function(t){return{A:50,B:1+.5*br(t),type:e.EXPONENTIAL}},Li),getConsumption:(Ti={},Ti[a.POWER]=function(t){return{A:.05,B:0,type:e.LINEAR}},Ti),getGain:{},getStorage:{},getMaxColonists:function(t){return{A:5,B:0,type:e.LINEAR}}},{id:i.TEMPLE,category:o.PUBLIC,name:"Temple",description:"Great building devoted to the Gods. Significantly boosts your religion service",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0},getCost:(hi={},hi[a.BRICK]=function(t){return{A:750,B:1+.5*br(t),type:e.EXPONENTIAL}},hi[a.BEAM]=function(t){return{A:500,B:1+.5*br(t),type:e.EXPONENTIAL}},hi[a.PLATINUM]=function(t){return{A:500,B:1+.5*br(t),type:e.EXPONENTIAL}},hi),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(Ci={},Ci[O.RELIGION]=function(t){return{A:10,B:0,type:e.LINEAR}},Ci)},{id:i.PANDEMIC_RESEARCH_CENTER,name:"Pandemic Research Center",category:o.PUBLIC,description:"Researches viruses and other diseases. Each level decrease colony healthcare requirements by 5%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0},getCost:(vi={},vi[a.POWER]=function(t){return{A:3280,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},vi[a.BRICK]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},vi[a.PLASTICS]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},vi[a.RUBBER]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},vi),getConsumption:(Si={},Si[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Si),getGain:{},getStorage:{}},{id:i.ADMINISTRATIVE_CENTER,name:"Administrative Service Center",category:o.PUBLIC,description:"Bureaucratic center of your colony. Each level decrease public services requirements of your people by 2%",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},getCost:(Bi={},Bi[a.POWER]=function(t){return{A:3280,B:1+.5*br(t)*wr(t),type:e.EXPONENTIAL}},Bi[a.BRICK]=function(t){return{A:180,B:1+.5*br(t),type:e.EXPONENTIAL}},Bi[a.BEAM]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},Bi[a.PLASTICS]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},Bi),getConsumption:(Pi={},Pi[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Pi),getGain:{},getStorage:{}},{id:i.ELECTRONICS_FACTORY,name:"Electronics Factory",category:o.INDUSTRIAL,description:"Provides bonus to wires, semiconductors and computers production",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0},getCost:(Mi={},Mi[a.BRICK]=function(t){return{A:30,B:1+.5*br(t),type:e.EXPONENTIAL}},Mi[a.SEMICONDUCTOR]=function(t){return{A:15,B:1+.5*br(t),type:e.EXPONENTIAL}},Mi[a.WIRE]=function(t){return{A:5,B:1+.5*br(t),type:e.EXPONENTIAL}},Mi),getConsumption:(_i={},_i[a.POWER]=function(t){return{A:1,B:0,type:e.LINEAR}},_i),getGain:{},getStorage:{},getGainMultiplier:(Ui={},Ui[a.WIRE]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ui[a.COMPUTER]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ui[a.SEMICONDUCTOR]=function(t){return{A:1,B:1.03,type:e.EXPONENTIAL}},Ui)},{id:i.SOLAR_SATELLITE,category:r.ORBIT,name:"Satellite Solar Panel",description:"Provides power from solar radiation. More efficient comparing to planet surface analog",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0},getCost:(Gi={},Gi[a.ROCKET_ENGINE]=function(t){return{A:1*Xr(t),B:1+.3*br(t),type:e.EXPONENTIAL}},Gi[a.WIRE]=function(t){return{A:5,B:1+.3*br(t),type:e.EXPONENTIAL}},Gi[a.SEMICONDUCTOR]=function(t){return{A:5,B:1+.3*br(t),type:e.EXPONENTIAL}},Gi),getConsumption:{},getGain:(bi={},bi[a.POWER]=function(t){return{A:1.5*Math.pow(1.1,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.BETTER_PHOTOELEMENTS)),B:0,type:e.LINEAR}},bi),getStorage:(wi={},wi[a.POWER]=function(t){return{A:25,B:0,type:e.LINEAR}},wi)},{id:i.ORBITAL_TOURISM_CENTER,category:r.ORBIT,name:"Orbital Tourism Center",description:"Small space station that provides some entertainment and aesthetics to your people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RADIATION_STUDY)>0},getCost:(Xi={},Xi[a.ROCKET_ENGINE]=function(t){return{A:5*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},Xi[a.COMPUTER]=function(t){return{A:25,B:1+.5*br(t),type:e.EXPONENTIAL}},Xi[a.RUBBER]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},Xi),getConsumption:(xi={},xi[a.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},xi),getGain:{},getStorage:{},getEffectGain:(Di={},Di[O.AESTHETICS]=function(t){return{A:8*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FASTER_ROCKETS)),B:0,type:e.LINEAR}},Di[O.ENTERTAINMENT]=function(t){return{A:8*(1+.5*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FASTER_ROCKETS)),B:0,type:e.LINEAR}},Di)},{id:i.SPACE_TELESCOPE,category:r.ORBIT,name:"Space Telescope",description:"Provides research capacity bonus",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.ASTROPHYSICS)>0},getCost:(ki={},ki[a.ROCKET_ENGINE]=function(t){return{A:1*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},ki[a.PLASTICS]=function(t){return{A:25,B:1+.5*br(t),type:e.EXPONENTIAL}},ki[a.RUBBER]=function(t){return{A:50,B:1+.5*br(t),type:e.EXPONENTIAL}},ki),getConsumption:(Hi={},Hi[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Hi),getGain:{},getStorage:(Yi={},Yi[a.RESEARCH]=function(t){return{A:200*Math.pow(1.4,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GRAVITATIONAL_LENSING)),B:0,type:e.LINEAR}},Yi),getEffectGain:{}},{id:i.ICE_MELTING_STATION,category:r.MOON,name:"Ice Melting Station",description:"Melts ice on your cold satellite to obtain water",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(Wi={},Wi[a.ROCKET_ENGINE]=function(t){return{A:15*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},Wi[a.COMPUTER]=function(t){return{A:25,B:1+.5*br(t),type:e.EXPONENTIAL}},Wi[a.RUBBER]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},Wi[a.BRICK]=function(t){return{A:250,B:1+.5*br(t),type:e.EXPONENTIAL}},Wi),getConsumption:(Zi={},Zi[a.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},Zi),getGain:(Fi={},Fi[a.WATER]=function(t){return{A:.3,B:0,type:e.LINEAR}},Fi),getStorage:{},getEffectGain:{}},{id:i.FUEL_FACTORY,category:r.MOON,name:"Fuel Factory",description:"Move toxic fuel production outside of your planet to avoid ecology restrictions and enlarge your fuel production capabilities",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(ji={},ji[a.ROCKET_ENGINE]=function(t){return{A:25*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},ji[a.SEMICONDUCTOR]=function(t){return{A:125,B:1+.5*br(t),type:e.EXPONENTIAL}},ji[a.PLASTICS]=function(t){return{A:150,B:1+.5*br(t),type:e.EXPONENTIAL}},ji[a.PLATINUM]=function(t){return{A:250,B:1+.5*br(t),type:e.EXPONENTIAL}},ji),getConsumption:(Ki={},Ki[a.POWER]=function(t){return{A:2,B:0,type:e.LINEAR}},Ki),getGain:{},getGainMultiplier:(Vi={},Vi[a.FUEL]=function(t){return{A:1,B:1.05,type:e.EXPONENTIAL}},Vi),getStorage:{},getEffectGain:{}},{id:i.NANOBOTS_FACTORY,name:"Nanobots Factory",category:r.MOON,description:"Each level provides 3% bonus to all your crafting productions",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.NANO_BOTS)>0&&e.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0},getCost:(qi={},qi[a.ROCKET_ENGINE]=function(t){return{A:20*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},qi[a.COMPUTER]=function(t){return{A:50,B:1+.5*br(t),type:e.EXPONENTIAL}},qi[a.PLATINUM]=function(t){return{A:225,B:1+.5*br(t),type:e.EXPONENTIAL}},qi[a.WIRE]=function(t){return{A:75,B:1+.5*br(t),type:e.EXPONENTIAL}},qi),getConsumption:(Ji={},Ji[a.POWER]=function(t){return{A:3,B:0,type:e.LINEAR}},Ji),getGain:{},getStorage:{},getGainMultiplier:{}},{id:i.ZOO,name:"Zoo",category:o.PUBLIC,description:"Place where people can enjoy watching animals similar to ones they saw before on Earth",unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GENES_MODIFICATION)>0},getCost:(Qi={},Qi[a.BRICK]=function(t){return{A:1e3,B:1+.5*br(t),type:e.EXPONENTIAL}},Qi[a.RUBBER]=function(t){return{A:400,B:1+.5*br(t),type:e.EXPONENTIAL}},Qi[a.PLATE]=function(t){return{A:500,B:1+.5*br(t),type:e.EXPONENTIAL}},Qi),getConsumption:(zi={},zi[a.POWER]=function(t){return{A:.5,B:0,type:e.LINEAR}},zi[a.WATER]=function(t){return{A:.2,B:0,type:e.LINEAR}},zi[a.NUTRITION]=function(t){return{A:.2,B:0,type:e.LINEAR}},zi),getGain:{},getStorage:{},getEffectGain:($i={},$i[O.ENTERTAINMENT]=function(t){return{A:10,B:0,type:e.LINEAR}},$i)},{id:i.SMELTING_FACTORY,name:"Smelting Complex",category:r.AID,description:"Uses ore and power to produce big amount of metal. Produces a lot pollution, so placing it on uninhabited place is preferred",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RELATIVITY_PHYSICS)>0},getCost:(eo={},eo[a.ROCKET_ENGINE]=function(t){return{A:40*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},eo[a.STONE]=function(t){return{A:1250,B:1+.5*br(t),type:e.EXPONENTIAL}},eo),getConsumption:(to={},to[a.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},to[a.ORE]=function(t){return{A:10,B:0,type:e.LINEAR}},to),getGain:(no={},no[a.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},no),getStorage:{}},{id:i.SPACE_STORAGE_HUB,name:"Space Storage Hub",category:r.AID,description:"Huge storage building.",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RELATIVITY_PHYSICS)>0},getCost:(io={},io[a.ROCKET_ENGINE]=function(t){return{A:30*Xr(t),B:1+.25*br(t),type:e.EXPONENTIAL}},io[a.PLATE]=function(t){return{A:10,B:1+.25*br(t),type:e.EXPONENTIAL}},io[a.WIRE]=function(t){return{A:10,B:1+.25*br(t),type:e.EXPONENTIAL}},io),getConsumption:{},getGain:{},getStorage:(oo={},oo[a.STONE]=function(t){return{A:125*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},oo[a.ORE]=function(t){return{A:125*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},oo[a.BIOMASS]=function(t){return{A:125*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},oo[a.IRON]=function(t){return{A:50*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},oo[a.WOOD]=function(t){return{A:125*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},oo[a.PLATINUM]=function(t){return{A:25*(1+.05*t.landingZone.landingZoneBuildings.getBuildingLevel(i.STORAGE_CONTAINER))*(1+1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.MULTISTORE_WAREHOUSES)),B:0,type:e.LINEAR}},oo)},{id:i.PLUTO_MONUMENT,name:"Pluto Monument",category:r.AID,description:"This hostile and hot planet, literally made of iron will remind your people of the god of the Underground. Requires a lot resources, but provides significant motivation to religious people",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.RELATIVITY_PHYSICS)>0},getCost:(ro={},ro[a.ROCKET_ENGINE]=function(t){return{A:30*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},ro[a.PLATE]=function(t){return{A:800,B:1+.5*br(t),type:e.EXPONENTIAL}},ro[a.PLATINUM]=function(t){return{A:1200,B:1+.5*br(t),type:e.EXPONENTIAL}},ro),getConsumption:{},getGain:{},getStorage:{},getEffectGain:(ao={},ao[O.RELIGION]=function(t){return{A:15,B:0,type:e.LINEAR}},ao)},{id:i.FLORA_PLANT,name:"Flora Plant",category:r.VENUS,description:"Hot and wet climate allows you to produce more biomass here. Requires power however to operate",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_ENERGY_PHYSICS)>0},getCost:(co={},co[a.ROCKET_ENGINE]=function(t){return{A:140*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},co[a.PLATE]=function(t){return{A:1250,B:1+.5*br(t),type:e.EXPONENTIAL}},co[a.BEAM]=function(t){return{A:1250,B:1+.5*br(t),type:e.EXPONENTIAL}},co),getConsumption:(uo={},uo[a.POWER]=function(t){return{A:5,B:0,type:e.LINEAR}},uo),getGain:(so={},so[a.BIOMASS]=function(t){return{A:.4,B:0,type:e.LINEAR}},so),getStorage:{}},{id:i.TROPIC_FOREST_PLANT,name:"Tropic Forest Plant",category:r.VENUS,description:"Plant large forest plantations to boost your foresters. Each level provides 2% bonus to wood output, but consumes biomass and water",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.HIGH_ENERGY_PHYSICS)>0},getCost:(lo={},lo[a.ROCKET_ENGINE]=function(t){return{A:130*Xr(t),B:1+.5*br(t),type:e.EXPONENTIAL}},lo[a.BIOMASS]=function(t){return{A:5e3,B:1+.5*br(t),type:e.EXPONENTIAL}},lo),getConsumption:(po={},po[a.BIOMASS]=function(t){return{A:.5,B:0,type:e.LINEAR}},po[a.WATER]=function(t){return{A:.3,B:0,type:e.LINEAR}},po),getGainMultiplier:(Eo={},Eo[a.WOOD]=function(t){return{A:1,B:1.02,type:e.EXPONENTIAL}},Eo),getGain:{},getStorage:{}}],Wr=function(e){var t,n,i,o,r,c,u,s,l,p,E,d,g,f,A,R,I,N,y,O,m,L,T=((t={})[a.POWER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base battery",value:20}],multiplier:[]}},t[a.STONE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[a.ORE]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[a.BIOMASS]={max:{linear:[{id:"base",label:"Ship hold",value:20}],multiplier:[]},income:{linear:[],multiplier:[],consumption:[]}},t[a.OXYGEN]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.WATER]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.005*Gc.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.NUTRITION]={income:{linear:[],multiplier:[],consumption:[{id:"population",label:"Population",value:.1*Gc.colony.colonists}]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.RESEARCH]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.IRON]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.PLATINUM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.WOOD]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[{id:"base",label:"Base",value:10}],multiplier:[]}},t[a.BEAM]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.BRICK]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.PLATE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.WIRE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.RUBBER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.PLASTICS]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.FUEL]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.SEMICONDUCTOR]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.COMPUTER]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.ROCKET_ENGINE]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t[a.KNOWLEDGE_POINT]={income:{linear:[],multiplier:[],consumption:[]},max:{linear:[],multiplier:[]}},t);for(var h in T)(n=T[h].income.linear).push.apply(n,Gc.landingZone.landingZoneBuildings.getResourceBeingProduced(h)),(i=T[h].income.multiplier).push.apply(i,Gc.landingZone.landingZoneBuildings.getResourceMultiplier(h)),null===(d=T[h].income.consumption)||void 0===d||d.push.apply(d,Gc.landingZone.landingZoneBuildings.getResourceBeingConsumed(h)),null===(g=T[h].max.linear)||void 0===g||g.push.apply(g,Gc.landingZone.landingZoneBuildings.getResourceBeingStored(h)),(o=T[h].income.linear).push.apply(o,Gc.landingZone.landingZoneUpgrades.getGain(h)),(r=T[h].income.multiplier).push.apply(r,Gc.landingZone.landingZoneUpgrades.getGainMultiplier(h)),null===(f=T[h].max.linear)||void 0===f||f.push.apply(f,Gc.landingZone.landingZoneUpgrades.getCapacity(h)),null===(A=T[h].max.multiplier)||void 0===A||A.push.apply(A,Gc.landingZone.landingZoneUpgrades.getCapacityMult(h)),(c=T[h].income.linear).push.apply(c,Gc.colony.colonyJobs.getResourceBeingProduced(h)),null===(R=T[h].income.consumption)||void 0===R||R.push.apply(R,Gc.colony.colonyJobs.getResourceBeingConsumed(h)),null===(I=T[h].income.multiplier)||void 0===I||I.push.apply(I,Gc.colony.colonyJobs.getResourceBeingMultiplied(h)),(u=T[h].income.linear).push.apply(u,Gc.crafting.craftingJobs.getResourceBeingProduced(h)),null===(N=T[h].income.consumption)||void 0===N||N.push.apply(N,Gc.crafting.craftingJobs.getResourceBeingConsumed(h)),(s=T[h].income.linear).push.apply(s,Gc.laws.getResourceBeingProduced(h)),(l=T[h].income.multiplier).push.apply(l,Gc.laws.getResourceMultiplier(h)),null===(y=T[h].income.consumption)||void 0===y||y.push.apply(y,Gc.laws.getResourceBeingConsumed(h)),null===(O=T[h].max.linear)||void 0===O||O.push.apply(O,Gc.laws.getResourceBeingStored(h)),(p=T[h].income.linear).push.apply(p,Gc.prestige.transmitKnowledge.getResourceBeingProduced(h)),(E=T[h].income.multiplier).push.apply(E,Gc.prestige.transmitKnowledge.getResourceMultiplier(h)),null===(m=T[h].max.linear)||void 0===m||m.push.apply(m,Gc.prestige.transmitKnowledge.getResourceBeingStored(h)),null===(L=T[h].max.multiplier)||void 0===L||L.push.apply(L,Gc.prestige.transmitKnowledge.getCapacityMult(h));return T},Zr=function(){return Zr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zr.apply(this,arguments)},Fr=function(){function e(){this.cachedBreakdown={},this.resourcesStatus=m.map((function(e){return{id:e.id,amount:0,balance:0,max:1,hasCapacityLimit:!0,potentialEfficiency:1}}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getResourceEfficiency=function(t){return t in e.lackEfficiencyResources?null==e.lackEfficiencyResources[t]?1:e.lackEfficiencyResources[t]:1},e.prototype.addResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].amount=this.resourcesStatus[n].amount+t,this.resourcesStatus[n].max>0&&(this.resourcesStatus[n].amount=Math.min(this.resourcesStatus[n].amount,this.resourcesStatus[n].max)),this.resourcesStatus[n].amount<0&&(this.resourcesStatus[n].amount=0)},e.prototype.setResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].amount=t},e.prototype.subtractResource=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));n<0||(this.resourcesStatus[n].amount=this.resourcesStatus[n].amount-t)},e.prototype.subtractResourceBatch=function(e){var t=this;e.forEach((function(e){t.subtractResource(e.id,e.amount)}))},e.prototype.setBalance=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].balance=t},e.prototype.setCapacity=function(e,t){var n=this.resourcesStatus.findIndex((function(t){return t.id===e}));if(n<0){n=this.resourcesStatus.length;var i=m.find((function(t){return t.id===e}));if(!i)return;this.resourcesStatus.push({id:e,amount:0,balance:0,hasCapacityLimit:i.hasCapacityLimit,max:i.hasCapacityLimit?0:-1,potentialEfficiency:1})}this.resourcesStatus[n].max=t},e.prototype.saveBalances=function(){var e=this;Gc.colony.colonyEffects.getBreakdowns();var t=Wr(),n={};m.forEach((function(i){var o,r,a,c;if(i.unlockCondition(Gc)){n[i.id]={max:{income:[],multiplier:[],consumption:[]},income:{income:[],multiplier:[],consumption:[]}};var u=t[i.id].max.linear.reduce((function(e,t){return e+t.value}),0),s=t[i.id].max.multiplier.reduce((function(e,t){return e*t.value}),1);e.setCapacity(i.id,u*s),n[i.id].max.income=t[i.id].max.linear.filter((function(e){return e.value})).map((function(e){return Zr(Zr({},e),{value:"+".concat(e.value.toPrecision(4))})})),n[i.id].max.multiplier=t[i.id].max.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return Zr(Zr({},e),{value:"x".concat(e.value.toPrecision(4))})}));var l=t[i.id].income.linear.reduce((function(e,t){return e+t.value}),0),p=t[i.id].income.multiplier.reduce((function(e,t){return e*t.value}),1),E=(null===(o=t[i.id].income.consumption)||void 0===o?void 0:o.reduce((function(e,t){return e+t.value}),0))||0;if(e.setBalance(i.id,l*p-E),null===(r=n[i.id])||void 0===r||(r.income.income=t[i.id].income.linear.filter((function(e){return e.value})).map((function(e){return Zr(Zr({},e),{value:"+".concat(e.value.toPrecision(4))})}))),null===(a=n[i.id])||void 0===a||(a.income.multiplier=t[i.id].income.multiplier.filter((function(e){return 1!==e.value})).map((function(e){return Zr(Zr({},e),{value:"x".concat(e.value.toPrecision(4))})}))),null===(c=n[i.id])||void 0===c||(c.income.consumption=t[i.id].income.consumption.filter((function(e){return e.value})).map((function(e){return Zr(Zr({},e),{value:"-".concat(e.value.toPrecision(4))})}))),i.hasCapacityLimit){var d=t[i.id].max.linear.reduce((function(e,t){return e+t.value}),0),g=t[i.id].max.multiplier.reduce((function(e,t){return e*t.value}),1);e.setCapacity(i.id,d*g)}}})),this.cachedBreakdown=n},e.prototype.resetEfficiency=function(){e.lackEfficiencyResources={},Gc.landingZone.landingZoneBuildings.resetEfficiency(),Gc.crafting.craftingJobs.resetEfficiency()},e.prototype.assertBalances=function(t){var n;void 0===t&&(t=!1),Gc.colony.colonyEffects.getBreakdowns();var i=Wr(),o={};for(var r in i){var c=i[r].income.linear.reduce((function(e,t){return e+t.value}),0),u=i[r].income.multiplier.reduce((function(e,t){return e*t.value}),1),s=(null===(n=i[r].income.consumption)||void 0===n?void 0:n.reduce((function(e,t){return e+t.value}),0))||0,l=this.getPotentialEfficiency(Math.max(0,this.getResource(r))+c*u,-s);r===a.POWER&&console.log("power: ",c*u,s,l,e.lackEfficiencyResources[r]),o[r]=l<1&&t?0:l}return o},e.prototype.shouldChangeBalances=function(e){return Object.values(e).findIndex((function(e){return e<1}))>-1},e.prototype.applyBalances=function(t){for(var n in t){var i=n;i in e.lackEfficiencyResources&&null!=e.lackEfficiencyResources[i]?e.lackEfficiencyResources[i]*=t[i]:e.lackEfficiencyResources[i]=t[i]}},e.prototype.applyEfficiencies=function(){Gc.landingZone.landingZoneBuildings.adaptEfficiency(),Gc.crafting.craftingJobs.adaptEfficiency()},e.prototype.assertAndApplyBalances=function(){var t=this.assertBalances(),n=0;for(console.log("balancesCalculated: ",t);this.shouldChangeBalances(t)&&n<15;)this.applyBalances(t),this.applyEfficiencies(),t=this.assertBalances(n>10),console.log("iter: ",n,t,e.lackEfficiencyResources[a.POWER]),n++},e.prototype.reassertBalances=function(){this.resetEfficiency(),this.assertAndApplyBalances(),this.saveBalances()},e.prototype.process=function(t){var n=this,i=!1,o="";this.resourcesStatus.forEach((function(e){e.balance<0&&e.balance<-e.amount&&(i=!0,o=e.id)})),i&&(console.log("should re-assert: ",i,o,e.lackEfficiencyResources),this.reassertBalances()),this.resourcesStatus.forEach((function(e){n.addResource(e.id,e.balance*t)}))},e.prototype.getResource=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].amount},e.prototype.getBalance=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].balance},e.prototype.getPotentialEfficiency=function(e,t){return t>=0?1:Math.min(1,-Math.max(0,e)/t)},e.prototype.getBatchObject=function(){return this.resourcesStatus.reduce((function(e,t){return e[t.id]=t.amount,e}),{})},e.prototype.getBatchBalanceObject=function(){return this.resourcesStatus.reduce((function(e,t){return e[t.id]=t.balance,e}),{})},e.prototype.getResourceBalance=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].balance},e.prototype.getResourceCap=function(e){var t=this.resourcesStatus.findIndex((function(t){return t.id===e}));return t<0?0:this.resourcesStatus[t].max},e.prototype.assertEnought=function(e,t,n){var i=[];return e.forEach((function(e){var n="0";if(t[e.id]||(t[e.id]=0),e.amount&&e.amount>0&&t[e.id]>0){var o=100*t[e.id]/e.amount;o>100&&(o=100),n=o.toPrecision(3)}e.amount>0&&i.push({id:e.id,name:e.name,amount:v(e.amount),percentage:n,maxAmount:v(e.max),isAvailable:e.max>=1,eta:C(e.eta)})})),i},e.prototype.exportData=function(){return this.resourcesStatus.map((function(e){return{id:e.id,amount:e.amount}}))},e.prototype.importData=function(e){this.resourcesStatus=e.map((function(e){var t=m.find((function(t){return t.id===e.id}));if(!t)throw new Error("Invalid resource");return{id:e.id,amount:e.amount,balance:0,hasCapacityLimit:t.hasCapacityLimit,max:0,potentialEfficiency:1}}))},e.prototype.dataToUI=function(){var e=this;return{resources:m.map((function(t){var n,i,o=e.resourcesStatus.find((function(e){return e.id===t.id}));return{id:t.id,name:t.name,amount:v((null==o?void 0:o.amount)||0),balance:v((null==o?void 0:o.balance)||0),isUnlocked:t.unlockCondition(Gc),max:v((null==o?void 0:o.max)||0),toFullPercentage:(o&&o.max>0?o.amount/o.max:0).toPrecision(3),hasMaxLimit:t.hasCapacityLimit,breakdown:e.cachedBreakdown[t.id],toFullTime:(null==o?void 0:o.max)&&(null==o?void 0:o.balance)>0?C((o.max-o.amount)/o.balance):"",toEmptyTime:o&&(null==o?void 0:o.balance)<0?C(-(null==o?void 0:o.amount)/(null==o?void 0:o.balance)):"",isSecondary:null!==(n=t.isCraftable)&&void 0!==n&&n,isHidden:null!==(i=t.isHidden)&&void 0!==i&&i,isNegative:((null==o?void 0:o.balance)||0)<0||(e.getResourceEfficiency(t.id)||0)<1,isCapped:!!o&&o.max>0&&o.max<=o.amount+2*Gc.dT*o.balance}}))}},e.prototype.reset=function(){this.resourcesStatus=[]},e.lackEfficiencyResources={},e}(),jr=Fr.getInstance(),Kr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vr=function(){return Vr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vr.apply(this,arguments)},qr=function(e){function t(){var t=e.call(this)||this;return t.buildings=[],t.workDispatcher.on("[landing-zone] do build",(function(e){console.log("do upgrade",e),t.doBuild(e.id)})),t.workDispatcher.on("[landing-zone] set building amount",(function(e){console.log("set amount",e),t.setActiveAmount(e.id,e.amount)})),t}return Kr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.buildings=e},t.prototype.exportData=function(){return this.buildings},t.prototype.dataToUI=function(){var e=this;return{list:Yr.map((function(t){return e.processToUI(t)}))}},t.prototype.getBuildingLevel=function(e){var t;return(null===(t=this.buildings.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.getBuildingActiveLevel=function(e){var t;return(null===(t=this.buildings.find((function(t){return t.id===e})))||void 0===t?void 0:t.activeAmount)||0},t.prototype.getPreffix=function(e){return Object.values(o).includes(e.category)?"planet:landing-zone":Object.values(r).includes(e.category)?"space":""},t.prototype.processToUI=function(e){var t=this.buildings.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0,efficiency:1,activeAmount:0},this.buildings.push(t));var n=h.calcBatchAll(e.getCost,Uc.getInstance(),t.level,Uc.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300),o=n.reduce((function(e,t){return e&&!t.isBlocked}),!0),r=n.reduce((function(e,t){return Math.max(e,t.eta)}),0),a=h.calcBatchAll(e.getConsumption,Uc.getInstance(),0,Uc.getInstance().resources.getBatchObject()),c=h.calcBatch(e.getGain,Uc.getInstance(),0),u=e.getStorage?h.calcBatch(e.getStorage,Uc.getInstance(),0):[],s=e.getGainMultiplier?h.calcBatch(e.getGainMultiplier,Uc.getInstance(),1):[],l=e.getEffectConsumption?h.calcBatchAll(e.getEffectConsumption,Uc.getInstance(),0,Uc.getInstance().resources.getBatchObject()):[],p=e.getEffectGain?h.calcBatch(e.getEffectGain,Uc.getInstance(),0):[],E=e.unlockCondition(Gc);return E&&t.level<=0&&Gc.newNotifications.registerNotification("".concat(this.getPreffix(e),":building:").concat(e.category,":").concat(e.id)),{id:e.id,name:e.name,description:e.description,isUnlocked:E,isAvailable:i>=1,cost:Uc.getInstance().resources.assertEnought(n,Uc.getInstance().resources.getBatchObject(),Uc.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"100",consume:a.filter((function(e){return e.amount})).map((function(e){return Vr(Vr({},e),{amount:v(e.amount)})})),gain:c.filter((function(e){return e.amount})).map((function(e){return Vr(Vr({},e),{amount:v(e.amount)})})),gainMult:s.filter((function(e){return e.amount})).map((function(e){return Vr(Vr({},e),{amount:"x".concat(v(e.amount))})})),consumeEffect:l.filter((function(e){return e.amount})).map((function(e){return Vr(Vr({},e),{amount:v(e.amount)})})),gainEffect:p.filter((function(e){return e.amount})).map((function(e){return Vr(Vr({},e),{amount:v(e.amount)})})),max:u.filter((function(e){return e.amount})).map((function(e){return Vr(Vr({},e),{amount:v(e.amount)})})),level:t.level,activeAmount:t.activeAmount,category:e.category,isBlocked:!o,etaNum:r}},t.prototype.setActiveAmount=function(e,t){var n=this.buildings.findIndex((function(t){return t.id===e}));n<0||(this.buildings[n].activeAmount=Math.min(t,this.buildings[n].level),Gc.resources.reassertBalances())},t.prototype.doBuild=function(e){var t=Yr.find((function(t){return t.id===e}));if(t){var n=this.buildings.findIndex((function(t){return t.id===e}));n<0&&(n=this.buildings.length,this.buildings.push({id:e,level:0,efficiency:1,activeAmount:0}));var i=h.calcBatchAll(t.getCost,Uc.getInstance(),this.buildings[n].level,Uc.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.buildings[n].level++,this.buildings[n].activeAmount++,console.log("costs: ",i),Uc.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.getEffectGain=function(e){var t=Yr.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectGain[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=Yr.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectMultiplier[e],i.activeAmount,1)*i.efficiency;a&&n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getEffectBeingConsumed=function(e){var t=Yr.filter((function(t){var n;return!!(null===(n=t.getEffectConsumption)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectConsumption[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=Yr.filter((function(t){return!!t.getGain[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=h.calculate(Gc,o.getGain[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getResourceMultiplier=function(e){var t=Yr.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.buildings.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getGainMultiplier[e],i.activeAmount,1)*i.efficiency;console.log("0--0",e,r.id,a),a&&n.push({label:"Building: ".concat(r.name),value:a,id:"building-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingConsumed=function(e){var t=Yr.filter((function(t){return!!t.getConsumption[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=h.calculate(Gc,o.getConsumption[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getResourceBeingStored=function(e){var t=Yr.filter((function(t){return!!t.getStorage[e]})),n=[];return this.buildings.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=h.calculate(Gc,o.getStorage[e],0,i.activeAmount)*i.efficiency;n.push({label:"Building: ".concat(o.name),value:r,id:"building-".concat(o.id)})}}),0),n},t.prototype.getColonistsCap=function(){var e=Yr.filter((function(e){return!!e.getMaxColonists})),t=[];return this.buildings.forEach((function(n){var i=e.find((function(e){return e.id===n.id}));if(i&&i.getMaxColonists){var o=h.calculate(Gc,i.getMaxColonists,0,n.activeAmount)*n.efficiency;t.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),t},t.prototype.getHappinessBonus=function(){var e=Yr.filter((function(e){return!!e.getHappinessBonus})),t=[];return this.buildings.forEach((function(n){var i=e.find((function(e){return e.id===n.id}));if(i&&i.getHappinessBonus){var o=h.calculate(Gc,i.getHappinessBonus,0,n.activeAmount)*n.efficiency;t.push({label:"Building: ".concat(i.name),value:o,id:"building-".concat(i.id)})}}),0),t},t.prototype.preProcess=function(e){var t=this;this.buildings.forEach((function(e,n){t.buildings[n].efficiency=1}))},t.prototype.resetEfficiency=function(){var e=this;this.buildings.forEach((function(t,n){e.buildings[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=Fr.lackEfficiencyResources,n=Object.keys(t);this.buildings.forEach((function(i,o){var r=Yr.find((function(e){return e.id===i.id}));if(r){var a=Object.keys(r.getConsumption);n.filter((function(e){return a.includes(e)})).forEach((function(n){h.calculate(Gc,r.getConsumption[n],0,i.activeAmount)>0&&(e.buildings[o].efficiency=Math.min(e.buildings[o].efficiency,t[n]||0))}))}}))},t.prototype.process=function(e){},t.prototype.reset=function(){this.buildings=[]},t}(R),Jr=qr.getInstance(),Qr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zr=function(e){function t(){var t=e.call(this)||this;return t.landingZoneActions=Ro,t.landingZoneUpgrades=mo,t.landingZoneBuildings=Jr,t}return Qr(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.landingZoneActions.importData(e.actions),this.landingZoneUpgrades.importData(e.upgrades),this.landingZoneBuildings.importData(e.buildings)},t.prototype.exportData=function(){return{actions:this.landingZoneActions.exportData(),upgrades:this.landingZoneUpgrades.exportData(),buildings:this.landingZoneBuildings.exportData()}},t.prototype.dataToUI=function(){return{actions:this.landingZoneActions.dataToUI(),upgrades:this.landingZoneUpgrades.dataToUI(),buildings:this.landingZoneBuildings.dataToUI()}},t.prototype.preProcess=function(e){this.landingZoneBuildings.preProcess(e)},t.prototype.process=function(e){this.landingZoneActions.process(e),this.landingZoneBuildings.process(e)},t.prototype.reset=function(){this.landingZoneActions.reset(),this.landingZoneUpgrades.reset(),this.landingZoneBuildings.reset()},t}(R).getInstance(),$r=[],ea=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ta=function(e){function t(){var t=e.call(this)||this;return t.milestonesState=[],t}return ea(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.milestonesState=e},t.prototype.exportData=function(){return this.milestonesState},t.prototype.dataToUI=function(){return this.milestonesState},t.prototype.milestoneUnlocked=function(e){return!!this.milestonesState.find((function(t){return t.id===e&&t.isReached}))},t.prototype.process=function(e){var t=this;$r.filter((function(e){return!t.milestonesState.find((function(t){return t.id===e.id&&t.isReached}))})).forEach((function(e){e.unlockCondition(Gc)&&t.milestonesState.push({id:e.id,isReached:!0})}))},t}(R).getInstance(),na=function(e){return e.colony.getColonistsHappiness()},ia=function(e){var t=e.laws.getLawSelected(Zt.CLEAR_CUTTING),n=1;return 1===t&&(n*=1.2),2===t&&(n*=.8),n},oa=[{id:y.MINER,unlockCondition:function(e){return!0},name:"Miner",description:"Works at the mine to gather ore",getGain:(Lo={},Lo[a.ORE]=function(t){return{A:.5*na(t),B:0,type:e.LINEAR}},Lo[a.PLATINUM]=function(t){return{A:(t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.PLATINUM_MINING)?.01:0)*na(t),B:0,type:e.LINEAR}},Lo)},{id:y.QUARRYMAN,unlockCondition:function(e){return!0},name:"Quarrymen",description:"Works at the quarry to mine stone",getGain:(To={},To[a.STONE]=function(t){return{A:.5*na(t),B:0,type:e.LINEAR}},To)},{id:y.SCIENTIST,unlockCondition:function(e){return e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0},name:"Researcher",description:"Works at the lab to generate research",getGain:(ho={},ho[a.RESEARCH]=function(t){return{A:.04*na(t),B:0,type:e.LINEAR}},ho)},{id:y.FARMER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0},name:"Farmer",description:"Tills the soil and plants crops to generate nutrition",getGain:(Co={},Co[a.NUTRITION]=function(t){return{A:(.15+.05*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING))*na(t),B:0,type:e.LINEAR}},Co),getConsumption:(vo={},vo[a.BIOMASS]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING),B:0,type:e.LINEAR}},vo)},{id:y.FORESTER,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},name:"Forester",description:"Maintains forests, plants and cuts wood",getGain:(So={},So[a.WOOD]=function(t){return{A:.05*na(t)*ia(t),B:0,type:e.LINEAR}},So),getConsumption:(Bo={},Bo[a.BIOMASS]=function(t){return{A:.1*t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.FERTILIZING),B:0,type:e.LINEAR}},Bo),getEffectGain:(Po={},Po[O.AESTHETICS]=function(t){return{A:1*(2===t.laws.getLawSelected(Zt.CLEAR_CUTTING)?1:0),B:0,type:e.LINEAR}},Po),getEffectConsumption:(Mo={},Mo[O.AESTHETICS]=function(t){return{A:1.5*(1===t.laws.getLawSelected(Zt.CLEAR_CUTTING)?1:0),B:0,type:e.LINEAR}},Mo)},{id:y.ARTISAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.METALLURGY)>0},name:"Artisan",description:"Crafts complex goods out of raw materials or other goods",getGain:{},getConsumption:{}},{id:y.POLICEMAN,unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},name:"Policeman",description:"Patrols the colony and provides security",getGain:{},getConsumption:(_o={},_o[a.NUTRITION]=function(t){return{A:1===t.laws.getLawSelected(Zt.SECURITY_DOTATIONS)?.5:0,B:0,type:e.LINEAR}},_o[a.WATER]=function(t){return{A:1===t.laws.getLawSelected(Zt.SECURITY_DOTATIONS)?.1:0,B:0,type:e.LINEAR}},_o),getEffectGain:(Uo={},Uo[O.SECURITY]=function(t){return{A:4*Math.pow(1.25,t.landingZone.landingZoneUpgrades.getUpgradeLevel(n.SURVEILLANCE_CAMERAS))*(1+.75*(1===t.laws.getLawSelected(Zt.SECURITY_DOTATIONS)?1:0)),B:0,type:e.LINEAR}},Uo)}],ra=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),aa=function(){return aa=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aa.apply(this,arguments)},ca=function(e){function t(){var t=e.call(this)||this;return t.jobs=[],t.freeWorkers=0,t.workDispatcher.on("[colony] assign colonists",(function(e){console.log("set amount",e),t.setAmount(e.id,e.amount)})),t}return ra(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.jobs=e},t.prototype.exportData=function(){return this.jobs},t.prototype.dataToUI=function(){var e=this;return{list:oa.map((function(t){return e.processToUI(t)})),freeWorkers:this.freeWorkers}},t.prototype.getBusyWorkers=function(){return this.jobs.reduce((function(e,t){return e+t.amount}),0)},t.prototype.getWorkersAmount=function(e){var t;return(null===(t=this.jobs.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.jobs.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0,efficiency:1},this.jobs.push(t));var i=e.getConsumption?h.calcBatchAll(e.getConsumption,Uc.getInstance(),0,Uc.getInstance().resources.getBatchObject()):[],o=e.getGain?h.calcBatch(e.getGain,Uc.getInstance(),0):[],r=e.getMultiplier?h.calcBatch(e.getMultiplier,Uc.getInstance(),0):[],a=e.unlockCondition(Gc);return a&&Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0&&(t.amount>0&&Gc.newNotifications.setViewed("planet:colony:jobs:".concat(e.id)),Gc.newNotifications.registerNotification("planet:colony:jobs:".concat(e.id))),{id:e.id,name:e.name,description:e.description,isUnlocked:a,consume:i.filter((function(e){return e.amount})).map((function(e){return aa(aa({},e),{amount:v(e.amount)})})),gain:o.filter((function(e){return e.amount})).map((function(e){return aa(aa({},e),{amount:v(e.amount)})})),multiplier:r.filter((function(e){return e.amount})).map((function(e){return aa(aa({},e),{amount:"x".concat(v(e.amount))})})),amount:t.amount,isAvailable:this.freeWorkers>0,max:this.freeWorkers+t.amount}},t.prototype.setAmount=function(e,t){t=Math.floor(t);var n=this.jobs.findIndex((function(t){return t.id===e}));n<0&&(n=this.jobs.length,this.jobs.push({id:e,amount:0,efficiency:1})),this.jobs[n].amount=Math.min(Math.max(t,0),this.jobs[n].amount+this.freeWorkers),Gc.resources.reassertBalances()},t.prototype.getEffectGain=function(e){var t=oa.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectGain[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=oa.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectMultiplier[e],i.amount,1)*i.efficiency;a&&n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getEffectBeingConsumed=function(e){var t=oa.filter((function(t){var n;return!!(null===(n=t.getEffectConsumption)||void 0===n?void 0:n[e])})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectConsumption)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=oa.filter((function(t){return t.getGain&&!!t.getGain[e]})),n=[],i=Gc.colony.getColonistsHappiness();return console.log("happ: ",i),this.jobs.forEach((function(o){var r,a=t.find((function(e){return e.id===o.id}));if(a&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var c=h.calculate(Gc,a.getGain[e],0,o.amount)*o.efficiency*i;n.push({label:"Job: ".concat(a.name),value:c,id:"job-".concat(a.id)})}}),0),n},t.prototype.getResourceBeingConsumed=function(e){var t=oa.filter((function(t){return t.getConsumption&&!!t.getConsumption[e]})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingMultiplied=function(e){var t=oa.filter((function(t){return t.getMultiplier&&!!t.getMultiplier[e]})),n=[];return this.jobs.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getMultiplier)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getMultiplier[e],0,i.amount)*i.efficiency;n.push({label:"Job: ".concat(r.name),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.resetEfficiency=function(){var e=this;this.jobs.forEach((function(t,n){e.jobs[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=Fr.lackEfficiencyResources,n=Object.keys(t);this.jobs.forEach((function(i,o){var r=oa.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var a=Object.keys(r.getConsumption);n.filter((function(e){return a.includes(e)})).forEach((function(n){e.jobs[o].efficiency=Math.min(e.jobs[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){var t=Gc.colony.colonists-this.getBusyWorkers();if(t<0){for(var n=this.jobs.length-1;n>=0;n--){var i=Math.min(this.jobs[n].amount,-t);if(this.jobs[n].amount-=i,(t+=i)>=0)break}Gc.resources.reassertBalances()}this.freeWorkers=t},t.prototype.reset=function(){this.jobs=[]},t}(R),ua=ca.getInstance(),sa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),la=function(){return la=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},la.apply(this,arguments)},pa=function(e){function t(){var t=e.call(this)||this;return t.happinessEffects={},t.happinessBreakdowns={},t}return sa(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){},t.prototype.exportData=function(){return[]},t.prototype.dataToUI=function(){var e=this;return{effects:L.map((function(t){return e.processToUI(t)})),happiness:this.assertHappiness()}},t.prototype.assertHappiness=function(){return Math.pow(Object.values(this.happinessEffects).reduce((function(e,t){return e*(t/100)}),1),.25)},t.prototype.assertConsumptionMitigation=function(){return Math.pow(.98,Gc.landingZone.landingZoneBuildings.getBuildingActiveLevel(i.ADMINISTRATIVE_CENTER))},t.prototype.getEffectBeingConsumed=function(e){var t=[],n=L.find((function(t){return t.id===e}));if(null==n?void 0:n.getConsumption){var i=n.getConsumption(Gc)*this.assertConsumptionMitigation();t.push({label:"Population",value:i,id:"population"})}return t},t.prototype.getBreakdowns=function(){var e=this,t=function(e){var t,n,i,o,r,a,c,u,s,l,p,E=((t={})[O.SECURITY]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[O.AESTHETICS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[O.ENTERTAINMENT]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[O.HEALTHCARE]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[O.RELIGION]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t[O.WORK_CONDITIONS]={linear:[{id:"basic",label:"Basic",value:100}],multiplier:[],consumption:[]},t);for(var d in E)(n=E[d].linear).push.apply(n,Gc.landingZone.landingZoneBuildings.getEffectGain(d)),(i=E[d].multiplier).push.apply(i,Gc.landingZone.landingZoneBuildings.getEffectMultiplier(d)),null===(u=E[d].consumption)||void 0===u||u.push.apply(u,Gc.landingZone.landingZoneBuildings.getEffectBeingConsumed(d)),(o=E[d].linear).push.apply(o,Gc.colony.colonyJobs.getEffectGain(d)),(r=E[d].multiplier).push.apply(r,Gc.colony.colonyJobs.getEffectMultiplier(d)),null===(s=E[d].consumption)||void 0===s||s.push.apply(s,Gc.colony.colonyJobs.getEffectBeingConsumed(d)),null===(l=E[d].consumption)||void 0===l||l.push.apply(l,Gc.colony.colonyEffects.getEffectBeingConsumed(d)),(a=E[d].linear).push.apply(a,Gc.laws.getEffectGain(d)),(c=E[d].multiplier).push.apply(c,Gc.laws.getEffectMultiplier(d)),null===(p=E[d].consumption)||void 0===p||p.push.apply(p,Gc.laws.getEffectBeingConsumed(d));return E}(),n={};L.forEach((function(i){var o,r,a;if(i.unlockCondition(Gc)){n[i.id]={income:[],multiplier:[],consumption:[]};var c=null===(o=t[i.id].linear)||void 0===o?void 0:o.reduce((function(e,t){return e+t.value}),0),u=null===(r=t[i.id].multiplier)||void 0===r?void 0:r.reduce((function(e,t){return e*t.value}),1),s=(null===(a=t[i.id].consumption)||void 0===a?void 0:a.reduce((function(e,t){return e+t.value}),0))||0;e.happinessEffects[i.id]=Math.min(i.maximum,Math.max(i.minimum,c*u-s)),n[i.id].income=t[i.id].linear.filter((function(e){return e.value})).map((function(e){return la(la({},e),{value:"+".concat(e.value.toPrecision(4))})})),n[i.id].multiplier=t[i.id].multiplier.filter((function(e){return 1!==e.value})).map((function(e){return la(la({},e),{value:"x".concat(e.value.toPrecision(4))})})),n[i.id].consumption=t[i.id].consumption.filter((function(e){return e.value})).map((function(e){return la(la({},e),{value:"-".concat(e.value.toPrecision(4))})}))}})),this.happinessBreakdowns=n},t.prototype.processToUI=function(e){e.getConsumption&&e.getConsumption(Gc);var t,n,i=e.unlockCondition(Gc);return i&&Gc.newNotifications.registerNotification("planet:colony:effects:".concat(e.id)),{id:e.id,name:e.name,isUnlocked:i,amount:v(null!==(t=this.happinessEffects[e.id])&&void 0!==t?t:0),breakdown:null!==(n=this.happinessBreakdowns[e.id])&&void 0!==n?n:{income:[],multiplier:[],consumption:[]}}},t.prototype.process=function(e){this.getBreakdowns()},t.prototype.reset=function(){this.happinessBreakdowns={},this.happinessEffects={}},t}(R),Ea=pa.getInstance(),da=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ga=function(e){function t(){var t=e.call(this)||this;return t.colonists=0,t.maxColonists=0,t.colonyJobs=ua,t.colonyEffects=Ea,t}return da(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.colonists=e.colonists||0,this.colonyJobs.importData(e.jobs)},t.prototype.exportData=function(){return{jobs:this.colonyJobs.exportData(),colonists:this.colonists}},t.prototype.dataToUI=function(){return{colonists:this.colonists||0,maxColonists:this.maxColonists,isUnlocked:Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.DOCKING_MODULE)>0,jobs:this.colonyJobs.dataToUI(),effects:this.colonyEffects.dataToUI()}},t.prototype.getMaxColonists=function(){return Math.round(Gc.landingZone.landingZoneBuildings.getColonistsCap().reduce((function(e,t){return e+t.value}),0))},t.prototype.getColonistsHappiness=function(){return this.colonyEffects.assertHappiness()},t.prototype.missingSupply=function(){return!!this.colonists&&(null!=Fr.lackEfficiencyResources[a.NUTRITION]&&(Fr.lackEfficiencyResources[a.NUTRITION]||0)<1||null!=Fr.lackEfficiencyResources[a.WATER]&&(Fr.lackEfficiencyResources[a.WATER]||0)<1)},t.prototype.process=function(e){this.maxColonists=this.getMaxColonists(),(this.missingSupply()||this.colonists>this.maxColonists)&&(console.log("missing supply. Colonist is leaving"),this.colonists--,Gc.resources.reassertBalances()),this.colonists<this.maxColonists&&Math.random()<.02&&(this.colonists++,Gc.resources.reassertBalances()),this.colonyEffects.process(e),this.colonyJobs.process(e)},t.prototype.reset=function(){this.colonists=0,this.maxColonists=0,this.colonyJobs.reset(),this.colonyEffects.reset()},t}(R).getInstance(),fa=[{id:I.EXOFARMING,name:"Exo Farming",description:"Learn how to work with soil on a foreign planet. Allows employing farmers",getCost:(Go={},Go[a.RESEARCH]=function(t){return{A:25,B:0,type:e.LINEAR}},Go),unlockCondition:function(e){return!0}},{id:I.METEOROLOGY,name:"Meteorology",description:"Learn more about the atmosphere and its weather patterns. Unlocks new upgrades and buildings",getCost:(bo={},bo[a.RESEARCH]=function(t){return{A:75,B:0,type:e.LINEAR}},bo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.MINERALOGY,name:"Mineralogy",description:"Learn more about minerals available at your new home",getCost:(wo={},wo[a.RESEARCH]=function(t){return{A:125,B:0,type:e.LINEAR}},wo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.CIVIL_SERVICE,name:"Service Industry",description:"Unlock new ways of providing services to your growing colony",getCost:(Xo={},Xo[a.RESEARCH]=function(t){return{A:225,B:0,type:e.LINEAR}},Xo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFARMING)>0}},{id:I.ENGINEERING,name:"High-Gravity Engineering",description:"Learn about engineering specific to high gravity conditions",getCost:(xo={},xo[a.RESEARCH]=function(t){return{A:200,B:0,type:e.LINEAR}},xo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0}},{id:I.EXOBIOLOGY,name:"Exo Biology",description:"Learn more about local organisms",getCost:(Do={},Do[a.RESEARCH]=function(t){return{A:225,B:0,type:e.LINEAR}},Do),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0}},{id:I.METALLURGY,name:"Metallurgy",description:"Learn how to work with exotic ores. Unlocks crafting and artisan job",getCost:(ko={},ko[a.RESEARCH]=function(t){return{A:420,B:0,type:e.LINEAR}},ko),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MINERALOGY)>0}},{id:I.EXOFORESTRY,name:"Exo Forestry",description:"Learn how to grow something bigger in this empty terrain",getCost:(Ho={},Ho[a.RESEARCH]=function(t){return{A:375,B:0,type:e.LINEAR}},Ho),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOBIOLOGY)>0}},{id:I.FLORA_RESEARCH,name:"Exo Flora",description:"Advanced flora researches unlocks new tools to boost agriculture",getCost:(Yo={},Yo[a.RESEARCH]=function(t){return{A:425,B:0,type:e.LINEAR}},Yo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0}},{id:I.CHEMISTRY,name:"Chemistry",description:"Study the material interactions of elements in this foreign environment. Unlocks new materials and upgrades",getCost:(Wo={},Wo[a.RESEARCH]=function(t){return{A:575,B:0,type:e.LINEAR}},Wo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.FLORA_RESEARCH)>0}},{id:I.GEOLOGY,name:"Geology",description:"Further research precious minerals available at your new habitat",getCost:(Zo={},Zo[a.RESEARCH]=function(t){return{A:550,B:0,type:e.LINEAR}},Zo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.METALLURGY)>0}},{id:I.GEOGRAPHY,name:"Geography",description:"Geography knowledge unlocks expeditions",getCost:(Fo={},Fo[a.RESEARCH]=function(t){return{A:500,B:0,type:e.LINEAR}},Fo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.METEOROLOGY)>0}},{id:I.SOCIOLOGY,name:"Sociology",description:"Unlocks new ways to make your little society happier and more efficient",getCost:(jo={},jo[a.RESEARCH]=function(t){return{A:550,B:0,type:e.LINEAR}},jo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.CIVIL_SERVICE)>0}},{id:I.MATERIAL_KNOWLEDGE,name:"Material Knowledge",description:"Further advances crafting and metal processing",getCost:(Ko={},Ko[a.RESEARCH]=function(t){return{A:825,B:0,type:e.LINEAR}},Ko),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.CHEMISTRY)>0}},{id:I.CODEX_OF_LAW,name:"Law",description:"Unlocks new aspects of your colony development",getCost:(Vo={},Vo[a.RESEARCH]=function(t){return{A:1050,B:0,type:e.LINEAR}},Vo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.SOCIOLOGY)>0}},{id:I.ELECTRICITY_STUDY,name:"Electricity Study",description:"Improves knowledge about conductivity of various materials",getCost:(qo={},qo[a.RESEARCH]=function(t){return{A:1375,B:0,type:e.LINEAR}},qo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0}},{id:I.ORGANIC_CHEMISTRY,name:"Organic Chemistry",description:"Learn about new uses for biomass",getCost:(Jo={},Jo[a.RESEARCH]=function(t){return{A:1025,B:0,type:e.LINEAR}},Jo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.MATERIAL_KNOWLEDGE)>0}},{id:I.ELECTRONICS,name:"Electronics",description:"Learn how to produce electronics and incorporate it",getCost:(Qo={},Qo[a.RESEARCH]=function(t){return{A:2e3,B:0,type:e.LINEAR}},Qo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0}},{id:I.PUBLIC_SERVICE,name:"Civil Service",description:"Unlock new civil service jobs and buildings",getCost:(zo={},zo[a.RESEARCH]=function(t){return{A:2e3,B:0,type:e.LINEAR}},zo),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0}},{id:I.PRINTING_3D,name:"3D Printing",description:"Unlock new powerful tools that will help you boost your colony development",getCost:($o={},$o[a.RESEARCH]=function(t){return{A:4e3,B:0,type:e.LINEAR}},$o),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ELECTRONICS)>0}},{id:I.HIGH_GRAVITY_PHYSICS,name:"Advanced Physics",description:"Learn more about surviving and creating in high gravity conditions",getCost:(er={},er[a.RESEARCH]=function(t){return{A:4e3,B:0,type:e.LINEAR}},er),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0}},{id:I.ADVANCED_ANATOMY,name:"Advanced Anatomy",description:"Further research human body can make maintaining larger colony much easier",getCost:(tr={},tr[a.RESEARCH]=function(t){return{A:2600,B:0,type:e.LINEAR}},tr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0}},{id:I.ROCKET_SCIENCE,name:"Rocket Science",description:"Literally. There is too little space on our planet, isn't it?",getCost:(nr={},nr[a.RESEARCH]=function(t){return{A:5600,B:0,type:e.LINEAR}},nr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ORGANIC_CHEMISTRY)>0&&Gc.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0}},{id:I.ADVANCED_BIOLOGY,name:"Advanced Biology",description:"Further advance biology knowledge. Create new methods of boosting nutritional value and unlock new research",getCost:(ir={},ir[a.RESEARCH]=function(t){return{A:4250,B:0,type:e.LINEAR}},ir),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0}},{id:I.RADIATION_STUDY,name:"Radiation Study",description:"Learn more about impact of radiation on living organisms. Unlocks piloted missions",getCost:(or={},or[a.RESEARCH]=function(t){return{A:5900,B:0,type:e.LINEAR}},or),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0}},{id:I.QUANTUM_PHYSICS,name:"Quantum Physics",description:"Better understanding of quantum physics can significantly boost the productivity of your civilization",getCost:(rr={},rr[a.RESEARCH]=function(t){return{A:6215,B:0,type:e.LINEAR}},rr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.HIGH_GRAVITY_PHYSICS)>0}},{id:I.GRAVITY_THEORY,name:"Gravity Theory",description:"Better understanding of gravitational forces on flying objects will help with rocket launches. Allows you to send missions to other planets",getCost:(ar={},ar[a.RESEARCH]=function(t){return{A:8750,B:0,type:e.LINEAR}},ar),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.NANO_PHYSICS,name:"Nano-Physics",description:"Further research into nanotechnology can increase your civilization productivity even more",getCost:(cr={},cr[a.RESEARCH]=function(t){return{A:8750,B:0,type:e.LINEAR}},cr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.ASTROPHYSICS,name:"Astrophysics",description:"Allows to further advance your understanding of celestial bodies through new scientific telescopes",getCost:(ur={},ur[a.RESEARCH]=function(t){return{A:9500,B:0,type:e.LINEAR}},ur),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0}},{id:I.RELATIVITY_PHYSICS,name:"Relativity Physics",description:"Learn more about spacetime continuum. Unlocks new tech and further traveling",getCost:(sr={},sr[a.RESEARCH]=function(t){return{A:11500,B:0,type:e.LINEAR}},sr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.GRAVITY_THEORY)>0}},{id:I.ADVANCED_GENETICS,name:"Advanced Genetics",description:"Push further your genetics knowledge to learn how species can be modified",getCost:(lr={},lr[a.RESEARCH]=function(t){return{A:13500,B:0,type:e.LINEAR}},lr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.NANO_PHYSICS)>0&&Gc.science.scienceResearches.getResearchLevel(I.ADVANCED_BIOLOGY)>0}},{id:I.PHOTOCHEMISTRY,name:"Photochemistry",description:"Learn more about ionizing radiation impact on chemical reactions. Unlocks new upgrades",getCost:(pr={},pr[a.RESEARCH]=function(t){return{A:11e3,B:0,type:e.LINEAR}},pr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.QUANTUM_PHYSICS)>0}},{id:I.HIGH_ENERGY_PHYSICS,name:"High Energy Physics",description:"We are so miserable comparing to bright far stars and supernova explosions. Learn how to deal with more energy to expand your capabilities even more. Unlocks further flights and more important researches",getCost:(Er={},Er[a.RESEARCH]=function(t){return{A:17e3,B:0,type:e.LINEAR}},Er),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.RELATIVITY_PHYSICS)>0}},{id:I.PHOTO_LITHOGRAPHY,name:"Photo-Lithography",description:"Use your advances in quantum physics and material knowledge to boost production of tiny things. Unlocks new upgrades",getCost:(dr={},dr[a.RESEARCH]=function(t){return{A:17200,B:0,type:e.LINEAR}},dr),unlockCondition:function(e){return Gc.science.scienceResearches.getResearchLevel(I.PHOTOCHEMISTRY)>0}}],Aa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ra=function(e){function t(){var t=e.call(this)||this;return t.researches=[],t.freeWorkers=0,t.workDispatcher.on("[science] do research",(function(e){console.log("research",e),t.doResearch(e.id)})),t}return Aa(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.researches=e},t.prototype.exportData=function(){return this.researches},t.prototype.dataToUI=function(){var e=this;return{list:fa.map((function(t){return e.processToUI(t)}))}},t.prototype.getResearchLevel=function(e){var t;return(null===(t=this.researches.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.researches.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0},this.researches.push(t));var i=h.calcBatchAll(e.getCost,Uc.getInstance(),t.amount,Uc.getInstance().resources.getBatchObject()),o=i.reduce((function(e,t){return Math.min(e,t.max)}),1e300),r=i.reduce((function(e,t){return e&&!t.isBlocked}),!0),a=i.reduce((function(e,t){return Math.max(e,t.eta)}),0),c=e.unlockCondition(Gc);return c&&0===t.amount&&Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0&&Gc.newNotifications.registerNotification("science:researches:".concat(e.id)),{id:e.id,name:e.name,description:e.description,isUnlocked:c,isAvailable:o>=1,cost:Uc.getInstance().resources.assertEnought(i,Uc.getInstance().resources.getBatchObject(),Uc.getInstance().resources.getBatchBalanceObject()),progress:o<1?(100*o).toPrecision(3):"100",isResearched:t.amount>0,isBlocked:!r,etaNum:a}},t.prototype.doResearch=function(e){var t=this.researches.findIndex((function(t){return t.id===e}));t<0&&(t=this.researches.length,this.researches.push({id:e,amount:0}));var n=fa.find((function(t){return t.id===e}));if(n){var i=h.calcBatchAll(n.getCost,Uc.getInstance(),this.researches[t].amount,Uc.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(Uc.getInstance().resources.subtractResourceBatch(i),this.researches[t].amount++,Gc.resources.reassertBalances())}},t.prototype.process=function(e){},t.prototype.reset=function(){this.researches=[]},t}(R),Ia=Ra.getInstance(),Na=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ya=function(e){function t(){var t=e.call(this)||this;return t.scienceResearches=Ia,t}return Na(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.scienceResearches.importData(e.research)},t.prototype.exportData=function(){return{research:this.scienceResearches.exportData()}},t.prototype.dataToUI=function(){return{research:this.scienceResearches.dataToUI(),isUnlocked:Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.RESEARCH_MODULE)>0}},t.prototype.process=function(e){this.scienceResearches.process(e)},t.prototype.reset=function(){this.scienceResearches.reset()},t}(R).getInstance(),Oa=[{id:a.BEAM,complexity:100,getConsumption:(gr={},gr[a.WOOD]=function(t){return{A:.25,B:0,type:e.LINEAR}},gr),getGain:(fr={},fr[a.BEAM]=function(t){return{A:.01*na(t),B:0,type:e.LINEAR}},fr)},{id:a.BRICK,complexity:100,getConsumption:(Ar={},Ar[a.STONE]=function(t){return{A:.75,B:0,type:e.LINEAR}},Ar),getGain:(Rr={},Rr[a.BRICK]=function(t){return{A:.01*na(t),B:0,type:e.LINEAR}},Rr)},{id:a.PLATE,complexity:100,getConsumption:(Ir={},Ir[a.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},Ir),getGain:(Nr={},Nr[a.PLATE]=function(t){return{A:.002*na(t),B:0,type:e.LINEAR}},Nr)},{id:a.WIRE,complexity:100,getConsumption:(yr={},yr[a.IRON]=function(t){return{A:.1,B:0,type:e.LINEAR}},yr),getGain:(Or={},Or[a.WIRE]=function(t){return{A:.002*na(t),B:0,type:e.LINEAR}},Or)},{id:a.FUEL,complexity:250,getConsumption:(mr={},mr[a.BIOMASS]=function(t){return{A:.5,B:0,type:e.LINEAR}},mr[a.WATER]=function(t){return{A:.1,B:0,type:e.LINEAR}},mr),getGain:(Lr={},Lr[a.FUEL]=function(t){return{A:.002*na(t),B:0,type:e.LINEAR}},Lr)},{id:a.RUBBER,complexity:100,getConsumption:(Tr={},Tr[a.BIOMASS]=function(t){return{A:1,B:0,type:e.LINEAR}},Tr[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Tr),getGain:(hr={},hr[a.RUBBER]=function(t){return{A:.008*na(t),B:0,type:e.LINEAR}},hr)},{id:a.PLASTICS,complexity:100,getConsumption:(Cr={},Cr[a.BIOMASS]=function(t){return{A:1,B:0,type:e.LINEAR}},Cr[a.POWER]=function(t){return{A:.1,B:0,type:e.LINEAR}},Cr),getGain:(vr={},vr[a.PLASTICS]=function(t){return{A:.008*na(t),B:0,type:e.LINEAR}},vr)},{id:a.SEMICONDUCTOR,complexity:100,getConsumption:(Sr={},Sr[a.IRON]=function(t){return{A:.02,B:0,type:e.LINEAR}},Sr[a.STONE]=function(t){return{A:1,B:0,type:e.LINEAR}},Sr),getGain:(Br={},Br[a.SEMICONDUCTOR]=function(t){return{A:.004*na(t),B:0,type:e.LINEAR}},Br)},{id:a.COMPUTER,complexity:250,getConsumption:(Pr={},Pr[a.SEMICONDUCTOR]=function(t){return{A:.1,B:0,type:e.LINEAR}},Pr[a.PLASTICS]=function(t){return{A:.1,B:0,type:e.LINEAR}},Pr),getGain:(Mr={},Mr[a.COMPUTER]=function(t){return{A:.004*na(t),B:0,type:e.LINEAR}},Mr)},{id:a.ROCKET_ENGINE,complexity:750,getConsumption:(_r={},_r[a.PLATE]=function(t){return{A:.1,B:0,type:e.LINEAR}},_r[a.FUEL]=function(t){return{A:.1,B:0,type:e.LINEAR}},_r),getGain:(Ur={},Ur[a.ROCKET_ENGINE]=function(t){return{A:.002*na(t),B:0,type:e.LINEAR}},Ur)}],ma=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),La=function(){return La=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},La.apply(this,arguments)},Ta=function(e){function t(){var t=e.call(this)||this;return t.crafters=[],t.craftingSlots=0,t.workDispatcher.on("[crafting] assign crafter",(function(e){console.log("set amount",e),t.setAmount(e.id,e.amount)})),t}return ma(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.crafters=e},t.prototype.exportData=function(){return this.crafters},t.prototype.dataToUI=function(){var e=this;return{list:Oa.map((function(t){return e.processToUI(t)})),craftingSlots:this.craftingSlots}},t.prototype.getTotalCraftingBonus=function(){return Math.pow(1.05,Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.INDUSTRY_AUTOMATION))*Math.pow(1.03,Gc.landingZone.landingZoneBuildings.getBuildingActiveLevel(i.NANOBOTS_FACTORY))},t.prototype.getBusyWorkers=function(){return this.crafters.reduce((function(e,t){return e+t.amount}),0)},t.prototype.getWorkersAmount=function(e){var t;return(null===(t=this.crafters.find((function(t){return t.id===e})))||void 0===t?void 0:t.amount)||0},t.prototype.processToUI=function(e){var t=this.crafters.find((function(t){return t.id===e.id}));t||(t={id:e.id,amount:0,efficiency:1},this.crafters.push(t));var n=m.find((function(t){return t.id===e.id}));if(!n)throw new Error("Invalid recipe: ".concat(e.id));var i=e.getConsumption?h.calcBatchAll(e.getConsumption,Uc.getInstance(),0,Uc.getInstance().resources.getBatchObject()):[],o=e.getGain?h.calcBatch(e.getGain,Uc.getInstance(),0):[],r=n.unlockCondition(Gc);return r&&(t.amount>0&&Gc.newNotifications.setViewed("planet:crafting:jobs:".concat(e.id)),Gc.newNotifications.registerNotification("planet:crafting:jobs:".concat(e.id))),{id:e.id,name:n.name,isUnlocked:r,consume:i.filter((function(e){return e.amount})).map((function(e){return La(La({},e),{amount:v(e.amount)})})),gain:o.filter((function(e){return e.amount})).map((function(e){return La(La({},e),{amount:v(e.amount)})})),amount:t.amount,isAvailable:this.craftingSlots>0,max:this.craftingSlots+t.amount}},t.prototype.setAmount=function(e,t){t=Math.floor(t);var n=this.crafters.findIndex((function(t){return t.id===e}));n<0&&(n=this.crafters.length,this.crafters.push({id:e,amount:0,efficiency:1}));var i=Math.min(Math.max(t,0),this.crafters[n].amount+this.craftingSlots);if(i<t){var o=t-i,r=Math.min(Gc.colony.colonyJobs.freeWorkers,o);Gc.colony.colonyJobs.setAmount(y.ARTISAN,Gc.colony.colonyJobs.getWorkersAmount(y.ARTISAN)+r),i+=r}this.crafters[n].amount=Math.min(Math.max(t,0),i),Gc.resources.reassertBalances()},t.prototype.getResourceBeingProduced=function(e){var t=this,n=Oa.filter((function(t){return t.getGain&&!!t.getGain[e]})),i=[];return this.crafters.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a&&(null===(r=a.getGain)||void 0===r?void 0:r[e])){var c=h.calculate(Gc,a.getGain[e],0,o.amount)*o.efficiency*t.getTotalCraftingBonus();i.push({label:"Crafting",value:c,id:"job-".concat(a.id)})}}),0),i},t.prototype.getResourceBeingConsumed=function(e){if(!m.find((function(t){return t.id===e})))throw new Error("Invalid resource");var t=Oa.filter((function(t){return t.getConsumption&&!!t.getConsumption[e]})),n=[];return this.crafters.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getConsumption)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getConsumption[e],0,i.amount)*i.efficiency;n.push({label:"Crafting: ".concat(T(r.id)),value:a,id:"job-".concat(r.id)})}}),0),n},t.prototype.resetEfficiency=function(){var e=this;this.crafters.forEach((function(t,n){e.crafters[n].efficiency=1}))},t.prototype.adaptEfficiency=function(){var e=this,t=Fr.lackEfficiencyResources,n=Object.keys(t);this.crafters.forEach((function(i,o){var r=Oa.find((function(e){return e.id===i.id}));if(r&&r.getConsumption){var a=Object.keys(r.getConsumption);n.filter((function(e){return a.includes(e)})).forEach((function(n){e.crafters[o].efficiency=Math.min(e.crafters[o].efficiency,t[n]||0)}))}}))},t.prototype.process=function(e){var t=Gc.crafting.slots-this.getBusyWorkers();if(t<0){for(var n=this.crafters.length-1;n>=0;n--){var i=Math.min(this.crafters[n].amount,-t);if(this.crafters[n].amount-=i,(t+=i)>=0)break}Gc.resources.reassertBalances()}this.craftingSlots=t},t.prototype.reset=function(){this.craftingSlots=0,this.crafters=[]},t}(R),ha=Ta.getInstance(),Ca=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),va=function(e){function t(){var t=e.call(this)||this;return t.slots=-1,t.craftingJobs=ha,t}return Ca(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.craftingJobs.importData(e.craftmen)},t.prototype.exportData=function(){return{craftmen:this.craftingJobs.exportData()}},t.prototype.dataToUI=function(){return{maxSlots:this.slots||0,isUnlocked:Gc.science.scienceResearches.getResearchLevel(I.METALLURGY)>0,jobs:this.craftingJobs.dataToUI()}},t.prototype.getCraftingSlots=function(){var e;return 0+((null===(e=Gc.colony.colonyJobs.jobs.find((function(e){return e.id===y.ARTISAN})))||void 0===e?void 0:e.amount)||0)},t.prototype.process=function(e){this.slots=this.getCraftingSlots(),this.craftingJobs.process(e)},t.prototype.reset=function(){this.slots=-1,this.craftingJobs.reset()},t}(R),Sa=va.getInstance();!function(e){e.RESOURCE="resource",e.UPGRADE="upgrade",e.BUILDING="building",e.RESEARCH="research",e.POPULATION="population"}(Gr||(Gr={}));var Ba,Pa,Ma,_a,Ua,Ga,ba,wa,Xa,xa,Da,ka,Ha,Ya,Wa,Za,Fa,ja,Ka,Va,qa,Ja,Qa,za,$a,ec,tc,nc,ic,oc,rc,ac,cc,uc,sc=[{id:"start",description:"Power up",requirements:[{type:Gr.RESOURCE,target:a.POWER,amount:10}]},{id:"start2",description:"Drill some stone",requirements:[{type:Gr.RESOURCE,target:a.STONE,amount:1}]},{id:"repairFacilities",description:"Repair facilities",requirements:[{type:Gr.UPGRADE,target:n.REPAIR_DRILL,amount:4}]},{id:"drillOre",description:"Drill ore",requirements:[{type:Gr.RESOURCE,target:a.ORE,amount:1}]},{id:"furtherRepair",description:"Further facilities repair",requirements:[{type:Gr.UPGRADE,target:n.REPAIR_DRILL,amount:5},{type:Gr.UPGRADE,target:n.REPAIR_CABLE,amount:5}]},{id:"biomass",description:"Collect some organics",requirements:[{type:Gr.UPGRADE,target:n.REPAIR_MANIPULATORS,amount:3},{type:Gr.RESOURCE,target:a.BIOMASS,amount:6}]},{id:"autonomousPowerSupply",description:"Autonomous power supply",requirements:[{type:Gr.UPGRADE,target:n.COMBUSTION,amount:1},{type:Gr.BUILDING,target:i.THERMOELECTRIC_STATION,amount:1},{type:Gr.BUILDING,target:i.BACTERIA_INCUBATOR,amount:1}]},{id:"storage",description:"Storage facilities",requirements:[{type:Gr.UPGRADE,target:n.REPAIR_STORAGE_MODULE,amount:1},{type:Gr.BUILDING,target:i.STORAGE,amount:1}]},{id:"powerUp2",description:"Boost power supply",requirements:[{type:Gr.BUILDING,target:i.THERMOELECTRIC_STATION,amount:3},{type:Gr.BUILDING,target:i.BACTERIA_INCUBATOR,amount:2}]},{id:"stoneProduction",description:"Stone production",requirements:[{type:Gr.UPGRADE,target:n.AUTO_QUARRYING,amount:1},{type:Gr.BUILDING,target:i.QUARRY,amount:1}]},{id:"oreProduction",description:"Ore production",requirements:[{type:Gr.UPGRADE,target:n.REPAIR_MACHINERY,amount:1},{type:Gr.UPGRADE,target:n.AUTO_MINERS,amount:1},{type:Gr.BUILDING,target:i.MINE,amount:1}]},{id:"powerCaps",description:"Power capacity",requirements:[{type:Gr.UPGRADE,target:n.REPAIR_MANIPULATORS,amount:5},{type:Gr.UPGRADE,target:n.REPAIR_BATTERY,amount:2}]},{id:"organicsUtilization",description:"Organics utilization",requirements:[{type:Gr.BUILDING,target:i.THERMOELECTRIC_STATION,amount:5},{type:Gr.BUILDING,target:i.BACTERIA_INCUBATOR,amount:5}]},{id:"economyBoost",description:"Economy Boost",requirements:[{type:Gr.BUILDING,target:i.QUARRY,amount:5},{type:Gr.BUILDING,target:i.MINE,amount:5}]},{id:"moreStorage",description:"More Storage",requirements:[{type:Gr.BUILDING,target:i.STORAGE,amount:4}]},{id:"breath-in",description:"Breath In",requirements:[{type:Gr.BUILDING,target:i.THERMOELECTRIC_STATION,amount:10},{type:Gr.UPGRADE,target:n.BIO_TECH,amount:1},{type:Gr.UPGRADE,target:n.BACTERIA_SELECTION,amount:1}]},{id:"basicNeeds",description:"Basic habitability requirements",requirements:[{type:Gr.BUILDING,target:i.OXYGEN_COLLECTOR,amount:1},{type:Gr.BUILDING,target:i.WATER_PUMP,amount:1},{type:Gr.BUILDING,target:i.WATER_STORAGE,amount:1}]},{id:"finalPreparation",description:"Final preparation",requirements:[{type:Gr.UPGRADE,target:n.ELECTROLITES,amount:1},{type:Gr.UPGRADE,target:n.SUPPLY_MODULE,amount:1}]},{id:"firstColonists",description:"First colonists",requirements:[{type:Gr.UPGRADE,target:n.DOCKING_MODULE,amount:1},{type:Gr.BUILDING,target:i.LIVING_CABIN,amount:1}]},{id:"research",description:"Scientific basics",requirements:[{type:Gr.UPGRADE,target:n.RESEARCH_MODULE,amount:1},{type:Gr.RESEARCH,target:I.EXOFARMING,amount:1}]},{id:"population",description:"Population",requirements:[{type:Gr.POPULATION,target:I.METEOROLOGY,amount:10}]},{id:"healthcare",description:"Healthcare",requirements:[{type:Gr.RESEARCH,target:I.CIVIL_SERVICE,amount:1},{type:Gr.RESEARCH,target:I.EXOBIOLOGY,amount:1},{type:Gr.BUILDING,target:i.CLINIC,amount:1}]},{id:"crafting",description:"Crafting",requirements:[{type:Gr.RESEARCH,target:I.METALLURGY,amount:1},{type:Gr.RESOURCE,target:a.BEAM,amount:20},{type:Gr.RESOURCE,target:a.BRICK,amount:20}]},{id:"civilized",description:"Civilized life",requirements:[{type:Gr.RESEARCH,target:I.SOCIOLOGY,amount:1},{type:Gr.RESEARCH,target:I.CODEX_OF_LAW,amount:1}]},{id:"population",description:"Population",requirements:[{type:Gr.POPULATION,target:I.METEOROLOGY,amount:70}]},{id:"advanced",description:"Advanced Science",requirements:[{type:Gr.RESEARCH,target:I.ELECTRICITY_STUDY,amount:1},{type:Gr.RESEARCH,target:I.HIGH_GRAVITY_PHYSICS,amount:1}]},{id:"infoera",description:"Knowledge",requirements:[{type:Gr.RESEARCH,target:I.QUANTUM_PHYSICS,amount:1},{type:Gr.UPGRADE,target:n.GREAT_RADIO_TRANSMITTER,amount:1}]}],lc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pc=function(e){function t(){var t=e.call(this)||this;return t.currentGoalIdx=0,t.goalsState=[],t}return lc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.currentGoalIdx=e.currentGoalIdx||0},t.prototype.exportData=function(){return{currentGoalIdx:this.currentGoalIdx}},t.prototype.dataToUI=function(){return{index:this.currentGoalIdx,current:this.currentGoalToUI()}},t.prototype.getCurrentGoalDB=function(){var e;return null!==(e=sc[this.currentGoalIdx])&&void 0!==e?e:{id:"complete",description:"Complete",requirements:[]}},t.prototype.getRequirementText=function(e){var t,n,i,o,r="";switch(e.type){case Gr.RESOURCE:r="Resource: "+(null===(t=m.find((function(t){return t.id===e.target})))||void 0===t?void 0:t.name);break;case Gr.UPGRADE:r="Upgrade: "+(null===(n=Io.find((function(t){return t.id===e.target})))||void 0===n?void 0:n.name);break;case Gr.RESEARCH:r="Research: "+(null===(i=fa.find((function(t){return t.id===e.target})))||void 0===i?void 0:i.name);break;case Gr.BUILDING:r="Building: "+(null===(o=Yr.find((function(t){return t.id===e.target})))||void 0===o?void 0:o.name);break;case Gr.POPULATION:r="Population"}return r},t.prototype.getRequirementAmount=function(e){var t=0;switch(e.type){case Gr.RESOURCE:t=Gc.resources.getResource(e.target);break;case Gr.UPGRADE:t=Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(e.target);break;case Gr.RESEARCH:t=Gc.science.scienceResearches.getResearchLevel(e.target);break;case Gr.BUILDING:t=Gc.landingZone.landingZoneBuildings.getBuildingLevel(e.target);break;case Gr.POPULATION:t=Gc.colony.colonists}return t},t.prototype.checkGoalStatus=function(){var e=this,t=this.getCurrentGoalDB(),n=!0;t.requirements.forEach((function(t){e.getRequirementAmount(t)<t.amount&&(n=!1)})),n&&this.currentGoalIdx<sc.length&&this.currentGoalIdx++},t.prototype.currentGoalToUI=function(){var e=this,t=this.getCurrentGoalDB();return{id:t.id,name:t.description,requirements:t.requirements.map((function(t){var n=e.getRequirementAmount(t),i=n>=t.amount;return{actual:n,target:t.amount,isComplete:i,text:e.getRequirementText(t)}}))}},t.prototype.process=function(e){this.checkGoalStatus()},t}(R),Ec=pc.getInstance(),dc=[{id:Zt.EXPERIMENTAL_MEDICINE,name:"Experimental medicine",description:"Regulates the use of experimental drugs",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Wt.SOCIAL,options:[{name:"Forbid All",description:"Clinics are working in a regular way, providing service using only reliable and tested methods"},{name:"Allow All",description:"Using experimental medicine reduces healthcare from clinics, but they also provide a boost to max research"}]},{id:Zt.WATER_FILTERING,name:"Water Filtering Control",description:"Changes the water filtration method",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Wt.SOCIAL,options:[{name:"Quick",description:"Water pumps are working in regular way"},{name:"Multi-Stage",description:"Water pumps consume twice as much power, but increase healthcare by 3 each"}]},{id:Zt.RESEARCH_GRANTS,name:"Research Focus",description:"Setting research as priority through providing better equipment to your scientists can boost the development of your colony, but it won't be cheap",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0},category:Wt.SCIENCE,options:[{name:"No Extra Support",description:"Science buildings operate normally"},{name:"Minor Support",description:"Grant your scientists better tools to work with. Science buildings consume 25% more power, but provide 5% more research capacity"},{name:"Major Support",description:"Grant your scientists state-of-the-art tools to work on prototypes. Science buildings consume 75% more power, but provide 10% more research capacity"}]},{id:Zt.FOREST_BEHAVOUR,name:"Forest Use",description:"Your forest plants can be used in different ways to provide various advantages",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},category:Wt.SOCIAL,options:[{name:"Lungs of the Colony",description:"Forest plants operate normally"},{name:"Nature Reserves",description:"Forest plants produce 50% less oxygen, but provide a small bonus to aesthetics"},{name:"Picnic zones",description:"Forest plants produce 50% less oxygen, but provide a small bonus to entertainment"}]},{id:Zt.SECURITY_DOTATIONS,name:"Guards Rations",description:"Regulate rations for your policemen to motivate them to work harder",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.PUBLIC_SERVICE)>0},category:Wt.SOCIAL,options:[{name:"Regular",description:"Policemen does not consume additional resources"},{name:"Extra Rations",description:"Incentivize your police force to work better with extra rations. Policemen consume extra 0.5 nutrition and 0.2 water each, but provide a better service"}]},{id:Zt.ARTIFICIAL_ORGANS,name:"Artificial Organs",description:"Using 3D printers in creating organs to heal people can significantly boost healthcare, but religious people won't like it",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ORGANISM_PRINTING)>0},category:Wt.SOCIAL,options:[{name:"Forbid All",description:"Artificial implants are banned"},{name:"Allow",description:"Improves healthcare service, but decrease religious one",getEffectGain:(Ba={},Ba[O.HEALTHCARE]=function(e){return 20},Ba),getEffectConsumption:(Pa={},Pa[O.RELIGION]=function(e){return 20},Pa)}]},{id:Zt.CLEAR_CUTTING,name:"Woodcutting Policy",description:"Change forest cutting restrictions in order to balance your wood production and environmental effects",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},category:Wt.ECONOMY,options:[{name:"Minor Regulations",description:'"Foresters produce a normal amount of wood'},{name:"Aggressive Cutting",description:"Encourage production at the cost of pretty landscape. Foresters produce 20% more wood, but each forester reduces aesthetics by 1.5"},{name:"Forest Preservation",description:"Encourage limited cutting and frequent replanting. Foresters produce 20% less wood, but each forester increases aesthetics by 1"}]},{id:Zt.COAL_BURNING,name:"Coal Burning Regulations",description:"Allow or forbid wood usage as coal",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.EXOFORESTRY)>0},category:Wt.ECONOMY,options:[{name:"Forbid All",description:"There is enough smoke as is, the wood is better used elsewhere. Thermal plants dont use wood"},{name:"Limited Use",description:"Allow using a minor amount of wood for thermal plants. Thermal plants are 10% more efficient, but consume 0.01 wood each"},{name:"Unregulated Use",description:"Time to inflict another industrial revoluion. Thermal plants are 25% more efficient, but consume 0.03 wood each"}]},{id:Zt.FOOD_CHEMICAL_PROCESSING,name:"Food Chemical Processing",description:"Regulate the chemical processing of food",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.ADVANCED_ANATOMY)>0},category:Wt.ECONOMY,options:[{name:"Forbid All",description:"All food is grown organically and served unprocessed"},{name:"Efficient Processing",description:"Process food to increase shelf life and nutritional value at the cost of its quality. Provides 10% bonus to nutrition production, but decrease healthcare by 10%",getGainMultiplier:(Ma={},Ma[a.NUTRITION]=function(e){return 1.1},Ma),getEffectMultiplier:(_a={},_a[O.HEALTHCARE]=function(e){return.9},_a)}]},{id:Zt.ELECTROTHERMAL_SMELTING,name:"Smelting Method",description:"Use alternative methods to boost metal smelting",unlockCondition:function(e){return e.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0&&e.science.scienceResearches.getResearchLevel(I.ELECTRICITY_STUDY)>0},category:Wt.ECONOMY,options:[{name:"Traditional",description:"Smelters operate as usually"},{name:"Electrothermal",description:"Smelters use 0.3 power each, but produce 30% more metal"}]}],gc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fc=function(){return fc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fc.apply(this,arguments)},Ac=function(e){function t(){var t=e.call(this)||this;return t.lawsStatuses=[],t.workDispatcher.on("[laws] set option",(function(e){console.log("change law",e),t.selectLawOption(e.id,e.optionId)})),t}return gc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.lawsStatuses=(null==e?void 0:e.laws)||[]},t.prototype.exportData=function(){return{laws:this.lawsStatuses}},t.prototype.dataToUI=function(){var e=this;return{laws:dc.map((function(t){return e.processToUI(t)})),isUnlocked:Gc.science.scienceResearches.getResearchLevel(I.CODEX_OF_LAW)>0}},t.prototype.getLawSelected=function(e){var t;return(null===(t=this.lawsStatuses.find((function(t){return t.id===e})))||void 0===t?void 0:t.selectedOptionId)||0},t.prototype.processToUI=function(e){var t=this.lawsStatuses.find((function(t){return t.id===e.id}));t||(t={id:e.id,selectedOptionId:0},this.lawsStatuses.push(t));var n=[];e.options.forEach((function(e,i){var o={name:e.name,description:e.description,gain:e.getGain?h.getValue(e.getGain,Uc.getInstance()).filter((function(e){return e.amount})).map((function(e){return fc(fc({},e),{amount:v(e.amount)})})):[],max:e.getStorage?h.getValue(e.getStorage,Uc.getInstance()).filter((function(e){return e.amount})).map((function(e){return fc(fc({},e),{amount:v(e.amount)})})):[],consume:e.getConsumption?h.getValue(e.getConsumption,Uc.getInstance()).filter((function(e){return e.amount})).map((function(e){return fc(fc({},e),{amount:v(e.amount)})})):[],consumeEffect:e.getEffectConsumption?h.getValue(e.getEffectConsumption,Uc.getInstance()).filter((function(e){return e.amount})).map((function(e){return fc(fc({},e),{amount:v(e.amount)})})):[],gainEffect:e.getEffectGain?h.getValue(e.getEffectGain,Uc.getInstance()).filter((function(e){return e.amount})).map((function(e){return fc(fc({},e),{amount:v(e.amount)})})):[],gainMult:e.getGainMultiplier?h.getValue(e.getGainMultiplier,Uc.getInstance()).filter((function(e){return e.amount})).map((function(e){return fc(fc({},e),{amount:v(e.amount)})})):[],isSelected:(null==t?void 0:t.selectedOptionId)===i};n.push(o)}));var i=e.unlockCondition(Gc);return i&&Gc.newNotifications.registerNotification("laws:orders:".concat(e.category,":").concat(e.id)),{id:e.id,name:e.name,description:e.description,isUnlocked:i,isAvailable:!0,options:n,category:e.category}},t.prototype.getEffectGain=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectGain)||void 0===r?void 0:r[e])){var u=c.getEffectGain[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getEffectMultiplier=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectMultiplier)||void 0===r?void 0:r[e])){var u=c.getEffectMultiplier[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getEffectBeingConsumed=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getEffectConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getEffectConsumption)||void 0===r?void 0:r[e])){var u=c.getEffectConsumption[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceBeingProduced=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getGain)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getGain)||void 0===r?void 0:r[e])){var u=c.getGain[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceMultiplier=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getGainMultiplier)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getGainMultiplier)||void 0===r?void 0:r[e])){var u=c.getGainMultiplier[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceBeingConsumed=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getConsumption)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getConsumption)||void 0===r?void 0:r[e])){var u=c.getConsumption[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getResourceBeingStored=function(e){var t=this,n=dc.filter((function(n){var i;return!!(null===(i=n.options[t.getLawSelected(n.id)].getStorage)||void 0===i?void 0:i[e])})),i=[];return this.lawsStatuses.forEach((function(o){var r,a=n.find((function(e){return e.id===o.id}));if(a){var c=a.options[t.getLawSelected(a.id)];if(a&&(null===(r=c.getStorage)||void 0===r?void 0:r[e])){var u=c.getStorage[e](Uc.getInstance());i.push({label:"Law ".concat(a.name,": ").concat(c.name),value:u,id:"law-".concat(a.id)})}}}),0),i},t.prototype.getColonistsCap=function(){var e=this,t=dc.filter((function(t){return!!t.options[e.getLawSelected(t.id)].getMaxColonists})),n=[];return this.lawsStatuses.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o){var r=o.options[e.getLawSelected(o.id)];if(o&&r.getMaxColonists){var a=r.getMaxColonists(Uc.getInstance());n.push({label:"Law ".concat(o.name,": ").concat(r.name),value:a,id:"law-".concat(o.id)})}}}),0),n},t.prototype.selectLawOption=function(e,t){var n=this.lawsStatuses.findIndex((function(t){return t.id===e}));n<0?this.lawsStatuses.push({id:e,selectedOptionId:t}):this.lawsStatuses[n].selectedOptionId=t,Uc.getInstance().resources.reassertBalances()},t.prototype.process=function(e){},t.prototype.reset=function(){this.lawsStatuses=[]},t}(R),Rc=Ac.getInstance(),Ic=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nc=function(e){function t(){return e.call(this)||this}return Ic(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){},t.prototype.exportData=function(){return{}},t.prototype.dataToUI=function(){return{isUnlocked:Gc.science.scienceResearches.getResearchLevel(I.ROCKET_SCIENCE)>0}},t}(R).getInstance(),yc=[{id:c.DRONE_MASTERITY,name:"Drone Mastery",description:"Learn how to use your drone with more efficiency. Every point increases the output from drone actions by 10%",unlockCondition:function(e){return!0},getCost:(Ua={},Ua[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ua),category:u.START,maxLevel:10},{id:c.REPAIRED_SOLAR_PANEL,name:"Drone Solar Panel",description:"Add a solar panel to your starting drone that grants it small power generation",unlockCondition:function(e){return!0},getCost:(Ga={},Ga[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ga),getGain:(ba={},ba[a.POWER]=function(t){return{A:.03,B:0,type:e.LINEAR}},ba),category:u.START,maxLevel:10},{id:c.POWER_MASTERITY,name:"Power Mastery",description:"Your experience with electrical grids helps with power optimization. Every point boosts power production by 4%",unlockCondition:function(e){return!0},getCost:(wa={},wa[a.KNOWLEDGE_POINT]=function(t){return{A:3,B:1.1,type:e.EXPONENTIAL}},wa),getGainMultiplier:(Xa={},Xa[a.POWER]=function(t){return{A:.04,B:1,type:e.LINEAR}},Xa),category:u.MASTERITIES,maxLevel:0},{id:c.MINING_MASTERITY,name:"Mining Mastery",description:"Striking the earth can be done in a wide variety of ways. Every point boosts stone, ore, iron and platinum production by 4%",unlockCondition:function(e){return!0},getCost:(xa={},xa[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},xa),getGainMultiplier:(Da={},Da[a.STONE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Da[a.ORE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Da[a.IRON]=function(t){return{A:.04,B:1,type:e.LINEAR}},Da[a.PLATINUM]=function(t){return{A:.04,B:1,type:e.LINEAR}},Da),category:u.MASTERITIES,maxLevel:0},{id:c.NATURE_MASTERITY,name:"Nature Mastery",description:"Extensive knowledge of biology and farming helps with spreading greenery on inhospitable worlds. Every point boosts biomass, wood and nutrition production by 4%",unlockCondition:function(e){return!0},getCost:(ka={},ka[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ka),getGainMultiplier:(Ha={},Ha[a.NUTRITION]=function(t){return{A:.04,B:1,type:e.LINEAR}},Ha[a.BIOMASS]=function(t){return{A:.04,B:1,type:e.LINEAR}},Ha[a.WOOD]=function(t){return{A:.04,B:1,type:e.LINEAR}},Ha),category:u.MASTERITIES,maxLevel:0},{id:c.GAS_MASTERITY,name:"Gas & Liquid Mastery",description:"Solid materials are important, but so are other states of matter. Every point boosts oxygen and water production 4%",unlockCondition:function(e){return!0},getCost:(Ya={},Ya[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ya),getGainMultiplier:(Wa={},Wa[a.OXYGEN]=function(t){return{A:.04,B:1,type:e.LINEAR}},Wa[a.WATER]=function(t){return{A:.04,B:1,type:e.LINEAR}},Wa),category:u.MASTERITIES,maxLevel:0},{id:c.BUILDING_MASTERITY,name:"Refining Mastery",description:"Refined materials lie at the core of all complex structures. Every point boosts beam, brick and plate production by 4%",unlockCondition:function(e){return!0},getCost:(Za={},Za[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Za),getGainMultiplier:(Fa={},Fa[a.BEAM]=function(t){return{A:.04,B:1,type:e.LINEAR}},Fa[a.BRICK]=function(t){return{A:.04,B:1,type:e.LINEAR}},Fa[a.PLATE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Fa),category:u.MASTERITIES,maxLevel:0},{id:c.ELECTRONICS_MASTERITY,name:"Electronics Mastery",description:"Computers kickstarted a second industrial revolution and are very important in automating the industry. Every point boosts electronics (wire, semiconductor, computer, etc) production by 4%",unlockCondition:function(e){return!0},getCost:(ja={},ja[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ja),getGainMultiplier:(Ka={},Ka[a.WIRE]=function(t){return{A:.04,B:1,type:e.LINEAR}},Ka[a.COMPUTER]=function(t){return{A:.04,B:1,type:e.LINEAR}},Ka[a.SEMICONDUCTOR]=function(t){return{A:.04,B:1,type:e.LINEAR}},Ka),category:u.MASTERITIES,maxLevel:0},{id:c.ROCKET_MASTERITY,name:"Rocket Mastery",description:"Each space colony starts with a rocket trip, and you are good at making rockets. Every point boosts fuel and rockets production by 4%",unlockCondition:function(e){return!0},getCost:(Va={},Va[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Va),getGainMultiplier:(qa={},qa[a.FUEL]=function(t){return{A:.04,B:1,type:e.LINEAR}},qa[a.ROCKET_ENGINE]=function(t){return{A:.04,B:1,type:e.LINEAR}},qa),category:u.MASTERITIES,maxLevel:0},{id:c.POWER_CAPACITY,name:"Power Capacity",description:"More industry facilities require more power. Learn how to build better batteries to increase your power storage. Every point boosts power capacity by 4%",unlockCondition:function(e){return!0},getCost:(Ja={},Ja[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},Ja),getCapacityMultiplier:(Qa={},Qa[a.POWER]=function(t){return{A:.04,B:1,type:e.LINEAR}},Qa),category:u.CAPACITY,maxLevel:0},{id:c.MATERIALS_CAPACITY,name:"Materials Capacity",description:"You know all about stocking containers to the top. Every point boosts all solid materials capacity by 4%",unlockCondition:function(e){return!0},getCost:(za={},za[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},za),getCapacityMultiplier:($a={},$a[a.STONE]=function(t){return{A:.04,B:1,type:e.LINEAR}},$a[a.IRON]=function(t){return{A:.04,B:1,type:e.LINEAR}},$a[a.WOOD]=function(t){return{A:.04,B:1,type:e.LINEAR}},$a[a.ORE]=function(t){return{A:.04,B:1,type:e.LINEAR}},$a[a.PLATINUM]=function(t){return{A:.04,B:1,type:e.LINEAR}},$a[a.BIOMASS]=function(t){return{A:.04,B:1,type:e.LINEAR}},$a),category:u.CAPACITY,maxLevel:0},{id:c.LIQUIDS_CAPACITY,name:"Gas & Liquid Capacity",description:"You know how important full oxygen tank and filled water storage is. Every point boosts oxygen and water capacity by 4%",unlockCondition:function(e){return!0},getCost:(ec={},ec[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ec),getCapacityMultiplier:(tc={},tc[a.OXYGEN]=function(t){return{A:.04,B:1,type:e.LINEAR}},tc[a.WATER]=function(t){return{A:.04,B:1,type:e.LINEAR}},tc),category:u.CAPACITY,maxLevel:0},{id:c.RESEARCH_CAPACITY,name:"Research Capacity",description:"Pursuit of knowledge never stops for someone as cursious as you. Every point increases research capacity by 4%",unlockCondition:function(e){return!0},getCost:(nc={},nc[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},nc),getCapacityMultiplier:(ic={},ic[a.RESEARCH]=function(t){return{A:.04,B:1,type:e.LINEAR}},ic),category:u.CAPACITY,maxLevel:0},{id:c.AESTHETICS_CONSUMPTION,name:"Aesthetics Consumption",description:"Pretty environment is surprisingly effective at boosting productivity. Every point decreases aesthetics requirements by 4%",unlockCondition:function(e){return!0},getCost:(oc={},oc[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},oc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.ENTERTAINMENT_CONSUMPTION,name:"Entertainment Consumption",description:"You are not easily bored and know how to distract people from boredom. Every point decreases entertainment requirements by 4%",unlockCondition:function(e){return!0},getCost:(rc={},rc[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},rc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.RELIGION_CONSUMPTION,name:"Religion Consumption",description:"In every prayer, a strength of the spirit. From strong spirit, a stronger body. Every point decreases religion requirements by 4%",unlockCondition:function(e){return!0},getCost:(ac={},ac[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},ac),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.SECURITY_CONSUMPTION,name:"Security Consumption",description:"Know when to de-escalate, know when to intervene. Every point decreases security requirements by 4%",unlockCondition:function(e){return!0},getCost:(cc={},cc[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},cc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0},{id:c.HEALTH_CONSUMPTION,name:"Healthcare Consumption",description:"You know how to review a candidate for a future colony, and how to act when things go wrong. Every point decreases healthcare requirements by 4%",unlockCondition:function(e){return!0},getCost:(uc={},uc[a.KNOWLEDGE_POINT]=function(t){return{A:1,B:1.1,type:e.EXPONENTIAL}},uc),getCapacityMultiplier:{},category:u.COLONY,maxLevel:0}],Oc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),mc=function(e){function t(){var t=e.call(this)||this;return t.upgrades=[],t.numPrestiged=0,t.workDispatcher.on("[transmit-knowledge] do prestige",(function(e){console.log("do prestige",e),t.doPrestige()})),t.workDispatcher.on("[transmit-knowledge] do upgrade",(function(e){console.log("do prestige",e),t.doUpgrade(e.id)})),t}return Oc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.upgrades=e.upgrades,this.numPrestiged=e.numPrestiged},t.prototype.exportData=function(){return{upgrades:this.upgrades,numPrestiged:this.numPrestiged}},t.prototype.dataToUI=function(){var e=this;return{upgrades:yc.map((function(t){return e.processToUI(t)})),isUnlocked:this.numPrestiged>0||this.isPrestigeAvailable(),kp:v(Gc.resources.getResource(a.KNOWLEDGE_POINT)),prestige:{isAvailable:this.isPrestigeAvailable(),description:"",potentialGain:v(this.getPrestigeGain())}}},t.prototype.getUpgradeLevel=function(e){var t;return(null===(t=this.upgrades.find((function(t){return t.id===e})))||void 0===t?void 0:t.level)||0},t.prototype.processToUI=function(e){var t=this.upgrades.find((function(t){return t.id===e.id}));t||(t={id:e.id,level:0},this.upgrades.push(t));var n=h.calcBatchAll(e.getCost,Uc.getInstance(),t.level,Uc.getInstance().resources.getBatchObject()),i=n.reduce((function(e,t){return Math.min(e,t.max)}),1e300);return{id:e.id,name:e.name,description:e.description,isUnlocked:e.unlockCondition(Gc),isAvailable:i>=1,cost:Uc.getInstance().resources.assertEnought(n,Uc.getInstance().resources.getBatchObject(),Uc.getInstance().resources.getBatchBalanceObject()),progress:i<1?(100*i).toPrecision(3):"100",isMaxedOut:!!e.maxLevel&&e.maxLevel<=t.level,maxLevel:e.maxLevel,level:t.level,category:e.category}},t.prototype.getEffectGain=function(e){var t=yc.filter((function(t){var n;return!!(null===(n=t.getEffectGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectGain)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectGain[e],0,i.level);n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getEffectMultiplier=function(e){var t=yc.filter((function(t){var n;return!!(null===(n=t.getEffectMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getEffectMultiplier)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getEffectMultiplier[e],i.level,1);a&&n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingProduced=function(e){var t=yc.filter((function(t){var n;return!!(null===(n=t.getGain)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGain)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getGain[e],0,i.level);n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceMultiplier=function(e){var t=yc.filter((function(t){var n;return!!(null===(n=t.getGainMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r=t.find((function(e){return e.id===i.id}));if(r&&(null===(o=r.getGainMultiplier)||void 0===o?void 0:o[e])){var a=h.calculate(Gc,r.getGainMultiplier[e],0,i.level);console.log("thisProd: ",a,e,i.level),a&&n.push({label:"Knowledge: ".concat(r.name),value:a,id:"knowledge-".concat(r.id)})}}),0),n},t.prototype.getResourceBeingStored=function(e){var t=yc.filter((function(t){var n;return!!(null===(n=t.getCapacityEffect)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o,r,a=t.find((function(e){return e.id===i.id}));if(a&&(null===(o=a.getCapacityEffect)||void 0===o?void 0:o[e])){var c=h.calculate(Gc,null===(r=a.getCapacityEffect)||void 0===r?void 0:r[e],0,i.level);n.push({label:"Knowledge: ".concat(a.name),value:c,id:"knowledge-".concat(a.id)})}}),0),n},t.prototype.getCapacityMult=function(e){var t=yc.filter((function(t){var n;return!!(null===(n=t.getCapacityMultiplier)||void 0===n?void 0:n[e])})),n=[];return this.upgrades.forEach((function(i){var o=t.find((function(e){return e.id===i.id}));if(o&&o.getCapacityMultiplier){var r=h.calculate(Gc,o.getCapacityMultiplier[e],0,i.level);r&&n.push({label:"Knowledge: ".concat(o.name),value:r,id:"knowledge-".concat(o.id)})}}),0),n},t.prototype.doUpgrade=function(e){var t=yc.find((function(t){return t.id===e}));if(t){var n=this.upgrades.findIndex((function(t){return t.id===e}));if(n<0)n=this.upgrades.length,this.upgrades.push({id:e,level:0});else if(t.maxLevel&&this.upgrades[n].level>=t.maxLevel)return;var i=h.calcBatchAll(t.getCost,Uc.getInstance(),this.upgrades[n].level,Uc.getInstance().resources.getBatchObject());i.reduce((function(e,t){return Math.min(e,Math.floor(t.max))}),1e300)<1||(this.upgrades[n].level++,console.log("costs: ",i),Uc.getInstance().resources.subtractResourceBatch(i),Gc.resources.reassertBalances())}},t.prototype.isPrestigeAvailable=function(){return Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.GREAT_RADIO_TRANSMITTER)>0&&Gc.colony.colonists>50},t.prototype.getPrestigeGain=function(){return Gc.colony.colonists-50},t.prototype.doPrestige=function(){if(this.isPrestigeAvailable()){var e=this.getPrestigeGain();Gc.landingZone.reset(),Gc.colony.reset(),Gc.crafting.reset(),Gc.science.reset(),Gc.laws.reset(),Gc.resources.reset(),Gc.resources.addResource(a.KNOWLEDGE_POINT,e),this.numPrestiged++,Gc.resources.reassertBalances()}},t.prototype.process=function(e){},t}(R),Lc=mc.getInstance(),Tc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),hc=function(e){function t(){var t=e.call(this)||this;return t.transmitKnowledge=Lc,t}return Tc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.transmitKnowledge.importData(e.transmitKnowledge)},t.prototype.exportData=function(){return{transmitKnowledge:this.transmitKnowledge.exportData()}},t.prototype.dataToUI=function(){return{transmitKnowledge:this.transmitKnowledge.dataToUI(),isUnlocked:this.transmitKnowledge.isPrestigeAvailable()||this.transmitKnowledge.numPrestiged>0}},t.prototype.preProcess=function(e){},t.prototype.process=function(e){this.transmitKnowledge.process(e)},t}(R).getInstance(),Cc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vc=function(e){function t(){var t=e.call(this)||this;return t.expeditionsState={isInProgress:!1,progress:0,lastLooted:{},numExpeditions:0,currentMode:0,currentMax:100,runningExpeditionMode:0},t.expeditionsState={isInProgress:!1,progress:0,lastLooted:{},numExpeditions:0,currentMode:0,currentMax:100,runningExpeditionMode:0},t.workDispatcher.on("[expedition] send",(function(e){console.log("do expedition",e),t.startExpedition()})),t.workDispatcher.on("[expedition] set mode",(function(e){console.log("set expedition mode",e),t.expeditionsState.currentMode=e.mode})),t}return Cc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.expeditionsState=e||{isInProgress:!1,progress:0,lastLooted:{},numExpeditions:0}},t.prototype.exportData=function(){return this.expeditionsState},t.prototype.dataToUI=function(){var e;return{numExpeditions:this.expeditionsState.numExpeditions,progress:this.expeditionsState.progress,lastLooted:Object.entries(this.expeditionsState.lastLooted).map((function(e){var t=e[0];return{id:t,amount:v(e[1]),name:T(t)}})),isUnlocked:this.isExpeditionUnlocked(),isInProgress:this.expeditionsState.isInProgress,eta:C(this.expeditionsState.currentMax-this.expeditionsState.progress),percentage:100*this.expeditionsState.progress/this.expeditionsState.currentMax,multiplier:v(this.getLootMultiplier()),currentMode:null!==(e=this.expeditionsState.currentMode)&&void 0!==e?e:0}},t.prototype.isExpeditionUnlocked=function(){return Gc.science.scienceResearches.getResearchLevel(I.GEOGRAPHY)>0},t.prototype.startExpedition=function(){!this.expeditionsState.isInProgress&&this.isExpeditionUnlocked()&&(this.expeditionsState.currentMax=this.getExpeditionDuration(),this.expeditionsState.isInProgress=!0,this.expeditionsState.progress=0,this.expeditionsState.runningExpeditionMode=this.expeditionsState.currentMode,this.expeditionsState.numExpeditions++)},t.prototype.getLoot=function(){var e=this.getLootMultiplier(),t=1;switch(this.expeditionsState.runningExpeditionMode){case 0:default:t=1;break;case 1:t=4;break;case 2:t=16}for(var n=m.filter((function(e){return e.unlockCondition(Gc)&&e.valuability<1e6})),i={},o=0;o<2;o++){var r=n.splice(Math.floor(Math.random()*(n.length-1e-5)),1)[0];i[r.id]=50*(Math.random()+.5)*e*t/r.valuability}return i},t.prototype.getLootMultiplier=function(){return Math.pow(1.05,Gc.landingZone.landingZoneBuildings.getBuildingActiveLevel(i.EXPEDITION_CENTER))*Math.pow(1.3,Gc.landingZone.landingZoneUpgrades.getUpgradeLevel(n.ENERGY_SAVING_EXPEDITION_DRONES))},t.prototype.endExpedition=function(){this.expeditionsState.isInProgress=!1,this.expeditionsState.progress=0;var e=this.getLoot();for(var t in this.expeditionsState.lastLooted=e,e)Gc.resources.addResource(t,e[t]||0)},t.prototype.getExpeditionDuration=function(){switch(this.expeditionsState.currentMode){case 0:return 120;case 1:return 600;case 2:return 3600}return 120},t.prototype.process=function(e){this.expeditionsState.isInProgress&&(this.expeditionsState.currentMax||(this.expeditionsState.runningExpeditionMode=0,this.expeditionsState.currentMax=this.getExpeditionDuration()),this.expeditionsState.progress+=e,this.expeditionsState.progress>=this.expeditionsState.currentMax&&this.endExpedition())},t.prototype.reset=function(){this.expeditionsState.isInProgress=!1,this.expeditionsState.progress=0,this.expeditionsState.lastLooted={}},t}(R),Sc=vc.getInstance(),Bc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pc=function(e){function t(){var t=e.call(this)||this;return t.newNotificationState={},t.notificationsToUI={},t.workDispatcher.on("[new-notification] set viewed",(function(e){console.log("new-notification set viewed",e),t.setViewed(e.id)})),t}return Bc(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.importData=function(e){this.newNotificationState=e||{}},t.prototype.exportData=function(){return this.newNotificationState},t.prototype.dataToUI=function(){return{new:this.notificationsToUI}},t.prototype.setViewed=function(e){this.newNotificationState[e]=!0},t.prototype.getViewed=function(e){var t;return null!==(t=this.newNotificationState[e])&&void 0!==t&&t},t.prototype.registerNotification=function(e){if(this.newNotificationState[e])return!1;for(var t=e.split(":"),n=[];t.length>0;)n.push("".concat(t.splice(0,1))),this.notificationsToUI[n.join(":")]=!0;return this.notificationsToUI[e]},t.prototype.reset=function(){this.newNotificationState={},this.notificationsToUI={}},t.prototype.preUI=function(){this.notificationsToUI={}},t}(R),Mc=Pc.getInstance(),_c=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Uc=function(e){function t(){var t=e.call(this)||this;return t.dT=0,t.timeInGame=0,t.timeInPrestige=0,t.isFirstIter=!1,t.workDispatcher.on("initialize",(function(e){console.log("Received payload",e)})),t.workDispatcher.on("[game] load",(function(e){console.log("Received load",e),t.importData(e)})),t.workDispatcher.on("[game] export text",(function(e){console.log("Received export text",e),t.workDispatcher.output("[game] export to string",t.exportData())})),t.workDispatcher.on("[game] export file",(function(e){console.log("Received export to file",e),t.workDispatcher.output("[game] export to file",t.exportData())})),t.workDispatcher.on("[game] purchase max",(function(e){console.log("Received purchase max",e),t.purchaseMax()})),t.workDispatcher.on("[game] trigger save",(function(e){t.workDispatcher.output("[game] save",t.exportData())})),t.resources=jr,t.milestones=ta,t.landingZone=zr,t.colony=ga,t.science=ya,t.crafting=Sa,t.goals=Ec,t.laws=Rc,t.space=Nc,t.expedition=Sc,t.newNotifications=Mc,t.prestige=hc,setInterval((function(){t.process(.1)}),100),setInterval((function(){t.workDispatcher.output("[game] update ui",t.dataToUI())}),200),setInterval((function(){t.workDispatcher.output("[game] save",t.exportData())}),1e4),t}return _c(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.process=function(e){this.dT=1*e,this.landingZone.preProcess(1*e),this.milestones.process(1*e),this.landingZone.process(1*e),this.colony.process(1*e),this.resources.process(1*e),this.colony.process(1*e),this.science.process(1*e),this.crafting.process(1*e),this.goals.process(1*e),this.space.process(1*e),this.expedition.process(1*e),this.prestige.process(1*e),this.timeInPrestige+=1*e,this.timeInGame+=1*e,this.isFirstIter&&(this.isFirstIter=!1,this.resources.reassertBalances())},t.prototype.importData=function(e){this.resources.importData(e.resources),this.milestones.importData(e.milestones||[]),this.landingZone.importData(e.landingZone),this.colony.importData(e.colony),this.science.importData(e.science),this.crafting.importData(e.crafting),this.goals.importData(e.goals),this.laws.importData(e.laws),this.expedition.importData(e.expedition),this.newNotifications.importData(e.newNotifications),this.prestige.importData(e.prestige),this.resources.reassertBalances(),this.timeInGame=e.timeInGame,this.timeInPrestige=e.timeInPrestige,this.isFirstIter=!0},t.prototype.exportData=function(){return{landingZone:this.landingZone.exportData(),colony:this.colony.exportData(),resources:this.resources.exportData(),milestones:this.milestones.exportData(),science:this.science.exportData(),crafting:this.crafting.exportData(),goals:this.goals.exportData(),laws:this.laws.exportData(),expedition:this.expedition.exportData(),newNotifications:this.newNotifications.exportData(),prestige:this.prestige.exportData(),timeInPrestige:this.timeInPrestige,timeInGame:this.timeInGame}},t.prototype.dataToUI=function(){return this.newNotifications.preUI(),{landingZone:this.landingZone.dataToUI(),colony:this.colony.dataToUI(),science:this.science.dataToUI(),crafting:this.crafting.dataToUI(),resources:this.resources.dataToUI(),laws:this.laws.dataToUI(),goals:this.goals.dataToUI(),space:this.space.dataToUI(),expeditions:this.expedition.dataToUI(),newNotifications:this.newNotifications.dataToUI(),prestige:this.prestige.dataToUI(),timeInPrestige:C(this.timeInPrestige),timeInGame:C(this.timeInGame)}},t.prototype.purchaseMax=function(){},t}(R),Gc=Uc.getInstance();self.addEventListener("message",(function(e){var t=e.data;console.log("send to worker: ",t),Gc.workDispatcher.handleInput(t.type,t.payload)}))})();